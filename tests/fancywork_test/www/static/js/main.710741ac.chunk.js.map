{"version":3,"sources":["pages/create-schema-page/stages/palette-settings/index.module.scss","pages/create-schema-page/stages/size-settings/index.module.scss","pages/home-page/index.module.scss","pages/schemas-page/schema-card/index.module.scss","pages/works-page/work-card/index.module.scss","pages/create-schema-page/stages/general-settings/index.module.scss","components/layouts/basic-layout/index.module.scss","components/ui/fullscreen-spin/index.module.scss","pages/schemas-page/create-work-modal/index.module.scss","pages/schemas-page/schema-card/schema-settings-button/change-schema-name-modal/index.module.scss","pages/create-schema-page/stages/choose-image/index.module.scss","pages/error-404-page/index.module.scss","pages/schemas-page/index.module.scss","pages/works-page/index.module.scss","pages/works-page/work-card/work-settings-button/change-work-name-modal/index.module.scss","../../packages/storage/dist/index.js","../../packages/storage-react/dist/index.js","components/contexts/stages/index.tsx","components/layouts/basic-layout/index.tsx","components/ui/fullscreen-spin/index.tsx","components/modal-form/index.tsx","pages/schemas-page/constants.ts","pages/create-schema-page/constants.ts","pages/create-schema-page/stages/choose-image/index.tsx","pages/create-schema-page/stages/general-settings/index.tsx","pages/create-schema-page/stages/generator-result/index.tsx","pages/create-schema-page/stages/palette-settings/index.tsx","pages/create-schema-page/stages/size-settings/index.tsx","pages/create-schema-page/index.tsx","pages/error-404-page/index.tsx","assets/logo.svg","pages/works-page/constants.ts","pages/home-page/constants.ts","pages/work-page/constants.ts","pages/home-page/continue-button/index.tsx","pages/home-page/index.tsx","hooks/useQueryParam.ts","hooks/useQuery.ts","pages/schema-page/constants.ts","pages/schema-page/index.tsx","pages/schemas-page/create-work-modal/index.tsx","pages/schemas-page/schema-card/schema-settings-button/change-schema-name-modal/index.tsx","pages/schemas-page/schema-card/schema-settings-button/index.tsx","pages/schemas-page/schema-card/index.tsx","pages/schemas-page/index.tsx","pages/work-page/index.tsx","pages/works-page/work-card/work-settings-button/change-work-name-modal/index.tsx","pages/works-page/work-card/work-settings-button/index.tsx","pages/works-page/work-card/index.tsx","pages/works-page/index.tsx","pages/index.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx","../../packages/core/dist/index.js","../../packages/core-react/dist/index.js","pages/create-schema-page/stages/generator-result/index.module.scss"],"names":["module","exports","Object","defineProperty","value","core","require","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__assign$1","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","pop","push","__assign","__spreadArrays","il","r","k","a","j","jl","keys","isArray","_global","self","window","global","extend","obj","extension","forEach","key","getProto","getPrototypeOf","_hasOwn","hasOwn","prop","props","proto","setProp","functionOrGetSet","options","get","set","configurable","writable","derive","Child","from","Parent","bind","getOwnPropertyDescriptor","getPropertyDescriptor","_slice","slice","args","start","end","override$1","origFunc","overridedFactory","assert","Error","asap","fn","setImmediate","setTimeout","arrayToObject","array","extractor","reduce","item","nameAndValue","getByKeyPath","keyPath","rv","l","val","period","innerObj","substr","undefined","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","isNaN","parseInt","splice","delByKeyPath","map","kp","shallowClone","m","concat","flatten","intrinsicTypeNames","split","num","filter","intrinsicTypes","intrinsicTypeNameSet","x","deepClone","any","toString","toStringTag","o","getValueOf","type","Uint8Array","getTime","ArrayBuffer","isView","buffer","getObjectDiff","prfx","ap","bp","apTypeName","bpTypeName","iteratorSymbol","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","isAsyncFunction","debug","location","test","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","stack","getErrorWithStack","prettyStack","exception","numIgnoredFrames","name","message","frame","join","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","DexieError","msg","_e","getMultiErrorMessage","failures","ModifyError","successCount","failedKeys","BulkError","_stack","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","Range","RangeError","exceptionMap","fullNameExceptions","nop$1","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","res","onsuccess","onerror","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain$1","thiz","INTERNAL","_a","globalP","crypto","subtle","nativeP","digest","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","document","createElement","observe","attributes","setAttribute","asap$1","callback","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","id","ref","unhandleds","onunhandled","globalError","pgp","env","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","cleanup","decrementExpectedAwaits","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","promise","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","ex","reason","_promise","tryCatch","origProp","some","addPossiblyUnhandledError","listeners","len","finalizePhysicalTick","listener","cb","callListener","ret","markErrorAsHandled","getStack","stacks","limit","errorName","failure","prev","numPrev","wasRootExec","callbacks","unhandledErrs","finalizers","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","catch","handler","err","finally","onFinally","timeout","ms","Infinity","handle","Timeout","clearTimeout","snapShot","all","values","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","finalizer","run_at_end_of_this_or_next_physical_tick","allSettled","possiblePromises","results","status","AggregateError","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","props$$1","a1","a2","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise_1","targetEnv","GlobalPromise","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","event","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","defaultPrevented","console","warn","tempTransaction","db","mode","storeNames","openComplete","letThrough","trans","_createTransaction","_dbSchema","_completion","isBeingOpened","_options","autoOpen","open","dbReadyPromise","DEXIE_VERSION","maxString","fromCharCode","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Table","_trans","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","where","first","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","equals","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","JSON","stringify","idxByName","idb","_deps","indexedDB","cmp","prevIndex","prevFilterFn","index","multi","idx","filterFunction","toCollection","and","count","thenShortcut","offset","numRows","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","readHook","unsubscribe","defineClass","content","add","auto","objToAdd","mutate","numFailures","lastResult","update","keyOrObject","InvalidArgument","modify","put","delete","clear","range","bulkGet","keys$$1","getMany","bulkAdd","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","pos","bulkPut","objectsToPut","bulkDelete","numKeys","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","context","subscribers","cfg","makeClassConstructor","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","factory","isLimitFilter","curr","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","unique","query","iter","coreTrans","set_1","union","cursor","advance","stop","fail","_iterate","iterate","valueMapper","cursorPromise","wrappedFn","c","continue","advancer","_read","_ctx","error","table","_write","_addAlgorithm","clone","raw","Math","min","sortBy","parts","lastPart","lastIndex","getval","order","sorter","aVal","bVal","sort","valueMapper_1","a_1","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","isMatch","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","changes","modifyer","anythingModified","outbound","extractKey","Dexie","totalFailures","applyMutateResult","expectedCount","_i","nextChunk","addValues","putValues","putKeys","deleteKeys","origValue","ctx_1","coreRange","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","collection","emptyCollection","whereClause","rangeEqual","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","toUpperCase","toLowerCase","upperFactory","lowerFactory","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","enumerable","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWith","str","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","max","_max","sortDirection","rangeSorter","newRange","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","checkKey","keyWithinCurrentRange","startsWithAnyOf","safariMultiStoreFix","getMaxKey","IdbKeyRange","only","eventRejectHandler","preventDefault","target","stopPropagation","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","idbdb","dbOpenError","MissingAPI","OpenFailed","active","transaction","ev","_reject","onabort","on","oncomplete","_resolve","bWriteLock","ReadOnly","_root","waitFor","promiseLike","root","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","tableSchema","transactionBoundTable","createIndexSpec","src","nameFromKeyPath","createTableSchema","getKeyExtractor","getSinglePathKeyExtractor","getEffectiveKeys","req","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","makeIDBKeyRange","upperBound","lowerBound","bound","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","extractSchema","isAddOrPut","errorHandler","_reqno","setResult","args1","args2","keyCount","callbackCount","successHandler","_pos","request","nonInfinitLimit","source","idbKeyRange","getAll","getAllKeys","count_1","req_1","openKeyCursor","result_1","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","createDbCoreTable","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStacks","middlewares","IDBKeyRange","dbcore","stackImpl","down","createMiddlewareStack","generateMiddlewareStacks","_middlewares","tbl","setApiOnPlace","objs","tableNames","dbschema","propDesc","removeTablesApi","lowerVersionFirst","_cfg","version","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","queue","versions","_versions","buildGlobalSchema","anyContentUpgraderHasRun","runQueue","oldSchema","newSchema","adjustToExistingIndexNames","diff","getSchemaDiff","tuple","change","recreate","Upgrade","store_1","addIndex","deleteIndex","del","idxName","contentUpgrade","upgradeSchema_1","returnValue_1","contentUpgradeIsAsync_1","promiseFollowed","decrementor","storeName","deleteObjectStore","deleteRemovedTables","contains","updateTablesAndIndexes","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","createIndex","idbindex","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","databaseEnumerator","Version","_parseStoresSpec","stores","outSchema","indexNum","trim","replace","storesSource","storesSpec","_allTables","upgrade","upgradeFunction","vip","dexieOpen","state","openCanceller","resolveDbReady","dbReadyResolve","upgradeTransaction","dbName","autoSchema","round","verno","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","close","delreq","deleteDatabase","NoSuchDatabase","oldVer","pow","readGlobalSchema","ch","verifyInstalledSchema","onversionchange","vcFired","onReadyBeingFired","ready","fireRemainders","remainders","awaitIterator","callNext","onSuccess","onError","throw","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","returnValue","scopeFuncIsAsync","PrematureCommit","pad","virtualIndexMiddleware","level","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","translateRequest","virtualCursor","createVirtualCursor","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","updating","addPutOrDelete","deleteNextChunk","deleteRange","effectiveKeys","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges_1","requestedValue_1","deps","dependencies","addons","cancelOpen","bSticky","db_1","keyRangeGenerator","keyRange","whereCtx","readingHook","createTableConstructor","complete","wasActive","createTransactionConstructor","versionNumber","createVersionConstructor","orCollection","_IDBKeyRange","createWhereClauseConstructor","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","remove","backendDB","isOpen","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","idbMode","onlyIfCompatible","SubTransaction","enterTransaction","InvalidTable","Dexie$1","nop","promisableChain","createUUID","Date","now","random","floor","databaseName","exists","getDatabaseNames","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","override","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","semVer","default","maxKey","dbNamesTable","hasDatabasesNative","databases","dbnames","infos","info","DatabaseEnumerator","initDatabaseEnumerator","domError","initCrudMonitor","_observing","uuid","_changes","rev","_lastWrittenRevision","resultKey","initCreatingHook","mods","oldObj","modsWithoutUndefined","anythingChanged","newObj","propPath","mod","currentValue","initUpdatingHook","log","initDeletingHook","Promise$2","initIntercomm","Observable","SyncNode","mySyncNode","localStorage","requestsWaitingForReply","consumeIntercommMessages","node","_intercomm","destinationNode","messages","requestId","isFailure","observable","sendMessage","sender","consumeMessage","DatabaseClosedError","wantReply","_syncNodes","receiverAlive","masterNode","messageId","setItem","intercomm","broadcastMessage","bIncludeSelf","mySyncNodeId","nodes","onIntercomm","dbname","overrideParseStoresSpec","dbSchema","global$1","DatabaseChange","Number","Promise$1","browserIsShuttingDown","NODE_TIMEOUT","localStorageImpl","myRevision","lastHeartBeat","deleteTimeStamp","url","isMaster","syncProtocol","syncContext","syncOptions","connected","appliedRemoteRevision","remoteBaseRevisions","local","remote","dbUploadState","tablesToUpload","currentTable","currentKey","localBaseRevision","wakeupObservers","lastWrittenRevision","latestRevision","initWakeupObservers","overrideCreateTransaction","storenames","addChanges","rootTransaction","findRootTransaction","timeoutHandle","initOverrideCreateTransaction","crudMonitor","overrideOpen","origOpen","initOverrideOpen","pollHandle","heartbeatHandle","fake","_uncommittedChanges","origClose","onLatestRevisionIncremented","onSuicide","onBeforeUnload","suicideNurseCall","origDelete","lastChange","latestRevisionIncremented","mySyncNodeShouldBecomeMaster","existingNode","poll","heartbeat","handledRevision","readChanges","recursion","wasPartial","ongoingOperation","partial","ourSyncNode","ourNodeStillExists","syncNode","reload","currentInstance","weBecameMaster","removeItem","deleteOldChanges","wereTheOneDying","nodeID","oldestNode","keysToDelete","_onStorage","newValue","initOnStorage","_onBeforeUnload","beforeunload","addEventListener","SchemaIndex","SchemaMetadataIndex","SchemaImageIndex","BaseStorage","dexie","names","createIterableCollection","SCHEMAS_TABLE","SCHEMA_METADATA_TABLE","SCHEMA_IMAGES_TABLE","SchemaStorage","_super","schemaImageDataURL","metadata","filterSchema","schemaId","dataURL","_b","Id","schemaModel","getImage","changeName","searchName","searchNameLower","data","image","createEmptyWorkGrid","width","height","size","embroidered","computeChunkBoundaries","workMetadata","chunkMetadata","chunkNumber","chunksPerRow","lastChunkWidth","chunkI","chunkJ","schemaMetadata","canvasMetadata","schemaWidth","schemaHeight","deltaX","deltaY","chunkWidth","chunkHeight","extractChunk","work","workId","number","foreachChunk","chunksCount","rowsCount","ceil","computeChunksCount","WorkIndex","WorkMetadataIndex","WorkImageIndex","WorkChunkIndex","WorkChunkMetadataIndex","WORKS_TABLE","WORK_METADATA_TABLE","WORK_IMAGES_TABLE","WORK_CHUNKS_TABLE","WORK_CHUNKS_METADATA_TABLE","WorkStorage","workImageDataURL","createChunkMetadata","filterWork","chunk","saveChanges","changedCells","chunkNumbers","lastActivity","Set","cell","cellToChunkNumber","WorkId","_c","insertChunk","workModel","getLastWorkMetadata","LastActivity","Database","attach","schemas","works","emit","SchemaId","config","database","EventEmitter","require$$0","storage","antd","reactRouterDom","_interopDefaultLegacy","require$$0__default","jsxRuntime","reactJsxRuntime_production_min","propIsEnumerable","toObject","test1","getOwnPropertyNames","test2","order2","test3","letter","shouldUseNative","Fragment","for","h","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","__self","__source","q","defaultProps","$$typeof","_owner","current","jsx","jsxs","DatabaseContext","createContext","useDatabase","useContext","styles$1","useSearchParam","history","useHistory","useState","URLSearchParams","search","setValue","optionsRef","useRef","useEffect","setParam","useCallback","params","isDefaultValue","parse","styles","DatabasePaginationLayout","children","style","databasePagination","noDataText","extraContent","loading","total","page","pageSize","setPage","scroll","top","behavior","className","PageHeader","Spin","spinning","delay","Pagination","hideOnSinglePage","onChange","Empty","description","DatabaseProvider","setDatabase","isDestroyed","Provider","Search","paramName","onSearch","paramValue","setParamValue","Input","allowClear","enterButton","defaultValue","useDatabaseItem","setLoading","setError","queryRef","item_1","error_1","useDatabasePagination","pageNumber","setPageNumber","setTotal","_d","setData","loadData","previousPage","total_1","data_1","refresh","refreshRef","removeEventListener","reset","StagesContext","React","Stages","layout","onFinish","stageIndex","setStageIndex","childrenArray","Children","goBack","completeStage","Stage","title","overrideDefaultLayout","Consumer","Layout","FilledLayout","onBack","computedChildren","DefaultLayout","BasicLayout","rest","header","main","FullscreenSpin","visible","setVisible","timeoutEnd","previousValue","overflow","indicator","LoadingOutlined","icon","ModalForm","onCancel","formProps","closable","footer","centered","action","SCHEMAS_PATHNAME","process","CREATE_SCHEMA_PATHNAME","ChooseImage","onChoose","accept","file","originFileObj","InboxOutlined","GeneralSettings","imageURL","initialValues","onSubmit","gutter","xs","md","row","span","form","requiredMark","palette","palettes","find","stitchesPerInch","Item","initialValue","rules","required","Option","tooltip","normalize","abs","inputNumber","htmlType","button","GeneratorResult","schemaImage","onSave","previewSchema","setPreviewSchema","firstBlock","onClick","schemaLoader","pagination","secondBlock","simple","PaletteSettings","unlimitedColors","setUnlimitedColors","withDithering","setWithDithering","reduceAlgorithm","maxColorsCount","checkbox","checked","SizeSettings","Form","useForm","sizeType","setSizeType","keepAspectRatio","setKeepAspectRatio","aspectRatio","useMemo","maxSize","centimeter","convertSize","MAX_WIDTH","MAX_HEIGHT","to","inch","stitch","getFieldValue","setFieldsValue","POSITIVE_INFINITY","CreateSchemePage","sourceImage","setSourceImage","setImageURL","setImage","generalSettings","setGeneralSettings","sizeSettings","setSizeSettings","paletteSettings","setPaletteSettings","setSchema","setSchemaImage","executeTask","generateSchema","createSchema","createSchemaImage","URL","createObjectURL","Image","onload","revokeObjectURL","extra","CloseOutlined","pathname","Error404Page","subTitle","WORKS_PATHNAME","HOME_PATHNAME","WORK_PATHNAME","ContinueButton","setMetadata","updateMetadata","disabled","HomePage","menu","logo","alt","buttons","rel","useQueryParam","param","useLocation","useQuery","SCHEMA_PATHNAME","SchemaPage","saved","CreateWorkModal","createWork","tag","ChangeSchemaNameModal","onClose","alert","SchemaSettingsButton","onChangeName","changeNameVisible","setChangeNameVisible","trigger","onVisibleChange","SettingOutlined","SchemaCard","modalVisible","setModalVisible","deletePending","setDeletePending","actions","okType","onConfirm","DeleteOutlined","Meta","avatar","preview","mask","EyeOutlined","cardButtons","cardButton","PARAM_NAME","SchemasPage","lg","WorkPage","autoSaveTimeout","ChangeWorkNameModal","WorkSettingsButton","WorkCard","progress","WorksPage","pages","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onPerfEntry","ReactDOM","render","exact","path","component","getElementById","origin","fetch","headers","response","contentType","unregister","checkValidServiceWorker","serviceWorkerRegistration","Function","getCLS","getFID","getFCP","getLCP","getTTFB","prevented","eventListeners","findIndex","removeAllEventListeners","RGBAColor","red","green","blue","alpha","valueName","valueOf","fromHex","hex","hexParts","substring","fromNumber","RGBColor","Vector2","Vector2Int","isInteger","Vector3","z","multiply","Vector4","w","Animation","cellPredicate","_finished","draw","_j","_x","_y","_chunk","_context","postRender","finish","onStop","requireRedraw","__spreadArray","pack","ar","ContinuousAnimation","started","validate","timeoutKey","duration","deltaTime","performance","lastFrameTime","time","startTime","BezierCurve","states","convertedStates","convertToIntermediate","evaluate","points","convertFromIntermediate","BezierCurveRGB","vector","color","BezierCurveRGBA","CELL_SIZE","Vertex","paletteColor","attachedColors","Map","distance","sqrt","merge","vertex","attachColor","isAttachedColor","has","getColor","compareTo","attachedColorsCount","KMeansPalette","verticies","colors","increaseColorWeight","vertext","getNearestVertex","getSimilarColor","requiredSize","reducer","deleteUnusedVerticies","otherVertex","minDistance","nearest","PaletteReducer","AverageDistanceReducer","minDistanceAverage","index1","distanceAverage","index2","ContrastReducer","distance1","distance2","NearestReducer","PaletteReducerFactory","createReducer","QuantizationError","delta","factor","clampColorComponent","createArray","cellsEquals","otherCell","axis","CENTIMETERS_IN_INCH","converter","fromIndex","getTypeIndex","toIndex","executeInCanvasContext","canvas","getContext","getImageDataPixel","imageData","getRandomValues","forEachPixel","imageSize","processChunk","chunkStart","convertComponent","getContrastColor","rgbColor","processImageInCanvas","imageWidth","imageHeight","imageSmoothingEnabled","drawImage","createImagePalette","imagePalette","rnds8","rng","msCrypto","REGEX","byteToHex","v4","buf","rnds","arr","computeColorDelta","otherColor","AttributeType","Chunk","cellSize","cellsCount","canvasSize","halfCellSize","cellOffset","startCell","endCell","getCellByCanvasPosition","pointerX","pointerY","cellNumberI","cellNumberJ","forEachCellI","forEachCellJ","forEachCell","Renderer","Attribute","gl","webglType","Float","Matrix3x3","FLOAT","getWebGLType","getWebGLSize","byteSize","getByteSize","Attributes","stride","attributes_1","name_1","attribute","freeze","MAX_TEXTURE_WIDTH","IndexBuffer","indices","createBuffer","bindBuffer","ELEMENT_ARRAY_BUFFER","bufferData","STATIC_DRAW","unbind","destroy","deleteBuffer","RendererData","quadIndex","indexBuffer","createIndexBuffer","maxQuadCount","verticesCount","vertices","Float32Array","vertexBuffer","createVertexBuffer","isFull","flush","drawElements","TRIANGLES","setPosition","position","setColor","setTexIndex","setTexCoords","texCoords","addVertices","positions","texIndex","normalizedColor","coords","setVertex","Shader","vertexSource","fragmentSource","vertexShader","fragmentShader","createShader","VERTEX_SHADER","FRAGMENT_SHADER","deleteShader","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","ShaderError","useProgram","setInt","getUniformLocation","uniform1i","setIntArray","uniform1iv","setFloat","uniform1f","setFloat2","uniform2f","setFloat3","uniform3f","setFloat4","uniform4f","setMatrix3x3","matrix","uniformMatrix3fv","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","shaderName","Texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","RGBA","UNSIGNED_BYTE","slot","activeTexture","TEXTURE0","deleteTexture","VertexBuffer","ARRAY_BUFFER","DYNAMIC_DRAW","program","getParameter","CURRENT_PROGRAM","location_1","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","Atlas","schemaInfo","symbolMap","numberMap","devicePixelRatio","createCanvas","texture","computeTextureSize","fontSize","fontFamily","fillStyle","textAlign","font","textBaseline","numbersCount","addText","symbolsCount","symbols","symbol","countInRow","text","fillText","toTexCoords","getBorderNumberTexCoords","getSchemaSymbolTexCoords","WebGLRenderer","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","whiteTexture","createWhiteTexture","atlas","ImageData","viewport","clearColor","COLOR_BUFFER_BIT","getProjectionMatrix","ratio","drawRect","computePositions","rgbaColor","transformColor","drawSchemaSymbol","drawBorderNumber","drawLine","x0","y0","x1","y1","lineWidth","halfLineWidth","WebGL1IndexBuffer","Uint16Array","UNSIGNED_SHORT","WebGL1VertexBuffer","bufferSubData","WebGL1RendererData","maxIndicesCount","WebGL1Renderer","WebGL2IndexBuffer","Uint32Array","UNSIGNED_INT","WebGL2VertexBuffer","WebGL2RendererData","maxVerticesCount","WebGL2Renderer","SchemaCanvas","viewProvider","drawRequired","_isDestroyed","onResize","resize","onKeyDown","keyboardEvent","code","repeat","toggleTimeDisplay","onScroll","pointerDownPosition","onPointerDown","pointerEvent","isPrimary","scrollArea","setPointerCapture","pointerId","clientPositionToCanvas","clientX","clientY","onPointerMove","computeChunk","onBorderCellPointerMove","onSchemaCellPointerMove","onPointerUp","clickPosition","poinerDownCell","clickCell","onBorderCellClick","onSchemaCellClick","onPointerCancel","poinerEvent","touchStarted","touchScrollPrevented","onTouchStart","touchEvent","touches","onBorderCellTouchStart","onSchemaCellTouchStart","onTouchMove","onBorderCellTouchMove","onSchemaCellTouchMove","onTouchEnd","renderer","createRenderer","createScrollArea","timeDisplay","createTimeDisplay","innerHTML","appendChild","getSymbols","webgl2","webgl","left","display","justifyContent","alignItems","zIndex","touchAction","mock","requestAnimationFrame","drawLoop","detach","clientWidth","clientHeight","rect","getBoundingClientRect","_cell","_pointerEvent","_touchEvent","scrollToCell","center","preRender","drawCells","drawScale","drawGrid","onRedraw","innerText","drawCell","getCell","rectColor","symbolColor","whiteColor","getOffset","clamp","scrollLeft","scrollWidth","scrollTop","scrollHeight","onDestroy","AnimatedSchemaCanvas","animations","animationIndex","animation","finished","startAnimation","unshift","stopAnimation","CELL_BACKGROUND_COLOR","CELL_FOREGROUND_COLOR","SELECTED_CELL_BACKGROUND_COLOR","CellTransition","colorCurve","fromColor","toColor","transparent","symbolColorFrom","symbolColorTo","symbolColorCurve","ColorSelection","curve","WorkCanvas","eraseMode","penColorCode","backgroundColor","setIsEraseMode","setPenColorCode","scrollToNotEmbroidered","colorCode","processCell","schemaCell","eraseCell","embroiderСell","ALPHABET","SchemaViewProvider","colorMap","generateSymbol","cellIndex","getCellIndex","colorIndex","grid","getColorSymbol","base","WorkViewProvider","colorStatistics","embroideredCellsCount","statistics","stitchEmbroideredCount","getColorStatistics","unoptimizedPalette","getImageData","paletteColors","errors","lineOffset","nextLineOffset","_loop_1","originalColor","similarColor_1","createSchemaGrid","createdAt","stitchCount","accumulator","paletteMetadata","colorsCount","createSchemaMetadata","Uint8ClampedArray","putImageData","toDataURL","createWorkImage","downloadSchema","minimized","json","blob","Blob","anchor","download","onclick","click","icons","getDefaultExportFromCjs","__esModule","ColorsTable","symbolResolver","stitchCountResolver","otherPalettes","copy","getAnalogs","analogs","stitchCountColumn","dataIndex","Typography","Text","ellipsis","columns","marginRight","dataSource","rowKey","styles$4","headerChildren","styles$3","WorkInfoTable","sizeInCentimeters","sizeInInches","property","WorkProgress","percent","Progress","useBreakpoint$1","interopRequireDefault","slicedToArray","arrayWithHoles","iterableToArrayLimit","_s","_arr","_n","unsupportedIterableToArray","arrayLikeToArray","arr2","arrayLikeToArray$1","minLen","nonIterableRest","arrayWithHoles$1","iterableToArrayLimit$1","unsupportedIterableToArray$1","nonIterableRest$1","responsiveObserve","_extends","_interopRequireDefault","responsiveMap","responsiveArray","_defineProperty2","_extends3","sm","xl","xxl","subUid","screens","_default","matchHandlers","dispatch","pointMap","func","token","screen","matchMediaQuery","mql","removeListener","_this2","_ref","matches","matchMedia","addListener","_slicedToArray2","_react","_responsiveObserve","_useState","_useState2","setScreens","supportScreens","useBreakpoint","styles$2","ColorsList","onColorClick","leftBorderVisible","setLeftBorderVisible","rightBorderVisible","setRightBorderVisible","divRef","updateBorders","CheckOutlined","WorkViewerMenu","infoModalVisible","setInfoModalVisible","colorsModalVisible","setColorsModalVisible","resultModalVisible","setResultModalVisible","_f","_g","Menu","Modal","Dropdown","overlay","Button","border","padding","EllipsisOutlined","verticalAlign","DownloadButton","Popover","SchemaInfoTable","SchemaViewer","rootRef","provider","schemaCanvas","WorkViewer","setCanvas","setEraseMode","forceUpdate","saving","setSaving","saveResult","setSaveResult","_h","changed","setChanged","workCanvas","save","timeout_1","wrapper","tags","Tag","headerContent","SaveOutlined","danger","ClearOutlined"],"mappings":"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,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,aA3xBhB,CACT18C,KAAM,SACN6gD,OAAQ,CACJ,CAAE2R,KAAM,IAAK9V,IAAK,WAClB,CAAE8V,KAAM,IAAK9V,IAAK,WAClB,CAAE8V,KAAM,IAAK9V,IAAK,WAClB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,KAAM9V,IAAK,WACnB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,WAAY9V,IAAK,WACzB,CAAE8V,KAAM,WAAY9V,IAAK,WACzB,CAAE8V,KAAM,YAAa9V,IAAK,aAuctB,CACR18C,KAAM,QACN6gD,OAAQ,CACJ,CAAE2R,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,aAIf,CACV18C,KAAM,UACN6gD,OAAQ,CACJ,CAAE2R,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,MAAO9V,IAAK,WACpB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,WACrB,CAAE8V,KAAM,OAAQ9V,IAAK,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","file":"static/js/main.710741ac.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"palette-settings_root__CHhgN\",\"row\":\"palette-settings_row__2E-0B\",\"image\":\"palette-settings_image__1otLG\",\"form\":\"palette-settings_form__26wX2\",\"inputNumber\":\"palette-settings_input-number__10vZN\",\"button\":\"palette-settings_button__23O0l\",\"checkbox\":\"palette-settings_checkbox__1nQl9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"size-settings_root__35ULr\",\"row\":\"size-settings_row__2exzR\",\"image\":\"size-settings_image__1Q-J0\",\"form\":\"size-settings_form__r7Tbp\",\"inputNumber\":\"size-settings_input-number__UWDdt\",\"button\":\"size-settings_button__2KOu6\",\"checkbox\":\"size-settings_checkbox__1rNw-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"home-page_root__2p-WD\",\"header\":\"home-page_header__37e_g\",\"logo\":\"home-page_logo__1-ADE\",\"main\":\"home-page_main__2mEp1\",\"menu\":\"home-page_menu__p8WAF\",\"buttons\":\"home-page_buttons__3D31S\",\"footer\":\"home-page_footer__3yVqw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"schema-card_root__2yyOY\",\"image\":\"schema-card_image__GXfev\",\"table\":\"schema-card_table__2pudq\",\"cardButton\":\"schema-card_card-button__1BqaE\",\"cardButtons\":\"schema-card_card-buttons__22De_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"work-card_root__2BTh9\",\"image\":\"work-card_image__wu5RE\",\"table\":\"work-card_table__1e2g9\",\"cardButton\":\"work-card_card-button__1qbyz\",\"cardButtons\":\"work-card_card-buttons__1px2O\",\"schema\":\"work-card_schema__3s_wH\",\"progress\":\"work-card_progress__1qtzL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"general-settings_root__jL5Hk\",\"row\":\"general-settings_row__WX39F\",\"image\":\"general-settings_image__1OnjX\",\"form\":\"general-settings_form__1FIwg\",\"inputNumber\":\"general-settings_input-number__1B9eW\",\"button\":\"general-settings_button__1OGEx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"basic-layout_root__1ofBD\",\"header\":\"basic-layout_header__1r4-b\",\"main\":\"basic-layout_main__du0pa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"fullscreen-spin_root__34oAU\",\"icon\":\"fullscreen-spin_icon__1TBUf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"create-work-modal_button__1f14O\",\"tag\":\"create-work-modal_tag__3t0GP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"change-schema-name-modal_button__2t5w0\",\"alert\":\"change-schema-name-modal_alert__fJfz4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"choose-image_message__3uyag\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"error-404-page_root__30VWX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"schemas-page_search__ngXj4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search\":\"works-page_search__3yG6V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"change-work-name-modal_button__2wzce\"};","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar core = require('@fancywork/core');\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign$1 = function() {\r\n    __assign$1 = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign$1.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\n/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.0.3, Wed Nov 18 2020\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \nvar __assign = function() {\n    __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\n\n\n\n\n\n\n\n\n\nfunction __spreadArrays() {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n}\n\nvar keys = Object.keys;\nvar isArray = Array.isArray;\nvar _global = typeof self !== 'undefined' ? self :\n    typeof window !== 'undefined' ? window :\n        global;\nif (typeof Promise !== 'undefined' && !_global.Promise) {\n    _global.Promise = Promise;\n}\nfunction extend(obj, extension) {\n    if (typeof extension !== 'object')\n        return obj;\n    keys(extension).forEach(function (key) {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\nvar getProto = Object.getPrototypeOf;\nvar _hasOwn = {}.hasOwnProperty;\nfunction hasOwn(obj, prop) {\n    return _hasOwn.call(obj, prop);\n}\nfunction props(proto, extension) {\n    if (typeof extension === 'function')\n        extension = extension(getProto(proto));\n    keys(extension).forEach(function (key) {\n        setProp(proto, key, extension[key]);\n    });\n}\nvar defineProperty = Object.defineProperty;\nfunction setProp(obj, prop, functionOrGetSet, options) {\n    defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n        { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n        { value: functionOrGetSet, configurable: true, writable: true }, options));\n}\nfunction derive(Child) {\n    return {\n        from: function (Parent) {\n            Child.prototype = Object.create(Parent.prototype);\n            setProp(Child.prototype, \"constructor\", Child);\n            return {\n                extend: props.bind(null, Child.prototype)\n            };\n        }\n    };\n}\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nfunction getPropertyDescriptor(obj, prop) {\n    var pd = getOwnPropertyDescriptor(obj, prop);\n    var proto;\n    return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\nvar _slice = [].slice;\nfunction slice(args, start, end) {\n    return _slice.call(args, start, end);\n}\nfunction override$1(origFunc, overridedFactory) {\n    return overridedFactory(origFunc);\n}\nfunction assert(b) {\n    if (!b)\n        throw new Error(\"Assertion Failed\");\n}\nfunction asap(fn) {\n    if (_global.setImmediate)\n        setImmediate(fn);\n    else\n        setTimeout(fn, 0);\n}\n\nfunction arrayToObject(array, extractor) {\n    return array.reduce(function (result, item, i) {\n        var nameAndValue = extractor(item, i);\n        if (nameAndValue)\n            result[nameAndValue[0]] = nameAndValue[1];\n        return result;\n    }, {});\n}\n\nfunction tryCatch(fn, onerror, args) {\n    try {\n        fn.apply(null, args);\n    }\n    catch (ex) {\n        onerror && onerror(ex);\n    }\n}\nfunction getByKeyPath(obj, keyPath) {\n    if (hasOwn(obj, keyPath))\n        return obj[keyPath];\n    if (!keyPath)\n        return obj;\n    if (typeof keyPath !== 'string') {\n        var rv = [];\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            var val = getByKeyPath(obj, keyPath[i]);\n            rv.push(val);\n        }\n        return rv;\n    }\n    var period = keyPath.indexOf('.');\n    if (period !== -1) {\n        var innerObj = obj[keyPath.substr(0, period)];\n        return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n    }\n    return undefined;\n}\nfunction setByKeyPath(obj, keyPath, value) {\n    if (!obj || keyPath === undefined)\n        return;\n    if ('isFrozen' in Object && Object.isFrozen(obj))\n        return;\n    if (typeof keyPath !== 'string' && 'length' in keyPath) {\n        assert(typeof value !== 'string' && 'length' in value);\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            setByKeyPath(obj, keyPath[i], value[i]);\n        }\n    }\n    else {\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var currentKeyPath = keyPath.substr(0, period);\n            var remainingKeyPath = keyPath.substr(period + 1);\n            if (remainingKeyPath === \"\")\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                        obj.splice(currentKeyPath, 1);\n                    else\n                        delete obj[currentKeyPath];\n                }\n                else\n                    obj[currentKeyPath] = value;\n            else {\n                var innerObj = obj[currentKeyPath];\n                if (!innerObj)\n                    innerObj = (obj[currentKeyPath] = {});\n                setByKeyPath(innerObj, remainingKeyPath, value);\n            }\n        }\n        else {\n            if (value === undefined) {\n                if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                    obj.splice(keyPath, 1);\n                else\n                    delete obj[keyPath];\n            }\n            else\n                obj[keyPath] = value;\n        }\n    }\n}\nfunction delByKeyPath(obj, keyPath) {\n    if (typeof keyPath === 'string')\n        setByKeyPath(obj, keyPath, undefined);\n    else if ('length' in keyPath)\n        [].map.call(keyPath, function (kp) {\n            setByKeyPath(obj, kp, undefined);\n        });\n}\nfunction shallowClone(obj) {\n    var rv = {};\n    for (var m in obj) {\n        if (hasOwn(obj, m))\n            rv[m] = obj[m];\n    }\n    return rv;\n}\nvar concat = [].concat;\nfunction flatten(a) {\n    return concat.apply([], a);\n}\nvar intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set\"\n    .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\nvar intrinsicTypes = intrinsicTypeNames.map(function (t) { return _global[t]; });\nvar intrinsicTypeNameSet = arrayToObject(intrinsicTypeNames, function (x) { return [x, true]; });\nfunction deepClone(any) {\n    if (!any || typeof any !== 'object')\n        return any;\n    var rv;\n    if (isArray(any)) {\n        rv = [];\n        for (var i = 0, l = any.length; i < l; ++i) {\n            rv.push(deepClone(any[i]));\n        }\n    }\n    else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n        rv = any;\n    }\n    else {\n        rv = any.constructor ? Object.create(any.constructor.prototype) : {};\n        for (var prop in any) {\n            if (hasOwn(any, prop)) {\n                rv[prop] = deepClone(any[prop]);\n            }\n        }\n    }\n    return rv;\n}\nvar toString = {}.toString;\nfunction toStringTag(o) {\n    return toString.call(o).slice(8, -1);\n}\nvar getValueOf = function (val, type) {\n    return type === \"Array\" ? '' + val.map(function (v) { return getValueOf(v, toStringTag(v)); }) :\n        type === \"ArrayBuffer\" ? '' + new Uint8Array(val) :\n            type === \"Date\" ? val.getTime() :\n                ArrayBuffer.isView(val) ? '' + new Uint8Array(val.buffer) :\n                    val;\n};\nfunction getObjectDiff(a, b, rv, prfx) {\n    rv = rv || {};\n    prfx = prfx || '';\n    keys(a).forEach(function (prop) {\n        if (!hasOwn(b, prop))\n            rv[prfx + prop] = undefined;\n        else {\n            var ap = a[prop], bp = b[prop];\n            if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                var apTypeName = toStringTag(ap);\n                var bpTypeName = toStringTag(bp);\n                if (apTypeName === bpTypeName) {\n                    if (intrinsicTypeNameSet[apTypeName]) {\n                        if (getValueOf(ap, apTypeName) !== getValueOf(bp, bpTypeName)) {\n                            rv[prfx + prop] = b[prop];\n                        }\n                    }\n                    else {\n                        getObjectDiff(ap, bp, rv, prfx + prop + \".\");\n                    }\n                }\n                else {\n                    rv[prfx + prop] = b[prop];\n                }\n            }\n            else if (ap !== bp)\n                rv[prfx + prop] = b[prop];\n        }\n    });\n    keys(b).forEach(function (prop) {\n        if (!hasOwn(a, prop)) {\n            rv[prfx + prop] = b[prop];\n        }\n    });\n    return rv;\n}\nvar iteratorSymbol = typeof Symbol !== 'undefined' && Symbol.iterator;\nvar getIteratorOf = iteratorSymbol ? function (x) {\n    var i;\n    return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () { return null; };\nvar NO_CHAR_ARRAY = {};\nfunction getArrayOf(arrayLike) {\n    var i, a, x, it;\n    if (arguments.length === 1) {\n        if (isArray(arrayLike))\n            return arrayLike.slice();\n        if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n            return [arrayLike];\n        if ((it = getIteratorOf(arrayLike))) {\n            a = [];\n            while (x = it.next(), !x.done)\n                a.push(x.value);\n            return a;\n        }\n        if (arrayLike == null)\n            return [arrayLike];\n        i = arrayLike.length;\n        if (typeof i === 'number') {\n            a = new Array(i);\n            while (i--)\n                a[i] = arrayLike[i];\n            return a;\n        }\n        return [arrayLike];\n    }\n    i = arguments.length;\n    a = new Array(i);\n    while (i--)\n        a[i] = arguments[i];\n    return a;\n}\nvar isAsyncFunction = typeof Symbol !== 'undefined'\n    ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n    : function () { return false; };\n\nvar debug = typeof location !== 'undefined' &&\n    /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\nfunction setDebug(value, filter) {\n    debug = value;\n    libraryFilter = filter;\n}\nvar libraryFilter = function () { return true; };\nvar NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\nfunction getErrorWithStack() {\n    if (NEEDS_THROW_FOR_STACK)\n        try {\n            throw new Error();\n        }\n        catch (e) {\n            return e;\n        }\n    return new Error();\n}\nfunction prettyStack(exception, numIgnoredFrames) {\n    var stack = exception.stack;\n    if (!stack)\n        return \"\";\n    numIgnoredFrames = (numIgnoredFrames || 0);\n    if (stack.indexOf(exception.name) === 0)\n        numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n    return stack.split('\\n')\n        .slice(numIgnoredFrames)\n        .filter(libraryFilter)\n        .map(function (frame) { return \"\\n\" + frame; })\n        .join('');\n}\n\nvar dexieErrorNames = [\n    'Modify',\n    'Bulk',\n    'OpenFailed',\n    'VersionChange',\n    'Schema',\n    'Upgrade',\n    'InvalidTable',\n    'MissingAPI',\n    'NoSuchDatabase',\n    'InvalidArgument',\n    'SubTransaction',\n    'Unsupported',\n    'Internal',\n    'DatabaseClosed',\n    'PrematureCommit',\n    'ForeignAwait'\n];\nvar idbDomErrorNames = [\n    'Unknown',\n    'Constraint',\n    'Data',\n    'TransactionInactive',\n    'ReadOnly',\n    'Version',\n    'NotFound',\n    'InvalidState',\n    'InvalidAccess',\n    'Abort',\n    'Timeout',\n    'QuotaExceeded',\n    'Syntax',\n    'DataClone'\n];\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\nvar defaultTexts = {\n    VersionChanged: \"Database version changed by other database connection\",\n    DatabaseClosed: \"Database has been closed\",\n    Abort: \"Transaction aborted\",\n    TransactionInactive: \"Transaction has already completed or failed\"\n};\nfunction DexieError(name, msg) {\n    this._e = getErrorWithStack();\n    this.name = name;\n    this.message = msg;\n}\nderive(DexieError).from(Error).extend({\n    stack: {\n        get: function () {\n            return this._stack ||\n                (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n        }\n    },\n    toString: function () { return this.name + \": \" + this.message; }\n});\nfunction getMultiErrorMessage(msg, failures) {\n    return msg + \". Errors: \" + Object.keys(failures)\n        .map(function (key) { return failures[key].toString(); })\n        .filter(function (v, i, s) { return s.indexOf(v) === i; })\n        .join('\\n');\n}\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n    this._e = getErrorWithStack();\n    this.failures = failures;\n    this.failedKeys = failedKeys;\n    this.successCount = successCount;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(ModifyError).from(DexieError);\nfunction BulkError(msg, failures) {\n    this._e = getErrorWithStack();\n    this.name = \"BulkError\";\n    this.failures = failures;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(BulkError).from(DexieError);\nvar errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\nvar BaseException = DexieError;\nvar exceptions = errorList.reduce(function (obj, name) {\n    var fullName = name + \"Error\";\n    function DexieError(msgOrInner, inner) {\n        this._e = getErrorWithStack();\n        this.name = fullName;\n        if (!msgOrInner) {\n            this.message = defaultTexts[name] || fullName;\n            this.inner = null;\n        }\n        else if (typeof msgOrInner === 'string') {\n            this.message = \"\" + msgOrInner + (!inner ? '' : '\\n ' + inner);\n            this.inner = inner || null;\n        }\n        else if (typeof msgOrInner === 'object') {\n            this.message = msgOrInner.name + \" \" + msgOrInner.message;\n            this.inner = msgOrInner;\n        }\n    }\n    derive(DexieError).from(BaseException);\n    obj[name] = DexieError;\n    return obj;\n}, {});\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\nvar exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n    obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfunction mapError(domError, message) {\n    if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n        return domError;\n    var rv = new exceptionMap[domError.name](message || domError.message, domError);\n    if (\"stack\" in domError) {\n        setProp(rv, \"stack\", { get: function () {\n                return this.inner.stack;\n            } });\n    }\n    return rv;\n}\nvar fullNameExceptions = errorList.reduce(function (obj, name) {\n    if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n        obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction nop$1() { }\nfunction mirror(val) { return val; }\nfunction pureFunctionChain(f1, f2) {\n    if (f1 == null || f1 === mirror)\n        return f2;\n    return function (val) {\n        return f2(f1(val));\n    };\n}\nfunction callBoth(on1, on2) {\n    return function () {\n        on1.apply(this, arguments);\n        on2.apply(this, arguments);\n    };\n}\nfunction hookCreatingChain(f1, f2) {\n    if (f1 === nop$1)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res !== undefined)\n            arguments[0] = res;\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res2 !== undefined ? res2 : res;\n    };\n}\nfunction hookDeletingChain(f1, f2) {\n    if (f1 === nop$1)\n        return f2;\n    return function () {\n        f1.apply(this, arguments);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = this.onerror = null;\n        f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    };\n}\nfunction hookUpdatingChain(f1, f2) {\n    if (f1 === nop$1)\n        return f2;\n    return function (modifications) {\n        var res = f1.apply(this, arguments);\n        extend(modifications, res);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res === undefined ?\n            (res2 === undefined ? undefined : res2) :\n            (extend(res, res2));\n    };\n}\nfunction reverseStoppableEventChain(f1, f2) {\n    if (f1 === nop$1)\n        return f2;\n    return function () {\n        if (f2.apply(this, arguments) === false)\n            return false;\n        return f1.apply(this, arguments);\n    };\n}\n\nfunction promisableChain$1(f1, f2) {\n    if (f1 === nop$1)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res && typeof res.then === 'function') {\n            var thiz = this, i = arguments.length, args = new Array(i);\n            while (i--)\n                args[i] = arguments[i];\n            return res.then(function () {\n                return f2.apply(thiz, args);\n            });\n        }\n        return f2.apply(this, arguments);\n    };\n}\n\nvar INTERNAL = {};\nvar LONG_STACKS_CLIP_LIMIT = 100;\nvar MAX_LONG_STACKS = 20;\nvar ZONE_ECHO_LIMIT = 100;\nvar _a = typeof Promise === 'undefined' ?\n    [] :\n    (function () {\n        var globalP = Promise.resolve();\n        if (typeof crypto === 'undefined' || !crypto.subtle)\n            return [globalP, globalP.__proto__, globalP];\n        var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n        return [\n            nativeP,\n            nativeP.__proto__,\n            globalP\n        ];\n    })();\nvar resolvedNativePromise = _a[0];\nvar nativePromiseProto = _a[1];\nvar resolvedGlobalPromise = _a[2];\nvar nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\nvar NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\nvar patchGlobalPromise = !!resolvedGlobalPromise;\nvar stack_being_generated = false;\nvar schedulePhysicalTick = resolvedGlobalPromise ?\n    function () { resolvedGlobalPromise.then(physicalTick); }\n    :\n        _global.setImmediate ?\n            setImmediate.bind(null, physicalTick) :\n            _global.MutationObserver ?\n                function () {\n                    var hiddenDiv = document.createElement(\"div\");\n                    (new MutationObserver(function () {\n                        physicalTick();\n                        hiddenDiv = null;\n                    })).observe(hiddenDiv, { attributes: true });\n                    hiddenDiv.setAttribute('i', '1');\n                } :\n                function () { setTimeout(physicalTick, 0); };\nvar asap$1 = function (callback, args) {\n    microtickQueue.push([callback, args]);\n    if (needsNewPhysicalTick) {\n        schedulePhysicalTick();\n        needsNewPhysicalTick = false;\n    }\n};\nvar isOutsideMicroTick = true;\nvar needsNewPhysicalTick = true;\nvar unhandledErrors = [];\nvar rejectingErrors = [];\nvar currentFulfiller = null;\nvar rejectionMapper = mirror;\nvar globalPSD = {\n    id: 'global',\n    global: true,\n    ref: 0,\n    unhandleds: [],\n    onunhandled: globalError,\n    pgp: false,\n    env: {},\n    finalize: function () {\n        this.unhandleds.forEach(function (uh) {\n            try {\n                globalError(uh[0], uh[1]);\n            }\n            catch (e) { }\n        });\n    }\n};\nvar PSD = globalPSD;\nvar microtickQueue = [];\nvar numScheduledCalls = 0;\nvar tickFinalizers = [];\nfunction DexiePromise(fn) {\n    if (typeof this !== 'object')\n        throw new TypeError('Promises must be constructed via new');\n    this._listeners = [];\n    this.onuncatched = nop$1;\n    this._lib = false;\n    var psd = (this._PSD = PSD);\n    if (debug) {\n        this._stackHolder = getErrorWithStack();\n        this._prev = null;\n        this._numPrev = 0;\n    }\n    if (typeof fn !== 'function') {\n        if (fn !== INTERNAL)\n            throw new TypeError('Not a function');\n        this._state = arguments[1];\n        this._value = arguments[2];\n        if (this._state === false)\n            handleRejection(this, this._value);\n        return;\n    }\n    this._state = null;\n    this._value = null;\n    ++psd.ref;\n    executePromiseTask(this, fn);\n}\nvar thenProp = {\n    get: function () {\n        var psd = PSD, microTaskId = totalEchoes;\n        function then(onFulfilled, onRejected) {\n            var _this = this;\n            var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n            var cleanup = possibleAwait && !decrementExpectedAwaits();\n            var rv = new DexiePromise(function (resolve, reject) {\n                propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n            });\n            debug && linkToPreviousPromise(rv, this);\n            return rv;\n        }\n        then.prototype = INTERNAL;\n        return then;\n    },\n    set: function (value) {\n        setProp(this, 'then', value && value.prototype === INTERNAL ?\n            thenProp :\n            {\n                get: function () {\n                    return value;\n                },\n                set: thenProp.set\n            });\n    }\n};\nprops(DexiePromise.prototype, {\n    then: thenProp,\n    _then: function (onFulfilled, onRejected) {\n        propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n    },\n    catch: function (onRejected) {\n        if (arguments.length === 1)\n            return this.then(null, onRejected);\n        var type = arguments[0], handler = arguments[1];\n        return typeof type === 'function' ? this.then(null, function (err) {\n            return err instanceof type ? handler(err) : PromiseReject(err);\n        })\n            : this.then(null, function (err) {\n                return err && err.name === type ? handler(err) : PromiseReject(err);\n            });\n    },\n    finally: function (onFinally) {\n        return this.then(function (value) {\n            onFinally();\n            return value;\n        }, function (err) {\n            onFinally();\n            return PromiseReject(err);\n        });\n    },\n    stack: {\n        get: function () {\n            if (this._stack)\n                return this._stack;\n            try {\n                stack_being_generated = true;\n                var stacks = getStack(this, [], MAX_LONG_STACKS);\n                var stack = stacks.join(\"\\nFrom previous: \");\n                if (this._state !== null)\n                    this._stack = stack;\n                return stack;\n            }\n            finally {\n                stack_being_generated = false;\n            }\n        }\n    },\n    timeout: function (ms, msg) {\n        var _this = this;\n        return ms < Infinity ?\n            new DexiePromise(function (resolve, reject) {\n                var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n            }) : this;\n    }\n});\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n    setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\nglobalPSD.env = snapShot();\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.resolve = resolve;\n    this.reject = reject;\n    this.psd = zone;\n}\nprops(DexiePromise, {\n    all: function () {\n        var values = getArrayOf.apply(null, arguments)\n            .map(onPossibleParallellAsync);\n        return new DexiePromise(function (resolve, reject) {\n            if (values.length === 0)\n                resolve([]);\n            var remaining = values.length;\n            values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n                values[i] = x;\n                if (!--remaining)\n                    resolve(values);\n            }, reject); });\n        });\n    },\n    resolve: function (value) {\n        if (value instanceof DexiePromise)\n            return value;\n        if (value && typeof value.then === 'function')\n            return new DexiePromise(function (resolve, reject) {\n                value.then(resolve, reject);\n            });\n        var rv = new DexiePromise(INTERNAL, true, value);\n        linkToPreviousPromise(rv, currentFulfiller);\n        return rv;\n    },\n    reject: PromiseReject,\n    race: function () {\n        var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n        return new DexiePromise(function (resolve, reject) {\n            values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n        });\n    },\n    PSD: {\n        get: function () { return PSD; },\n        set: function (value) { return PSD = value; }\n    },\n    totalEchoes: { get: function () { return totalEchoes; } },\n    newPSD: newScope,\n    usePSD: usePSD,\n    scheduler: {\n        get: function () { return asap$1; },\n        set: function (value) { asap$1 = value; }\n    },\n    rejectionMapper: {\n        get: function () { return rejectionMapper; },\n        set: function (value) { rejectionMapper = value; }\n    },\n    follow: function (fn, zoneProps) {\n        return new DexiePromise(function (resolve, reject) {\n            return newScope(function (resolve, reject) {\n                var psd = PSD;\n                psd.unhandleds = [];\n                psd.onunhandled = reject;\n                psd.finalize = callBoth(function () {\n                    var _this = this;\n                    run_at_end_of_this_or_next_physical_tick(function () {\n                        _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                    });\n                }, psd.finalize);\n                fn();\n            }, zoneProps, resolve, reject);\n        });\n    }\n});\nif (NativePromise) {\n    if (NativePromise.allSettled)\n        setProp(DexiePromise, \"allSettled\", function () {\n            var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve) {\n                if (possiblePromises.length === 0)\n                    resolve([]);\n                var remaining = possiblePromises.length;\n                var results = new Array(remaining);\n                possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n                    .then(function () { return --remaining || resolve(results); }); });\n            });\n        });\n    if (NativePromise.any && typeof AggregateError !== 'undefined')\n        setProp(DexiePromise, \"any\", function () {\n            var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                if (possiblePromises.length === 0)\n                    reject(new AggregateError([]));\n                var remaining = possiblePromises.length;\n                var failures = new Array(remaining);\n                possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n                    failures[i] = failure;\n                    if (!--remaining)\n                        reject(new AggregateError(failures));\n                }); });\n            });\n        });\n}\nfunction executePromiseTask(promise, fn) {\n    try {\n        fn(function (value) {\n            if (promise._state !== null)\n                return;\n            if (value === promise)\n                throw new TypeError('A promise cannot be resolved with itself.');\n            var shouldExecuteTick = promise._lib && beginMicroTickScope();\n            if (value && typeof value.then === 'function') {\n                executePromiseTask(promise, function (resolve, reject) {\n                    value instanceof DexiePromise ?\n                        value._then(resolve, reject) :\n                        value.then(resolve, reject);\n                });\n            }\n            else {\n                promise._state = true;\n                promise._value = value;\n                propagateAllListeners(promise);\n            }\n            if (shouldExecuteTick)\n                endMicroTickScope();\n        }, handleRejection.bind(null, promise));\n    }\n    catch (ex) {\n        handleRejection(promise, ex);\n    }\n}\nfunction handleRejection(promise, reason) {\n    rejectingErrors.push(reason);\n    if (promise._state !== null)\n        return;\n    var shouldExecuteTick = promise._lib && beginMicroTickScope();\n    reason = rejectionMapper(reason);\n    promise._state = false;\n    promise._value = reason;\n    debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n        var origProp = getPropertyDescriptor(reason, \"stack\");\n        reason._promise = promise;\n        setProp(reason, \"stack\", {\n            get: function () {\n                return stack_being_generated ?\n                    origProp && (origProp.get ?\n                        origProp.get.apply(reason) :\n                        origProp.value) :\n                    promise.stack;\n            }\n        });\n    });\n    addPossiblyUnhandledError(promise);\n    propagateAllListeners(promise);\n    if (shouldExecuteTick)\n        endMicroTickScope();\n}\nfunction propagateAllListeners(promise) {\n    var listeners = promise._listeners;\n    promise._listeners = [];\n    for (var i = 0, len = listeners.length; i < len; ++i) {\n        propagateToListener(promise, listeners[i]);\n    }\n    var psd = promise._PSD;\n    --psd.ref || psd.finalize();\n    if (numScheduledCalls === 0) {\n        ++numScheduledCalls;\n        asap$1(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n}\nfunction propagateToListener(promise, listener) {\n    if (promise._state === null) {\n        promise._listeners.push(listener);\n        return;\n    }\n    var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n    if (cb === null) {\n        return (promise._state ? listener.resolve : listener.reject)(promise._value);\n    }\n    ++listener.psd.ref;\n    ++numScheduledCalls;\n    asap$1(callListener, [cb, promise, listener]);\n}\nfunction callListener(cb, promise, listener) {\n    try {\n        currentFulfiller = promise;\n        var ret, value = promise._value;\n        if (promise._state) {\n            ret = cb(value);\n        }\n        else {\n            if (rejectingErrors.length)\n                rejectingErrors = [];\n            ret = cb(value);\n            if (rejectingErrors.indexOf(value) === -1)\n                markErrorAsHandled(promise);\n        }\n        listener.resolve(ret);\n    }\n    catch (e) {\n        listener.reject(e);\n    }\n    finally {\n        currentFulfiller = null;\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n        --listener.psd.ref || listener.psd.finalize();\n    }\n}\nfunction getStack(promise, stacks, limit) {\n    if (stacks.length === limit)\n        return stacks;\n    var stack = \"\";\n    if (promise._state === false) {\n        var failure = promise._value, errorName, message;\n        if (failure != null) {\n            errorName = failure.name || \"Error\";\n            message = failure.message || failure;\n            stack = prettyStack(failure, 0);\n        }\n        else {\n            errorName = failure;\n            message = \"\";\n        }\n        stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n    }\n    if (debug) {\n        stack = prettyStack(promise._stackHolder, 2);\n        if (stack && stacks.indexOf(stack) === -1)\n            stacks.push(stack);\n        if (promise._prev)\n            getStack(promise._prev, stacks, limit);\n    }\n    return stacks;\n}\nfunction linkToPreviousPromise(promise, prev) {\n    var numPrev = prev ? prev._numPrev + 1 : 0;\n    if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n        promise._prev = prev;\n        promise._numPrev = numPrev;\n    }\n}\nfunction physicalTick() {\n    beginMicroTickScope() && endMicroTickScope();\n}\nfunction beginMicroTickScope() {\n    var wasRootExec = isOutsideMicroTick;\n    isOutsideMicroTick = false;\n    needsNewPhysicalTick = false;\n    return wasRootExec;\n}\nfunction endMicroTickScope() {\n    var callbacks, i, l;\n    do {\n        while (microtickQueue.length > 0) {\n            callbacks = microtickQueue;\n            microtickQueue = [];\n            l = callbacks.length;\n            for (i = 0; i < l; ++i) {\n                var item = callbacks[i];\n                item[0].apply(null, item[1]);\n            }\n        }\n    } while (microtickQueue.length > 0);\n    isOutsideMicroTick = true;\n    needsNewPhysicalTick = true;\n}\nfunction finalizePhysicalTick() {\n    var unhandledErrs = unhandledErrors;\n    unhandledErrors = [];\n    unhandledErrs.forEach(function (p) {\n        p._PSD.onunhandled.call(null, p._value, p);\n    });\n    var finalizers = tickFinalizers.slice(0);\n    var i = finalizers.length;\n    while (i)\n        finalizers[--i]();\n}\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n    function finalizer() {\n        fn();\n        tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n    }\n    tickFinalizers.push(finalizer);\n    ++numScheduledCalls;\n    asap$1(function () {\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n    }, []);\n}\nfunction addPossiblyUnhandledError(promise) {\n    if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n        unhandledErrors.push(promise);\n}\nfunction markErrorAsHandled(promise) {\n    var i = unhandledErrors.length;\n    while (i)\n        if (unhandledErrors[--i]._value === promise._value) {\n            unhandledErrors.splice(i, 1);\n            return;\n        }\n}\nfunction PromiseReject(reason) {\n    return new DexiePromise(INTERNAL, false, reason);\n}\nfunction wrap(fn, errorCatcher) {\n    var psd = PSD;\n    return function () {\n        var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn.apply(this, arguments);\n        }\n        catch (e) {\n            errorCatcher && errorCatcher(e);\n        }\n        finally {\n            switchToZone(outerScope, false);\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n}\nvar task = { awaits: 0, echoes: 0, id: 0 };\nvar taskCounter = 0;\nvar zoneStack = [];\nvar zoneEchoes = 0;\nvar totalEchoes = 0;\nvar zone_id_counter = 0;\nfunction newScope(fn, props$$1, a1, a2) {\n    var parent = PSD, psd = Object.create(parent);\n    psd.parent = parent;\n    psd.ref = 0;\n    psd.global = false;\n    psd.id = ++zone_id_counter;\n    var globalEnv = globalPSD.env;\n    psd.env = patchGlobalPromise ? {\n        Promise: DexiePromise,\n        PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n        all: DexiePromise.all,\n        race: DexiePromise.race,\n        allSettled: DexiePromise.allSettled,\n        any: DexiePromise.any,\n        resolve: DexiePromise.resolve,\n        reject: DexiePromise.reject,\n        nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n        gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n    } : {};\n    if (props$$1)\n        extend(psd, props$$1);\n    ++parent.ref;\n    psd.finalize = function () {\n        --this.parent.ref || this.parent.finalize();\n    };\n    var rv = usePSD(psd, fn, a1, a2);\n    if (psd.ref === 0)\n        psd.finalize();\n    return rv;\n}\nfunction incrementExpectedAwaits() {\n    if (!task.id)\n        task.id = ++taskCounter;\n    ++task.awaits;\n    task.echoes += ZONE_ECHO_LIMIT;\n    return task.id;\n}\nfunction decrementExpectedAwaits() {\n    if (!task.awaits)\n        return false;\n    if (--task.awaits === 0)\n        task.id = 0;\n    task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n    return true;\n}\nif (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n    incrementExpectedAwaits = decrementExpectedAwaits = nop$1;\n}\nfunction onPossibleParallellAsync(possiblePromise) {\n    if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n        incrementExpectedAwaits();\n        return possiblePromise.then(function (x) {\n            decrementExpectedAwaits();\n            return x;\n        }, function (e) {\n            decrementExpectedAwaits();\n            return rejection(e);\n        });\n    }\n    return possiblePromise;\n}\nfunction zoneEnterEcho(targetZone) {\n    ++totalEchoes;\n    if (!task.echoes || --task.echoes === 0) {\n        task.echoes = task.id = 0;\n    }\n    zoneStack.push(PSD);\n    switchToZone(targetZone, true);\n}\nfunction zoneLeaveEcho() {\n    var zone = zoneStack[zoneStack.length - 1];\n    zoneStack.pop();\n    switchToZone(zone, false);\n}\nfunction switchToZone(targetZone, bEnteringZone) {\n    var currentZone = PSD;\n    if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n        enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n    }\n    if (targetZone === PSD)\n        return;\n    PSD = targetZone;\n    if (currentZone === globalPSD)\n        globalPSD.env = snapShot();\n    if (patchGlobalPromise) {\n        var GlobalPromise_1 = globalPSD.env.Promise;\n        var targetEnv = targetZone.env;\n        nativePromiseProto.then = targetEnv.nthen;\n        GlobalPromise_1.prototype.then = targetEnv.gthen;\n        if (currentZone.global || targetZone.global) {\n            Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n            GlobalPromise_1.all = targetEnv.all;\n            GlobalPromise_1.race = targetEnv.race;\n            GlobalPromise_1.resolve = targetEnv.resolve;\n            GlobalPromise_1.reject = targetEnv.reject;\n            if (targetEnv.allSettled)\n                GlobalPromise_1.allSettled = targetEnv.allSettled;\n            if (targetEnv.any)\n                GlobalPromise_1.any = targetEnv.any;\n        }\n    }\n}\nfunction snapShot() {\n    var GlobalPromise = _global.Promise;\n    return patchGlobalPromise ? {\n        Promise: GlobalPromise,\n        PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n        all: GlobalPromise.all,\n        race: GlobalPromise.race,\n        allSettled: GlobalPromise.allSettled,\n        any: GlobalPromise.any,\n        resolve: GlobalPromise.resolve,\n        reject: GlobalPromise.reject,\n        nthen: nativePromiseProto.then,\n        gthen: GlobalPromise.prototype.then\n    } : {};\n}\nfunction usePSD(psd, fn, a1, a2, a3) {\n    var outerScope = PSD;\n    try {\n        switchToZone(psd, true);\n        return fn(a1, a2, a3);\n    }\n    finally {\n        switchToZone(outerScope, false);\n    }\n}\nfunction enqueueNativeMicroTask(job) {\n    nativePromiseThen.call(resolvedNativePromise, job);\n}\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n    return typeof fn !== 'function' ? fn : function () {\n        var outerZone = PSD;\n        if (possibleAwait)\n            incrementExpectedAwaits();\n        switchToZone(zone, true);\n        try {\n            return fn.apply(this, arguments);\n        }\n        finally {\n            switchToZone(outerZone, false);\n            if (cleanup)\n                enqueueNativeMicroTask(decrementExpectedAwaits);\n        }\n    };\n}\nfunction getPatchedPromiseThen(origThen, zone) {\n    return function (onResolved, onRejected) {\n        return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n    };\n}\nvar UNHANDLEDREJECTION = \"unhandledrejection\";\nfunction globalError(err, promise) {\n    var rv;\n    try {\n        rv = promise.onuncatched(err);\n    }\n    catch (e) { }\n    if (rv !== false)\n        try {\n            var event, eventData = { promise: promise, reason: err };\n            if (_global.document && document.createEvent) {\n                event = document.createEvent('Event');\n                event.initEvent(UNHANDLEDREJECTION, true, true);\n                extend(event, eventData);\n            }\n            else if (_global.CustomEvent) {\n                event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                extend(event, eventData);\n            }\n            if (event && _global.dispatchEvent) {\n                dispatchEvent(event);\n                if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                    try {\n                        _global.onunhandledrejection(event);\n                    }\n                    catch (_) { }\n            }\n            if (debug && event && !event.defaultPrevented) {\n                console.warn(\"Unhandled rejection: \" + (err.stack || err));\n            }\n        }\n        catch (e) { }\n}\nvar rejection = DexiePromise.reject;\n\nfunction tempTransaction(db, mode, storeNames, fn) {\n    if (!db._state.openComplete && (!PSD.letThrough)) {\n        if (!db._state.isBeingOpened) {\n            if (!db._options.autoOpen)\n                return rejection(new exceptions.DatabaseClosed());\n            db.open().catch(nop$1);\n        }\n        return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n    }\n    else {\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n        try {\n            trans.create();\n        }\n        catch (ex) {\n            return rejection(ex);\n        }\n        return trans._promise(mode, function (resolve, reject) {\n            return newScope(function () {\n                PSD.trans = trans;\n                return fn(resolve, reject, trans);\n            });\n        }).then(function (result) {\n            return trans._completion.then(function () { return result; });\n        });\n    }\n}\n\nvar DEXIE_VERSION = '3.0.3';\nvar maxString = String.fromCharCode(65535);\nvar minKey = -Infinity;\nvar INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nvar STRING_EXPECTED = \"String expected.\";\nvar connections = [];\nvar isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nvar hasIEDeleteObjectStoreBug = isIEOrEdge;\nvar hangsOnDeleteLargeKeyRange = isIEOrEdge;\nvar dexieStackFrameFilter = function (frame) { return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame); };\nvar DBNAMES_DB = '__dbnames';\nvar READONLY = 'readonly';\nvar READWRITE = 'readwrite';\n\nfunction combine(filter1, filter2) {\n    return filter1 ?\n        filter2 ?\n            function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n            filter1 :\n        filter2;\n}\n\nvar AnyRange = {\n    type: 3          ,\n    lower: -Infinity,\n    lowerOpen: false,\n    upper: [[]],\n    upperOpen: false\n};\n\nfunction workaroundForUndefinedPrimKey(keyPath) {\n    return function (obj) {\n        if (getByKeyPath(obj, keyPath) === undefined) {\n            obj = deepClone(obj);\n            delByKeyPath(obj, keyPath);\n        }\n        return obj;\n    };\n}\n\nvar Table =               (function () {\n    function Table() {\n    }\n    Table.prototype._trans = function (mode, fn, writeLocked) {\n        var trans = this._tx || PSD.trans;\n        var tableName = this.name;\n        function checkTableInTransaction(resolve, reject, trans) {\n            if (!trans.schema[tableName])\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            return fn(trans.idbtrans, trans);\n        }\n        var wasRootExec = beginMicroTickScope();\n        try {\n            return trans && trans.db === this.db ?\n                trans === PSD.trans ?\n                    trans._promise(mode, checkTableInTransaction, writeLocked) :\n                    newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n        }\n        finally {\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n    Table.prototype.get = function (keyOrCrit, cb) {\n        var _this = this;\n        if (keyOrCrit && keyOrCrit.constructor === Object)\n            return this.where(keyOrCrit).first(cb);\n        return this._trans('readonly', function (trans) {\n            return _this.core.get({ trans: trans, key: keyOrCrit })\n                .then(function (res) { return _this.hook.reading.fire(res); });\n        }).then(cb);\n    };\n    Table.prototype.where = function (indexOrCrit) {\n        if (typeof indexOrCrit === 'string')\n            return new this.db.WhereClause(this, indexOrCrit);\n        if (isArray(indexOrCrit))\n            return new this.db.WhereClause(this, \"[\" + indexOrCrit.join('+') + \"]\");\n        var keyPaths = keys(indexOrCrit);\n        if (keyPaths.length === 1)\n            return this\n                .where(keyPaths[0])\n                .equals(indexOrCrit[keyPaths[0]]);\n        var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n            return ix.compound &&\n                keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; }) &&\n                ix.keyPath.every(function (keyPath) { return keyPaths.indexOf(keyPath) >= 0; });\n        })[0];\n        if (compoundIndex && this.db._maxKey !== maxString)\n            return this\n                .where(compoundIndex.name)\n                .equals(compoundIndex.keyPath.map(function (kp) { return indexOrCrit[kp]; }));\n        if (!compoundIndex && debug)\n            console.warn(\"The query \" + JSON.stringify(indexOrCrit) + \" on \" + this.name + \" would benefit of a \" +\n                (\"compound index [\" + keyPaths.join('+') + \"]\"));\n        var idxByName = this.schema.idxByName;\n        var idb = this.db._deps.indexedDB;\n        function equals(a, b) {\n            try {\n                return idb.cmp(a, b) === 0;\n            }\n            catch (e) {\n                return false;\n            }\n        }\n        var _a = keyPaths.reduce(function (_a, keyPath) {\n            var prevIndex = _a[0], prevFilterFn = _a[1];\n            var index = idxByName[keyPath];\n            var value = indexOrCrit[keyPath];\n            return [\n                prevIndex || index,\n                prevIndex || !index ?\n                    combine(prevFilterFn, index && index.multi ?\n                        function (x) {\n                            var prop = getByKeyPath(x, keyPath);\n                            return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                        } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                    : prevFilterFn\n            ];\n        }, [null, null]), idx = _a[0], filterFunction = _a[1];\n        return idx ?\n            this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                .filter(filterFunction) :\n            compoundIndex ?\n                this.filter(filterFunction) :\n                this.where(keyPaths).equals('');\n    };\n    Table.prototype.filter = function (filterFunction) {\n        return this.toCollection().and(filterFunction);\n    };\n    Table.prototype.count = function (thenShortcut) {\n        return this.toCollection().count(thenShortcut);\n    };\n    Table.prototype.offset = function (offset) {\n        return this.toCollection().offset(offset);\n    };\n    Table.prototype.limit = function (numRows) {\n        return this.toCollection().limit(numRows);\n    };\n    Table.prototype.each = function (callback) {\n        return this.toCollection().each(callback);\n    };\n    Table.prototype.toArray = function (thenShortcut) {\n        return this.toCollection().toArray(thenShortcut);\n    };\n    Table.prototype.toCollection = function () {\n        return new this.db.Collection(new this.db.WhereClause(this));\n    };\n    Table.prototype.orderBy = function (index) {\n        return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n            \"[\" + index.join('+') + \"]\" :\n            index));\n    };\n    Table.prototype.reverse = function () {\n        return this.toCollection().reverse();\n    };\n    Table.prototype.mapToClass = function (constructor) {\n        this.schema.mappedClass = constructor;\n        var readHook = function (obj) {\n            if (!obj)\n                return obj;\n            var res = Object.create(constructor.prototype);\n            for (var m in obj)\n                if (hasOwn(obj, m))\n                    try {\n                        res[m] = obj[m];\n                    }\n                    catch (_) { }\n            return res;\n        };\n        if (this.schema.readHook) {\n            this.hook.reading.unsubscribe(this.schema.readHook);\n        }\n        this.schema.readHook = readHook;\n        this.hook(\"reading\", readHook);\n        return constructor;\n    };\n    Table.prototype.defineClass = function () {\n        function Class(content) {\n            extend(this, content);\n        }\n        \n        return this.mapToClass(Class);\n    };\n    Table.prototype.add = function (obj, key) {\n        var _this = this;\n        var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n        var objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', function (trans) {\n            return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n        }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n            .then(function (lastResult) {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n                \n            }\n            return lastResult;\n        });\n    };\n    Table.prototype.update = function (keyOrObject, modifications) {\n        if (typeof modifications !== 'object' || isArray(modifications))\n            throw new exceptions.InvalidArgument(\"Modifications must be an object.\");\n        if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n            keys(modifications).forEach(function (keyPath) {\n                setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n            });\n            var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n            if (key === undefined)\n                return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n            return this.where(\":id\").equals(key).modify(modifications);\n        }\n        else {\n            return this.where(\":id\").equals(keyOrObject).modify(modifications);\n        }\n    };\n    Table.prototype.put = function (obj, key) {\n        var _this = this;\n        var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n        var objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n            .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n            .then(function (lastResult) {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n                \n            }\n            return lastResult;\n        });\n    };\n    Table.prototype.delete = function (key) {\n        var _this = this;\n        return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] }); })\n            .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n    };\n    Table.prototype.clear = function () {\n        var _this = this;\n        return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange }); })\n            .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n    };\n    Table.prototype.bulkGet = function (keys$$1) {\n        var _this = this;\n        return this._trans('readonly', function (trans) {\n            return _this.core.getMany({\n                keys: keys$$1,\n                trans: trans\n            }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n        });\n    };\n    Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n        var _this = this;\n        var keys$$1 = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys$$1 ? undefined : keysOrOptions);\n        var wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', function (trans) {\n            var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            if (keyPath && keys$$1)\n                throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n            if (keys$$1 && keys$$1.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            var numObjects = objects.length;\n            var objectsToAdd = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return _this.core.mutate({ trans: trans, type: 'add', keys: keys$$1, values: objectsToAdd, wantResults: wantResults })\n                .then(function (_a) {\n                var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                var result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(_this.name + \".bulkAdd(): \" + numFailures + \" of \" + numObjects + \" operations failed\", Object.keys(failures).map(function (pos) { return failures[pos]; }));\n            });\n        });\n    };\n    Table.prototype.bulkPut = function (objects, keysOrOptions, options) {\n        var _this = this;\n        var keys$$1 = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys$$1 ? undefined : keysOrOptions);\n        var wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', function (trans) {\n            var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            if (keyPath && keys$$1)\n                throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n            if (keys$$1 && keys$$1.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            var numObjects = objects.length;\n            var objectsToPut = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return _this.core.mutate({ trans: trans, type: 'put', keys: keys$$1, values: objectsToPut, wantResults: wantResults })\n                .then(function (_a) {\n                var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                var result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(_this.name + \".bulkPut(): \" + numFailures + \" of \" + numObjects + \" operations failed\", Object.keys(failures).map(function (pos) { return failures[pos]; }));\n            });\n        });\n    };\n    Table.prototype.bulkDelete = function (keys$$1) {\n        var _this = this;\n        var numKeys = keys$$1.length;\n        return this._trans('readwrite', function (trans) {\n            return _this.core.mutate({ trans: trans, type: 'delete', keys: keys$$1 });\n        }).then(function (_a) {\n            var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n            if (numFailures === 0)\n                return lastResult;\n            throw new BulkError(_this.name + \".bulkDelete(): \" + numFailures + \" of \" + numKeys + \" operations failed\", failures);\n        });\n    };\n    return Table;\n}());\n\nfunction Events(ctx) {\n    var evs = {};\n    var rv = function (eventName, subscriber) {\n        if (subscriber) {\n            var i = arguments.length, args = new Array(i - 1);\n            while (--i)\n                args[i - 1] = arguments[i];\n            evs[eventName].subscribe.apply(null, args);\n            return ctx;\n        }\n        else if (typeof (eventName) === 'string') {\n            return evs[eventName];\n        }\n    };\n    rv.addEventType = add;\n    for (var i = 1, l = arguments.length; i < l; ++i) {\n        add(arguments[i]);\n    }\n    return rv;\n    function add(eventName, chainFunction, defaultFunction) {\n        if (typeof eventName === 'object')\n            return addConfiguredEvents(eventName);\n        if (!chainFunction)\n            chainFunction = reverseStoppableEventChain;\n        if (!defaultFunction)\n            defaultFunction = nop$1;\n        var context = {\n            subscribers: [],\n            fire: defaultFunction,\n            subscribe: function (cb) {\n                if (context.subscribers.indexOf(cb) === -1) {\n                    context.subscribers.push(cb);\n                    context.fire = chainFunction(context.fire, cb);\n                }\n            },\n            unsubscribe: function (cb) {\n                context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n            }\n        };\n        evs[eventName] = rv[eventName] = context;\n        return context;\n    }\n    function addConfiguredEvents(cfg) {\n        keys(cfg).forEach(function (eventName) {\n            var args = cfg[eventName];\n            if (isArray(args)) {\n                add(eventName, cfg[eventName][0], cfg[eventName][1]);\n            }\n            else if (args === 'asap') {\n                var context = add(eventName, mirror, function fire() {\n                    var i = arguments.length, args = new Array(i);\n                    while (i--)\n                        args[i] = arguments[i];\n                    context.subscribers.forEach(function (fn) {\n                        asap(function fireEvent() {\n                            fn.apply(null, args);\n                        });\n                    });\n                });\n            }\n            else\n                throw new exceptions.InvalidArgument(\"Invalid event config\");\n        });\n    }\n}\n\nfunction makeClassConstructor(prototype, constructor) {\n    derive(constructor).from({ prototype: prototype });\n    return constructor;\n}\n\nfunction createTableConstructor(db) {\n    return makeClassConstructor(Table.prototype, function Table$$1(name, tableSchema, trans) {\n        this.db = db;\n        this._tx = trans;\n        this.name = name;\n        this.schema = tableSchema;\n        this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n            \"creating\": [hookCreatingChain, nop$1],\n            \"reading\": [pureFunctionChain, mirror],\n            \"updating\": [hookUpdatingChain, nop$1],\n            \"deleting\": [hookDeletingChain, nop$1]\n        });\n    });\n}\n\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\n    return !(ctx.filter || ctx.algorithm || ctx.or) &&\n        (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n}\nfunction addFilter(ctx, fn) {\n    ctx.filter = combine(ctx.filter, fn);\n}\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\n    var curr = ctx.replayFilter;\n    ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n    ctx.justLimit = isLimitFilter && !curr;\n}\nfunction addMatchFilter(ctx, fn) {\n    ctx.isMatch = combine(ctx.isMatch, fn);\n}\nfunction getIndexOrStore(ctx, coreSchema) {\n    if (ctx.isPrimKey)\n        return coreSchema.primaryKey;\n    var index = coreSchema.getIndexByKeyPath(ctx.index);\n    if (!index)\n        throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n    return index;\n}\nfunction openCursor(ctx, coreTable, trans) {\n    var index = getIndexOrStore(ctx, coreTable.schema);\n    return coreTable.openCursor({\n        trans: trans,\n        values: !ctx.keysOnly,\n        reverse: ctx.dir === 'prev',\n        unique: !!ctx.unique,\n        query: {\n            index: index,\n            range: ctx.range\n        }\n    });\n}\nfunction iter(ctx, fn, coreTrans, coreTable) {\n    var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n    if (!ctx.or) {\n        return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n    }\n    else {\n        var set_1 = {};\n        var union = function (item, cursor, advance) {\n            if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                var primaryKey = cursor.primaryKey;\n                var key = '' + primaryKey;\n                if (key === '[object ArrayBuffer]')\n                    key = '' + new Uint8Array(primaryKey);\n                if (!hasOwn(set_1, key)) {\n                    set_1[key] = true;\n                    fn(item, cursor, advance);\n                }\n            }\n        };\n        return Promise.all([\n            ctx.or._iterate(union, coreTrans),\n            iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n        ]);\n    }\n}\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\n    var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n    var wrappedFn = wrap(mappedFn);\n    return cursorPromise.then(function (cursor) {\n        if (cursor) {\n            return cursor.start(function () {\n                var c = function () { return cursor.continue(); };\n                if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop$1; }, function (e) { cursor.fail(e); c = nop$1; }))\n                    wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                c();\n            });\n        }\n    });\n}\n\nvar Collection =               (function () {\n    function Collection() {\n    }\n    Collection.prototype._read = function (fn, cb) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readonly', fn).then(cb);\n    };\n    Collection.prototype._write = function (fn) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readwrite', fn, \"locked\");\n    };\n    Collection.prototype._addAlgorithm = function (fn) {\n        var ctx = this._ctx;\n        ctx.algorithm = combine(ctx.algorithm, fn);\n    };\n    Collection.prototype._iterate = function (fn, coreTrans) {\n        return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n    };\n    Collection.prototype.clone = function (props$$1) {\n        var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n        if (props$$1)\n            extend(ctx, props$$1);\n        rv._ctx = ctx;\n        return rv;\n    };\n    Collection.prototype.raw = function () {\n        this._ctx.valueMapper = null;\n        return this;\n    };\n    Collection.prototype.each = function (fn) {\n        var ctx = this._ctx;\n        return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n    };\n    Collection.prototype.count = function (cb) {\n        var _this = this;\n        return this._read(function (trans) {\n            var ctx = _this._ctx;\n            var coreTable = ctx.table.core;\n            if (isPlainKeyRange(ctx, true)) {\n                return coreTable.count({\n                    trans: trans,\n                    query: {\n                        index: getIndexOrStore(ctx, coreTable.schema),\n                        range: ctx.range\n                    }\n                }).then(function (count) { return Math.min(count, ctx.limit); });\n            }\n            else {\n                var count = 0;\n                return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                    .then(function () { return count; });\n            }\n        }).then(cb);\n    };\n    Collection.prototype.sortBy = function (keyPath, cb) {\n        var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n        function getval(obj, i) {\n            if (i)\n                return getval(obj[parts[i]], i - 1);\n            return obj[lastPart];\n        }\n        var order = this._ctx.dir === \"next\" ? 1 : -1;\n        function sorter(a, b) {\n            var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n            return aVal < bVal ? -order : aVal > bVal ? order : 0;\n        }\n        return this.toArray(function (a) {\n            return a.sort(sorter);\n        }).then(cb);\n    };\n    Collection.prototype.toArray = function (cb) {\n        var _this = this;\n        return this._read(function (trans) {\n            var ctx = _this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                var valueMapper_1 = ctx.valueMapper;\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans: trans,\n                    limit: ctx.limit,\n                    values: true,\n                    query: {\n                        index: index,\n                        range: ctx.range\n                    }\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return valueMapper_1 ? result.map(valueMapper_1) : result;\n                });\n            }\n            else {\n                var a_1 = [];\n                return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n            }\n        }, cb);\n    };\n    Collection.prototype.offset = function (offset) {\n        var ctx = this._ctx;\n        if (offset <= 0)\n            return this;\n        ctx.offset += offset;\n        if (isPlainKeyRange(ctx)) {\n            addReplayFilter(ctx, function () {\n                var offsetLeft = offset;\n                return function (cursor, advance) {\n                    if (offsetLeft === 0)\n                        return true;\n                    if (offsetLeft === 1) {\n                        --offsetLeft;\n                        return false;\n                    }\n                    advance(function () {\n                        cursor.advance(offsetLeft);\n                        offsetLeft = 0;\n                    });\n                    return false;\n                };\n            });\n        }\n        else {\n            addReplayFilter(ctx, function () {\n                var offsetLeft = offset;\n                return function () { return (--offsetLeft < 0); };\n            });\n        }\n        return this;\n    };\n    Collection.prototype.limit = function (numRows) {\n        this._ctx.limit = Math.min(this._ctx.limit, numRows);\n        addReplayFilter(this._ctx, function () {\n            var rowsLeft = numRows;\n            return function (cursor, advance, resolve) {\n                if (--rowsLeft <= 0)\n                    advance(resolve);\n                return rowsLeft >= 0;\n            };\n        }, true);\n        return this;\n    };\n    Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n        addFilter(this._ctx, function (cursor, advance, resolve) {\n            if (filterFunction(cursor.value)) {\n                advance(resolve);\n                return bIncludeStopEntry;\n            }\n            else {\n                return true;\n            }\n        });\n        return this;\n    };\n    Collection.prototype.first = function (cb) {\n        return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n    };\n    Collection.prototype.last = function (cb) {\n        return this.reverse().first(cb);\n    };\n    Collection.prototype.filter = function (filterFunction) {\n        addFilter(this._ctx, function (cursor) {\n            return filterFunction(cursor.value);\n        });\n        addMatchFilter(this._ctx, filterFunction);\n        return this;\n    };\n    Collection.prototype.and = function (filter) {\n        return this.filter(filter);\n    };\n    Collection.prototype.or = function (indexName) {\n        return new this.db.WhereClause(this._ctx.table, indexName, this);\n    };\n    Collection.prototype.reverse = function () {\n        this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n        if (this._ondirectionchange)\n            this._ondirectionchange(this._ctx.dir);\n        return this;\n    };\n    Collection.prototype.desc = function () {\n        return this.reverse();\n    };\n    Collection.prototype.eachKey = function (cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n    };\n    Collection.prototype.eachUniqueKey = function (cb) {\n        this._ctx.unique = \"unique\";\n        return this.eachKey(cb);\n    };\n    Collection.prototype.eachPrimaryKey = function (cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n    };\n    Collection.prototype.keys = function (cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.key);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    };\n    Collection.prototype.primaryKeys = function (cb) {\n        var ctx = this._ctx;\n        if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n            return this._read(function (trans) {\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans: trans,\n                    values: false,\n                    limit: ctx.limit,\n                    query: {\n                        index: index,\n                        range: ctx.range\n                    }\n                });\n            }).then(function (_a) {\n                var result = _a.result;\n                return result;\n            }).then(cb);\n        }\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.primaryKey);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    };\n    Collection.prototype.uniqueKeys = function (cb) {\n        this._ctx.unique = \"unique\";\n        return this.keys(cb);\n    };\n    Collection.prototype.firstKey = function (cb) {\n        return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n    };\n    Collection.prototype.lastKey = function (cb) {\n        return this.reverse().firstKey(cb);\n    };\n    Collection.prototype.distinct = function () {\n        var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n        if (!idx || !idx.multi)\n            return this;\n        var set = {};\n        addFilter(this._ctx, function (cursor) {\n            var strKey = cursor.primaryKey.toString();\n            var found = hasOwn(set, strKey);\n            set[strKey] = true;\n            return !found;\n        });\n        return this;\n    };\n    Collection.prototype.modify = function (changes) {\n        var _this = this;\n        var ctx = this._ctx;\n        return this._write(function (trans) {\n            var modifyer;\n            if (typeof changes === 'function') {\n                modifyer = changes;\n            }\n            else {\n                var keyPaths = keys(changes);\n                var numKeys = keyPaths.length;\n                modifyer = function (item) {\n                    var anythingModified = false;\n                    for (var i = 0; i < numKeys; ++i) {\n                        var keyPath = keyPaths[i], val = changes[keyPath];\n                        if (getByKeyPath(item, keyPath) !== val) {\n                            setByKeyPath(item, keyPath, val);\n                            anythingModified = true;\n                        }\n                    }\n                    return anythingModified;\n                };\n            }\n            var coreTable = ctx.table.core;\n            var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n            var limit = 'testmode' in Dexie ? 1 : 2000;\n            var cmp = _this.db.core.cmp;\n            var totalFailures = [];\n            var successCount = 0;\n            var failedKeys = [];\n            var applyMutateResult = function (expectedCount, res) {\n                var failures = res.failures, numFailures = res.numFailures;\n                successCount += expectedCount - numFailures;\n                for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n                    var pos = _a[_i];\n                    totalFailures.push(failures[pos]);\n                }\n            };\n            return _this.clone().primaryKeys().then(function (keys$$1) {\n                var nextChunk = function (offset) {\n                    var count = Math.min(limit, keys$$1.length - offset);\n                    return coreTable.getMany({ trans: trans, keys: keys$$1.slice(offset, offset + count) }).then(function (values) {\n                        var addValues = [];\n                        var putValues = [];\n                        var putKeys = outbound ? [] : null;\n                        var deleteKeys = [];\n                        for (var i = 0; i < count; ++i) {\n                            var origValue = values[i];\n                            var ctx_1 = {\n                                value: deepClone(origValue),\n                                primKey: keys$$1[offset + i]\n                            };\n                            if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                if (ctx_1.value == null) {\n                                    deleteKeys.push(keys$$1[offset + i]);\n                                }\n                                else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                    deleteKeys.push(keys$$1[offset + i]);\n                                    addValues.push(ctx_1.value);\n                                }\n                                else {\n                                    putValues.push(ctx_1.value);\n                                    if (outbound)\n                                        putKeys.push(keys$$1[offset + i]);\n                                }\n                            }\n                        }\n                        return Promise.resolve(addValues.length > 0 &&\n                            coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                .then(function (res) {\n                                for (var pos in res.failures) {\n                                    deleteKeys.splice(parseInt(pos), 1);\n                                }\n                                applyMutateResult(addValues.length, res);\n                            })).then(function (res) { return putValues.length > 0 &&\n                            coreTable.mutate({ trans: trans, type: 'put', keys: putKeys, values: putValues })\n                                .then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return deleteKeys.length > 0 &&\n                            coreTable.mutate({ trans: trans, type: 'delete', keys: deleteKeys })\n                                .then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                            return keys$$1.length > offset + count && nextChunk(offset + limit);\n                        });\n                    });\n                };\n                return nextChunk(0).then(function () {\n                    if (totalFailures.length > 0)\n                        throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                    return keys$$1.length;\n                });\n            });\n        });\n    };\n    Collection.prototype.delete = function () {\n        var ctx = this._ctx, range = ctx.range;\n        if (isPlainKeyRange(ctx) &&\n            ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3          ))\n         {\n            return this._write(function (trans) {\n                var primaryKey = ctx.table.core.schema.primaryKey;\n                var coreRange = range;\n                return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                    return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                        .then(function (_a) {\n                        var failures = _a.failures; _a.lastResult; _a.results; var numFailures = _a.numFailures;\n                        if (numFailures)\n                            throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                        return count - numFailures;\n                    });\n                });\n            });\n        }\n        return this.modify(function (value, ctx) { return ctx.value = null; });\n    };\n    return Collection;\n}());\n\nfunction createCollectionConstructor(db) {\n    return makeClassConstructor(Collection.prototype, function Collection$$1(whereClause, keyRangeGenerator) {\n        this.db = db;\n        var keyRange = AnyRange, error = null;\n        if (keyRangeGenerator)\n            try {\n                keyRange = keyRangeGenerator();\n            }\n            catch (ex) {\n                error = ex;\n            }\n        var whereCtx = whereClause._ctx;\n        var table = whereCtx.table;\n        var readingHook = table.hook.reading.fire;\n        this._ctx = {\n            table: table,\n            index: whereCtx.index,\n            isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n            range: keyRange,\n            keysOnly: false,\n            dir: \"next\",\n            unique: \"\",\n            algorithm: null,\n            filter: null,\n            replayFilter: null,\n            justLimit: true,\n            isMatch: null,\n            offset: 0,\n            limit: Infinity,\n            error: error,\n            or: whereCtx.or,\n            valueMapper: readingHook !== mirror ? readingHook : null\n        };\n    });\n}\n\nfunction simpleCompare(a, b) {\n    return a < b ? -1 : a === b ? 0 : 1;\n}\nfunction simpleCompareReverse(a, b) {\n    return a > b ? -1 : a === b ? 0 : 1;\n}\n\nfunction fail(collectionOrWhereClause, err, T) {\n    var collection = collectionOrWhereClause instanceof WhereClause ?\n        new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n        collectionOrWhereClause;\n    collection._ctx.error = T ? new T(err) : new TypeError(err);\n    return collection;\n}\nfunction emptyCollection(whereClause) {\n    return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n}\nfunction upperFactory(dir) {\n    return dir === \"next\" ?\n        function (s) { return s.toUpperCase(); } :\n        function (s) { return s.toLowerCase(); };\n}\nfunction lowerFactory(dir) {\n    return dir === \"next\" ?\n        function (s) { return s.toLowerCase(); } :\n        function (s) { return s.toUpperCase(); };\n}\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n    var length = Math.min(key.length, lowerNeedle.length);\n    var llp = -1;\n    for (var i = 0; i < length; ++i) {\n        var lwrKeyChar = lowerKey[i];\n        if (lwrKeyChar !== lowerNeedle[i]) {\n            if (cmp(key[i], upperNeedle[i]) < 0)\n                return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n            if (cmp(key[i], lowerNeedle[i]) < 0)\n                return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n            if (llp >= 0)\n                return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n            return null;\n        }\n        if (cmp(key[i], lwrKeyChar) < 0)\n            llp = i;\n    }\n    if (length < lowerNeedle.length && dir === \"next\")\n        return key + upperNeedle.substr(key.length);\n    if (length < key.length && dir === \"prev\")\n        return key.substr(0, upperNeedle.length);\n    return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n}\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n    var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n    if (!needles.every(function (s) { return typeof s === 'string'; })) {\n        return fail(whereClause, STRING_EXPECTED);\n    }\n    function initDirection(dir) {\n        upper = upperFactory(dir);\n        lower = lowerFactory(dir);\n        compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n        var needleBounds = needles.map(function (needle) {\n            return { lower: lower(needle), upper: upper(needle) };\n        }).sort(function (a, b) {\n            return compare(a.lower, b.lower);\n        });\n        upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n        lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n        direction = dir;\n        nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n    }\n    initDirection(\"next\");\n    var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n    c._ondirectionchange = function (direction) {\n        initDirection(direction);\n    };\n    var firstPossibleNeedle = 0;\n    c._addAlgorithm(function (cursor, advance, resolve) {\n        var key = cursor.key;\n        if (typeof key !== 'string')\n            return false;\n        var lowerKey = lower(key);\n        if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n            return true;\n        }\n        else {\n            var lowestPossibleCasing = null;\n            for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                if (casing === null && lowestPossibleCasing === null)\n                    firstPossibleNeedle = i + 1;\n                else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                    lowestPossibleCasing = casing;\n                }\n            }\n            if (lowestPossibleCasing !== null) {\n                advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n            }\n            else {\n                advance(resolve);\n            }\n            return false;\n        }\n    });\n    return c;\n}\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\n    return {\n        type: 2            ,\n        lower: lower,\n        upper: upper,\n        lowerOpen: lowerOpen,\n        upperOpen: upperOpen\n    };\n}\nfunction rangeEqual(value) {\n    return {\n        type: 1            ,\n        lower: value,\n        upper: value\n    };\n}\n\nvar WhereClause =               (function () {\n    function WhereClause() {\n    }\n    Object.defineProperty(WhereClause.prototype, \"Collection\", {\n        get: function () {\n            return this._ctx.table.db.Collection;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n        includeLower = includeLower !== false;\n        includeUpper = includeUpper === true;\n        try {\n            if ((this._cmp(lower, upper) > 0) ||\n                (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                return emptyCollection(this);\n            return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n    };\n    WhereClause.prototype.equals = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return rangeEqual(value); });\n    };\n    WhereClause.prototype.above = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(value, undefined, true); });\n    };\n    WhereClause.prototype.aboveOrEqual = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(value, undefined, false); });\n    };\n    WhereClause.prototype.below = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n    };\n    WhereClause.prototype.belowOrEqual = function (value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, function () { return createRange(undefined, value); });\n    };\n    WhereClause.prototype.startsWith = function (str) {\n        if (typeof str !== 'string')\n            return fail(this, STRING_EXPECTED);\n        return this.between(str, str + maxString, true, true);\n    };\n    WhereClause.prototype.startsWithIgnoreCase = function (str) {\n        if (str === \"\")\n            return this.startsWith(str);\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n    };\n    WhereClause.prototype.equalsIgnoreCase = function (str) {\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n    };\n    WhereClause.prototype.anyOfIgnoreCase = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n    };\n    WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n    };\n    WhereClause.prototype.anyOf = function () {\n        var _this = this;\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        var compare = this._cmp;\n        try {\n            set.sort(compare);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n        c._ondirectionchange = function (direction) {\n            compare = (direction === \"next\" ?\n                _this._ascending :\n                _this._descending);\n            set.sort(compare);\n        };\n        var i = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            while (compare(key, set[i]) > 0) {\n                ++i;\n                if (i === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (compare(key, set[i]) === 0) {\n                return true;\n            }\n            else {\n                advance(function () { cursor.continue(set[i]); });\n                return false;\n            }\n        });\n        return c;\n    };\n    WhereClause.prototype.notEqual = function (value) {\n        return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n    };\n    WhereClause.prototype.noneOf = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return new this.Collection(this);\n        try {\n            set.sort(this._ascending);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        var ranges = set.reduce(function (res, val) { return res ?\n            res.concat([[res[res.length - 1][1], val]]) :\n            [[minKey, val]]; }, null);\n        ranges.push([set[set.length - 1], this.db._maxKey]);\n        return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n    };\n    WhereClause.prototype.inAnyRange = function (ranges, options) {\n        var _this = this;\n        var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n        if (ranges.length === 0)\n            return emptyCollection(this);\n        if (!ranges.every(function (range) {\n            return range[0] !== undefined &&\n                range[1] !== undefined &&\n                ascending(range[0], range[1]) <= 0;\n        })) {\n            return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n        }\n        var includeLowers = !options || options.includeLowers !== false;\n        var includeUppers = options && options.includeUppers === true;\n        function addRange(ranges, newRange) {\n            var i = 0, l = ranges.length;\n            for (; i < l; ++i) {\n                var range = ranges[i];\n                if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                    range[0] = min(range[0], newRange[0]);\n                    range[1] = max(range[1], newRange[1]);\n                    break;\n                }\n            }\n            if (i === l)\n                ranges.push(newRange);\n            return ranges;\n        }\n        var sortDirection = ascending;\n        function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n        var set;\n        try {\n            set = ranges.reduce(addRange, []);\n            set.sort(rangeSorter);\n        }\n        catch (ex) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        var rangePos = 0;\n        var keyIsBeyondCurrentEntry = includeUppers ?\n            function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n            function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n        var keyIsBeforeCurrentEntry = includeLowers ?\n            function (key) { return descending(key, set[rangePos][0]) > 0; } :\n            function (key) { return descending(key, set[rangePos][0]) >= 0; };\n        function keyWithinCurrentRange(key) {\n            return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n        }\n        var checkKey = keyIsBeyondCurrentEntry;\n        var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n        c._ondirectionchange = function (direction) {\n            if (direction === \"next\") {\n                checkKey = keyIsBeyondCurrentEntry;\n                sortDirection = ascending;\n            }\n            else {\n                checkKey = keyIsBeforeCurrentEntry;\n                sortDirection = descending;\n            }\n            set.sort(rangeSorter);\n        };\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            while (checkKey(key)) {\n                ++rangePos;\n                if (rangePos === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (keyWithinCurrentRange(key)) {\n                return true;\n            }\n            else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                return false;\n            }\n            else {\n                advance(function () {\n                    if (sortDirection === ascending)\n                        cursor.continue(set[rangePos][0]);\n                    else\n                        cursor.continue(set[rangePos][1]);\n                });\n                return false;\n            }\n        });\n        return c;\n    };\n    WhereClause.prototype.startsWithAnyOf = function () {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (!set.every(function (s) { return typeof s === 'string'; })) {\n            return fail(this, \"startsWithAnyOf() only works with strings\");\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n    };\n    return WhereClause;\n}());\n\nfunction createWhereClauseConstructor(db) {\n    return makeClassConstructor(WhereClause.prototype, function WhereClause$$1(table, index, orCollection) {\n        this.db = db;\n        this._ctx = {\n            table: table,\n            index: index === \":id\" ? null : index,\n            or: orCollection\n        };\n        var indexedDB = db._deps.indexedDB;\n        if (!indexedDB)\n            throw new exceptions.MissingAPI(\"indexedDB API missing\");\n        this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n        this._descending = function (a, b) { return indexedDB.cmp(b, a); };\n        this._max = function (a, b) { return indexedDB.cmp(a, b) > 0 ? a : b; };\n        this._min = function (a, b) { return indexedDB.cmp(a, b) < 0 ? a : b; };\n        this._IDBKeyRange = db._deps.IDBKeyRange;\n    });\n}\n\nfunction safariMultiStoreFix(storeNames) {\n    return storeNames.length === 1 ? storeNames[0] : storeNames;\n}\n\nfunction getMaxKey(IdbKeyRange) {\n    try {\n        IdbKeyRange.only([[]]);\n        return [[]];\n    }\n    catch (e) {\n        return maxString;\n    }\n}\n\nfunction eventRejectHandler(reject) {\n    return wrap(function (event) {\n        preventDefault(event);\n        reject(event.target.error);\n        return false;\n    });\n}\n\n\n\nfunction preventDefault(event) {\n    if (event.stopPropagation)\n        event.stopPropagation();\n    if (event.preventDefault)\n        event.preventDefault();\n}\n\nvar Transaction =               (function () {\n    function Transaction() {\n    }\n    Transaction.prototype._lock = function () {\n        assert(!PSD.global);\n        ++this._reculock;\n        if (this._reculock === 1 && !PSD.global)\n            PSD.lockOwnerFor = this;\n        return this;\n    };\n    Transaction.prototype._unlock = function () {\n        assert(!PSD.global);\n        if (--this._reculock === 0) {\n            if (!PSD.global)\n                PSD.lockOwnerFor = null;\n            while (this._blockedFuncs.length > 0 && !this._locked()) {\n                var fnAndPSD = this._blockedFuncs.shift();\n                try {\n                    usePSD(fnAndPSD[1], fnAndPSD[0]);\n                }\n                catch (e) { }\n            }\n        }\n        return this;\n    };\n    Transaction.prototype._locked = function () {\n        return this._reculock && PSD.lockOwnerFor !== this;\n    };\n    Transaction.prototype.create = function (idbtrans) {\n        var _this = this;\n        if (!this.mode)\n            return this;\n        var idbdb = this.db.idbdb;\n        var dbOpenError = this.db._state.dbOpenError;\n        assert(!this.idbtrans);\n        if (!idbtrans && !idbdb) {\n            switch (dbOpenError && dbOpenError.name) {\n                case \"DatabaseClosedError\":\n                    throw new exceptions.DatabaseClosed(dbOpenError);\n                case \"MissingAPIError\":\n                    throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                default:\n                    throw new exceptions.OpenFailed(dbOpenError);\n            }\n        }\n        if (!this.active)\n            throw new exceptions.TransactionInactive();\n        assert(this._completion._state === null);\n        idbtrans = this.idbtrans = idbtrans || idbdb.transaction(safariMultiStoreFix(this.storeNames), this.mode);\n        idbtrans.onerror = wrap(function (ev) {\n            preventDefault(ev);\n            _this._reject(idbtrans.error);\n        });\n        idbtrans.onabort = wrap(function (ev) {\n            preventDefault(ev);\n            _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n            _this.active = false;\n            _this.on(\"abort\").fire(ev);\n        });\n        idbtrans.oncomplete = wrap(function () {\n            _this.active = false;\n            _this._resolve();\n        });\n        return this;\n    };\n    Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n        var _this = this;\n        if (mode === 'readwrite' && this.mode !== 'readwrite')\n            return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n        if (!this.active)\n            return rejection(new exceptions.TransactionInactive());\n        if (this._locked()) {\n            return new DexiePromise(function (resolve, reject) {\n                _this._blockedFuncs.push([function () {\n                        _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                    }, PSD]);\n            });\n        }\n        else if (bWriteLock) {\n            return newScope(function () {\n                var p = new DexiePromise(function (resolve, reject) {\n                    _this._lock();\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p.finally(function () { return _this._unlock(); });\n                p._lib = true;\n                return p;\n            });\n        }\n        else {\n            var p = new DexiePromise(function (resolve, reject) {\n                var rv = fn(resolve, reject, _this);\n                if (rv && rv.then)\n                    rv.then(resolve, reject);\n            });\n            p._lib = true;\n            return p;\n        }\n    };\n    Transaction.prototype._root = function () {\n        return this.parent ? this.parent._root() : this;\n    };\n    Transaction.prototype.waitFor = function (promiseLike) {\n        var root = this._root();\n        var promise = DexiePromise.resolve(promiseLike);\n        if (root._waitingFor) {\n            root._waitingFor = root._waitingFor.then(function () { return promise; });\n        }\n        else {\n            root._waitingFor = promise;\n            root._waitingQueue = [];\n            var store = root.idbtrans.objectStore(root.storeNames[0]);\n            (function spin() {\n                ++root._spinCount;\n                while (root._waitingQueue.length)\n                    (root._waitingQueue.shift())();\n                if (root._waitingFor)\n                    store.get(-Infinity).onsuccess = spin;\n            }());\n        }\n        var currentWaitPromise = root._waitingFor;\n        return new DexiePromise(function (resolve, reject) {\n            promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                if (root._waitingFor === currentWaitPromise) {\n                    root._waitingFor = null;\n                }\n            });\n        });\n    };\n    Transaction.prototype.abort = function () {\n        this.active && this._reject(new exceptions.Abort());\n        this.active = false;\n    };\n    Transaction.prototype.table = function (tableName) {\n        var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n        if (hasOwn(memoizedTables, tableName))\n            return memoizedTables[tableName];\n        var tableSchema = this.schema[tableName];\n        if (!tableSchema) {\n            throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n        }\n        var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n        transactionBoundTable.core = this.db.core.table(tableName);\n        memoizedTables[tableName] = transactionBoundTable;\n        return transactionBoundTable;\n    };\n    return Transaction;\n}());\n\nfunction createTransactionConstructor(db) {\n    return makeClassConstructor(Transaction.prototype, function Transaction$$1(mode, storeNames, dbschema, parent) {\n        var _this = this;\n        this.db = db;\n        this.mode = mode;\n        this.storeNames = storeNames;\n        this.schema = dbschema;\n        this.idbtrans = null;\n        this.on = Events(this, \"complete\", \"error\", \"abort\");\n        this.parent = parent || null;\n        this.active = true;\n        this._reculock = 0;\n        this._blockedFuncs = [];\n        this._resolve = null;\n        this._reject = null;\n        this._waitingFor = null;\n        this._waitingQueue = null;\n        this._spinCount = 0;\n        this._completion = new DexiePromise(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n        this._completion.then(function () {\n            _this.active = false;\n            _this.on.complete.fire();\n        }, function (e) {\n            var wasActive = _this.active;\n            _this.active = false;\n            _this.on.error.fire(e);\n            _this.parent ?\n                _this.parent._reject(e) :\n                wasActive && _this.idbtrans && _this.idbtrans.abort();\n            return rejection(e);\n        });\n    });\n}\n\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n    return {\n        name: name,\n        keyPath: keyPath,\n        unique: unique,\n        multi: multi,\n        auto: auto,\n        compound: compound,\n        src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n    };\n}\nfunction nameFromKeyPath(keyPath) {\n    return typeof keyPath === 'string' ?\n        keyPath :\n        keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n}\n\nfunction createTableSchema(name, primKey, indexes) {\n    return {\n        name: name,\n        primKey: primKey,\n        indexes: indexes,\n        mappedClass: null,\n        idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; })\n    };\n}\n\nfunction getKeyExtractor(keyPath) {\n    if (keyPath == null) {\n        return function () { return undefined; };\n    }\n    else if (typeof keyPath === 'string') {\n        return getSinglePathKeyExtractor(keyPath);\n    }\n    else {\n        return function (obj) { return getByKeyPath(obj, keyPath); };\n    }\n}\nfunction getSinglePathKeyExtractor(keyPath) {\n    var split = keyPath.split('.');\n    if (split.length === 1) {\n        return function (obj) { return obj[keyPath]; };\n    }\n    else {\n        return function (obj) { return getByKeyPath(obj, keyPath); };\n    }\n}\n\nfunction getEffectiveKeys(primaryKey, req) {\n    if (req.type === 'delete')\n        return req.keys;\n    return req.keys || req.values.map(primaryKey.extractKey);\n}\nfunction getExistingValues(table, req, effectiveKeys) {\n    return req.type === 'add' ? Promise.resolve(new Array(req.values.length)) :\n        table.getMany({ trans: req.trans, keys: effectiveKeys });\n}\n\nfunction arrayify(arrayLike) {\n    return [].slice.call(arrayLike);\n}\n\nvar _id_counter = 0;\nfunction getKeyPathAlias(keyPath) {\n    return keyPath == null ?\n        \":id\" :\n        typeof keyPath === 'string' ?\n            keyPath :\n            \"[\" + keyPath.join('+') + \"]\";\n}\nfunction createDBCore(db, indexedDB, IdbKeyRange, tmpTrans) {\n    var cmp = indexedDB.cmp.bind(indexedDB);\n    function extractSchema(db, trans) {\n        var tables = arrayify(db.objectStoreNames);\n        return {\n            schema: {\n                name: db.name,\n                tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                    var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                    var compound = isArray(keyPath);\n                    var outbound = keyPath == null;\n                    var indexByKeyPath = {};\n                    var result = {\n                        name: store.name,\n                        primaryKey: {\n                            name: null,\n                            isPrimaryKey: true,\n                            outbound: outbound,\n                            compound: compound,\n                            keyPath: keyPath,\n                            autoIncrement: autoIncrement,\n                            unique: true,\n                            extractKey: getKeyExtractor(keyPath)\n                        },\n                        indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                            .map(function (index) {\n                            var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                            var compound = isArray(keyPath);\n                            var result = {\n                                name: name,\n                                compound: compound,\n                                keyPath: keyPath,\n                                unique: unique,\n                                multiEntry: multiEntry,\n                                extractKey: getKeyExtractor(keyPath)\n                            };\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                            return result;\n                        }),\n                        getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                    };\n                    indexByKeyPath[\":id\"] = result.primaryKey;\n                    if (keyPath != null) {\n                        indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                    }\n                    return result;\n                })\n            },\n            hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                    !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                    [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n        };\n    }\n    function makeIDBKeyRange(range) {\n        if (range.type === 3          )\n            return null;\n        if (range.type === 4            )\n            throw new Error(\"Cannot convert never type to IDBKeyRange\");\n        var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n        var idbRange = lower === undefined ?\n            upper === undefined ?\n                null :\n                IdbKeyRange.upperBound(upper, !!upperOpen) :\n            upper === undefined ?\n                IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n        return idbRange;\n    }\n    function createDbCoreTable(tableSchema) {\n        var tableName = tableSchema.name;\n        function mutate(_a) {\n            var trans = _a.trans, type = _a.type, keys$$1 = _a.keys, values = _a.values, range = _a.range, wantResults = _a.wantResults;\n            return new Promise(function (resolve, reject) {\n                resolve = wrap(resolve);\n                var store = trans.objectStore(tableName);\n                var outbound = store.keyPath == null;\n                var isAddOrPut = type === \"put\" || type === \"add\";\n                if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                    throw new Error(\"Invalid operation type: \" + type);\n                var length = (keys$$1 || values || { length: 1 }).length;\n                if (keys$$1 && values && keys$$1.length !== values.length) {\n                    throw new Error(\"Given keys array must have same length as given values array.\");\n                }\n                if (length === 0)\n                    return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                var results = wantResults && __spreadArrays((keys$$1 ?\n                    keys$$1 :\n                    getEffectiveKeys(tableSchema.primaryKey, { type: type, keys: keys$$1, values: values })));\n                var req;\n                var failures = [];\n                var numFailures = 0;\n                var errorHandler = function (event) {\n                    ++numFailures;\n                    preventDefault(event);\n                    if (results)\n                        results[event.target._reqno] = undefined;\n                    failures[event.target._reqno] = event.target.error;\n                };\n                var setResult = function (_a) {\n                    var target = _a.target;\n                    results[target._reqno] = target.result;\n                };\n                if (type === 'deleteRange') {\n                    if (range.type === 4            )\n                        return resolve({ numFailures: numFailures, failures: failures, results: results, lastResult: undefined });\n                    if (range.type === 3          )\n                        req = store.clear();\n                    else\n                        req = store.delete(makeIDBKeyRange(range));\n                }\n                else {\n                    var _a = isAddOrPut ?\n                        outbound ?\n                            [values, keys$$1] :\n                            [values, null] :\n                        [keys$$1, null], args1 = _a[0], args2 = _a[1];\n                    if (isAddOrPut) {\n                        for (var i = 0; i < length; ++i) {\n                            req = (args2 && args2[i] !== undefined ?\n                                store[type](args1[i], args2[i]) :\n                                store[type](args1[i]));\n                            req._reqno = i;\n                            if (results && results[i] === undefined) {\n                                req.onsuccess = setResult;\n                            }\n                            req.onerror = errorHandler;\n                        }\n                    }\n                    else {\n                        for (var i = 0; i < length; ++i) {\n                            req = store[type](args1[i]);\n                            req._reqno = i;\n                            req.onerror = errorHandler;\n                        }\n                    }\n                }\n                var done = function (event) {\n                    var lastResult = event.target.result;\n                    if (results)\n                        results[length - 1] = lastResult;\n                    resolve({\n                        numFailures: numFailures,\n                        failures: failures,\n                        results: results,\n                        lastResult: lastResult\n                    });\n                };\n                req.onerror = function (event) {\n                    errorHandler(event);\n                    done(event);\n                };\n                req.onsuccess = done;\n            });\n        }\n        function openCursor(_a) {\n            var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n            return new Promise(function (resolve, reject) {\n                resolve = wrap(resolve);\n                var index = query.index, range = query.range;\n                var store = trans.objectStore(tableName);\n                var source = index.isPrimaryKey ?\n                    store :\n                    store.index(index.name);\n                var direction = reverse ?\n                    unique ?\n                        \"prevunique\" :\n                        \"prev\" :\n                    unique ?\n                        \"nextunique\" :\n                        \"next\";\n                var req = values || !('openKeyCursor' in source) ?\n                    source.openCursor(makeIDBKeyRange(range), direction) :\n                    source.openKeyCursor(makeIDBKeyRange(range), direction);\n                req.onerror = eventRejectHandler(reject);\n                req.onsuccess = wrap(function (ev) {\n                    var cursor = req.result;\n                    if (!cursor) {\n                        resolve(null);\n                        return;\n                    }\n                    cursor.___id = ++_id_counter;\n                    cursor.done = false;\n                    var _cursorContinue = cursor.continue.bind(cursor);\n                    var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                    if (_cursorContinuePrimaryKey)\n                        _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                    var _cursorAdvance = cursor.advance.bind(cursor);\n                    var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                    var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                    cursor.trans = trans;\n                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                    cursor.fail = wrap(reject);\n                    cursor.next = function () {\n                        var _this = this;\n                        var gotOne = 1;\n                        return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                    };\n                    cursor.start = function (callback) {\n                        var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                            resolveIteration = wrap(resolveIteration);\n                            req.onerror = eventRejectHandler(rejectIteration);\n                            cursor.fail = rejectIteration;\n                            cursor.stop = function (value) {\n                                cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                resolveIteration(value);\n                            };\n                        });\n                        var guardedCallback = function () {\n                            if (req.result) {\n                                try {\n                                    callback();\n                                }\n                                catch (err) {\n                                    cursor.fail(err);\n                                }\n                            }\n                            else {\n                                cursor.done = true;\n                                cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                cursor.stop();\n                            }\n                        };\n                        req.onsuccess = wrap(function (ev) {\n                            req.onsuccess = guardedCallback;\n                            guardedCallback();\n                        });\n                        cursor.continue = _cursorContinue;\n                        cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                        cursor.advance = _cursorAdvance;\n                        guardedCallback();\n                        return iterationPromise;\n                    };\n                    resolve(cursor);\n                }, reject);\n            });\n        }\n        function query(hasGetAll) {\n            return function (request) {\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                    var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ? store : store.index(index.name);\n                    var idbKeyRange = makeIDBKeyRange(range);\n                    if (limit === 0)\n                        return resolve({ result: [] });\n                    if (hasGetAll) {\n                        var req = values ?\n                            source.getAll(idbKeyRange, nonInfinitLimit) :\n                            source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                        req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                    else {\n                        var count_1 = 0;\n                        var req_1 = values || !('openKeyCursor' in source) ?\n                            source.openCursor(idbKeyRange) :\n                            source.openKeyCursor(idbKeyRange);\n                        var result_1 = [];\n                        req_1.onsuccess = function (event) {\n                            var cursor = req_1.result;\n                            if (!cursor)\n                                return resolve({ result: result_1 });\n                            result_1.push(values ? cursor.value : cursor.primaryKey);\n                            if (++count_1 === limit)\n                                return resolve({ result: result_1 });\n                            cursor.continue();\n                        };\n                        req_1.onerror = eventRejectHandler(reject);\n                    }\n                });\n            };\n        }\n        return {\n            name: tableName,\n            schema: tableSchema,\n            mutate: mutate,\n            getMany: function (_a) {\n                var trans = _a.trans, keys$$1 = _a.keys;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var length = keys$$1.length;\n                    var result = new Array(length);\n                    var keyCount = 0;\n                    var callbackCount = 0;\n                    var req;\n                    var successHandler = function (event) {\n                        var req = event.target;\n                        if ((result[req._pos] = req.result) != null)\n                            ;\n                        if (++callbackCount === keyCount)\n                            resolve(result);\n                    };\n                    var errorHandler = eventRejectHandler(reject);\n                    for (var i = 0; i < length; ++i) {\n                        var key = keys$$1[i];\n                        if (key != null) {\n                            req = store.get(keys$$1[i]);\n                            req._pos = i;\n                            req.onsuccess = successHandler;\n                            req.onerror = errorHandler;\n                            ++keyCount;\n                        }\n                    }\n                    if (keyCount === 0)\n                        resolve(result);\n                });\n            },\n            get: function (_a) {\n                var trans = _a.trans, key = _a.key;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var req = store.get(key);\n                    req.onsuccess = function (event) { return resolve(event.target.result); };\n                    req.onerror = eventRejectHandler(reject);\n                });\n            },\n            query: query(hasGetAll),\n            openCursor: openCursor,\n            count: function (_a) {\n                var query = _a.query, trans = _a.trans;\n                var index = query.index, range = query.range;\n                return new Promise(function (resolve, reject) {\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ? store : store.index(index.name);\n                    var idbKeyRange = makeIDBKeyRange(range);\n                    var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                    req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                    req.onerror = eventRejectHandler(reject);\n                });\n            }\n        };\n    }\n    var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n    var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n    var tableMap = {};\n    tables.forEach(function (table) { return tableMap[table.name] = table; });\n    return {\n        stack: \"dbcore\",\n        transaction: db.transaction.bind(db),\n        table: function (name) {\n            var result = tableMap[name];\n            if (!result)\n                throw new Error(\"Table '\" + name + \"' not found\");\n            return tableMap[name];\n        },\n        cmp: cmp,\n        MIN_KEY: -Infinity,\n        MAX_KEY: getMaxKey(IdbKeyRange),\n        schema: schema\n    };\n}\n\nfunction createMiddlewareStack(stackImpl, middlewares) {\n    return middlewares.reduce(function (down, _a) {\n        var create = _a.create;\n        return (__assign(__assign({}, down), create(down)));\n    }, stackImpl);\n}\nfunction createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n    var IDBKeyRange = _a.IDBKeyRange, indexedDB = _a.indexedDB;\n    var dbcore = createMiddlewareStack(createDBCore(idbdb, indexedDB, IDBKeyRange, tmpTrans), middlewares.dbcore);\n    return {\n        dbcore: dbcore\n    };\n}\nfunction generateMiddlewareStacks(db, tmpTrans) {\n    var idbdb = tmpTrans.db;\n    var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n    db.core = stacks.dbcore;\n    db.tables.forEach(function (table) {\n        var tableName = table.name;\n        if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n            table.core = db.core.table(tableName);\n            if (db[tableName] instanceof db.Table) {\n                db[tableName].core = table.core;\n            }\n        }\n    });\n}\n\nfunction setApiOnPlace(db, objs, tableNames, dbschema) {\n    tableNames.forEach(function (tableName) {\n        var schema = dbschema[tableName];\n        objs.forEach(function (obj) {\n            var propDesc = getPropertyDescriptor(obj, tableName);\n            if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                    setProp(obj, tableName, {\n                        get: function () { return this.table(tableName); },\n                        set: function (value) {\n                            defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n                        }\n                    });\n                }\n                else {\n                    obj[tableName] = new db.Table(tableName, schema);\n                }\n            }\n        });\n    });\n}\nfunction removeTablesApi(db, objs) {\n    objs.forEach(function (obj) {\n        for (var key in obj) {\n            if (obj[key] instanceof db.Table)\n                delete obj[key];\n        }\n    });\n}\nfunction lowerVersionFirst(a, b) {\n    return a._cfg.version - b._cfg.version;\n}\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n    var globalSchema = db._dbSchema;\n    var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n    trans.create(idbUpgradeTrans);\n    trans._completion.catch(reject);\n    var rejectTransaction = trans._reject.bind(trans);\n    var transless = PSD.transless || PSD;\n    newScope(function () {\n        PSD.trans = trans;\n        PSD.transless = transless;\n        if (oldVersion === 0) {\n            keys(globalSchema).forEach(function (tableName) {\n                createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n            });\n            generateMiddlewareStacks(db, idbUpgradeTrans);\n            DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n        }\n        else\n            updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n    });\n}\nfunction updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans) {\n    var queue = [];\n    var versions = db._versions;\n    var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n    var anyContentUpgraderHasRun = false;\n    var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n    versToRun.forEach(function (version) {\n        queue.push(function () {\n            var oldSchema = globalSchema;\n            var newSchema = version._cfg.dbschema;\n            adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n            adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n            globalSchema = db._dbSchema = newSchema;\n            var diff = getSchemaDiff(oldSchema, newSchema);\n            diff.add.forEach(function (tuple) {\n                createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n            });\n            diff.change.forEach(function (change) {\n                if (change.recreate) {\n                    throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                }\n                else {\n                    var store_1 = idbUpgradeTrans.objectStore(change.name);\n                    change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                    change.change.forEach(function (idx) {\n                        store_1.deleteIndex(idx.name);\n                        addIndex(store_1, idx);\n                    });\n                    change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                }\n            });\n            var contentUpgrade = version._cfg.contentUpgrade;\n            if (contentUpgrade && version._cfg.version > oldVersion) {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                trans._memoizedTables = {};\n                anyContentUpgraderHasRun = true;\n                var upgradeSchema_1 = shallowClone(newSchema);\n                diff.del.forEach(function (table) {\n                    upgradeSchema_1[table] = oldSchema[table];\n                });\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                trans.schema = upgradeSchema_1;\n                var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n                if (contentUpgradeIsAsync_1) {\n                    incrementExpectedAwaits();\n                }\n                var returnValue_1;\n                var promiseFollowed = DexiePromise.follow(function () {\n                    returnValue_1 = contentUpgrade(trans);\n                    if (returnValue_1) {\n                        if (contentUpgradeIsAsync_1) {\n                            var decrementor = decrementExpectedAwaits.bind(null, null);\n                            returnValue_1.then(decrementor, decrementor);\n                        }\n                    }\n                });\n                return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                    DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n            }\n        });\n        queue.push(function (idbtrans) {\n            if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                var newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n            }\n            removeTablesApi(db, [db.Transaction.prototype]);\n            setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n            trans.schema = db._dbSchema;\n        });\n    });\n    function runQueue() {\n        return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n            DexiePromise.resolve();\n    }\n    return runQueue().then(function () {\n        createMissingTables(globalSchema, idbUpgradeTrans);\n    });\n}\nfunction getSchemaDiff(oldSchema, newSchema) {\n    var diff = {\n        del: [],\n        add: [],\n        change: []\n    };\n    var table;\n    for (table in oldSchema) {\n        if (!newSchema[table])\n            diff.del.push(table);\n    }\n    for (table in newSchema) {\n        var oldDef = oldSchema[table], newDef = newSchema[table];\n        if (!oldDef) {\n            diff.add.push([table, newDef]);\n        }\n        else {\n            var change = {\n                name: table,\n                def: newDef,\n                recreate: false,\n                del: [],\n                add: [],\n                change: []\n            };\n            if ((\n            '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n             {\n                change.recreate = true;\n                diff.change.push(change);\n            }\n            else {\n                var oldIndexes = oldDef.idxByName;\n                var newIndexes = newDef.idxByName;\n                var idxName = void 0;\n                for (idxName in oldIndexes) {\n                    if (!newIndexes[idxName])\n                        change.del.push(idxName);\n                }\n                for (idxName in newIndexes) {\n                    var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                    if (!oldIdx)\n                        change.add.push(newIdx);\n                    else if (oldIdx.src !== newIdx.src)\n                        change.change.push(newIdx);\n                }\n                if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                    diff.change.push(change);\n                }\n            }\n        }\n    }\n    return diff;\n}\nfunction createTable(idbtrans, tableName, primKey, indexes) {\n    var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n        { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n        { autoIncrement: primKey.auto });\n    indexes.forEach(function (idx) { return addIndex(store, idx); });\n    return store;\n}\nfunction createMissingTables(newSchema, idbtrans) {\n    keys(newSchema).forEach(function (tableName) {\n        if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n            createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n        }\n    });\n}\nfunction deleteRemovedTables(newSchema, idbtrans) {\n    for (var i = 0; i < idbtrans.db.objectStoreNames.length; ++i) {\n        var storeName = idbtrans.db.objectStoreNames[i];\n        if (newSchema[storeName] == null) {\n            idbtrans.db.deleteObjectStore(storeName);\n        }\n    }\n}\nfunction addIndex(store, idx) {\n    store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n}\nfunction buildGlobalSchema(db, idbdb, tmpTrans) {\n    var globalSchema = {};\n    var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n    dbStoreNames.forEach(function (storeName) {\n        var store = tmpTrans.objectStore(storeName);\n        var keyPath = store.keyPath;\n        var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n        var indexes = [];\n        for (var j = 0; j < store.indexNames.length; ++j) {\n            var idbindex = store.index(store.indexNames[j]);\n            keyPath = idbindex.keyPath;\n            var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n            indexes.push(index);\n        }\n        globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n    });\n    return globalSchema;\n}\nfunction readGlobalSchema(db, idbdb, tmpTrans) {\n    db.verno = idbdb.version / 10;\n    var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n    db._storeNames = slice(idbdb.objectStoreNames, 0);\n    setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n}\nfunction verifyInstalledSchema(db, tmpTrans) {\n    var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n    var diff = getSchemaDiff(installedSchema, db._dbSchema);\n    return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n}\nfunction adjustToExistingIndexNames(db, schema, idbtrans) {\n    var storeNames = idbtrans.db.objectStoreNames;\n    for (var i = 0; i < storeNames.length; ++i) {\n        var storeName = storeNames[i];\n        var store = idbtrans.objectStore(storeName);\n        db._hasGetAll = 'getAll' in store;\n        for (var j = 0; j < store.indexNames.length; ++j) {\n            var indexName = store.indexNames[j];\n            var keyPath = store.index(indexName).keyPath;\n            var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n            if (schema[storeName]) {\n                var indexSpec = schema[storeName].idxByName[dexieName];\n                if (indexSpec) {\n                    indexSpec.name = indexName;\n                    delete schema[storeName].idxByName[dexieName];\n                    schema[storeName].idxByName[indexName] = indexSpec;\n                }\n            }\n        }\n    }\n    if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n        _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n        db._hasGetAll = false;\n    }\n}\nfunction parseIndexSyntax(primKeyAndIndexes) {\n    return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n        index = index.trim();\n        var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n        var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n        return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n    });\n}\n\nvar Version =               (function () {\n    function Version() {\n    }\n    Version.prototype._parseStoresSpec = function (stores, outSchema) {\n        keys(stores).forEach(function (tableName) {\n            if (stores[tableName] !== null) {\n                var indexes = parseIndexSyntax(stores[tableName]);\n                var primKey = indexes.shift();\n                if (primKey.multi)\n                    throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                indexes.forEach(function (idx) {\n                    if (idx.auto)\n                        throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                    if (!idx.keyPath)\n                        throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                });\n                outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n            }\n        });\n    };\n    Version.prototype.stores = function (stores) {\n        var db = this.db;\n        this._cfg.storesSource = this._cfg.storesSource ?\n            extend(this._cfg.storesSource, stores) :\n            stores;\n        var versions = db._versions;\n        var storesSpec = {};\n        var dbschema = {};\n        versions.forEach(function (version) {\n            extend(storesSpec, version._cfg.storesSource);\n            dbschema = (version._cfg.dbschema = {});\n            version._parseStoresSpec(storesSpec, dbschema);\n        });\n        db._dbSchema = dbschema;\n        removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n        setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n        db._storeNames = keys(dbschema);\n        return this;\n    };\n    Version.prototype.upgrade = function (upgradeFunction) {\n        this._cfg.contentUpgrade = upgradeFunction;\n        return this;\n    };\n    return Version;\n}());\n\nfunction createVersionConstructor(db) {\n    return makeClassConstructor(Version.prototype, function Version$$1(versionNumber) {\n        this.db = db;\n        this._cfg = {\n            version: versionNumber,\n            storesSource: null,\n            dbschema: {},\n            tables: {},\n            contentUpgrade: null\n        };\n    });\n}\n\nvar databaseEnumerator;\nfunction DatabaseEnumerator(indexedDB) {\n    var hasDatabasesNative = indexedDB && typeof indexedDB.databases === 'function';\n    var dbNamesTable;\n    if (!hasDatabasesNative) {\n        var db = new Dexie(DBNAMES_DB, { addons: [] });\n        db.version(1).stores({ dbnames: 'name' });\n        dbNamesTable = db.table('dbnames');\n    }\n    return {\n        getDatabaseNames: function () {\n            return hasDatabasesNative\n                ?\n                    DexiePromise.resolve(indexedDB.databases()).then(function (infos) { return infos\n                        .map(function (info) { return info.name; })\n                        .filter(function (name) { return name !== DBNAMES_DB; }); })\n                :\n                    dbNamesTable.toCollection().primaryKeys();\n        },\n        add: function (name) {\n            return !hasDatabasesNative && name !== DBNAMES_DB && dbNamesTable.put({ name: name }).catch(nop$1);\n        },\n        remove: function (name) {\n            return !hasDatabasesNative && name !== DBNAMES_DB && dbNamesTable.delete(name).catch(nop$1);\n        }\n    };\n}\nfunction initDatabaseEnumerator(indexedDB) {\n    try {\n        databaseEnumerator = DatabaseEnumerator(indexedDB);\n    }\n    catch (e) { }\n}\n\nfunction vip(fn) {\n    return newScope(function () {\n        PSD.letThrough = true;\n        return fn();\n    });\n}\n\nfunction dexieOpen(db) {\n    var state = db._state;\n    var indexedDB = db._deps.indexedDB;\n    if (state.isBeingOpened || db.idbdb)\n        return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n            rejection(state.dbOpenError) :\n            db; });\n    debug && (state.openCanceller._stackHolder = getErrorWithStack());\n    state.isBeingOpened = true;\n    state.dbOpenError = null;\n    state.openComplete = false;\n    var resolveDbReady = state.dbReadyResolve,\n    upgradeTransaction = null;\n    return DexiePromise.race([state.openCanceller, new DexiePromise(function (resolve, reject) {\n            if (!indexedDB)\n                throw new exceptions.MissingAPI(\"indexedDB API not found. If using IE10+, make sure to run your code on a server URL \" +\n                    \"(not locally). If using old Safari versions, make sure to include indexedDB polyfill.\");\n            var dbName = db.name;\n            var req = state.autoSchema ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, Math.round(db.verno * 10));\n            if (!req)\n                throw new exceptions.MissingAPI(\"IndexedDB API not available\");\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(function (e) {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    var delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(function () {\n                        reject(new exceptions.NoSuchDatabase(\"Database \" + dbName + \" doesnt exist\"));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    db.idbdb = req.result;\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(function () {\n                upgradeTransaction = null;\n                var idbdb = db.idbdb = req.result;\n                var objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else {\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                            if (!verifyInstalledSchema(db, tmpTrans)) {\n                                console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\");\n                            }\n                        }\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(function (ev) {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                databaseEnumerator.add(dbName);\n                resolve();\n            }, reject);\n        })]).then(function () {\n        state.onReadyBeingFired = [];\n        return DexiePromise.resolve(vip(db.on.ready.fire)).then(function fireRemainders() {\n            if (state.onReadyBeingFired.length > 0) {\n                var remainders = state.onReadyBeingFired.reduce(promisableChain$1, nop$1);\n                state.onReadyBeingFired = [];\n                return DexiePromise.resolve(vip(remainders)).then(fireRemainders);\n            }\n        });\n    }).finally(function () {\n        state.onReadyBeingFired = null;\n    }).then(function () {\n        state.isBeingOpened = false;\n        return db;\n    }).catch(function (err) {\n        try {\n            upgradeTransaction && upgradeTransaction.abort();\n        }\n        catch (e) { }\n        state.isBeingOpened = false;\n        db.close();\n        state.dbOpenError = err;\n        return rejection(state.dbOpenError);\n    }).finally(function () {\n        state.openComplete = true;\n        resolveDbReady();\n    });\n}\n\nfunction awaitIterator(iterator) {\n    var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n    function step(getNext) {\n        return function (val) {\n            var next = getNext(val), value = next.value;\n            return next.done ? value :\n                (!value || typeof value.then !== 'function' ?\n                    isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                    value.then(onSuccess, onError));\n        };\n    }\n    return step(callNext)();\n}\n\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n    var i = arguments.length;\n    if (i < 2)\n        throw new exceptions.InvalidArgument(\"Too few arguments\");\n    var args = new Array(i - 1);\n    while (--i)\n        args[i - 1] = arguments[i];\n    scopeFunc = args.pop();\n    var tables = flatten(args);\n    return [mode, tables, scopeFunc];\n}\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n    return DexiePromise.resolve().then(function () {\n        var transless = PSD.transless || PSD;\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n        var zoneProps = {\n            trans: trans,\n            transless: transless\n        };\n        if (parentTransaction) {\n            trans.idbtrans = parentTransaction.idbtrans;\n        }\n        else {\n            trans.create();\n        }\n        var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n        if (scopeFuncIsAsync) {\n            incrementExpectedAwaits();\n        }\n        var returnValue;\n        var promiseFollowed = DexiePromise.follow(function () {\n            returnValue = scopeFunc.call(trans, trans);\n            if (returnValue) {\n                if (scopeFuncIsAsync) {\n                    var decrementor = decrementExpectedAwaits.bind(null, null);\n                    returnValue.then(decrementor, decrementor);\n                }\n                else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                    returnValue = awaitIterator(returnValue);\n                }\n            }\n        }, zoneProps);\n        return (returnValue && typeof returnValue.then === 'function' ?\n            DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n                x\n                : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n            : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n            if (parentTransaction)\n                trans._resolve();\n            return trans._completion.then(function () { return x; });\n        }).catch(function (e) {\n            trans._reject(e);\n            return rejection(e);\n        });\n    });\n}\n\nfunction pad(a, value, count) {\n    var result = isArray(a) ? a.slice() : [a];\n    for (var i = 0; i < count; ++i)\n        result.push(value);\n    return result;\n}\nfunction createVirtualIndexMiddleware(down) {\n    return __assign(__assign({}, down), { table: function (tableName) {\n            var table = down.table(tableName);\n            var schema = table.schema;\n            var indexLookup = {};\n            var allVirtualIndexes = [];\n            function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                var keyPathAlias = getKeyPathAlias(keyPath);\n                var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                var isVirtual = keyTail > 0;\n                var virtualIndex = __assign(__assign({}, lowLevelIndex), { isVirtual: isVirtual, isPrimaryKey: !isVirtual && lowLevelIndex.isPrimaryKey, keyTail: keyTail,\n                    keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                indexList.push(virtualIndex);\n                if (!virtualIndex.isPrimaryKey) {\n                    allVirtualIndexes.push(virtualIndex);\n                }\n                if (keyLength > 1) {\n                    var virtualKeyPath = keyLength === 2 ?\n                        keyPath[0] :\n                        keyPath.slice(0, keyLength - 1);\n                    addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                }\n                indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                return virtualIndex;\n            }\n            var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n            indexLookup[\":id\"] = [primaryKey];\n            for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                var index = _a[_i];\n                addVirtualIndexes(index.keyPath, 0, index);\n            }\n            function findBestIndex(keyPath) {\n                var result = indexLookup[getKeyPathAlias(keyPath)];\n                return result && result[0];\n            }\n            function translateRange(range, keyTail) {\n                return {\n                    type: range.type === 1             ?\n                        2             :\n                        range.type,\n                    lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                    lowerOpen: true,\n                    upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                    upperOpen: true\n                };\n            }\n            function translateRequest(req) {\n                var index = req.query.index;\n                return index.isVirtual ? __assign(__assign({}, req), { query: {\n                        index: index,\n                        range: translateRange(req.query.range, index.keyTail)\n                    } }) : req;\n            }\n            var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                    return table.count(translateRequest(req));\n                },\n                query: function (req) {\n                    return table.query(translateRequest(req));\n                },\n                openCursor: function (req) {\n                    var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                    if (!isVirtual)\n                        return table.openCursor(req);\n                    function createVirtualCursor(cursor) {\n                        function _continue(key) {\n                            key != null ?\n                                cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                req.unique ?\n                                    cursor.continue(pad(cursor.key, req.reverse ? down.MIN_KEY : down.MAX_KEY, keyTail)) :\n                                    cursor.continue();\n                        }\n                        var virtualCursor = Object.create(cursor, {\n                            continue: { value: _continue },\n                            continuePrimaryKey: {\n                                value: function (key, primaryKey) {\n                                    cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                }\n                            },\n                            key: {\n                                get: function () {\n                                    var key = cursor.key;\n                                    return keyLength === 1 ?\n                                        key[0] :\n                                        key.slice(0, keyLength);\n                                }\n                            },\n                            value: {\n                                get: function () {\n                                    return cursor.value;\n                                }\n                            }\n                        });\n                        return virtualCursor;\n                    }\n                    return table.openCursor(translateRequest(req))\n                        .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                } });\n            return result;\n        } });\n}\nvar virtualIndexMiddleware = {\n    stack: \"dbcore\",\n    name: \"VirtualIndexMiddleware\",\n    level: 1,\n    create: createVirtualIndexMiddleware\n};\n\nvar hooksMiddleware = {\n    stack: \"dbcore\",\n    name: \"HooksMiddleware\",\n    level: 2,\n    create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n            var downTable = downCore.table(tableName);\n            var primaryKey = downTable.schema.primaryKey;\n            var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n                    var dxTrans = PSD.trans;\n                    var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                    switch (req.type) {\n                        case 'add':\n                            if (creating.fire === nop$1)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                        case 'put':\n                            if (creating.fire === nop$1 && updating.fire === nop$1)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                        case 'delete':\n                            if (deleting.fire === nop$1)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                        case 'deleteRange':\n                            if (deleting.fire === nop$1)\n                                break;\n                            return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                    }\n                    return downTable.mutate(req);\n                    function addPutOrDelete(req) {\n                        var dxTrans = PSD.trans;\n                        var keys$$1 = req.keys || getEffectiveKeys(primaryKey, req);\n                        if (!keys$$1)\n                            throw new Error(\"Keys missing\");\n                        req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys$$1, wantResults: true }) :\n                         __assign({}, req);\n                        if (req.type !== 'delete')\n                            req.values = __spreadArrays(req.values);\n                        if (req.keys)\n                            req.keys = __spreadArrays(req.keys);\n                        return getExistingValues(downTable, req, keys$$1).then(function (existingValues) {\n                            var contexts = keys$$1.map(function (key, i) {\n                                var existingValue = existingValues[i];\n                                var ctx = { onerror: null, onsuccess: null };\n                                if (req.type === 'delete') {\n                                    deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                }\n                                else if (req.type === 'add' || existingValue === undefined) {\n                                    var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                    if (key == null && generatedPrimaryKey != null) {\n                                        key = generatedPrimaryKey;\n                                        req.keys[i] = key;\n                                        if (!primaryKey.outbound) {\n                                            setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                        }\n                                    }\n                                }\n                                else {\n                                    var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                    var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                    if (additionalChanges_1) {\n                                        var requestedValue_1 = req.values[i];\n                                        Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                            if (hasOwn(requestedValue_1, keyPath)) {\n                                                requestedValue_1[keyPath] = additionalChanges_1[keyPath];\n                                            }\n                                            else {\n                                                setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                            }\n                                        });\n                                    }\n                                }\n                                return ctx;\n                            });\n                            return downTable.mutate(req).then(function (_a) {\n                                var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                for (var i = 0; i < keys$$1.length; ++i) {\n                                    var primKey = results ? results[i] : keys$$1[i];\n                                    var ctx = contexts[i];\n                                    if (primKey == null) {\n                                        ctx.onerror && ctx.onerror(failures[i]);\n                                    }\n                                    else {\n                                        ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                            req.values[i] :\n                                            primKey\n                                        );\n                                    }\n                                }\n                                return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                            }).catch(function (error) {\n                                contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                return Promise.reject(error);\n                            });\n                        });\n                    }\n                    function deleteRange(req) {\n                        return deleteNextChunk(req.trans, req.range, 10000);\n                    }\n                    function deleteNextChunk(trans, range, limit) {\n                        return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                            .then(function (_a) {\n                            var result = _a.result;\n                            return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                if (res.numFailures > 0)\n                                    return Promise.reject(res.failures[0]);\n                                if (result.length < limit) {\n                                    return { failures: [], numFailures: 0, lastResult: undefined };\n                                }\n                                else {\n                                    return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                }\n                            });\n                        });\n                    }\n                } });\n            return tableMiddleware;\n        } })); }\n};\n\nvar Dexie =               (function () {\n    function Dexie(name, options) {\n        var _this = this;\n        this._middlewares = {};\n        this.verno = 0;\n        var deps = Dexie.dependencies;\n        this._options = options = __assign({\n            addons: Dexie.addons, autoOpen: true,\n            indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange }, options);\n        this._deps = {\n            indexedDB: options.indexedDB,\n            IDBKeyRange: options.IDBKeyRange\n        };\n        var addons = options.addons;\n        this._dbSchema = {};\n        this._versions = [];\n        this._storeNames = [];\n        this._allTables = {};\n        this.idbdb = null;\n        var state = {\n            dbOpenError: null,\n            isBeingOpened: false,\n            onReadyBeingFired: null,\n            openComplete: false,\n            dbReadyResolve: nop$1,\n            dbReadyPromise: null,\n            cancelOpen: nop$1,\n            openCanceller: null,\n            autoSchema: true\n        };\n        state.dbReadyPromise = new DexiePromise(function (resolve) {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise(function (_, reject) {\n            state.cancelOpen = reject;\n        });\n        this._state = state;\n        this.name = name;\n        this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", { ready: [promisableChain$1, nop$1] });\n        this.on.ready.subscribe = override$1(this.on.ready.subscribe, function (subscribe) {\n            return function (subscriber, bSticky) {\n                Dexie.vip(function () {\n                    var state = _this._state;\n                    if (state.openComplete) {\n                        if (!state.dbOpenError)\n                            DexiePromise.resolve().then(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else if (state.onReadyBeingFired) {\n                        state.onReadyBeingFired.push(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else {\n                        subscribe(subscriber);\n                        var db_1 = _this;\n                        if (!bSticky)\n                            subscribe(function unsubscribe() {\n                                db_1.on.ready.unsubscribe(subscriber);\n                                db_1.on.ready.unsubscribe(unsubscribe);\n                            });\n                    }\n                });\n            };\n        });\n        this.Collection = createCollectionConstructor(this);\n        this.Table = createTableConstructor(this);\n        this.Transaction = createTransactionConstructor(this);\n        this.Version = createVersionConstructor(this);\n        this.WhereClause = createWhereClauseConstructor(this);\n        this.on(\"versionchange\", function (ev) {\n            if (ev.newVersion > 0)\n                console.warn(\"Another connection wants to upgrade database '\" + _this.name + \"'. Closing db now to resume the upgrade.\");\n            else\n                console.warn(\"Another connection wants to delete database '\" + _this.name + \"'. Closing db now to resume the delete request.\");\n            _this.close();\n        });\n        this.on(\"blocked\", function (ev) {\n            if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                console.warn(\"Dexie.delete('\" + _this.name + \"') was blocked\");\n            else\n                console.warn(\"Upgrade '\" + _this.name + \"' blocked by other connection holding version \" + ev.oldVersion / 10);\n        });\n        this._maxKey = getMaxKey(options.IDBKeyRange);\n        this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, parentTransaction); };\n        this._fireOnBlocked = function (ev) {\n            _this.on(\"blocked\").fire(ev);\n            connections\n                .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n        };\n        this.use(virtualIndexMiddleware);\n        this.use(hooksMiddleware);\n        addons.forEach(function (addon) { return addon(_this); });\n    }\n    Dexie.prototype.version = function (versionNumber) {\n        if (isNaN(versionNumber) || versionNumber < 0.1)\n            throw new exceptions.Type(\"Given version is not a positive number\");\n        versionNumber = Math.round(versionNumber * 10) / 10;\n        if (this.idbdb || this._state.isBeingOpened)\n            throw new exceptions.Schema(\"Cannot add version when database is open\");\n        this.verno = Math.max(this.verno, versionNumber);\n        var versions = this._versions;\n        var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n        if (versionInstance)\n            return versionInstance;\n        versionInstance = new this.Version(versionNumber);\n        versions.push(versionInstance);\n        versions.sort(lowerVersionFirst);\n        versionInstance.stores({});\n        this._state.autoSchema = false;\n        return versionInstance;\n    };\n    Dexie.prototype._whenReady = function (fn) {\n        var _this = this;\n        return this._state.openComplete || PSD.letThrough ? fn() : new DexiePromise(function (resolve, reject) {\n            if (!_this._state.isBeingOpened) {\n                if (!_this._options.autoOpen) {\n                    reject(new exceptions.DatabaseClosed());\n                    return;\n                }\n                _this.open().catch(nop$1);\n            }\n            _this._state.dbReadyPromise.then(resolve, reject);\n        }).then(fn);\n    };\n    Dexie.prototype.use = function (_a) {\n        var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n        if (name)\n            this.unuse({ stack: stack, name: name });\n        var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n        middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n        middlewares.sort(function (a, b) { return a.level - b.level; });\n        return this;\n    };\n    Dexie.prototype.unuse = function (_a) {\n        var stack = _a.stack, name = _a.name, create = _a.create;\n        if (stack && this._middlewares[stack]) {\n            this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                return create ? mw.create !== create :\n                    name ? mw.name !== name :\n                        false;\n            });\n        }\n        return this;\n    };\n    Dexie.prototype.open = function () {\n        return dexieOpen(this);\n    };\n    Dexie.prototype.close = function () {\n        var idx = connections.indexOf(this), state = this._state;\n        if (idx >= 0)\n            connections.splice(idx, 1);\n        if (this.idbdb) {\n            try {\n                this.idbdb.close();\n            }\n            catch (e) { }\n            this.idbdb = null;\n        }\n        this._options.autoOpen = false;\n        state.dbOpenError = new exceptions.DatabaseClosed();\n        if (state.isBeingOpened)\n            state.cancelOpen(state.dbOpenError);\n        state.dbReadyPromise = new DexiePromise(function (resolve) {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise(function (_, reject) {\n            state.cancelOpen = reject;\n        });\n    };\n    Dexie.prototype.delete = function () {\n        var _this = this;\n        var hasArguments = arguments.length > 0;\n        var state = this._state;\n        return new DexiePromise(function (resolve, reject) {\n            var doDelete = function () {\n                _this.close();\n                var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                req.onsuccess = wrap(function () {\n                    databaseEnumerator.remove(_this.name);\n                    resolve();\n                });\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = _this._fireOnBlocked;\n            };\n            if (hasArguments)\n                throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n            if (state.isBeingOpened) {\n                state.dbReadyPromise.then(doDelete);\n            }\n            else {\n                doDelete();\n            }\n        });\n    };\n    Dexie.prototype.backendDB = function () {\n        return this.idbdb;\n    };\n    Dexie.prototype.isOpen = function () {\n        return this.idbdb !== null;\n    };\n    Dexie.prototype.hasBeenClosed = function () {\n        var dbOpenError = this._state.dbOpenError;\n        return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n    };\n    Dexie.prototype.hasFailed = function () {\n        return this._state.dbOpenError !== null;\n    };\n    Dexie.prototype.dynamicallyOpened = function () {\n        return this._state.autoSchema;\n    };\n    Object.defineProperty(Dexie.prototype, \"tables\", {\n        get: function () {\n            var _this = this;\n            return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Dexie.prototype.transaction = function () {\n        var args = extractTransactionArgs.apply(this, arguments);\n        return this._transaction.apply(this, args);\n    };\n    Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n        var _this = this;\n        var parentTransaction = PSD.trans;\n        if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n            parentTransaction = null;\n        var onlyIfCompatible = mode.indexOf('?') !== -1;\n        mode = mode.replace('!', '').replace('?', '');\n        var idbMode, storeNames;\n        try {\n            storeNames = tables.map(function (table) {\n                var storeName = table instanceof _this.Table ? table.name : table;\n                if (typeof storeName !== 'string')\n                    throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                return storeName;\n            });\n            if (mode == \"r\" || mode === READONLY)\n                idbMode = READONLY;\n            else if (mode == \"rw\" || mode == READWRITE)\n                idbMode = READWRITE;\n            else\n                throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n            if (parentTransaction) {\n                if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                    if (onlyIfCompatible) {\n                        parentTransaction = null;\n                    }\n                    else\n                        throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                }\n                if (parentTransaction) {\n                    storeNames.forEach(function (storeName) {\n                        if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                            if (onlyIfCompatible) {\n                                parentTransaction = null;\n                            }\n                            else\n                                throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                    \" not included in parent transaction.\");\n                        }\n                    });\n                }\n                if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                    parentTransaction = null;\n                }\n            }\n        }\n        catch (e) {\n            return parentTransaction ?\n                parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                rejection(e);\n        }\n        var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n        return (parentTransaction ?\n            parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n            PSD.trans ?\n                usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                this._whenReady(enterTransaction));\n    };\n    Dexie.prototype.table = function (tableName) {\n        if (!hasOwn(this._allTables, tableName)) {\n            throw new exceptions.InvalidTable(\"Table \" + tableName + \" does not exist\");\n        }\n        return this._allTables[tableName];\n    };\n    return Dexie;\n}());\n\nvar Dexie$1 = Dexie;\nprops(Dexie$1, __assign(__assign({}, fullNameExceptions), {\n    delete: function (databaseName) {\n        var db = new Dexie$1(databaseName);\n        return db.delete();\n    },\n    exists: function (name) {\n        return new Dexie$1(name, { addons: [] }).open().then(function (db) {\n            db.close();\n            return true;\n        }).catch('NoSuchDatabaseError', function () { return false; });\n    },\n    getDatabaseNames: function (cb) {\n        return databaseEnumerator ?\n            databaseEnumerator.getDatabaseNames().then(cb) :\n            DexiePromise.resolve([]);\n    },\n    defineClass: function () {\n        function Class(content) {\n            extend(this, content);\n        }\n        return Class;\n    },\n    ignoreTransaction: function (scopeFunc) {\n        return PSD.trans ?\n            usePSD(PSD.transless, scopeFunc) :\n            scopeFunc();\n    },\n    vip: vip, async: function (generatorFn) {\n        return function () {\n            try {\n                var rv = awaitIterator(generatorFn.apply(this, arguments));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        };\n    }, spawn: function (generatorFn, args, thiz) {\n        try {\n            var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n            if (!rv || typeof rv.then !== 'function')\n                return DexiePromise.resolve(rv);\n            return rv;\n        }\n        catch (e) {\n            return rejection(e);\n        }\n    },\n    currentTransaction: {\n        get: function () { return PSD.trans || null; }\n    }, waitFor: function (promiseOrFunction, optionalTimeout) {\n        var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n            Dexie$1.ignoreTransaction(promiseOrFunction) :\n            promiseOrFunction)\n            .timeout(optionalTimeout || 60000);\n        return PSD.trans ?\n            PSD.trans.waitFor(promise) :\n            promise;\n    },\n    Promise: DexiePromise,\n    debug: {\n        get: function () { return debug; },\n        set: function (value) {\n            setDebug(value, value === 'dexie' ? function () { return true; } : dexieStackFrameFilter);\n        }\n    },\n    derive: derive, extend: extend, props: props, override: override$1,\n    Events: Events,\n    getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, asap: asap,\n    minKey: minKey,\n    addons: [],\n    connections: connections,\n    errnames: errnames,\n    dependencies: (function () {\n        try {\n            return {\n                indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n                IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n            };\n        }\n        catch (e) {\n            return { indexedDB: null, IDBKeyRange: null };\n        }\n    })(),\n    semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n        .map(function (n) { return parseInt(n); })\n        .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }),\n    default: Dexie$1,\n    Dexie: Dexie$1 }));\nDexie$1.maxKey = getMaxKey(Dexie$1.dependencies.IDBKeyRange);\n\ninitDatabaseEnumerator(Dexie.dependencies.indexedDB);\nDexiePromise.rejectionMapper = mapError;\nsetDebug(debug, dexieStackFrameFilter);\n\n/* ========================================================================== \n *                           dexie-observable.js\n * ==========================================================================\n *\n * Dexie addon for observing database changes not just on local db instance\n * but also on other instances, tabs and windows.\n *\n * Comprises a base framework for dexie-syncable.js\n *\n * By David Fahlander, david.fahlander@gmail.com,\n *    Nikolas Poniros, https://github.com/nponiros\n *\n * ==========================================================================\n *\n * Version {version}, {date}\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n * \n */\n\nfunction nop() { }\nfunction promisableChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res && typeof res.then === 'function') {\n            var thiz = this, args = arguments;\n            return res.then(function () {\n                return f2.apply(thiz, args);\n            });\n        }\n        return f2.apply(this, arguments);\n    };\n}\nfunction createUUID() {\n    // Decent solution from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n    var d = Date.now();\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n    });\n    return uuid;\n}\n\nfunction initOverrideCreateTransaction(db, wakeupObservers) {\n    return function overrideCreateTransaction(origFunc) {\n        return function (mode, storenames, dbschema, parent) {\n            if (db.dynamicallyOpened())\n                return origFunc.apply(this, arguments); // Don't observe dynamically opened databases.\n            var addChanges = false;\n            if (mode === 'readwrite' && storenames.some(function (storeName) {\n                return dbschema[storeName] && dbschema[storeName].observable;\n            })) {\n                // At least one included store is a observable store. Make sure to also include the _changes store.\n                addChanges = true;\n                storenames = storenames.slice(0); // Clone\n                if (storenames.indexOf(\"_changes\") === -1)\n                    storenames.push(\"_changes\"); // Otherwise, firefox will hang... (I've reported the bug to Mozilla@Bugzilla)\n            }\n            // Call original db._createTransaction()\n            var trans = origFunc.call(this, mode, storenames, dbschema, parent);\n            // If this transaction is bound to any observable table, make sure to add changes when transaction completes.\n            if (addChanges) {\n                trans._lastWrittenRevision = 0;\n                trans.on('complete', function () {\n                    if (trans._lastWrittenRevision) {\n                        // Changes were written in this transaction.\n                        if (!parent) {\n                            // This is root-level transaction, i.e. a physical commit has happened.\n                            // Delay-trigger a wakeup call:\n                            if (wakeupObservers.timeoutHandle)\n                                clearTimeout(wakeupObservers.timeoutHandle);\n                            wakeupObservers.timeoutHandle = setTimeout(function () {\n                                delete wakeupObservers.timeoutHandle;\n                                wakeupObservers(trans._lastWrittenRevision);\n                            }, 25);\n                        }\n                        else {\n                            // This is just a virtual commit of a sub transaction.\n                            // Wait with waking up observers until root transaction has committed.\n                            // Make sure to mark root transaction so that it will wakeup observers upon commit.\n                            var rootTransaction = (function findRootTransaction(trans) {\n                                return trans.parent ? findRootTransaction(trans.parent) : trans;\n                            })(parent);\n                            rootTransaction._lastWrittenRevision = Math.max(trans._lastWrittenRevision, rootTransaction.lastWrittenRevision || 0);\n                        }\n                    }\n                });\n                // Derive \"source\" property from parent transaction by default\n                if (trans.parent && trans.parent.source)\n                    trans.source = trans.parent.source;\n            }\n            return trans;\n        };\n    };\n}\n\nfunction initWakeupObservers(db, Observable, localStorage) {\n    return function wakeupObservers(lastWrittenRevision) {\n        // Make sure Observable.latestRevision[db.name] is still below our value, now when some time has elapsed and other db instances in same window possibly could have made changes too.\n        if (Observable.latestRevision[db.name] < lastWrittenRevision) {\n            // Set the static property lastRevision[db.name] to the revision of the last written change.\n            Observable.latestRevision[db.name] = lastWrittenRevision;\n            // Wakeup ourselves, and any other db instances on this window:\n            Dexie.ignoreTransaction(function () {\n                Observable.on('latestRevisionIncremented').fire(db.name, lastWrittenRevision);\n            });\n            // Observable.on.latestRevisionIncremented will only wakeup db's in current window.\n            // We need a storage event to wakeup other windwos.\n            // Since indexedDB lacks storage events, let's use the storage event from WebStorage just for\n            // the purpose to wakeup db instances in other windows.\n            if (localStorage)\n                localStorage.setItem('Dexie.Observable/latestRevision/' + db.name, lastWrittenRevision); // In IE, this will also wakeup our own window. However, onLatestRevisionIncremented will work around this by only running once per revision id.\n        }\n    };\n}\n\n// Change Types\nvar CREATE = 1;\nvar UPDATE = 2;\nvar DELETE = 3;\n\nfunction initCreatingHook(db, table) {\n    return function creatingHook(primKey, obj, trans) {\n        /// <param name=\"trans\" type=\"db.Transaction\"></param>\n        var rv = undefined;\n        if (primKey === undefined && table.schema.primKey.uuid) {\n            primKey = rv = createUUID();\n            if (table.schema.primKey.keyPath) {\n                Dexie.setByKeyPath(obj, table.schema.primKey.keyPath, primKey);\n            }\n        }\n        var change = {\n            source: trans.source || null,\n            table: table.name,\n            key: primKey === undefined ? null : primKey,\n            type: CREATE,\n            obj: obj\n        };\n        var promise = db._changes.add(change).then(function (rev) {\n            trans._lastWrittenRevision = Math.max(trans._lastWrittenRevision, rev);\n            return rev;\n        });\n        // Wait for onsuccess so that we have the primKey if it is auto-incremented and update the change item if so.\n        this.onsuccess = function (resultKey) {\n            if (primKey != resultKey)\n                promise._then(function () {\n                    change.key = resultKey;\n                    db._changes.put(change);\n                });\n        };\n        this.onerror = function () {\n            // If the main operation fails, make sure to regret the change\n            promise._then(function (rev) {\n                // Will only happen if app code catches the main operation error to prohibit transaction from aborting.\n                db._changes.delete(rev);\n            });\n        };\n        return rv;\n    };\n}\n\nfunction initUpdatingHook(db, tableName) {\n    return function updatingHook(mods, primKey, oldObj, trans) {\n        /// <param name=\"trans\" type=\"db.Transaction\"></param>\n        // mods may contain property paths with undefined as value if the property\n        // is being deleted. Since we cannot persist undefined we need to act\n        // like those changes is setting the value to null instead.\n        var modsWithoutUndefined = {};\n        // As of current Dexie version (1.0.3) hook may be called even if it wouldn't really change.\n        // Therefore we may do that kind of optimization here - to not add change entries if\n        // there's nothing to change.\n        var anythingChanged = false;\n        var newObj = Dexie.deepClone(oldObj);\n        for (var propPath in mods) {\n            var mod = mods[propPath];\n            if (typeof mod === 'undefined') {\n                Dexie.delByKeyPath(newObj, propPath);\n                modsWithoutUndefined[propPath] = null; // Null is as close we could come to deleting a property when not allowing undefined.\n                anythingChanged = true;\n            }\n            else {\n                var currentValue = Dexie.getByKeyPath(oldObj, propPath);\n                if (mod !== currentValue && JSON.stringify(mod) !== JSON.stringify(currentValue)) {\n                    Dexie.setByKeyPath(newObj, propPath, mod);\n                    modsWithoutUndefined[propPath] = mod;\n                    anythingChanged = true;\n                }\n            }\n        }\n        if (anythingChanged) {\n            var change = {\n                source: trans.source || null,\n                table: tableName,\n                key: primKey,\n                type: UPDATE,\n                mods: modsWithoutUndefined,\n                oldObj: oldObj,\n                obj: newObj\n            };\n            var promise = db._changes.add(change); // Just so we get the correct revision order of the update...\n            this.onsuccess = function () {\n                promise._then(function (rev) {\n                    trans._lastWrittenRevision = Math.max(trans._lastWrittenRevision, rev);\n                });\n            };\n            this.onerror = function () {\n                // If the main operation fails, make sure to regret the change.\n                promise._then(function (rev) {\n                    // Will only happen if app code catches the main operation error to prohibit transaction from aborting.\n                    db._changes.delete(rev);\n                });\n            };\n        }\n    };\n}\n\nfunction initDeletingHook(db, tableName) {\n    return function deletingHook(primKey, obj, trans) {\n        /// <param name=\"trans\" type=\"db.Transaction\"></param>\n        var promise = db._changes.add({\n            source: trans.source || null,\n            table: tableName,\n            key: primKey,\n            type: DELETE,\n            oldObj: obj\n        }).then(function (rev) {\n            trans._lastWrittenRevision = Math.max(trans._lastWrittenRevision, rev);\n            return rev;\n        })\n            .catch(function (e) {\n            console.log(obj);\n            console.log(e.stack);\n        });\n        this.onerror = function () {\n            // If the main operation fails, make sure to regret the change.\n            // Using _then because if promise is already fullfilled, the standard then() would\n            // do setTimeout() and we would loose the transaction.\n            promise._then(function (rev) {\n                // Will only happen if app code catches the main operation error to prohibit transaction from aborting.\n                db._changes.delete(rev);\n            });\n        };\n    };\n}\n\nfunction initCrudMonitor(db) {\n    //\n    // The Creating/Updating/Deleting hook will make sure any change is stored to the changes table\n    //\n    return function crudMonitor(table) {\n        /// <param name=\"table\" type=\"db.Table\"></param>\n        if (table.hook._observing)\n            return;\n        table.hook._observing = true;\n        var tableName = table.name;\n        table.hook('creating').subscribe(initCreatingHook(db, table));\n        table.hook('updating').subscribe(initUpdatingHook(db, tableName));\n        table.hook('deleting').subscribe(initDeletingHook(db, tableName));\n    };\n}\n\nfunction initOnStorage(Observable) {\n    return function onStorage(event) {\n        // We use the onstorage event to trigger onLatestRevisionIncremented since we will wake up when other windows modify the DB as well!\n        if (event.key && event.key.indexOf(\"Dexie.Observable/\") === 0) { // For example \"Dexie.Observable/latestRevision/FriendsDB\"\n            var parts = event.key.split('/');\n            var prop = parts[1];\n            var dbname = parts[2];\n            if (prop === 'latestRevision') {\n                var rev = parseInt(event.newValue, 10);\n                if (!isNaN(rev) && rev > Observable.latestRevision[dbname]) {\n                    Observable.latestRevision[dbname] = rev;\n                    Dexie.ignoreTransaction(function () {\n                        Observable.on('latestRevisionIncremented').fire(dbname, rev);\n                    });\n                }\n            }\n            else if (prop.indexOf(\"deadnode:\") === 0) {\n                var nodeID = parseInt(prop.split(':')[1], 10);\n                if (event.newValue) {\n                    Observable.on.suicideNurseCall.fire(dbname, nodeID);\n                }\n            }\n            else if (prop === 'intercomm') {\n                if (event.newValue) {\n                    Observable.on.intercomm.fire(dbname);\n                }\n            }\n        }\n    };\n}\n\nfunction initOverrideOpen(db, SyncNode, crudMonitor) {\n    return function overrideOpen(origOpen) {\n        return function () {\n            //\n            // Make sure to subscribe to \"creating\", \"updating\" and \"deleting\" hooks for all observable tables that were created in the stores() method.\n            //\n            Object.keys(db._allTables).forEach(function (tableName) {\n                var table = db._allTables[tableName];\n                if (table.schema.observable) {\n                    crudMonitor(table);\n                }\n                if (table.name === \"_syncNodes\") {\n                    table.mapToClass(SyncNode);\n                }\n            });\n            return origOpen.apply(this, arguments);\n        };\n    };\n}\n\nvar Promise$2 = Dexie.Promise;\nfunction initIntercomm(db, Observable, SyncNode, mySyncNode, localStorage) {\n    //\n    // Intercommunication between nodes\n    //\n    // Enable inter-process communication between browser windows using localStorage storage event (is registered in Dexie.Observable)\n    var requestsWaitingForReply = {};\n    /**\n     * @param {string} type Type of message\n     * @param message Message to send\n     * @param {number} destinationNode ID of destination node\n     * @param {{wantReply: boolean, isFailure: boolean, requestId: number}} options If {wantReply: true}, the returned promise will complete with the reply from remote. Otherwise it will complete when message has been successfully sent.</param>\n     */\n    db.observable.sendMessage = function (type, message, destinationNode, options) {\n        /// <param name=\"type\" type=\"String\">Type of message</param>\n        /// <param name=\"message\">Message to send</param>\n        /// <param name=\"destinationNode\" type=\"Number\">ID of destination node</param>\n        /// <param name=\"options\" type=\"Object\" optional=\"true\">{wantReply: Boolean, isFailure: Boolean, requestId: Number}. If wantReply, the returned promise will complete with the reply from remote. Otherwise it will complete when message has been successfully sent.</param>\n        options = options || {};\n        if (!mySyncNode.node)\n            return options.wantReply ?\n                Promise$2.reject(new Dexie.DatabaseClosedError()) :\n                Promise$2.resolve(); // If caller doesn't want a reply, it won't catch errors either.\n        var msg = { message: message, destinationNode: destinationNode, sender: mySyncNode.node.id, type: type };\n        Dexie.extend(msg, options); // wantReply: wantReply, success: !isFailure, requestId: ...\n        return Dexie.ignoreTransaction(function () {\n            var tables = [\"_intercomm\"];\n            if (options.wantReply)\n                tables.push(\"_syncNodes\"); // If caller wants a reply, include \"_syncNodes\" in transaction to check that there's a receiver there. Otherwise, new master will get it.\n            var promise = db.transaction('rw', tables, function () {\n                if (options.wantReply) {\n                    // Check that there is a receiver there to take the request.\n                    return db._syncNodes.where('id').equals(destinationNode).count(function (receiverAlive) {\n                        if (receiverAlive)\n                            return db._intercomm.add(msg);\n                        else // If we couldn't find a node -> send to master\n                            return db._syncNodes.where('isMaster').above(0).first(function (masterNode) {\n                                msg.destinationNode = masterNode.id;\n                                return db._intercomm.add(msg);\n                            });\n                    });\n                }\n                else {\n                    // If caller doesn't need a response, we don't have to make sure that it gets one.\n                    return db._intercomm.add(msg);\n                }\n            }).then(function (messageId) {\n                var rv = null;\n                if (options.wantReply) {\n                    rv = new Promise$2(function (resolve, reject) {\n                        requestsWaitingForReply[messageId.toString()] = { resolve: resolve, reject: reject };\n                    });\n                }\n                if (localStorage) {\n                    localStorage.setItem(\"Dexie.Observable/intercomm/\" + db.name, messageId.toString());\n                }\n                Observable.on.intercomm.fire(db.name);\n                return rv;\n            });\n            if (!options.wantReply) {\n                promise.catch(function () {\n                });\n                return;\n            }\n            else {\n                // Forward rejection to caller if it waits for reply.\n                return promise;\n            }\n        });\n    };\n    // Send a message to all local _syncNodes\n    db.observable.broadcastMessage = function (type, message, bIncludeSelf) {\n        if (!mySyncNode.node)\n            return;\n        var mySyncNodeId = mySyncNode.node.id;\n        Dexie.ignoreTransaction(function () {\n            db._syncNodes.toArray(function (nodes) {\n                return Promise$2.all(nodes\n                    .filter(function (node) { return node.type === 'local' && (bIncludeSelf || node.id !== mySyncNodeId); })\n                    .map(function (node) { return db.observable.sendMessage(type, message, node.id); }));\n            }).catch(function () {\n            });\n        });\n    };\n    function consumeIntercommMessages() {\n        // Check if we got messages:\n        if (!mySyncNode.node)\n            return Promise$2.reject(new Dexie.DatabaseClosedError());\n        return Dexie.ignoreTransaction(function () {\n            return db.transaction('rw', '_intercomm', function () {\n                return db._intercomm.where({ destinationNode: mySyncNode.node.id }).toArray(function (messages) {\n                    messages.forEach(function (msg) { return consumeMessage(msg); });\n                    return db._intercomm.where('id').anyOf(messages.map(function (msg) { return msg.id; })).delete();\n                });\n            });\n        });\n    }\n    function consumeMessage(msg) {\n        if (msg.type === 'response') {\n            // This is a response. Lookup pending request and fulfill its promise.\n            var request = requestsWaitingForReply[msg.requestId.toString()];\n            if (request) {\n                if (msg.isFailure) {\n                    request.reject(msg.message.error);\n                }\n                else {\n                    request.resolve(msg.message.result);\n                }\n                delete requestsWaitingForReply[msg.requestId.toString()];\n            }\n        }\n        else {\n            // This is a message or request. Fire the event and add an API for the subscriber to use if reply is requested\n            msg.resolve = function (result) {\n                db.observable.sendMessage('response', { result: result }, msg.sender, { requestId: msg.id });\n            };\n            msg.reject = function (error) {\n                db.observable.sendMessage('response', { error: error.toString() }, msg.sender, { isFailure: true, requestId: msg.id });\n            };\n            db.on.message.fire(msg);\n        }\n    }\n    // Listener for 'intercomm' events\n    // Gets fired when we get a 'storage' event from local storage or when sendMessage is called\n    // 'storage' is used to communicate between tabs (sendMessage changes the localStorage to trigger the event)\n    // sendMessage is used to communicate in the same tab and to trigger a storage event\n    function onIntercomm(dbname) {\n        // When storage event trigger us to check\n        if (dbname === db.name) {\n            consumeIntercommMessages().catch('DatabaseClosedError', function () { });\n        }\n    }\n    return {\n        onIntercomm: onIntercomm,\n        consumeIntercommMessages: consumeIntercommMessages\n    };\n}\n\nfunction overrideParseStoresSpec(origFunc) {\n    return function (stores, dbSchema) {\n        // Create the _changes and _syncNodes tables\n        stores[\"_changes\"] = \"++rev\";\n        stores[\"_syncNodes\"] = \"++id,myRevision,lastHeartBeat,&url,isMaster,type,status\";\n        stores[\"_intercomm\"] = \"++id,destinationNode\";\n        stores[\"_uncommittedChanges\"] = \"++id,node\"; // For remote syncing when server returns a partial result.\n        // Call default implementation. Will populate the dbSchema structures.\n        origFunc.call(this, stores, dbSchema);\n        // Allow UUID primary keys using $$ prefix on primary key or indexes\n        Object.keys(dbSchema).forEach(function (tableName) {\n            var schema = dbSchema[tableName];\n            if (schema.primKey.name.indexOf('$$') === 0) {\n                schema.primKey.uuid = true;\n                schema.primKey.name = schema.primKey.name.substr(2);\n                schema.primKey.keyPath = schema.primKey.keyPath.substr(2);\n            }\n        });\n        // Now mark all observable tables\n        Object.keys(dbSchema).forEach(function (tableName) {\n            // Marked observable tables with \"observable\" in their TableSchema.\n            if (tableName.indexOf('_') !== 0 && tableName.indexOf('$') !== 0) {\n                dbSchema[tableName].observable = true;\n            }\n        });\n    };\n}\n\nfunction deleteOldChanges(db) {\n    // This is a background job and should never be done within\n    // a caller's transaction. Use Dexie.ignoreTransaction() to ensure that.\n    // We should not return the Promise but catch it ourselves instead.\n    // To prohibit starving the database we want to lock transactions as short as possible\n    // and since we're not in a hurry, we could do this job in chunks and reschedule a\n    // continuation every 500 ms.\n    var CHUNK_SIZE = 100;\n    Dexie.ignoreTransaction(function () {\n        return db._syncNodes.orderBy(\"myRevision\").first(function (oldestNode) {\n            return db._changes\n                .where(\"rev\").below(oldestNode.myRevision)\n                .limit(CHUNK_SIZE)\n                .primaryKeys();\n        }).then(function (keysToDelete) {\n            if (keysToDelete.length === 0)\n                return; // Done.\n            return db._changes.bulkDelete(keysToDelete).then(function () {\n                // If not done garbage collecting, reschedule a continuation of it until done.\n                if (keysToDelete.length === CHUNK_SIZE) {\n                    // Limit reached. Changes are there are more job to do. Schedule again:\n                    setTimeout(function () { return db.isOpen() && deleteOldChanges(db); }, 500);\n                }\n            });\n        });\n    }).catch(function () {\n        // The operation is not crucial. A failure could almost only be due to that database has been closed.\n        // No need to log this.\n    });\n}\n\n/* ==========================================================================\n *                           dexie-observable.js\n * ==========================================================================\n *\n * Dexie addon for observing database changes not just on local db instance\n * but also on other instances, tabs and windows.\n *\n * Comprises a base framework for dexie-syncable.js\n *\n * By David Fahlander, david.fahlander@gmail.com,\n *    Nikolas Poniros, https://github.com/nponiros\n *\n * ==========================================================================\n *\n * Version {version}, {date}\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n *\n */\nvar global$1 = self;\n/** class DatabaseChange\n    *\n    *  Object contained by the _changes table.\n    */\nvar DatabaseChange = Dexie.defineClass({\n    rev: Number,\n    source: String,\n    table: String,\n    key: Object,\n    type: Number,\n    obj: Object,\n    mods: Object,\n    oldObj: Object // DELETE: oldObj contains the object deleted. UPDATE: oldObj contains the old object before updates applied.\n});\n// Import some usable helper functions\nvar override = Dexie.override;\nvar Promise$1 = Dexie.Promise;\nvar browserIsShuttingDown = false;\n/** Dexie addon for change tracking and real-time observation.\n *\n * @param {Dexie} db\n */\nfunction Observable(db) {\n    if (!/^3\\./.test(Dexie.version))\n        throw new Error(\"Missing dexie version 3.x\");\n    if (db.observable) {\n        if (db.observable.version !== \"{version}\")\n            throw new Error(\"Mixed versions of dexie-observable\");\n        return; // Addon already active.\n    }\n    var NODE_TIMEOUT = 20000, // 20 seconds before local db instances are timed out. This is so that old changes can be deleted when not needed and to garbage collect old _syncNodes objects.\n    HIBERNATE_GRACE_PERIOD = 20000, // 20 seconds\n    // LOCAL_POLL: The time to wait before polling local db for changes and cleaning up old nodes. \n    // Polling for changes is a fallback only needed in certain circomstances (when the onstorage event doesnt reach all listeners - when different browser windows doesnt share the same process)\n    LOCAL_POLL = 500, // 500 ms. In real-world there will be this value + the time it takes to poll(). A small value is needed in Workers where we cannot rely on storage event.\n    HEARTBEAT_INTERVAL = NODE_TIMEOUT - 5000;\n    var localStorage = Observable.localStorageImpl;\n    /** class SyncNode\n        *\n        * Object contained in the _syncNodes table.\n        */\n    var SyncNode = Dexie.defineClass({\n        //id: Number,\n        myRevision: Number,\n        type: String,\n        lastHeartBeat: Number,\n        deleteTimeStamp: Number,\n        url: String,\n        isMaster: Number,\n        // Below properties should be extended in Dexie.Syncable. Not here. They apply to remote nodes only (type == \"remote\"):\n        syncProtocol: String,\n        syncContext: null,\n        syncOptions: Object,\n        connected: false,\n        status: Number,\n        appliedRemoteRevision: null,\n        remoteBaseRevisions: [{ local: Number, remote: null }],\n        dbUploadState: {\n            tablesToUpload: [String],\n            currentTable: String,\n            currentKey: null,\n            localBaseRevision: Number\n        }\n    });\n    db.observable = { version: \"{version}\" };\n    db.observable.SyncNode = SyncNode;\n    var wakeupObservers = initWakeupObservers(db, Observable, localStorage);\n    var overrideCreateTransaction = initOverrideCreateTransaction(db, wakeupObservers);\n    var crudMonitor = initCrudMonitor(db);\n    var overrideOpen = initOverrideOpen(db, SyncNode, crudMonitor);\n    var mySyncNode = { node: null };\n    var intercomm = initIntercomm(db, Observable, SyncNode, mySyncNode, localStorage);\n    var onIntercomm = intercomm.onIntercomm;\n    var consumeIntercommMessages = intercomm.consumeIntercommMessages;\n    // Allow other addons to access the local sync node. May be needed by Dexie.Syncable.\n    Object.defineProperty(db, \"_localSyncNode\", {\n        get: function () { return mySyncNode.node; }\n    });\n    var pollHandle = null, heartbeatHandle = null;\n    if (Dexie.fake) {\n        // This code will never run.\n        // It's here just to enable auto-complete in visual studio - helps a lot when writing code.\n        db.version(1).stores({\n            _syncNodes: \"++id,myRevision,lastHeartBeat\",\n            _changes: \"++rev\",\n            _intercomm: \"++id,destinationNode\",\n            _uncommittedChanges: \"++id,node\"\n        });\n        db._syncNodes.mapToClass(SyncNode);\n        db._changes.mapToClass(DatabaseChange);\n        mySyncNode.node = new SyncNode({\n            myRevision: 0,\n            type: \"local\",\n            lastHeartBeat: Date.now(),\n            deleteTimeStamp: null\n        });\n    }\n    //\n    // Override parsing the stores to add \"_changes\" and \"_syncNodes\" tables.\n    // It also adds UUID support for the primary key and sets tables as observable tables.\n    //\n    db.Version.prototype._parseStoresSpec = override(db.Version.prototype._parseStoresSpec, overrideParseStoresSpec);\n    // changes event on db:\n    db.on.addEventType({\n        changes: 'asap',\n        cleanup: [promisableChain, nop],\n        message: 'asap'\n    });\n    //\n    // Override transaction creation to always include the \"_changes\" store when any observable store is involved.\n    //\n    db._createTransaction = override(db._createTransaction, overrideCreateTransaction);\n    // If Observable.latestRevsion[db.name] is undefined, set it to 0 so that comparing against it always works.\n    // You might think that it will always be undefined before this call, but in case another Dexie instance in the same\n    // window with the same database name has been created already, this static property will already be set correctly.\n    Observable.latestRevision[db.name] = Observable.latestRevision[db.name] || 0;\n    //\n    // Override open to setup hooks for db changes and map the _syncNodes table to class\n    //\n    db.open = override(db.open, overrideOpen);\n    db.close = override(db.close, function (origClose) {\n        return function () {\n            if (db.dynamicallyOpened())\n                return origClose.apply(this, arguments); // Don't observe dynamically opened databases.\n            // Teardown our framework.\n            if (wakeupObservers.timeoutHandle) {\n                clearTimeout(wakeupObservers.timeoutHandle);\n                delete wakeupObservers.timeoutHandle;\n            }\n            Observable.on('latestRevisionIncremented').unsubscribe(onLatestRevisionIncremented);\n            Observable.on('suicideNurseCall').unsubscribe(onSuicide);\n            Observable.on('intercomm').unsubscribe(onIntercomm);\n            Observable.on('beforeunload').unsubscribe(onBeforeUnload);\n            // Inform other db instances in same window that we are dying:\n            if (mySyncNode.node && mySyncNode.node.id) {\n                Observable.on.suicideNurseCall.fire(db.name, mySyncNode.node.id);\n                // Inform other windows as well:\n                if (localStorage) {\n                    localStorage.setItem('Dexie.Observable/deadnode:' + mySyncNode.node.id.toString() + '/' + db.name, \"dead\"); // In IE, this will also wakeup our own window. cleanup() may trigger twice per other db instance. But that doesnt to anything.\n                }\n                mySyncNode.node.deleteTimeStamp = 1; // One millisecond after 1970. Makes it occur in the past but still keeps it truthy.\n                mySyncNode.node.lastHeartBeat = 0;\n                db._syncNodes.put(mySyncNode.node); // This async operation may be cancelled since the browser is closing down now.\n                mySyncNode.node = null;\n            }\n            if (pollHandle)\n                clearTimeout(pollHandle);\n            pollHandle = null;\n            if (heartbeatHandle)\n                clearTimeout(heartbeatHandle);\n            heartbeatHandle = null;\n            return origClose.apply(this, arguments);\n        };\n    });\n    // Override Dexie.delete() in order to delete Observable.latestRevision[db.name].\n    db.delete = override(db.delete, function (origDelete) {\n        return function () {\n            return origDelete.apply(this, arguments).then(function (result) {\n                // Reset Observable.latestRevision[db.name]\n                Observable.latestRevision[db.name] = 0;\n                return result;\n            });\n        };\n    });\n    // When db opens, make sure to start monitor any changes before other db operations will start.\n    db.on(\"ready\", function startObserving() {\n        if (db.dynamicallyOpened())\n            return db; // Don't observe dynamically opened databases.\n        return db.table(\"_changes\").orderBy(\"rev\").last(function (lastChange) {\n            // Since startObserving() is called before database open() method, this will be the first database operation enqueued to db.\n            // Therefore we know that the retrieved value will be This query will\n            var latestRevision = (lastChange ? lastChange.rev : 0);\n            mySyncNode.node = new SyncNode({\n                myRevision: latestRevision,\n                type: \"local\",\n                lastHeartBeat: Date.now(),\n                deleteTimeStamp: null,\n                isMaster: 0\n            });\n            if (Observable.latestRevision[db.name] < latestRevision) {\n                // Side track . For correctness whenever setting Observable.latestRevision[db.name] we must make sure the event is fired if increased:\n                // There are other db instances in same window that hasnt yet been informed about a new revision\n                Observable.latestRevision[db.name] = latestRevision;\n                Dexie.ignoreTransaction(function () {\n                    Observable.on.latestRevisionIncremented.fire(latestRevision);\n                });\n            }\n            // Add new sync node or if this is a reopening of the database after a close() call, update it.\n            return db._syncNodes.put(mySyncNode.node).then(Dexie.ignoreTransaction(function () {\n                // By default, this node will become master unless we discover an existing, up-to-date master\n                var mySyncNodeShouldBecomeMaster = 1;\n                return db._syncNodes.orderBy('isMaster').reverse().modify(function (existingNode) {\n                    if (existingNode.isMaster) {\n                        if (existingNode.lastHeartBeat < Date.now() - NODE_TIMEOUT) {\n                            // Existing master record is out-of-date; demote it\n                            existingNode.isMaster = 0;\n                        }\n                        else {\n                            // An existing up-to-date master record exists, so it will remain master\n                            mySyncNodeShouldBecomeMaster = 0;\n                        }\n                    }\n                    // The local node reference may be unassigned at any point by a database close() operation\n                    if (!mySyncNode.node)\n                        return;\n                    // Assign the local node state\n                    // This is guaranteed to apply *after* any existing master records have been inspected, due to the orderBy clause\n                    if (existingNode.id === mySyncNode.node.id) {\n                        existingNode.isMaster = mySyncNode.node.isMaster = mySyncNodeShouldBecomeMaster;\n                    }\n                });\n            })).then(function () {\n                Observable.on('latestRevisionIncremented', onLatestRevisionIncremented); // Wakeup when a new revision is available.\n                Observable.on('beforeunload', onBeforeUnload);\n                Observable.on('suicideNurseCall', onSuicide);\n                Observable.on('intercomm', onIntercomm);\n                // Start polling for changes and do cleanups:\n                pollHandle = setTimeout(poll, LOCAL_POLL);\n                // Start heartbeat\n                heartbeatHandle = setTimeout(heartbeat, HEARTBEAT_INTERVAL);\n            }).then(function () {\n                cleanup();\n            });\n        });\n    }, true); // True means the on(ready) event will survive a db reopening (db.close() / db.open()).\n    var handledRevision = 0;\n    function onLatestRevisionIncremented(dbname, latestRevision) {\n        if (dbname === db.name) {\n            if (handledRevision >= latestRevision)\n                return; // Make sure to only run once per revision. (Workaround for IE triggering storage event on same window)\n            handledRevision = latestRevision;\n            Dexie.vip(function () {\n                readChanges().catch('DatabaseClosedError', function () {\n                    // Handle database closed error gracefully while reading changes.\n                    // Don't trigger 'unhandledrejection'.\n                    // Even though we intercept the close() method, it might be called when in the middle of\n                    // reading changes and then that flow will cancel with DatabaseClosedError.\n                });\n            });\n        }\n    }\n    function readChanges(latestRevision, recursion, wasPartial) {\n        // Whenever changes are read, fire db.on(\"changes\") with the array of changes. Eventually, limit the array to 1000 entries or so (an entire database is\n        // downloaded from server AFTER we are initiated. For example, if first sync call fails, then after a while we get reconnected. However, that scenario\n        // should be handled in case database is totally empty we should fail if sync is not available)\n        if (!recursion && readChanges.ongoingOperation) {\n            // We are already reading changes. Prohibit a parallell execution of this which would lead to duplicate trigging of 'changes' event.\n            // Instead, the callback in toArray() will always check Observable.latestRevision[db.name] to see if it has changed and if so, re-launch readChanges().\n            // The caller should get the Promise instance from the ongoing operation so that the then() method will resolve when operation is finished.\n            return readChanges.ongoingOperation;\n        }\n        var partial = false;\n        var ourSyncNode = mySyncNode.node; // Because mySyncNode can suddenly be set to null on database close, and worse, can be set to a new value if database is reopened.\n        if (!ourSyncNode) {\n            return Promise$1.reject(new Dexie.DatabaseClosedError());\n        }\n        var LIMIT = 1000;\n        var promise = db._changes.where(\"rev\").above(ourSyncNode.myRevision).limit(LIMIT).toArray(function (changes) {\n            if (changes.length > 0) {\n                var lastChange = changes[changes.length - 1];\n                partial = (changes.length === LIMIT);\n                db.on('changes').fire(changes, partial);\n                ourSyncNode.myRevision = lastChange.rev;\n            }\n            else if (wasPartial) {\n                // No more changes, BUT since we have triggered on('changes') with partial = true,\n                // we HAVE TO trigger changes again with empty list and partial = false\n                db.on('changes').fire([], false);\n            }\n            var ourNodeStillExists = false;\n            return db._syncNodes.where(':id').equals(ourSyncNode.id).modify(function (syncNode) {\n                ourNodeStillExists = true;\n                syncNode.lastHeartBeat = Date.now(); // Update heart beat (not nescessary, but why not!)\n                syncNode.deleteTimeStamp = null; // Reset \"deleteTimeStamp\" flag if it was there.\n                syncNode.myRevision = Math.max(syncNode.myRevision, ourSyncNode.myRevision);\n            }).then(function () { return ourNodeStillExists; });\n        }).then(function (ourNodeStillExists) {\n            if (!ourNodeStillExists) {\n                // My node has been deleted. We must have been lazy and got removed by another node.\n                if (browserIsShuttingDown) {\n                    throw new Error(\"Browser is shutting down\");\n                }\n                else {\n                    db.close();\n                    console.error(\"Out of sync\"); // TODO: What to do? Reload the page?\n                    if (global$1.location)\n                        global$1.location.reload(true);\n                    throw new Error(\"Out of sync\"); // Will make current promise reject\n                }\n            }\n            // Check if more changes have come since we started reading changes in the first place. If so, relaunch readChanges and let the ongoing promise not\n            // resolve until all changes have been read.\n            if (partial || Observable.latestRevision[db.name] > ourSyncNode.myRevision) {\n                // Either there were more than 1000 changes or additional changes where added while we were reading these changes,\n                // In either case, call readChanges() again until we're done.\n                return readChanges(Observable.latestRevision[db.name], (recursion || 0) + 1, partial);\n            }\n        }).finally(function () {\n            delete readChanges.ongoingOperation;\n        });\n        if (!recursion) {\n            readChanges.ongoingOperation = promise;\n        }\n        return promise;\n    }\n    /**\n     * The reason we need heartbeat in parallell with poll() is due to the risk of long-running\n     * transactions while syncing changes from server to client in Dexie.Syncable. That transaction will\n     * include _changes (which will block readChanges()) but not _syncNodes. So this heartbeat will go on\n     * during that changes are being applied and update our lastHeartBeat property while poll() is waiting.\n     * When cleanup() (who also is blocked by the sync) wakes up, it won't kill the master node because this\n     * heartbeat job will have updated the master node's heartbeat during the long-running sync transaction.\n     *\n     * If we did not have this heartbeat, and a server send lots of changes that took more than NODE_TIMEOUT\n     * (20 seconds), another node waking up after the sync would kill the master node and take over because\n     * it would believe it was dead.\n     */\n    function heartbeat() {\n        heartbeatHandle = null;\n        var currentInstance = mySyncNode.node && mySyncNode.node.id;\n        if (!currentInstance)\n            return;\n        db.transaction('rw!', db._syncNodes, function () {\n            db._syncNodes.where({ id: currentInstance }).first(function (ourSyncNode) {\n                if (!ourSyncNode) {\n                    // We do not exist anymore. Call db.close() to teardown polls etc.\n                    if (db.isOpen())\n                        db.close();\n                    return;\n                }\n                ourSyncNode.lastHeartBeat = Date.now();\n                ourSyncNode.deleteTimeStamp = null; // Reset \"deleteTimeStamp\" flag if it was there.\n                return db._syncNodes.put(ourSyncNode);\n            });\n        }).catch('DatabaseClosedError', function () {\n            // Ignore silently\n        }).finally(function () {\n            if (mySyncNode.node && mySyncNode.node.id === currentInstance && db.isOpen()) {\n                heartbeatHandle = setTimeout(heartbeat, HEARTBEAT_INTERVAL);\n            }\n        });\n    }\n    function poll() {\n        pollHandle = null;\n        var currentInstance = mySyncNode.node && mySyncNode.node.id;\n        if (!currentInstance)\n            return;\n        Dexie.vip(function () {\n            readChanges(Observable.latestRevision[db.name]).then(cleanup).then(consumeIntercommMessages)\n                .catch('DatabaseClosedError', function () {\n                // Handle database closed error gracefully while reading changes.\n                // Don't trigger 'unhandledrejection'.\n                // Even though we intercept the close() method, it might be called when in the middle of\n                // reading changes and then that flow will cancel with DatabaseClosedError.\n            })\n                .finally(function () {\n                // Poll again in given interval:\n                if (mySyncNode.node && mySyncNode.node.id === currentInstance && db.isOpen()) {\n                    pollHandle = setTimeout(poll, LOCAL_POLL);\n                }\n            });\n        });\n    }\n    function cleanup() {\n        var ourSyncNode = mySyncNode.node;\n        if (!ourSyncNode)\n            return Promise$1.reject(new Dexie.DatabaseClosedError());\n        return db.transaction('rw', '_syncNodes', '_changes', '_intercomm', function () {\n            // Cleanup dead local nodes that has no heartbeat for over a minute\n            // Dont do the following:\n            //nodes.where(\"lastHeartBeat\").below(Date.now() - NODE_TIMEOUT).and(function (node) { return node.type == \"local\"; }).delete();\n            // Because client may have been in hybernate mode and recently woken up. That would lead to deletion of all nodes.\n            // Instead, we should mark any old nodes for deletion in a minute or so. If they still dont wakeup after that minute we could consider them dead.\n            var weBecameMaster = false;\n            db._syncNodes.where(\"lastHeartBeat\").below(Date.now() - NODE_TIMEOUT).filter(function (node) { return node.type === 'local'; }).modify(function (node) {\n                if (node.deleteTimeStamp && node.deleteTimeStamp < Date.now()) {\n                    // Delete the node.\n                    delete this.value;\n                    // Cleanup localStorage \"deadnode:\" entry for this node (localStorage API was used to wakeup other windows (onstorage event) - an event type missing in indexedDB.)\n                    if (localStorage) {\n                        localStorage.removeItem('Dexie.Observable/deadnode:' + node.id + '/' + db.name);\n                    }\n                    // Check if we are deleting a master node\n                    if (node.isMaster) {\n                        // The node we are deleting is master. We must take over that role.\n                        // OK to call nodes.update(). No need to call Dexie.vip() because nodes is opened in existing transaction!\n                        db._syncNodes.update(ourSyncNode, { isMaster: 1 });\n                        weBecameMaster = true;\n                    }\n                    // Cleanup intercomm messages destinated to the node being deleted.\n                    // Those that waits for reply should be redirected to us.\n                    db._intercomm.where({ destinationNode: node.id }).modify(function (msg) {\n                        if (msg.wantReply)\n                            msg.destinationNode = ourSyncNode.id;\n                        else\n                            // Delete the message from DB and if someone is waiting for reply, let ourselved answer the request.\n                            delete this.value;\n                    });\n                }\n                else if (!node.deleteTimeStamp) {\n                    // Mark the node for deletion\n                    node.deleteTimeStamp = Date.now() + HIBERNATE_GRACE_PERIOD;\n                }\n            }).then(function () {\n                // Cleanup old revisions that no node is interested of.\n                Observable.deleteOldChanges(db);\n                return db.on(\"cleanup\").fire(weBecameMaster);\n            });\n        });\n    }\n    function onBeforeUnload() {\n        // Mark our own sync node for deletion.\n        if (!mySyncNode.node)\n            return;\n        browserIsShuttingDown = true;\n        mySyncNode.node.deleteTimeStamp = 1; // One millisecond after 1970. Makes it occur in the past but still keeps it truthy.\n        mySyncNode.node.lastHeartBeat = 0;\n        db._syncNodes.put(mySyncNode.node); // This async operation may be cancelled since the browser is closing down now.\n        Observable.wereTheOneDying = true; // If other nodes in same window wakes up by this call, make sure they dont start taking over mastership and stuff...\n        // Inform other windows that we're gone, so that they may take over our role if needed. Setting localStorage item below will trigger Observable.onStorage, which will trigger onSuicie() below:\n        if (localStorage) {\n            localStorage.setItem('Dexie.Observable/deadnode:' + mySyncNode.node.id.toString() + '/' + db.name, \"dead\"); // In IE, this will also wakeup our own window. However, that is doublechecked in nursecall subscriber below.\n        }\n    }\n    function onSuicide(dbname, nodeID) {\n        if (dbname === db.name && !Observable.wereTheOneDying) {\n            // Make sure it's dead indeed. Second bullet. Why? Because it has marked itself for deletion in the onbeforeunload event, which is fired just before window dies.\n            // It's own call to put() may have been cancelled.\n            // Note also that in IE, this event may be called twice, but that doesnt harm!\n            Dexie.vip(function () {\n                db._syncNodes.update(nodeID, { deleteTimeStamp: 1, lastHeartBeat: 0 }).then(cleanup);\n            });\n        }\n    }\n}\n//\n// Static properties and methods\n// \nObservable.version = \"{version}\";\nObservable.latestRevision = {}; // Latest revision PER DATABASE. Example: Observable.latestRevision.FriendsDB = 37;\nObservable.on = Dexie.Events(null, \"latestRevisionIncremented\", \"suicideNurseCall\", \"intercomm\", \"beforeunload\"); // fire(dbname, value);\nObservable.createUUID = createUUID;\nObservable.deleteOldChanges = deleteOldChanges;\nObservable._onStorage = initOnStorage(Observable);\nObservable._onBeforeUnload = function () {\n    Observable.on.beforeunload.fire();\n};\ntry {\n    Observable.localStorageImpl = global$1.localStorage;\n}\ncatch (ex) { }\n//\n// Map window events to static events in Dexie.Observable:\n//\nif (global$1 === null || global$1 === void 0 ? void 0 : global$1.addEventListener) {\n    global$1.addEventListener(\"storage\", Observable._onStorage);\n    global$1.addEventListener(\"beforeunload\", Observable._onBeforeUnload);\n}\nif (Dexie.Observable) {\n    if (Dexie.Observable.version !== \"{version}\") {\n        throw new Error(\"Mixed versions of dexie-observable\");\n    }\n}\nelse {\n    // Register addon:\n    Dexie.Observable = Observable;\n    Dexie.addons.push(Observable);\n}\n\nvar BaseStorage = /** @class */ (function () {\n    function BaseStorage(dexie) {\n        this.dexie = dexie;\n    }\n    BaseStorage.prototype.table = function (tableName) {\n        return this.dexie.table(tableName.toString());\n    };\n    BaseStorage.prototype.transaction = function (mode, tables, callback) {\n        return __awaiter(this, void 0, void 0, function () {\n            var names;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        names = tables.map(function (tableName) { return tableName.toString(); });\n                        return [4 /*yield*/, this.dexie.transaction(mode, names, callback)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    BaseStorage.prototype.createIterableCollection = function (collection) {\n        return {\n            count: function () { return collection.count(); },\n            range: function (offset, limit) {\n                return collection.offset(offset).limit(limit).toArray();\n            },\n        };\n    };\n    return BaseStorage;\n}());\n\nvar SCHEMAS_TABLE = 'schemas';\nvar SCHEMA_METADATA_TABLE = 'schema_metadata';\nvar SCHEMA_IMAGES_TABLE = 'schema_images';\nvar SchemaIndex;\n(function (SchemaIndex) {\n    SchemaIndex[\"Id\"] = \"id\";\n})(SchemaIndex || (SchemaIndex = {}));\nvar SchemaMetadataIndex;\n(function (SchemaMetadataIndex) {\n    SchemaMetadataIndex[\"Id\"] = \"id\";\n})(SchemaMetadataIndex || (SchemaMetadataIndex = {}));\nvar SchemaImageIndex;\n(function (SchemaImageIndex) {\n    SchemaImageIndex[\"SchemaId\"] = \"schemaId\";\n})(SchemaImageIndex || (SchemaImageIndex = {}));\nfunction filterSchema(schema) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    schema.metadata; var rest = __rest(schema, [\"metadata\"]);\n    return rest;\n}\nfunction removeModelId$1(schemaModel) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    schemaModel.id; var rest = __rest(schemaModel, [\"id\"]);\n    return rest;\n}\nvar SchemaStorage = /** @class */ (function (_super) {\n    __extends(SchemaStorage, _super);\n    function SchemaStorage(dexie) {\n        return _super.call(this, dexie) || this;\n    }\n    SchemaStorage.prototype.add = function (schema, schemaImageDataURL) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.transaction('rw', [SCHEMAS_TABLE, SCHEMA_METADATA_TABLE, SCHEMA_IMAGES_TABLE], function () {\n                            var metadata = schema.metadata;\n                            _this.table(SCHEMAS_TABLE).add(__assign$1({ id: metadata.id }, filterSchema(schema)));\n                            _this.table(SCHEMA_METADATA_TABLE).add(metadata);\n                            _this.table(SCHEMA_IMAGES_TABLE).add({\n                                schemaId: metadata.id,\n                                dataURL: schemaImageDataURL,\n                            });\n                        })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    SchemaStorage.prototype.get = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.transaction('r', [SCHEMAS_TABLE, SCHEMA_METADATA_TABLE], function () { return __awaiter(_this, void 0, void 0, function () {\n                            var schema, metadata;\n                            var _a;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0: return [4 /*yield*/, this.table(SCHEMAS_TABLE).get(id)];\n                                    case 1:\n                                        schema = _b.sent();\n                                        if (!schema) {\n                                            throw new Error('No schema');\n                                        }\n                                        return [4 /*yield*/, this.table(SCHEMA_METADATA_TABLE).get((_a = {},\n                                                _a[SchemaMetadataIndex.Id] = id,\n                                                _a))];\n                                    case 2:\n                                        metadata = _b.sent();\n                                        if (!metadata) {\n                                            throw new Error('No metadata');\n                                        }\n                                        return [2 /*return*/, __assign$1(__assign$1({}, removeModelId$1(schema)), { metadata: metadata })];\n                                }\n                            });\n                        }); })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    SchemaStorage.prototype.getImage = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.table(SCHEMA_IMAGES_TABLE).get(id)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    SchemaStorage.prototype.changeName = function (id, name) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.table(SCHEMA_METADATA_TABLE)\n                            .where((_a = {}, _a[SchemaMetadataIndex.Id] = id, _a))\n                            .modify(function (metadata) {\n                            metadata.name = name;\n                        })];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SchemaStorage.prototype.collection = function (searchName) {\n        var _this = this;\n        var searchNameLower = searchName === null || searchName === void 0 ? void 0 : searchName.toLowerCase();\n        var collection = searchName\n            ? this.table(SCHEMA_METADATA_TABLE)\n                .filter(function (_a) {\n                var name = _a.name;\n                return name.toLowerCase().indexOf(searchNameLower) !== -1;\n            })\n                .reverse()\n            : this.table(SCHEMA_METADATA_TABLE).toCollection().reverse();\n        return {\n            count: function () { return collection.count(); },\n            range: function (offset, limit) { return __awaiter(_this, void 0, void 0, function () {\n                var data;\n                var _this = this;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, collection.offset(offset).limit(limit).toArray()];\n                        case 1:\n                            data = _a.sent();\n                            return [4 /*yield*/, Promise.all(data.map(function (metadata) {\n                                    return (function () { return __awaiter(_this, void 0, void 0, function () {\n                                        var image;\n                                        return __generator(this, function (_a) {\n                                            switch (_a.label) {\n                                                case 0: return [4 /*yield*/, this.getImage(metadata.id)];\n                                                case 1:\n                                                    image = _a.sent();\n                                                    if (image) {\n                                                        return [2 /*return*/, {\n                                                                metadata: metadata,\n                                                                image: image,\n                                                            }];\n                                                    }\n                                                    else {\n                                                        throw new Error(\"No image with id \" + metadata.id);\n                                                    }\n                                            }\n                                        });\n                                    }); })();\n                                }))];\n                        case 2: return [2 /*return*/, _a.sent()];\n                    }\n                });\n            }); },\n        };\n    };\n    SchemaStorage.prototype.delete = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.transaction('rw', [SCHEMAS_TABLE, SCHEMA_METADATA_TABLE, SCHEMA_IMAGES_TABLE], function () {\n                            var _a, _b;\n                            _this.table(SCHEMAS_TABLE)\n                                .where((_a = {}, _a[SchemaIndex.Id] = id, _a))\n                                .delete();\n                            _this.table(SCHEMA_METADATA_TABLE)\n                                .where((_b = {}, _b[SchemaMetadataIndex.Id] = id, _b))\n                                .delete();\n                            _this.table(SCHEMA_IMAGES_TABLE).delete(id);\n                        })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    return SchemaStorage;\n}(BaseStorage));\n\nfunction cellToChunkNumber(_a, _b) {\n    var i = _a.i, j = _a.j;\n    var width = _b.width, height = _b.height, chunksPerRow = _b.chunksPerRow;\n    var chunkI = Math.floor(i / width);\n    var chunkJ = Math.floor(j / height);\n    return chunkJ * chunksPerRow + chunkI;\n}\n\nfunction computeChunksCount(work, chunkMetadata) {\n    var height = work.metadata.schemaMetadata.canvasMetadata.height;\n    var rowsCount = Math.ceil(height / chunkMetadata.height);\n    return chunkMetadata.chunksPerRow * rowsCount;\n}\n\nfunction createChunkMetadata(width, height, metadata) {\n    var canvasMetadata = metadata.schemaMetadata.canvasMetadata;\n    var chunksPerRow = Math.ceil(canvasMetadata.width / width);\n    var lastChunkWidth = canvasMetadata.width - (chunksPerRow - 1) * width;\n    return {\n        workId: metadata.id,\n        width: width,\n        height: height,\n        chunksPerRow: chunksPerRow,\n        lastChunkWidth: lastChunkWidth,\n    };\n}\n\nfunction createEmptyWorkGrid(width, height) {\n    var size = width * height;\n    var embroidered = new Array(size);\n    for (var i = 0; i < size; i++) {\n        embroidered[i] = null;\n    }\n    return embroidered;\n}\n\nfunction computeChunkBoundaries(workMetadata, chunkMetadata, chunkNumber) {\n    var chunksPerRow = chunkMetadata.chunksPerRow, lastChunkWidth = chunkMetadata.lastChunkWidth;\n    var chunkI = chunkNumber % chunksPerRow;\n    var chunkJ = (chunkNumber - chunkI) / chunksPerRow;\n    var _a = workMetadata.schemaMetadata.canvasMetadata, schemaWidth = _a.width, schemaHeight = _a.height;\n    var deltaX = schemaWidth - chunkI * chunkMetadata.width;\n    var deltaY = schemaHeight - chunkJ * chunkMetadata.height;\n    var chunkWidth = Math.min(deltaX, chunkMetadata.width);\n    var chunkHeight = Math.min(deltaY, chunkMetadata.height);\n    var start = (chunkMetadata.width * chunkMetadata.height * (chunksPerRow - 1) +\n        lastChunkWidth * chunkMetadata.height) *\n        chunkJ +\n        chunkMetadata.width * chunkI;\n    var end = start + schemaWidth * chunkHeight;\n    return {\n        start: start,\n        end: end,\n        offset: schemaWidth,\n        chunkWidth: chunkWidth,\n        chunkHeight: chunkHeight,\n    };\n}\n\nfunction extractChunk(work, chunkMetadata, chunkNumber) {\n    var _a = computeChunkBoundaries(work.metadata, chunkMetadata, chunkNumber), start = _a.start, end = _a.end, offset = _a.offset, chunkWidth = _a.chunkWidth, chunkHeight = _a.chunkHeight;\n    var embroidered = createEmptyWorkGrid(chunkWidth, chunkHeight);\n    for (var j = start, index = 0; j < end; j += offset) {\n        for (var i = 0; i < chunkWidth; i++, index++) {\n            embroidered[index] = work.embroidered[j + i];\n        }\n    }\n    return {\n        workId: work.metadata.id,\n        number: chunkNumber,\n        embroidered: embroidered,\n    };\n}\n\nfunction foreachChunk(work, chunkMetadata, callback) {\n    var chunksCount = computeChunksCount(work, chunkMetadata);\n    for (var i = 0; i < chunksCount; i++) {\n        var chunk = extractChunk(work, chunkMetadata, i);\n        callback(chunk);\n    }\n}\n\nfunction insertChunk(workMetadata, embroidered, chunkMetadata, chunk) {\n    var _a = computeChunkBoundaries(workMetadata, chunkMetadata, chunk.number), start = _a.start, end = _a.end, offset = _a.offset, chunkWidth = _a.chunkWidth;\n    for (var j = start, index = 0; j < end; j += offset) {\n        for (var i = 0; i < chunkWidth; i++, index++) {\n            embroidered[j + i] = chunk.embroidered[index];\n        }\n    }\n}\n\nvar WORKS_TABLE = 'works';\nvar WORK_METADATA_TABLE = 'work_metadata';\nvar WORK_IMAGES_TABLE = 'work_images';\nvar WORK_CHUNKS_TABLE = 'work_chunks';\nvar WORK_CHUNKS_METADATA_TABLE = 'work_chunks_metadata';\nvar CHUNK_WIDTH = 64; // change will only affect new works\nvar CHUNK_HEIGHT = 64; // change will only affect new works\nvar WorkIndex;\n(function (WorkIndex) {\n    WorkIndex[\"Id\"] = \"id\";\n})(WorkIndex || (WorkIndex = {}));\nvar WorkMetadataIndex;\n(function (WorkMetadataIndex) {\n    WorkMetadataIndex[\"Id\"] = \"id\";\n    WorkMetadataIndex[\"LastActivity\"] = \"lastActivity\";\n})(WorkMetadataIndex || (WorkMetadataIndex = {}));\nvar WorkImageIndex;\n(function (WorkImageIndex) {\n    WorkImageIndex[\"WorkId\"] = \"workId\";\n})(WorkImageIndex || (WorkImageIndex = {}));\nvar WorkChunkIndex;\n(function (WorkChunkIndex) {\n    WorkChunkIndex[\"WorkId\"] = \"workId\";\n    WorkChunkIndex[\"Number\"] = \"number\";\n})(WorkChunkIndex || (WorkChunkIndex = {}));\nvar WorkChunkMetadataIndex;\n(function (WorkChunkMetadataIndex) {\n    WorkChunkMetadataIndex[\"WorkId\"] = \"workId\";\n})(WorkChunkMetadataIndex || (WorkChunkMetadataIndex = {}));\nfunction filterWork(work) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    work.embroidered; work.metadata; var rest = __rest(work, [\"embroidered\", \"metadata\"]);\n    return rest;\n}\nfunction removeModelId(workModel) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    workModel.id; var rest = __rest(workModel, [\"id\"]);\n    return rest;\n}\nvar WorkStorage = /** @class */ (function (_super) {\n    __extends(WorkStorage, _super);\n    function WorkStorage(dexie) {\n        return _super.call(this, dexie) || this;\n    }\n    WorkStorage.prototype.add = function (work, workImageDataURL) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.transaction('rw', [\n                            WORKS_TABLE,\n                            WORK_METADATA_TABLE,\n                            WORK_IMAGES_TABLE,\n                            WORK_CHUNKS_TABLE,\n                            WORK_CHUNKS_METADATA_TABLE,\n                        ], function () {\n                            var metadata = work.metadata;\n                            var chunkMetadata = createChunkMetadata(CHUNK_WIDTH, CHUNK_HEIGHT, metadata);\n                            _this.table(WORKS_TABLE).add(__assign$1({ id: metadata.id }, filterWork(work)));\n                            _this.table(WORK_METADATA_TABLE).add(metadata);\n                            _this.table(WORK_IMAGES_TABLE).add({\n                                workId: metadata.id,\n                                dataURL: workImageDataURL,\n                            });\n                            _this.table(WORK_CHUNKS_METADATA_TABLE).add(chunkMetadata);\n                            foreachChunk(work, chunkMetadata, function (chunk) {\n                                _this.table(WORK_CHUNKS_TABLE).add(chunk);\n                            });\n                        })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    WorkStorage.prototype.changeName = function (id, name) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.table(WORK_METADATA_TABLE)\n                            .where((_a = {}, _a[WorkMetadataIndex.Id] = id, _a))\n                            .modify(function (metadata) {\n                            metadata.name = name;\n                        })];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    WorkStorage.prototype.saveChanges = function (work, changedCells) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.transaction('rw', [\n                            WORKS_TABLE,\n                            WORK_METADATA_TABLE,\n                            WORK_CHUNKS_TABLE,\n                            WORK_CHUNKS_METADATA_TABLE,\n                        ], function () { return __awaiter(_this, void 0, void 0, function () {\n                            var metadata, id, chunkMetadata, chunkNumbers;\n                            var _a;\n                            var _this = this;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        metadata = work.metadata;\n                                        id = metadata.id;\n                                        metadata.lastActivity = new Date();\n                                        return [4 /*yield*/, this.table(WORK_METADATA_TABLE)\n                                                .where((_a = {}, _a[WorkMetadataIndex.Id] = id, _a))\n                                                .modify(metadata)];\n                                    case 1:\n                                        _b.sent();\n                                        return [4 /*yield*/, this.table(WORK_CHUNKS_METADATA_TABLE).get(id)];\n                                    case 2:\n                                        chunkMetadata = _b.sent();\n                                        if (!chunkMetadata) {\n                                            throw new Error('No chunk metadata');\n                                        }\n                                        chunkNumbers = new Set();\n                                        changedCells.forEach(function (cell) {\n                                            chunkNumbers.add(cellToChunkNumber(cell, chunkMetadata));\n                                        });\n                                        chunkNumbers.forEach(function (chunkNumber) {\n                                            var _a;\n                                            var chunk = extractChunk(work, chunkMetadata, chunkNumber);\n                                            _this.table(WORK_CHUNKS_TABLE)\n                                                .where((_a = {},\n                                                _a[WorkChunkIndex.WorkId] = id,\n                                                _a[WorkChunkIndex.Number] = chunkNumber,\n                                                _a))\n                                                .modify(chunk);\n                                        });\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    WorkStorage.prototype.get = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.transaction('r', [\n                            WORKS_TABLE,\n                            WORK_METADATA_TABLE,\n                            WORK_CHUNKS_TABLE,\n                            WORK_CHUNKS_METADATA_TABLE,\n                        ], function () { return __awaiter(_this, void 0, void 0, function () {\n                            var work, metadata, chunkMetadata, _a, width, height, embroidered;\n                            var _b;\n                            return __generator(this, function (_c) {\n                                switch (_c.label) {\n                                    case 0: return [4 /*yield*/, this.table(WORKS_TABLE).get(id)];\n                                    case 1:\n                                        work = _c.sent();\n                                        if (!work) {\n                                            throw new Error('No work');\n                                        }\n                                        return [4 /*yield*/, this.table(WORK_METADATA_TABLE).get((_b = {},\n                                                _b[WorkMetadataIndex.Id] = id,\n                                                _b))];\n                                    case 2:\n                                        metadata = _c.sent();\n                                        if (!metadata) {\n                                            throw new Error('No metadata');\n                                        }\n                                        return [4 /*yield*/, this.table(WORK_CHUNKS_METADATA_TABLE).get(id)];\n                                    case 3:\n                                        chunkMetadata = _c.sent();\n                                        if (!chunkMetadata) {\n                                            throw new Error('No chunk metadata');\n                                        }\n                                        _a = metadata.schemaMetadata.canvasMetadata, width = _a.width, height = _a.height;\n                                        embroidered = createEmptyWorkGrid(width, height);\n                                        return [4 /*yield*/, this.table(WORK_CHUNKS_TABLE)\n                                                .where(\"[\" + WorkChunkIndex.WorkId + \"+\" + WorkChunkIndex.Number + \"]\")\n                                                .between([id, Dexie.minKey], [id, Dexie.maxKey])\n                                                .each(function (chunk) {\n                                                insertChunk(metadata, embroidered, chunkMetadata, chunk);\n                                            })];\n                                    case 4:\n                                        _c.sent();\n                                        return [2 /*return*/, __assign$1(__assign$1({}, removeModelId(work)), { metadata: metadata, embroidered: embroidered })];\n                                }\n                            });\n                        }); })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    WorkStorage.prototype.getImage = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.table(WORK_IMAGES_TABLE).get(id)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    WorkStorage.prototype.getLastWorkMetadata = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.table(WORK_METADATA_TABLE)\n                            .orderBy(WorkMetadataIndex.LastActivity)\n                            .reverse()\n                            .first()];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    WorkStorage.prototype.collection = function (searchName) {\n        var _this = this;\n        var searchNameLower = searchName === null || searchName === void 0 ? void 0 : searchName.toLowerCase();\n        var collection = searchName\n            ? this.table(WORK_METADATA_TABLE)\n                .filter(function (_a) {\n                var name = _a.name;\n                return name.toLowerCase().indexOf(searchNameLower) !== -1;\n            })\n                .reverse()\n            : this.table(WORK_METADATA_TABLE)\n                .orderBy(WorkMetadataIndex.LastActivity)\n                .reverse();\n        return {\n            count: function () { return collection.count(); },\n            range: function (offset, limit) { return __awaiter(_this, void 0, void 0, function () {\n                var data;\n                var _this = this;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, collection.offset(offset).limit(limit).toArray()];\n                        case 1:\n                            data = _a.sent();\n                            return [4 /*yield*/, Promise.all(data.map(function (metadata) {\n                                    return (function () { return __awaiter(_this, void 0, void 0, function () {\n                                        var image;\n                                        return __generator(this, function (_a) {\n                                            switch (_a.label) {\n                                                case 0: return [4 /*yield*/, this.getImage(metadata.id)];\n                                                case 1:\n                                                    image = _a.sent();\n                                                    if (image) {\n                                                        return [2 /*return*/, {\n                                                                metadata: metadata,\n                                                                image: image,\n                                                            }];\n                                                    }\n                                                    else {\n                                                        throw new Error(\"No image with id \" + metadata.id);\n                                                    }\n                                            }\n                                        });\n                                    }); })();\n                                }))];\n                        case 2: return [2 /*return*/, _a.sent()];\n                    }\n                });\n            }); },\n        };\n    };\n    WorkStorage.prototype.delete = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.transaction('rw', [\n                            WORKS_TABLE,\n                            WORK_METADATA_TABLE,\n                            WORK_IMAGES_TABLE,\n                            WORK_CHUNKS_TABLE,\n                            WORK_CHUNKS_METADATA_TABLE,\n                        ], function () {\n                            var _a;\n                            _this.table(WORKS_TABLE).delete(id);\n                            _this.table(WORK_METADATA_TABLE)\n                                .where((_a = {}, _a[WorkMetadataIndex.Id] = id, _a))\n                                .delete();\n                            _this.table(WORK_IMAGES_TABLE).delete(id);\n                            _this.table(WORK_CHUNKS_TABLE)\n                                .where(\"[\" + WorkChunkIndex.WorkId + \"+\" + WorkChunkIndex.Number + \"]\")\n                                .between([id, Dexie.minKey], [id, Dexie.maxKey])\n                                .delete();\n                            _this.table(WORK_CHUNKS_METADATA_TABLE).delete(id);\n                        })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    return WorkStorage;\n}(BaseStorage));\n\nfunction config(dexie) {\n    var _a;\n    dexie.version(1).stores((_a = {},\n        _a[SCHEMAS_TABLE] = SchemaIndex.Id,\n        _a[SCHEMA_METADATA_TABLE] = \"++, &\" + SchemaMetadataIndex.Id,\n        _a[SCHEMA_IMAGES_TABLE] = SchemaImageIndex.SchemaId,\n        _a[WORKS_TABLE] = WorkIndex.Id,\n        _a[WORK_METADATA_TABLE] = \"++, &\" + WorkMetadataIndex.Id + \", \" + WorkMetadataIndex.LastActivity,\n        _a[WORK_IMAGES_TABLE] = WorkImageIndex.WorkId,\n        _a[WORK_CHUNKS_TABLE] = \"[\" + WorkChunkIndex.WorkId + \"+\" + WorkChunkIndex.Number + \"]\",\n        _a[WORK_CHUNKS_METADATA_TABLE] = WorkChunkMetadataIndex.WorkId,\n        _a));\n}\n\nvar DB_NAME = 'fancywork';\nvar Database = /** @class */ (function (_super) {\n    __extends(Database, _super);\n    function Database(dexie) {\n        var _this = _super.call(this) || this;\n        _this.attach(dexie);\n        _this.schemas = new SchemaStorage(dexie);\n        _this.works = new WorkStorage(dexie);\n        return _this;\n    }\n    Database.prototype.attach = function (dexie) {\n        var _this = this;\n        dexie.on('changes', function (changes, partial) {\n            _this.emit('changes', { changes: changes, partial: partial });\n        });\n    };\n    Database.open = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var dexie, database;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        dexie = new Dexie(DB_NAME, { autoOpen: false });\n                        config(dexie);\n                        return [4 /*yield*/, dexie.open()];\n                    case 1:\n                        _a.sent();\n                        database = new Database(dexie);\n                        return [2 /*return*/, {\n                                database: database,\n                                close: function () {\n                                    dexie.close();\n                                },\n                            }];\n                }\n            });\n        });\n    };\n    return Database;\n}(core.EventEmitter));\n\nexports.Database = Database;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar require$$0 = require('react');\nvar storage = require('@fancywork/storage');\nvar antd = require('antd');\nvar reactRouterDom = require('react-router-dom');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar require$$0__default = /*#__PURE__*/_interopDefaultLegacy(require$$0);\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar jsxRuntime = {exports: {}};\n\nvar reactJsxRuntime_production_min = {};\n\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar f=require$$0__default[\"default\"],g=60103;reactJsxRuntime_production_min.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");reactJsxRuntime_production_min.Fragment=h(\"react.fragment\");}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return {$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;\n\nvar reactJsxRuntime_development = {};\n\n/** @license React v17.0.2\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n(function (exports) {\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n\nvar React = require$$0__default[\"default\"];\nvar _assign = objectAssign;\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar REACT_ELEMENT_TYPE = 0xeac7;\nvar REACT_PORTAL_TYPE = 0xeaca;\nexports.Fragment = 0xeacb;\nvar REACT_STRICT_MODE_TYPE = 0xeacc;\nvar REACT_PROFILER_TYPE = 0xead2;\nvar REACT_PROVIDER_TYPE = 0xeacd;\nvar REACT_CONTEXT_TYPE = 0xeace;\nvar REACT_FORWARD_REF_TYPE = 0xead0;\nvar REACT_SUSPENSE_TYPE = 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = 0xead8;\nvar REACT_MEMO_TYPE = 0xead3;\nvar REACT_LAZY_TYPE = 0xead4;\nvar REACT_BLOCK_TYPE = 0xead9;\nvar REACT_SERVER_BLOCK_TYPE = 0xeada;\nvar REACT_FUNDAMENTAL_TYPE = 0xead5;\nvar REACT_DEBUG_TRACING_MODE_TYPE = 0xeae1;\nvar REACT_LEGACY_HIDDEN_TYPE = 0xeae3;\n\nif (typeof Symbol === 'function' && Symbol.for) {\n  var symbolFor = Symbol.for;\n  REACT_ELEMENT_TYPE = symbolFor('react.element');\n  REACT_PORTAL_TYPE = symbolFor('react.portal');\n  exports.Fragment = symbolFor('react.fragment');\n  REACT_STRICT_MODE_TYPE = symbolFor('react.strict_mode');\n  REACT_PROFILER_TYPE = symbolFor('react.profiler');\n  REACT_PROVIDER_TYPE = symbolFor('react.provider');\n  REACT_CONTEXT_TYPE = symbolFor('react.context');\n  REACT_FORWARD_REF_TYPE = symbolFor('react.forward_ref');\n  REACT_SUSPENSE_TYPE = symbolFor('react.suspense');\n  REACT_SUSPENSE_LIST_TYPE = symbolFor('react.suspense_list');\n  REACT_MEMO_TYPE = symbolFor('react.memo');\n  REACT_LAZY_TYPE = symbolFor('react.lazy');\n  REACT_BLOCK_TYPE = symbolFor('react.block');\n  REACT_SERVER_BLOCK_TYPE = symbolFor('react.server.block');\n  REACT_FUNDAMENTAL_TYPE = symbolFor('react.fundamental');\n  symbolFor('react.scope');\n  symbolFor('react.opaque.id');\n  REACT_DEBUG_TRACING_MODE_TYPE = symbolFor('react.debug_trace_mode');\n  symbolFor('react.offscreen');\n  REACT_LEGACY_HIDDEN_TYPE = symbolFor('react.legacy_hidden');\n}\n\nvar MAYBE_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    printWarning('error', format, args);\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    }\n\n    var argsWithFormat = args.map(function (item) {\n      return '' + item;\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// Filter certain DOM attributes (e.g. src, href) if their values are empty strings.\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === exports.Fragment || type === REACT_PROFILER_TYPE || type === REACT_DEBUG_TRACING_MODE_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || type === REACT_LEGACY_HIDDEN_TYPE || enableScopeAPI ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_BLOCK_TYPE || type[0] === REACT_SERVER_BLOCK_TYPE) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var functionName = innerType.displayName || innerType.name || '';\n  return outerType.displayName || (functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName);\n}\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n}\n\nfunction getComponentName(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  {\n    if (typeof type.tag === 'number') {\n      error('Received an unexpected object in getComponentName(). ' + 'This is likely a bug in React. Please file an issue.');\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case exports.Fragment:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n        return getContextName(context) + '.Consumer';\n\n      case REACT_PROVIDER_TYPE:\n        var provider = type;\n        return getContextName(provider._context) + '.Provider';\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        return getComponentName(type.type);\n\n      case REACT_BLOCK_TYPE:\n        return getComponentName(type._render);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentName(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n    }\n  }\n\n  return null;\n}\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: _assign({}, props, {\n          value: prevLog\n        }),\n        info: _assign({}, props, {\n          value: prevInfo\n        }),\n        warn: _assign({}, props, {\n          value: prevWarn\n        }),\n        error: _assign({}, props, {\n          value: prevError\n        }),\n        group: _assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: _assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: _assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if (!fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  var control;\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      var Fake = function () {\n        throw Error();\n      }; // $FlowFixMe\n\n\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function () {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        }\n      });\n\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sample.stack.split('\\n');\n      var controlLines = control.stack.split('\\n');\n      var s = sampleLines.length - 1;\n      var c = controlLines.length - 1;\n\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at ');\n\n                {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n      case REACT_BLOCK_TYPE:\n        return describeFunctionComponentFrame(type._render);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar loggedTypeFailures = {};\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n  {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    var has = Function.call.bind(Object.prototype.hasOwnProperty);\n\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error$1 = ex;\n        }\n\n        if (error$1 && !(error$1 instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n\n          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n          setCurrentlyValidatingElement(null);\n        }\n\n        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error$1.message] = true;\n          setCurrentlyValidatingElement(element);\n\n          error('Failed %s type: %s', location, error$1.message);\n\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar RESERVED_PROPS = {\n  key: true,\n  ref: true,\n  __self: true,\n  __source: true\n};\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentName(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentName(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingRef = function () {\n      if (!specialPropRefWarningShown) {\n        specialPropRefWarningShown = true;\n\n        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingRef.isReactWarning = true;\n    Object.defineProperty(props, 'ref', {\n      get: warnAboutAccessingRef,\n      configurable: true\n    });\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    // Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // self and source are DEV only properties.\n\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: self\n    }); // Two elements created in two different places should be considered\n    // equal for testing purposes and therefore we hide it from enumeration.\n\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: source\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV(type, config, maybeKey, source, self) {\n  {\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      ref = config.ref;\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n  }\n}\n\nvar ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement$1(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n    }\n  }\n}\n\nvar propTypesMisspellWarningShown;\n\n{\n  propTypesMisspellWarningShown = false;\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\nfunction isValidElement(object) {\n  {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner$1.current) {\n      var name = getComponentName(ReactCurrentOwner$1.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n\nfunction getSourceInfoErrorAddendum(source) {\n  {\n    if (source !== undefined) {\n      var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n      var lineNumber = source.lineNumber;\n      return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n    }\n\n    return '';\n  }\n}\n/**\n * Warn if there's no key explicitly set on dynamic arrays of children or\n * object keys are not valid. This allows us to keep track of children between\n * updates.\n */\n\n\nvar ownerHasKeyUseWarning = {};\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner$1.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentName(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement$1(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement$1(null);\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object') {\n      return;\n    }\n\n    if (Array.isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else if (node) {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Given an element, validate that its props follow the propTypes definition,\n * provided by the type.\n *\n * @param {ReactElement} element\n */\n\n\nfunction validatePropTypes(element) {\n  {\n    var type = element.type;\n\n    if (type === null || type === undefined || typeof type === 'string') {\n      return;\n    }\n\n    var propTypes;\n\n    if (typeof type === 'function') {\n      propTypes = type.propTypes;\n    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n    // Inner props are checked in the reconciler.\n    type.$$typeof === REACT_MEMO_TYPE)) {\n      propTypes = type.propTypes;\n    } else {\n      return;\n    }\n\n    if (propTypes) {\n      // Intentionally inside to avoid triggering lazy initializers:\n      var name = getComponentName(type);\n      checkPropTypes(propTypes, element.props, 'prop', name, element);\n    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n      var _name = getComponentName(type);\n\n      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n    }\n\n    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n    }\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement$1(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement$1(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement$1(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement$1(null);\n    }\n  }\n}\n\nfunction jsxWithValidation(type, props, key, isStaticChildren, source, self) {\n  {\n    var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n    // succeed and there will likely be errors in render.\n\n    if (!validType) {\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var sourceInfo = getSourceInfoErrorAddendum(source);\n\n      if (sourceInfo) {\n        info += sourceInfo;\n      } else {\n        info += getDeclarationErrorAddendum();\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (Array.isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentName(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    }\n\n    var element = jsxDEV(type, props, key, source, self); // The result can be nullish if a mock or a custom function is used.\n    // TODO: Drop this when these are no longer allowed as the type argument.\n\n    if (element == null) {\n      return element;\n    } // Skip key warning if the type isn't valid since our key validation logic\n    // doesn't expect a non-string/function type and can throw confusing errors.\n    // We don't want exception behavior to differ between dev and prod.\n    // (Rendering will throw with a helpful message and as soon as the type is\n    // fixed, the key warnings will appear.)\n\n\n    if (validType) {\n      var children = props.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (Array.isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    }\n\n    if (type === exports.Fragment) {\n      validateFragmentProps(element);\n    } else {\n      validatePropTypes(element);\n    }\n\n    return element;\n  }\n} // These two functions exist to still get child warnings in dev\n// even with the prod transform. This means that jsxDEV is purely\n// opt-in behavior for better messages but that we won't stop\n// giving you warnings if you use production apis.\n\nfunction jsxWithValidationStatic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, true);\n  }\n}\nfunction jsxWithValidationDynamic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, false);\n  }\n}\n\nvar jsx =  jsxWithValidationDynamic ; // we may want to special case jsxs internally to take advantage of static children.\n// for now we can ship identical prod functions\n\nvar jsxs =  jsxWithValidationStatic ;\n\nexports.jsx = jsx;\nexports.jsxs = jsxs;\n  })();\n}\n}(reactJsxRuntime_development));\n\nif (process.env.NODE_ENV === 'production') {\n  jsxRuntime.exports = reactJsxRuntime_production_min;\n} else {\n  jsxRuntime.exports = reactJsxRuntime_development;\n}\n\nvar DatabaseContext = require$$0__default[\"default\"].createContext(undefined);\nfunction useDatabase() {\n    var database = require$$0.useContext(DatabaseContext);\n    if (database === undefined) {\n        throw new Error('No app storage provider');\n    }\n    else {\n        return database;\n    }\n}\nvar DatabaseProvider = function (_a) {\n    var children = _a.children;\n    var _b = require$$0.useState(), database = _b[0], setDatabase = _b[1];\n    require$$0.useEffect(function () {\n        var isDestroyed = false;\n        var close = function () {\n            isDestroyed = true;\n        };\n        var action = function () { return __awaiter(void 0, void 0, void 0, function () {\n            var result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, storage.Database.open()];\n                    case 1:\n                        result = _a.sent();\n                        if (isDestroyed) {\n                            result.close();\n                        }\n                        else {\n                            setDatabase(result.database);\n                            close = result.close;\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        action();\n        return function () {\n            close();\n        };\n    }, []);\n    if (database) {\n        return (jsxRuntime.exports.jsx(DatabaseContext.Provider, __assign({ value: database }, { children: children }), void 0));\n    }\n    else {\n        return null;\n    }\n};\n\nvar styles$1 = {\"root\":\"database-pagination-layout_root__1Gx0u\",\"header\":\"database-pagination-layout_header__dvzi6\",\"main\":\"database-pagination-layout_main__384zy\",\"empty\":\"database-pagination-layout_empty__2_nIE\",\"content\":\"database-pagination-layout_content__cU5ME\",\"spin\":\"database-pagination-layout_spin__dM02W\",\"emptySpin\":\"database-pagination-layout_empty-spin__3lJNX\",\"pagination\":\"database-pagination-layout_pagination__39agX\"};\n\nvar DatabasePaginationLayout = function (_a) {\n    var children = _a.children, style = _a.style, databasePagination = _a.databasePagination, noDataText = _a.noDataText, extraContent = _a.extraContent, props = __rest(_a, [\"children\", \"style\", \"databasePagination\", \"noDataText\", \"extraContent\"]);\n    var loading = databasePagination.loading, total = databasePagination.total, page = databasePagination.page, pageSize = databasePagination.pageSize, setPage = databasePagination.setPage;\n    require$$0.useEffect(function () {\n        window.scroll({\n            top: 0,\n            behavior: 'smooth',\n        });\n    }, [page]);\n    return (jsxRuntime.exports.jsxs(\"div\", __assign({ className: styles$1.root, style: style }, { children: [jsxRuntime.exports.jsx(antd.PageHeader, __assign({}, props, { className: styles$1.header }), void 0), jsxRuntime.exports.jsx(\"main\", __assign({ className: styles$1.main }, { children: jsxRuntime.exports.jsxs(\"div\", __assign({ className: styles$1.content }, { children: [jsxRuntime.exports.jsx(jsxRuntime.exports.Fragment, { children: extraContent }, void 0), (loading && total === undefined) || total !== 0 ? (jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment, { children: [jsxRuntime.exports.jsx(antd.Spin, __assign({ spinning: loading, delay: total === undefined ? 50 : 0, className: styles$1.spin }, { children: children }), void 0), jsxRuntime.exports.jsx(\"div\", __assign({ className: styles$1.pagination }, { children: total ? (jsxRuntime.exports.jsx(antd.Pagination, { total: total, pageSize: pageSize, current: page, hideOnSinglePage: true, onChange: function (page) {\n                                            setPage(page);\n                                        } }, void 0)) : null }), void 0)] }, void 0)) : (jsxRuntime.exports.jsx(\"div\", __assign({ className: styles$1.empty }, { children: jsxRuntime.exports.jsx(antd.Spin, __assign({ spinning: loading, className: styles$1.emptySpin, delay: 250 }, { children: jsxRuntime.exports.jsx(antd.Empty, { description: noDataText }, void 0) }), void 0) }), void 0))] }), void 0) }), void 0)] }), void 0));\n};\n\nfunction useDatabaseItem(query) {\n    var _this = this;\n    var database = useDatabase();\n    var _a = require$$0.useState(false), loading = _a[0], setLoading = _a[1];\n    var _b = require$$0.useState(), error = _b[0], setError = _b[1];\n    var _c = require$$0.useState(), item = _c[0], setItem = _c[1];\n    var queryRef = require$$0.useRef(query);\n    require$$0.useEffect(function () {\n        var action = function () { return __awaiter(_this, void 0, void 0, function () {\n            var item_1, error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        setLoading(true);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, queryRef.current(database)];\n                    case 2:\n                        item_1 = _a.sent();\n                        setLoading(false);\n                        setItem(item_1);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_1 = _a.sent();\n                        setLoading(false);\n                        if (error_1 instanceof Error) {\n                            setError(error_1.message);\n                        }\n                        else {\n                            setError('Unknown error');\n                        }\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); };\n        action();\n    }, [database]);\n    return {\n        item: item,\n        error: error,\n        loading: loading,\n    };\n}\n\nfunction useSearchParam(name, options) {\n    var history = reactRouterDom.useHistory();\n    var _a = require$$0.useState(function () {\n        var params = new URLSearchParams(history.location.search);\n        return params.get(name);\n    }), value = _a[0], setValue = _a[1];\n    var optionsRef = require$$0.useRef(options);\n    require$$0.useEffect(function () {\n        optionsRef.current = options;\n    }, [options]);\n    var setParam = require$$0.useCallback(function (value) {\n        var params = new URLSearchParams(history.location.search);\n        var options = optionsRef.current;\n        if (!value ||\n            (options &&\n                options.isDefaultValue &&\n                options.isDefaultValue(options.parse(value)))) {\n            params.delete(name);\n        }\n        else {\n            params.set(name, value);\n        }\n        history.replace({ search: params.toString() });\n        setValue(value ? value.toString() : null);\n    }, [name, history]);\n    return [options ? options.parse(value) : value, setParam];\n}\n\nfunction useDatabasePagination(pageSize, query) {\n    var _this = this;\n    var database = useDatabase();\n    var _a = useSearchParam('page', {\n        parse: function (value) {\n            if (value) {\n                var page = Number.parseInt(value, 10);\n                return Number.isNaN(page) || page < 1 ? 1 : page;\n            }\n            else {\n                return 1;\n            }\n        },\n        isDefaultValue: function (value) { return value === 1; },\n    }), pageNumber = _a[0], setPageNumber = _a[1];\n    var _b = require$$0.useState(false), loading = _b[0], setLoading = _b[1];\n    var _c = require$$0.useState(), total = _c[0], setTotal = _c[1];\n    var _d = require$$0.useState(), error = _d[0], setError = _d[1];\n    var _e = require$$0.useState([]), data = _e[0], setData = _e[1];\n    var queryRef = require$$0.useRef(query);\n    require$$0.useEffect(function () {\n        queryRef.current = query;\n    }, [query]);\n    var loadData = require$$0.useCallback(function (page) {\n        var previousPage = page - 1;\n        var action = function () { return __awaiter(_this, void 0, void 0, function () {\n            var collection, total_1, data_1, error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        setLoading(true);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 4, 5, 6]);\n                        collection = queryRef.current(database);\n                        return [4 /*yield*/, collection.count()];\n                    case 2:\n                        total_1 = _a.sent();\n                        if (page > 1 && previousPage * pageSize >= total_1) {\n                            page = Math.ceil(total_1 / pageSize);\n                            setPageNumber(page);\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, collection.range(previousPage * pageSize, pageSize)];\n                    case 3:\n                        data_1 = _a.sent();\n                        setData(data_1);\n                        setTotal(total_1);\n                        return [3 /*break*/, 6];\n                    case 4:\n                        error_1 = _a.sent();\n                        if (error_1 instanceof Error) {\n                            setError(error_1.message);\n                        }\n                        else {\n                            setError('Error');\n                        }\n                        return [3 /*break*/, 6];\n                    case 5:\n                        setLoading(false);\n                        return [7 /*endfinally*/];\n                    case 6: return [2 /*return*/];\n                }\n            });\n        }); };\n        action();\n    }, [setPageNumber, database, pageSize]);\n    require$$0.useEffect(function () {\n        loadData(pageNumber);\n    }, [loadData, pageNumber]);\n    var refresh = function () {\n        loadData(pageNumber);\n    };\n    var refreshRef = require$$0.useRef(refresh);\n    refreshRef.current = refresh;\n    require$$0.useEffect(function () {\n        var listener = function (_a) {\n            var data = _a.data;\n            if (!data.partial) {\n                refreshRef.current();\n            }\n        };\n        database.addEventListener('changes', listener);\n        return function () {\n            database.removeEventListener('changes', listener);\n        };\n    }, [database]);\n    return {\n        loading: loading,\n        total: total,\n        page: pageNumber,\n        pageSize: pageSize,\n        data: data,\n        error: error,\n        refresh: refresh,\n        setPage: function (page) {\n            setPageNumber(page);\n        },\n        reset: function () {\n            if (pageNumber === 1) {\n                loadData(pageNumber);\n            }\n            else {\n                setPageNumber(1);\n            }\n        },\n    };\n}\n\nvar styles = {\"text\":\"search_text__3DqAK\"};\n\nvar Search = function (_a) {\n    var paramName = _a.paramName, onSearch = _a.onSearch, className = _a.className, style = _a.style, props = __rest(_a, [\"paramName\", \"onSearch\", \"className\", \"style\"]);\n    var _b = useSearchParam(paramName), paramValue = _b[0], setParamValue = _b[1];\n    return (jsxRuntime.exports.jsxs(\"div\", __assign({ className: className, style: style }, { children: [jsxRuntime.exports.jsx(antd.Input.Search, __assign({ allowClear: true, enterButton: \"Search\" }, props, { defaultValue: paramValue !== null && paramValue !== void 0 ? paramValue : '', onSearch: function (value, event) {\n                    setParamValue(value);\n                    onSearch && onSearch(value, event);\n                } }), void 0), paramValue ? jsxRuntime.exports.jsxs(\"p\", __assign({ className: styles.text }, { children: [\"Search: \", paramValue] }), void 0) : null] }), void 0));\n};\n\nexports.DatabasePaginationLayout = DatabasePaginationLayout;\nexports.DatabaseProvider = DatabaseProvider;\nexports.Search = Search;\nexports.useDatabase = useDatabase;\nexports.useDatabaseItem = useDatabaseItem;\nexports.useDatabasePagination = useDatabasePagination;\nexports.useSearchParam = useSearchParam;\n","import React, { FC, ReactNode, useCallback, useEffect, useState } from 'react';\n\ntype LayoutProps = {\n  title: string;\n  onBack?: () => void;\n};\n\ntype Layout = React.ComponentType<LayoutProps>;\n\ntype ContextType = {\n  completeStage: () => void;\n  goBack?: () => void;\n  layout: Layout;\n};\n\nconst StagesContext = React.createContext<ContextType | undefined>(undefined);\n\ntype StageProps = {\n  title: string;\n  overrideDefaultLayout?: boolean;\n  children: (\n    completeStage: () => void,\n    extra: { DefaultLayout: React.ComponentType; goBack?: () => void }\n  ) => ReactNode;\n};\n\nconst Stage: FC<StageProps> = ({\n  children,\n  title,\n  overrideDefaultLayout,\n}: StageProps) => {\n  return (\n    <StagesContext.Consumer>\n      {(context) => {\n        if (context === undefined) {\n          throw new Error('No context (Stages)');\n        }\n\n        const { goBack, completeStage, layout: Layout } = context;\n\n        const FilledLayout: FC = ({ children }) => {\n          return (\n            <Layout title={title} onBack={goBack}>\n              {children}\n            </Layout>\n          );\n        };\n\n        const computedChildren = children(completeStage, {\n          DefaultLayout: FilledLayout,\n          goBack,\n        });\n\n        if (overrideDefaultLayout) {\n          return computedChildren;\n        } else {\n          return <FilledLayout>{computedChildren}</FilledLayout>;\n        }\n      }}\n    </StagesContext.Consumer>\n  );\n};\n\ntype StagesProps = {\n  layout: Layout;\n  onFinish?: () => void;\n};\n\ntype StagesType = {\n  Stage: typeof Stage;\n} & FC<StagesProps>;\n\nexport const Stages: StagesType = ({ children, layout, onFinish }) => {\n  const [stageIndex, setStageIndex] = useState(0);\n\n  const childrenArray = React.Children.toArray(children);\n\n  useEffect(() => {\n    const length = childrenArray.length;\n    if (stageIndex > length - 1 && length !== 0) {\n      setStageIndex(childrenArray.length - 1);\n    }\n  }, [childrenArray.length, stageIndex]);\n\n  const goBack = useCallback(() => {\n    setStageIndex((index) => {\n      return index === 0 ? index : index - 1;\n    });\n  }, []);\n\n  const completeStage = useCallback(() => {\n    const length = childrenArray.length;\n    if (stageIndex === length - 1) {\n      onFinish && onFinish();\n    } else {\n      setStageIndex(stageIndex + 1);\n    }\n  }, [stageIndex, onFinish, childrenArray.length]);\n\n  return (\n    <StagesContext.Provider\n      value={{\n        goBack: stageIndex === 0 ? undefined : goBack,\n        completeStage,\n        layout,\n      }}\n    >\n      {childrenArray.length > 0 &&\n      stageIndex >= 0 &&\n      stageIndex < childrenArray.length\n        ? childrenArray[stageIndex]\n        : null}\n    </StagesContext.Provider>\n  );\n};\n\nStages.Stage = Stage;\n","import { PageHeader, PageHeaderProps } from 'antd';\nimport { FC } from 'react';\nimport styles from './index.module.scss';\n\nexport type BasicLayoutProps = Omit<PageHeaderProps, 'className'>;\n\nexport const BasicLayout: FC<BasicLayoutProps> = ({\n  style,\n  children,\n  ...rest\n}) => {\n  return (\n    <div className={styles.root} style={style}>\n      <PageHeader {...rest} className={styles.header} />\n      <main className={styles.main}>{children}</main>\n    </div>\n  );\n};\n","import { LoadingOutlined } from '@ant-design/icons';\nimport { Spin } from 'antd';\nimport { FC, useEffect, useState } from 'react';\nimport styles from './index.module.scss';\n\ntype Props = {\n  loading?: boolean;\n  delay?: number;\n};\n\nexport const FullscreenSpin: FC<Props> = ({ loading, delay }) => {\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    if (loading && delay) {\n      let timeoutEnd = false;\n      const timeout = setTimeout(() => {\n        timeoutEnd = true;\n        setVisible(true);\n      }, delay);\n\n      return () => {\n        if (!timeoutEnd) {\n          clearTimeout(timeout);\n        }\n      };\n    } else {\n      setVisible(loading ?? false);\n    }\n  }, [loading, delay]);\n\n  useEffect(() => {\n    if (visible) {\n      const previousValue = document.body.style.overflow;\n      document.body.style.overflow = 'hidden';\n      return () => {\n        document.body.style.overflow = previousValue;\n      };\n    }\n  }, [visible]);\n\n  if (visible) {\n    return (\n      <div className={styles.root}>\n        <Spin indicator={<LoadingOutlined className={styles.icon} />} />\n      </div>\n    );\n  } else {\n    return null;\n  }\n};\n","import { Form, FormProps, message, Modal } from 'antd';\nimport { FC, ReactNode, useState } from 'react';\n\nexport type ModalFormProps = {\n  onCancel?: () => void;\n  onFinish?: (values: any) => Promise<void> | void;\n  children?: ReactNode | ((loading: boolean) => ReactNode);\n} & Omit<FormProps, 'onFinish' | 'children'>;\n\nexport const ModalForm: FC<ModalFormProps> = ({\n  onCancel,\n  onFinish,\n  children,\n  ...formProps\n}) => {\n  const [loading, setLoading] = useState(false);\n\n  const onFormFinish = (values: any) => {\n    if (!onFinish) {\n      return;\n    }\n\n    const action = async () => {\n      setLoading(true);\n      try {\n        await onFinish(values);\n      } catch (error) {\n        setLoading(false);\n        if (error instanceof Error) {\n          message.error(error.message);\n        } else {\n          message.error('Unknown error');\n        }\n      }\n    };\n\n    action();\n  };\n\n  return (\n    <Modal\n      title=\"Change schema name\"\n      closable\n      visible\n      onCancel={onCancel}\n      width=\"400px\"\n      footer={null}\n      centered\n    >\n      <Form onFinish={onFormFinish} {...formProps}>\n        {typeof children === 'function' ? children(loading) : children}\n      </Form>\n    </Modal>\n  );\n};\n","export const SCHEMAS_PATHNAME = `${process.env.PUBLIC_URL}/schemas`;\n","export const CREATE_SCHEMA_PATHNAME = `${process.env.PUBLIC_URL}/create/schema`;\n","import { InboxOutlined } from '@ant-design/icons';\nimport Dragger from 'antd/lib/upload/Dragger';\nimport { FC } from 'react';\nimport styles from './index.module.scss';\n\ntype Props = {\n  onChoose: (image: File) => void;\n};\n\nexport const ChooseImage: FC<Props> = ({ onChoose }) => {\n  return (\n    <Dragger\n      accept=\"image/*\"\n      onChange={(info) => {\n        if (info.file && info.file.originFileObj) {\n          onChoose(info.file.originFileObj);\n        }\n      }}\n    >\n      <p className=\"ant-upload-drag-icon\">\n        <InboxOutlined />\n      </p>\n      <p className={`${styles.message} ant-upload-text`}>\n        Click or drag file to this area to choose image\n      </p>\n    </Dragger>\n  );\n};\n","import { Palette, palettes } from '@fancywork/core';\nimport {\n  Button,\n  Col,\n  Form,\n  Image,\n  Input,\n  InputNumber,\n  Row,\n  Select,\n} from 'antd';\nimport { FC } from 'react';\nimport styles from './index.module.scss';\n\nexport type GeneralSettingsValues = {\n  name: string;\n  palette: Palette;\n  stitchesPerInch: number;\n};\n\ntype Props = {\n  imageURL: string;\n  initialValues?: GeneralSettingsValues;\n  onSubmit: (values: GeneralSettingsValues) => void;\n};\n\nexport const GeneralSettings: FC<Props> = ({\n  imageURL,\n  initialValues,\n  onSubmit,\n}) => {\n  const onFinish = (values: any) => {\n    const result: GeneralSettingsValues = {\n      name: values.name,\n      palette: palettes.find((palette) => palette.name === values.palette)!,\n      stitchesPerInch: values.stitchesPerInch,\n    };\n\n    onSubmit(result);\n  };\n\n  return (\n    <div className={styles.root}>\n      <Row gutter={{ xs: 0, md: 24 }} className={styles.row}>\n        <Col span={24} md={12}>\n          <div className={styles.image}>\n            <Image src={imageURL} />\n          </div>\n        </Col>\n        <Col span={24} md={12}>\n          <Form\n            layout=\"vertical\"\n            className={styles.form}\n            requiredMark={false}\n            onFinish={onFinish}\n          >\n            <Form.Item\n              name=\"name\"\n              label=\"Name\"\n              initialValue={initialValues?.name}\n              rules={[{ required: true, message: 'Required field' }]}\n            >\n              <Input type=\"text\" />\n            </Form.Item>\n            <Form.Item\n              name=\"palette\"\n              label=\"Threads palette\"\n              initialValue={initialValues?.palette.name}\n              rules={[{ required: true, message: 'Required field' }]}\n            >\n              <Select>\n                {palettes.map((palette) => {\n                  return (\n                    <Select.Option value={palette.name} key={palette.name}>\n                      {palette.name}\n                    </Select.Option>\n                  );\n                })}\n              </Select>\n            </Form.Item>\n            <Form.Item\n              name=\"stitchesPerInch\"\n              label=\"Stitches per inch\"\n              tooltip=\"Canvas property\"\n              initialValue={initialValues?.stitchesPerInch}\n              normalize={(value) =>\n                value === '' ? '' : Math.abs(Math.round(value))\n              }\n              rules={[{ required: true, message: 'Required field' }]}\n            >\n              <InputNumber min={1} className={styles.inputNumber} />\n            </Form.Item>\n            <Button htmlType=\"submit\" type=\"primary\" className={styles.button}>\n              Next step\n            </Button>\n          </Form>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n","import { Schema } from '@fancywork/core';\nimport {\n  ColorsTable,\n  DownloadButton,\n  SchemaInfoTable,\n  SchemaViewer,\n} from '@fancywork/core-react';\nimport { Button, Col, Image, Row } from 'antd';\nimport React, { FC, useState } from 'react';\nimport styles from './index.module.scss';\n\ntype Props = {\n  schema: Schema;\n  schemaImage: string;\n  layout: React.ComponentType<any>;\n  onSave?: () => void;\n};\n\nexport const GeneratorResult: FC<Props> = ({\n  schema,\n  schemaImage,\n  layout: Layout,\n  onSave,\n}) => {\n  const [previewSchema, setPreviewSchema] = useState(false);\n\n  if (previewSchema) {\n    return (\n      <SchemaViewer\n        schema={schema}\n        onBack={() => {\n          setPreviewSchema(false);\n        }}\n      />\n    );\n  }\n\n  return (\n    <Layout>\n      <div className={styles.root}>\n        <div className={styles.firstBlock}>\n          <Row gutter={{ xs: 0, md: 24 }} className={styles.row}>\n            <Col span={24} md={12}>\n              <div className={styles.image}>\n                <Image src={schemaImage} />\n              </div>\n            </Col>\n            <Col span={24} md={12}>\n              <div className={styles.info}>\n                <Button\n                  className={styles.button}\n                  type=\"primary\"\n                  onClick={() => {\n                    onSave && onSave();\n                  }}\n                >\n                  Save\n                </Button>\n                <Button\n                  className={styles.button}\n                  onClick={() => {\n                    setPreviewSchema(true);\n                  }}\n                >\n                  View Schema\n                </Button>\n                <DownloadButton\n                  schemaLoader={() => schema}\n                  className={styles.button}\n                />\n                <SchemaInfoTable\n                  metadata={schema.metadata}\n                  pagination={false}\n                  scroll={{ x: true }}\n                />\n              </div>\n            </Col>\n          </Row>\n        </div>\n        <div className={styles.secondBlock}>\n          <ColorsTable\n            palette={schema.palette}\n            scroll={{ x: true }}\n            pagination={{ simple: true }}\n          />\n        </div>\n      </div>\n    </Layout>\n  );\n};\n","import { PaletteReduceAlgorithm } from '@fancywork/core';\nimport {\n  Button,\n  Checkbox,\n  Col,\n  Form,\n  Image,\n  InputNumber,\n  Row,\n  Select,\n} from 'antd';\nimport { FC, useState } from 'react';\nimport styles from './index.module.scss';\n\nexport type PaletteSettingsValues = {\n  reduceAlgorithm?: PaletteReduceAlgorithm;\n  maxColorsCount?: number;\n  unlimitedColors: boolean;\n  withDithering: boolean;\n};\n\ntype Props = {\n  imageURL: string;\n  initialValues?: PaletteSettingsValues;\n  onSubmit: (values: PaletteSettingsValues) => void;\n};\n\nexport const PaletteSettings: FC<Props> = ({\n  imageURL,\n  initialValues,\n  onSubmit,\n}) => {\n  const [unlimitedColors, setUnlimitedColors] = useState<boolean>(\n    initialValues ? initialValues.unlimitedColors : false\n  );\n\n  const [withDithering, setWithDithering] = useState<boolean>(\n    initialValues ? initialValues.withDithering : true\n  );\n\n  const onFinish = (values: any) => {\n    const result: PaletteSettingsValues = {\n      reduceAlgorithm: values.reduceAlgorithm,\n      maxColorsCount: values.maxColorsCount,\n      unlimitedColors,\n      withDithering,\n    };\n\n    onSubmit(result);\n  };\n\n  return (\n    <div className={styles.root}>\n      <Row gutter={{ xs: 0, md: 24 }} className={styles.row}>\n        <Col span={24} md={12}>\n          <div className={styles.image}>\n            <Image src={imageURL} />\n          </div>\n        </Col>\n        <Col span={24} md={12}>\n          <Form\n            layout=\"vertical\"\n            className={styles.form}\n            requiredMark={false}\n            onFinish={onFinish}\n          >\n            {unlimitedColors ? null : (\n              <>\n                <Form.Item\n                  name=\"reduceAlgorithm\"\n                  label=\"Palette reduce algorithm\"\n                  initialValue={initialValues?.reduceAlgorithm}\n                  rules={[{ required: true, message: 'Required field' }]}\n                >\n                  <Select>\n                    <Select.Option value=\"nearest\">Nearest color</Select.Option>\n                    <Select.Option value=\"contrast\">\n                      Contrast color\n                    </Select.Option>\n                    <Select.Option value=\"average-distance\">\n                      Average distance color\n                    </Select.Option>\n                  </Select>\n                </Form.Item>\n                <Form.Item\n                  name=\"maxColorsCount\"\n                  label=\"Max colors count\"\n                  initialValue={initialValues?.maxColorsCount}\n                  rules={[{ required: true, message: 'Required field' }]}\n                >\n                  <InputNumber min={1} className={styles.inputNumber} />\n                </Form.Item>\n              </>\n            )}\n            <div className={styles.checkbox}>\n              <Checkbox\n                onChange={(value) => {\n                  setUnlimitedColors(value.target.checked);\n                }}\n                checked={unlimitedColors}\n              >\n                Unlimited colors\n              </Checkbox>\n            </div>\n            <div className={styles.checkbox}>\n              <Checkbox\n                onChange={(value) => {\n                  setWithDithering(value.target.checked);\n                }}\n                checked={withDithering}\n              >\n                Dithering\n              </Checkbox>\n            </div>\n            <Button htmlType=\"submit\" type=\"primary\" className={styles.button}>\n              Generate\n            </Button>\n          </Form>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n","import { convertSize, MAX_HEIGHT, MAX_WIDTH, SizeType } from '@fancywork/core';\nimport {\n  Button,\n  Checkbox,\n  Col,\n  Form,\n  Image,\n  InputNumber,\n  Row,\n  Select,\n} from 'antd';\nimport { FC, useCallback, useEffect, useMemo, useState } from 'react';\nimport styles from './index.module.scss';\n\nexport type SizeSettingsValues = {\n  width: number;\n  height: number;\n  sizeType: SizeType;\n  keepAspectRatio: boolean;\n};\n\ntype Props = {\n  imageURL: string;\n  image: HTMLImageElement;\n  stitchesPerInch: number;\n  initialValues?: SizeSettingsValues;\n  onSubmit: (values: SizeSettingsValues) => void;\n};\n\nexport const SizeSettings: FC<Props> = ({\n  imageURL,\n  image,\n  stitchesPerInch,\n  initialValues,\n  onSubmit,\n}) => {\n  const [form] = Form.useForm();\n  const [sizeType, setSizeType] = useState<SizeType | undefined>(\n    initialValues?.sizeType ?? 'stitch'\n  );\n  const [keepAspectRatio, setKeepAspectRatio] = useState<boolean>(\n    initialValues?.keepAspectRatio ?? true\n  );\n  const aspectRatio = useMemo(() => image.width / image.height, [image]);\n\n  const maxSize: Record<SizeType, ReturnType<typeof convertSize>> = useMemo(\n    () => ({\n      centimeter: convertSize(MAX_WIDTH, MAX_HEIGHT, {\n        from: 'stitch',\n        to: 'centimeter',\n        floor: true,\n        stitchesPerInch,\n      }),\n      inch: convertSize(MAX_WIDTH, MAX_HEIGHT, {\n        from: 'stitch',\n        to: 'inch',\n        floor: true,\n        stitchesPerInch,\n      }),\n      stitch: {\n        width: MAX_WIDTH,\n        height: MAX_HEIGHT,\n      },\n    }),\n    [stitchesPerInch]\n  );\n\n  const normalize = useCallback(\n    (value: any): string => {\n      if (value === '' || value === undefined) {\n        return '';\n      } else {\n        value = Math.abs(value);\n\n        if (sizeType === 'stitch') {\n          return Math.round(value).toString();\n        } else {\n          return value.toString();\n        }\n      }\n    },\n    [sizeType]\n  );\n\n  useEffect(() => {\n    let width = form.getFieldValue('width');\n    let height = form.getFieldValue('height');\n    if (keepAspectRatio) {\n      if (width !== undefined) {\n        height = width ? +width / aspectRatio : undefined;\n      } else if (height !== undefined) {\n        width = height ? +height * aspectRatio : undefined;\n      }\n    }\n\n    form.setFieldsValue({\n      width: normalize(width),\n      height: normalize(height),\n    });\n  }, [normalize, form, aspectRatio, keepAspectRatio]);\n\n  const onFinish = (values: any) => {\n    const result: SizeSettingsValues = {\n      width: values.width,\n      height: values.height,\n      sizeType: values.sizeType,\n      keepAspectRatio,\n    };\n\n    onSubmit(result);\n  };\n\n  return (\n    <div className={styles.root}>\n      <Row gutter={{ xs: 0, md: 24 }} className={styles.row}>\n        <Col span={24} md={12}>\n          <div className={styles.image}>\n            <Image src={imageURL} />\n          </div>\n        </Col>\n        <Col span={24} md={12}>\n          <Form\n            form={form}\n            layout=\"vertical\"\n            className={styles.form}\n            requiredMark={false}\n            onFinish={onFinish}\n          >\n            <Form.Item\n              name=\"sizeType\"\n              label=\"Size type\"\n              initialValue={sizeType}\n              rules={[{ required: true, message: 'Required field' }]}\n            >\n              <Select\n                onChange={(value) => {\n                  setSizeType(value?.toString() as SizeType);\n                }}\n              >\n                <Select.Option value=\"stitch\">Size in stitches</Select.Option>\n                <Select.Option value=\"centimeter\">\n                  Size in centimeters\n                </Select.Option>\n                <Select.Option value=\"inch\">Size in inches</Select.Option>\n              </Select>\n            </Form.Item>\n            <Row gutter={12}>\n              <Col span={24} md={12}>\n                <Form.Item\n                  name=\"width\"\n                  label=\"Width\"\n                  initialValue={initialValues?.width}\n                  normalize={normalize}\n                  rules={[{ required: true, message: 'Required field' }]}\n                >\n                  <InputNumber\n                    className={styles.inputNumber}\n                    min={sizeType === 'stitch' ? 1 : 0.1}\n                    max={\n                      sizeType\n                        ? maxSize[sizeType].width\n                        : Number.POSITIVE_INFINITY\n                    }\n                    onChange={(width) => {\n                      if (keepAspectRatio) {\n                        const height = width ? +width / aspectRatio : undefined;\n                        form.setFieldsValue({ height: normalize(height) });\n                      }\n                    }}\n                  />\n                </Form.Item>\n              </Col>\n              <Col span={24} md={12}>\n                <Form.Item\n                  name=\"height\"\n                  label=\"Height\"\n                  initialValue={initialValues?.height}\n                  normalize={normalize}\n                  rules={[{ required: true, message: 'Required field' }]}\n                >\n                  <InputNumber\n                    className={styles.inputNumber}\n                    min={sizeType === 'stitch' ? 1 : 0.1}\n                    max={\n                      sizeType\n                        ? maxSize[sizeType].height\n                        : Number.POSITIVE_INFINITY\n                    }\n                    onChange={(height) => {\n                      if (keepAspectRatio) {\n                        const width = height\n                          ? +height * aspectRatio\n                          : undefined;\n                        form.setFieldsValue({ width: normalize(width) });\n                      }\n                    }}\n                  />\n                </Form.Item>\n              </Col>\n            </Row>\n            <div className={styles.checkbox}>\n              <Checkbox\n                onChange={(event) => {\n                  setKeepAspectRatio(event.target.checked);\n                }}\n                checked={keepAspectRatio}\n              >\n                Keep aspect ratio\n              </Checkbox>\n            </div>\n            <Button htmlType=\"submit\" type=\"primary\" className={styles.button}>\n              Next step\n            </Button>\n          </Form>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n","import { CloseOutlined } from '@ant-design/icons';\nimport { createSchema, createSchemaImage, Schema } from '@fancywork/core';\nimport { useDatabase } from '@fancywork/storage-react';\nimport { Button, message } from 'antd';\nimport { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { BasicLayout, FullscreenSpin, Stages } from '../../components';\nimport { AppPage } from '../../types';\nimport { SCHEMAS_PATHNAME } from '../schemas-page/constants';\nimport { CREATE_SCHEMA_PATHNAME } from './constants';\nimport {\n  ChooseImage,\n  GeneralSettings,\n  GeneralSettingsValues,\n  GeneratorResult,\n  PaletteSettings,\n  PaletteSettingsValues,\n  SizeSettings,\n  SizeSettingsValues,\n} from './stages';\n\nexport const CreateSchemePage: AppPage = () => {\n  const history = useHistory();\n  const database = useDatabase();\n\n  const [sourceImage, setSourceImage] = useState<File>();\n  const [imageURL, setImageURL] = useState<string>();\n  const [image, setImage] = useState<HTMLImageElement>();\n\n  const [generalSettings, setGeneralSettings] =\n    useState<GeneralSettingsValues>();\n  const [sizeSettings, setSizeSettings] = useState<SizeSettingsValues>();\n  const [paletteSettings, setPaletteSettings] =\n    useState<PaletteSettingsValues>();\n\n  const [loading, setLoading] = useState<boolean>(false);\n  const [schema, setSchema] = useState<Schema>();\n  const [schemaImage, setSchemaImage] = useState<string>();\n\n  const executeTask = async (task: () => Promise<void>) => {\n    setLoading(true);\n    try {\n      await task();\n    } catch (error) {\n      if (error instanceof Error) {\n        message.error(error.message);\n      } else {\n        message.error('Error');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateSchema = async (\n    imageURL: string,\n    generalSettings: GeneralSettingsValues,\n    sizeSettings: SizeSettingsValues,\n    paletteSettings: PaletteSettingsValues\n  ) => {\n    await executeTask(async () => {\n      const schema = await createSchema(imageURL, {\n        name: generalSettings.name,\n        palette: generalSettings.palette,\n        stitchesPerInch: generalSettings.stitchesPerInch,\n        width: sizeSettings.width,\n        height: sizeSettings.height,\n        sizeType: sizeSettings.sizeType,\n        maxColorsCount: paletteSettings.maxColorsCount,\n        reduceAlgorithm: paletteSettings.reduceAlgorithm,\n        withDithering: paletteSettings.withDithering,\n      });\n\n      const schemaImage = await createSchemaImage(schema);\n\n      setSchema(schema);\n      setSchemaImage(schemaImage);\n    });\n  };\n\n  const onFinish = async () => {\n    if (schema && schemaImage) {\n      await executeTask(async () => {\n        await database.schemas.add(schema, schemaImage);\n        history.replace(SCHEMAS_PATHNAME);\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (!sourceImage) {\n      return;\n    }\n\n    setGeneralSettings(undefined);\n    setSizeSettings(undefined);\n    setPaletteSettings(undefined);\n\n    const url = URL.createObjectURL(sourceImage);\n    setImageURL(url);\n\n    const image = new Image();\n    image.src = url;\n    image.onload = () => {\n      setImage(image);\n    };\n\n    return () => {\n      image.remove();\n      setImage(undefined);\n      setImageURL(undefined);\n      URL.revokeObjectURL(url);\n    };\n  }, [sourceImage]);\n\n  return (\n    <>\n      <FullscreenSpin loading={loading} />\n      <Stages\n        onFinish={() => {\n          onFinish();\n        }}\n        layout={({ title, onBack, children }) => {\n          return (\n            <BasicLayout\n              title={title}\n              onBack={\n                onBack ??\n                (() => {\n                  history.goBack();\n                })\n              }\n              extra={\n                onBack ? (\n                  <Button\n                    type=\"text\"\n                    icon={<CloseOutlined />}\n                    onClick={() => {\n                      history.goBack();\n                    }}\n                  />\n                ) : null\n              }\n            >\n              {children}\n            </BasicLayout>\n          );\n        }}\n      >\n        <Stages.Stage title=\"Choose image\">\n          {(completeStage) => (\n            <ChooseImage\n              onChoose={(image) => {\n                setSourceImage(image);\n                completeStage();\n              }}\n            />\n          )}\n        </Stages.Stage>\n        <Stages.Stage title=\"Generator\">\n          {(completeStage) =>\n            imageURL ? (\n              <GeneralSettings\n                imageURL={imageURL}\n                initialValues={generalSettings}\n                onSubmit={(result) => {\n                  setGeneralSettings(result);\n                  completeStage();\n                }}\n              />\n            ) : null\n          }\n        </Stages.Stage>\n        <Stages.Stage title=\"Schema size\">\n          {(completeStage) =>\n            generalSettings && imageURL && image ? (\n              <SizeSettings\n                imageURL={imageURL}\n                image={image}\n                stitchesPerInch={generalSettings.stitchesPerInch}\n                initialValues={sizeSettings}\n                onSubmit={(result) => {\n                  setSizeSettings(result);\n                  completeStage();\n                }}\n              />\n            ) : null\n          }\n        </Stages.Stage>\n        <Stages.Stage title=\"Schema palette\">\n          {(completeStage) =>\n            sizeSettings && imageURL && image ? (\n              <PaletteSettings\n                imageURL={imageURL}\n                initialValues={paletteSettings}\n                onSubmit={(result) => {\n                  const action = async () => {\n                    setPaletteSettings(result);\n                    await generateSchema(\n                      imageURL!,\n                      generalSettings!,\n                      sizeSettings,\n                      result\n                    );\n                    completeStage();\n                  };\n\n                  action();\n                }}\n              />\n            ) : null\n          }\n        </Stages.Stage>\n        <Stages.Stage title=\"Result\" overrideDefaultLayout>\n          {(completeStage, { DefaultLayout }) =>\n            schema && schemaImage ? (\n              <GeneratorResult\n                layout={DefaultLayout}\n                schema={schema}\n                schemaImage={schemaImage}\n                onSave={() => {\n                  completeStage();\n                }}\n              />\n            ) : (\n              <DefaultLayout />\n            )\n          }\n        </Stages.Stage>\n      </Stages>\n    </>\n  );\n};\n\nCreateSchemePage.pathname = CREATE_SCHEMA_PATHNAME;\n","import { Button, Result } from 'antd';\nimport { useHistory } from 'react-router-dom';\nimport { AppPage } from '../../types';\nimport styles from './index.module.scss';\n\nexport const Error404Page: AppPage = () => {\n  const history = useHistory();\n\n  return (\n    <div className={styles.root}>\n      <Result\n        status=\"404\"\n        title=\"404\"\n        subTitle=\"Sorry, the page you visited does not exist\"\n        extra={\n          <Button\n            type=\"primary\"\n            onClick={() => {\n              history.push('/');\n            }}\n          >\n            Back Home\n          </Button>\n        }\n      />\n    </div>\n  );\n};\n\nError404Page.pathname = '*';\n","export default __webpack_public_path__ + \"static/media/logo.8eed29fb.svg\";","export const WORKS_PATHNAME = `${process.env.PUBLIC_URL}/works`;\n","export const HOME_PATHNAME = `${process.env.PUBLIC_URL}/`;\n","export const WORK_PATHNAME = `${process.env.PUBLIC_URL}/work`;\n\nexport const AUTO_SAVE_TIMEOUT = 20 * 1000;\n","import { WorkMetadata } from '@fancywork/core';\nimport { useDatabase } from '@fancywork/storage-react';\nimport { Button } from 'antd';\nimport { FC, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { WORK_PATHNAME } from '../../work-page/constants';\n\nexport const ContinueButton: FC = () => {\n  const database = useDatabase();\n  const history = useHistory();\n  const [metadata, setMetadata] = useState<WorkMetadata>();\n\n  useEffect(() => {\n    const updateMetadata = async () => {\n      const workMetadata = await database.works.getLastWorkMetadata();\n      setMetadata(workMetadata);\n    };\n\n    updateMetadata();\n\n    database.addEventListener('changes', updateMetadata);\n    return () => {\n      database.removeEventListener('changes', updateMetadata);\n    };\n  }, [database]);\n\n  if (metadata) {\n    return (\n      <Button\n        type=\"ghost\"\n        disabled={metadata === undefined}\n        onClick={() => {\n          if (metadata) {\n            history.push(`${WORK_PATHNAME}?id=${metadata?.id}`);\n          }\n        }}\n      >\n        Continue\n      </Button>\n    );\n  } else {\n    return null;\n  }\n};\n","import { Button } from 'antd';\nimport { useHistory } from 'react-router-dom';\nimport logo from '../../assets/logo.svg';\nimport { AppPage } from '../../types';\nimport { CREATE_SCHEMA_PATHNAME } from '../create-schema-page/constants';\nimport { SCHEMAS_PATHNAME } from '../schemas-page/constants';\nimport { WORKS_PATHNAME } from '../works-page/constants';\nimport { HOME_PATHNAME } from './constants';\nimport { ContinueButton } from './continue-button';\nimport styles from './index.module.scss';\n\nexport const HomePage: AppPage = () => {\n  const history = useHistory();\n\n  return (\n    <div className={styles.root}>\n      <main className={styles.main}>\n        <div className={styles.menu}>\n          <div className={styles.header}>\n            <img src={logo} className={styles.logo} alt=\"Logo\" />\n            Fancywork\n          </div>\n          <div className={styles.buttons}>\n            <ContinueButton />\n            <Button\n              type=\"ghost\"\n              onClick={() => {\n                history.push(CREATE_SCHEMA_PATHNAME);\n              }}\n            >\n              Create schema\n            </Button>\n            <Button\n              type=\"ghost\"\n              onClick={() => {\n                history.push(SCHEMAS_PATHNAME);\n              }}\n            >\n              My schemas\n            </Button>\n            <Button\n              type=\"ghost\"\n              onClick={() => {\n                history.push(WORKS_PATHNAME);\n              }}\n            >\n              My works\n            </Button>\n          </div>\n          <a\n            href=\"https://github.com/Trequend/fancywork\"\n            rel=\"noreferrer\"\n            target=\"_blank\"\n          >\n            View source code\n          </a>\n        </div>\n      </main>\n      <footer className={styles.footer}>\n        <div>\n          Logo icon made by{' '}\n          <a href=\"https://www.freepik.com\" title=\"Freepik\">\n            Freepik\n          </a>{' '}\n          from{' '}\n          <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">\n            www.flaticon.com\n          </a>\n        </div>\n      </footer>\n    </div>\n  );\n};\n\nHomePage.pathname = HOME_PATHNAME;\n","import { useQuery } from './useQuery';\n\nexport function useQueryParam(paramName: string) {\n  const query = useQuery();\n  const param = query.get(paramName);\n  if (param === null) {\n    throw new Error(`No param \"${paramName}\"`);\n  }\n\n  return param;\n}\n","import { useLocation } from 'react-router-dom';\n\nexport function useQuery() {\n  const location = useLocation();\n  return new URLSearchParams(location.search);\n}\n","export const SCHEMA_PATHNAME = `${process.env.PUBLIC_URL}/schema`;\n","import { SchemaViewer } from '@fancywork/core-react';\nimport { useDatabaseItem } from '@fancywork/storage-react';\nimport { Result } from 'antd';\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport { FullscreenSpin } from '../../components';\nimport { useQueryParam } from '../../hooks';\nimport { AppPage } from '../../types';\nimport { SCHEMA_PATHNAME } from './constants';\n\nexport const SchemaPage: AppPage = () => {\n  const history = useHistory();\n  const id = useQueryParam('id');\n  const {\n    item: schema,\n    loading,\n    error,\n  } = useDatabaseItem((database) => {\n    return database.schemas.get(id);\n  });\n\n  useEffect(() => {\n    if (schema) {\n      const saved = document.title;\n      document.title = `${schema.metadata.name} - Fancywork`;\n      return () => {\n        document.title = saved;\n      };\n    }\n  }, [schema]);\n\n  if (loading) {\n    return <FullscreenSpin />;\n  } else if (error) {\n    return <Result title=\"Error\" subTitle={error} />;\n  }\n\n  if (schema) {\n    return (\n      <SchemaViewer\n        schema={schema}\n        onBack={() => {\n          history.goBack();\n        }}\n      />\n    );\n  } else {\n    return <FullscreenSpin />;\n  }\n};\n\nSchemaPage.pathname = SCHEMA_PATHNAME;\n","import { createSchemaImage, createWork, SchemaMetadata } from '@fancywork/core';\nimport { useDatabase } from '@fancywork/storage-react';\nimport { Button, Form, Input, message, Modal, Tag } from 'antd';\nimport { FC, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport { WORK_PATHNAME } from '../../work-page/constants';\nimport { WORKS_PATHNAME } from '../../works-page/constants';\nimport styles from './index.module.scss';\n\ntype Props = {\n  metadata?: SchemaMetadata;\n  onCancel?: () => void;\n};\n\nexport const CreateWorkModal: FC<Props> = ({ metadata, onCancel }) => {\n  const database = useDatabase();\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n\n  const onFinish = (values: any) => {\n    if (metadata) {\n      const action = async () => {\n        setLoading(true);\n        try {\n          const schema = await database.schemas.get(metadata.id);\n          if (schema) {\n            const image = await createSchemaImage(schema);\n            const work = createWork(values.name, schema);\n            await database.works.add(work, image);\n            history.push(WORKS_PATHNAME);\n            history.push(`${WORK_PATHNAME}?id=${work.metadata.id}`);\n          } else {\n            throw new Error('No schema');\n          }\n        } catch (error) {\n          setLoading(false);\n          if (error instanceof Error) {\n            message.error(error.message);\n          } else {\n            message.error('Unknown error');\n          }\n        }\n      };\n\n      action();\n    }\n  };\n\n  if (metadata) {\n    return (\n      <Modal\n        title=\"Create work\"\n        closable\n        visible\n        onCancel={onCancel}\n        width=\"400px\"\n        footer={null}\n        centered\n      >\n        <Form layout=\"horizontal\" requiredMark={false} onFinish={onFinish}>\n          <p>\n            Based on <Tag className={styles.tag}>{metadata.name}</Tag>\n          </p>\n          <Form.Item\n            name=\"name\"\n            label=\"Name\"\n            initialValue={metadata.name}\n            rules={[{ required: true, message: 'Required field' }]}\n          >\n            <Input />\n          </Form.Item>\n          <Button\n            loading={loading}\n            className={styles.button}\n            htmlType=\"submit\"\n            type=\"primary\"\n          >\n            Create\n          </Button>\n        </Form>\n      </Modal>\n    );\n  } else {\n    return null;\n  }\n};\n","import { SchemaMetadata } from '@fancywork/core';\nimport { Alert, Button, Form, Input } from 'antd';\nimport { FC } from 'react';\nimport { ModalForm } from '../../../../../components';\nimport styles from './index.module.scss';\n\ntype Props = {\n  metadata: SchemaMetadata;\n  onChange?: (name: string) => Promise<void> | void;\n  onClose?: () => void;\n};\n\nexport const ChangeSchemaNameModal: FC<Props> = ({\n  metadata,\n  onChange,\n  onClose,\n}) => {\n  const onFinish = async (values: any) => {\n    if (metadata && onChange) {\n      try {\n        await onChange(values.name);\n        onClose && onClose();\n      } catch (error) {\n        throw error;\n      }\n    }\n  };\n\n  return (\n    <ModalForm\n      onCancel={onClose}\n      onFinish={onFinish}\n      layout=\"horizontal\"\n      requiredMark={false}\n    >\n      {(loading) => (\n        <>\n          <Alert\n            type=\"warning\"\n            message=\"The change will not affect the work already started\"\n            className={styles.alert}\n          />\n          <Form.Item\n            name=\"name\"\n            label=\"Name\"\n            initialValue={metadata.name}\n            rules={[{ required: true, message: 'Required field' }]}\n          >\n            <Input />\n          </Form.Item>\n          <Button\n            loading={loading}\n            className={styles.button}\n            htmlType=\"submit\"\n            type=\"primary\"\n          >\n            Change\n          </Button>\n        </>\n      )}\n    </ModalForm>\n  );\n};\n","import { SettingOutlined } from '@ant-design/icons';\nimport { SchemaMetadata } from '@fancywork/core';\nimport { Button, Popover } from 'antd';\nimport { FC, useState } from 'react';\nimport { ChangeSchemaNameModal } from './change-schema-name-modal';\n\ntype Props = {\n  metadata: SchemaMetadata;\n  onChangeName?: (name: string) => Promise<void> | void;\n};\n\nexport const SchemaSettingsButton: FC<Props> = ({ metadata, onChangeName }) => {\n  const [visible, setVisible] = useState(false);\n  const [changeNameVisible, setChangeNameVisible] = useState(false);\n\n  return (\n    <>\n      {changeNameVisible ? (\n        <ChangeSchemaNameModal\n          metadata={metadata}\n          onChange={onChangeName}\n          onClose={() => setChangeNameVisible(false)}\n        />\n      ) : null}\n      <Popover\n        trigger=\"click\"\n        visible={visible}\n        onVisibleChange={setVisible}\n        content={\n          <>\n            <Button\n              type=\"link\"\n              onClick={() => {\n                setChangeNameVisible(true);\n                setVisible(false);\n              }}\n            >\n              Change name\n            </Button>\n          </>\n        }\n      >\n        <SettingOutlined />\n      </Popover>\n    </>\n  );\n};\n","import {\n  DeleteOutlined,\n  EyeOutlined,\n  LoadingOutlined,\n} from '@ant-design/icons';\nimport { SchemaMetadata } from '@fancywork/core';\nimport { DownloadButton, SchemaInfoTable } from '@fancywork/core-react';\nimport { SchemaImage } from '@fancywork/storage';\nimport { useDatabase } from '@fancywork/storage-react';\nimport { Button, Card, Image, Popconfirm, Spin } from 'antd';\nimport { FC, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { SCHEMA_PATHNAME } from '../../schema-page/constants';\nimport { CreateWorkModal } from '../create-work-modal';\nimport styles from './index.module.scss';\nimport { SchemaSettingsButton } from './schema-settings-button';\n\ntype Props = {\n  metadata: SchemaMetadata;\n  image?: SchemaImage;\n};\n\nexport const SchemaCard: FC<Props> = ({ metadata, image }) => {\n  const database = useDatabase();\n  const history = useHistory();\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [deletePending, setDeletePending] = useState(false);\n\n  return (\n    <>\n      {modalVisible ? (\n        <CreateWorkModal\n          metadata={metadata}\n          onCancel={() => {\n            setModalVisible(false);\n          }}\n        />\n      ) : null}\n      <Card\n        className={styles.root}\n        actions={[\n          <SchemaSettingsButton\n            key=\"settings\"\n            metadata={metadata}\n            onChangeName={async (name: string) => {\n              await database.schemas.changeName(metadata.id, name);\n            }}\n          />,\n          <Popconfirm\n            title=\"Delete schema\"\n            key=\"delete\"\n            okType=\"danger\"\n            disabled={deletePending}\n            onConfirm={async () => {\n              setDeletePending(true);\n              await database.schemas.delete(metadata.id);\n              setDeletePending(false);\n            }}\n          >\n            <Spin spinning={deletePending} indicator={<LoadingOutlined />}>\n              <DeleteOutlined />\n            </Spin>\n          </Popconfirm>,\n        ]}\n      >\n        <Card.Meta\n          avatar={\n            image ? (\n              <div className={styles.image}>\n                <Image\n                  preview={{\n                    mask: <EyeOutlined />,\n                  }}\n                  src={image.dataURL}\n                  alt={metadata.name}\n                />\n              </div>\n            ) : null\n          }\n          title={metadata.name}\n        />\n        <SchemaInfoTable\n          metadata={metadata}\n          pagination={false}\n          className={styles.table}\n          scroll={{ x: true }}\n        />\n        <div className={styles.cardButtons}>\n          <Button\n            type=\"primary\"\n            className={styles.cardButton}\n            onClick={() => {\n              setModalVisible(true);\n            }}\n          >\n            To Embroider\n          </Button>\n          <Button\n            className={styles.cardButton}\n            onClick={() => {\n              history.push(`${SCHEMA_PATHNAME}?id=${metadata.id}`);\n            }}\n          >\n            View Schema\n          </Button>\n          <DownloadButton\n            className={styles.cardButton}\n            schemaLoader={async () => {\n              const schema = await database.schemas.get(metadata.id);\n\n              if (schema) {\n                return schema;\n              } else {\n                throw new Error('No schema');\n              }\n            }}\n          />\n        </div>\n      </Card>\n    </>\n  );\n};\n","import {\n  DatabasePaginationLayout,\n  Search,\n  useDatabasePagination,\n} from '@fancywork/storage-react';\nimport { Col, Row } from 'antd';\nimport { useHistory } from 'react-router-dom';\nimport { AppPage } from '../../types';\nimport { SCHEMAS_PATHNAME } from './constants';\nimport styles from './index.module.scss';\nimport { SchemaCard } from './schema-card';\n\nconst PAGE_SIZE = 10;\n\nconst PARAM_NAME = 'search';\n\nexport const SchemasPage: AppPage = () => {\n  const history = useHistory();\n\n  const pagination = useDatabasePagination(PAGE_SIZE, (database) => {\n    const params = new URLSearchParams(history.location.search);\n    return database.schemas.collection(params.get(PARAM_NAME));\n  });\n\n  return (\n    <DatabasePaginationLayout\n      title=\"My schemas\"\n      noDataText=\"No Schemas\"\n      onBack={() => {\n        history.goBack();\n      }}\n      databasePagination={pagination}\n      extraContent={\n        <Search\n          paramName={PARAM_NAME}\n          size=\"large\"\n          className={styles.search}\n          onSearch={() => {\n            pagination.reset();\n          }}\n        />\n      }\n    >\n      <Row gutter={[24, 24]}>\n        {pagination.data.map(({ metadata, image }) => (\n          <Col span={24} lg={12} key={metadata.id}>\n            <SchemaCard metadata={metadata} image={image} />\n          </Col>\n        ))}\n      </Row>\n    </DatabasePaginationLayout>\n  );\n};\n\nSchemasPage.pathname = SCHEMAS_PATHNAME;\n","import { Cell } from '@fancywork/core';\nimport { WorkViewer } from '@fancywork/core-react';\nimport { useDatabase, useDatabaseItem } from '@fancywork/storage-react';\nimport { Result } from 'antd';\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router';\nimport { FullscreenSpin } from '../../components';\nimport { useQueryParam } from '../../hooks';\nimport { AppPage } from '../../types';\nimport { AUTO_SAVE_TIMEOUT, WORK_PATHNAME } from './constants';\n\nexport const WorkPage: AppPage = () => {\n  const database = useDatabase();\n  const history = useHistory();\n  const id = useQueryParam('id');\n  const {\n    item: work,\n    loading,\n    error,\n  } = useDatabaseItem((database) => {\n    return database.works.get(id);\n  });\n\n  useEffect(() => {\n    if (work) {\n      const saved = document.title;\n      document.title = `${work.metadata.name} - Fancywork`;\n      return () => {\n        document.title = saved;\n      };\n    }\n  }, [work]);\n\n  if (loading) {\n    return <FullscreenSpin />;\n  } else if (error) {\n    return <Result title=\"Error\" subTitle={error} />;\n  }\n\n  if (work) {\n    return (\n      <WorkViewer\n        work={work}\n        autoSaveTimeout={AUTO_SAVE_TIMEOUT}\n        onBack={() => {\n          history.goBack();\n        }}\n        onSave={async (changedCells: Set<Cell>) => {\n          if (work) {\n            await database.works.saveChanges(work, changedCells);\n          }\n        }}\n      />\n    );\n  } else {\n    return <FullscreenSpin />;\n  }\n};\n\nWorkPage.pathname = WORK_PATHNAME;\n","import { WorkMetadata } from '@fancywork/core';\nimport { Button, Form, Input } from 'antd';\nimport { FC } from 'react';\nimport { ModalForm } from '../../../../../components';\nimport styles from './index.module.scss';\n\ntype Props = {\n  metadata: WorkMetadata;\n  onChange?: (name: string) => Promise<void> | void;\n  onClose?: () => void;\n};\n\nexport const ChangeWorkNameModal: FC<Props> = ({\n  metadata,\n  onChange,\n  onClose,\n}) => {\n  const onFinish = async (values: any) => {\n    if (metadata && onChange) {\n      try {\n        await onChange(values.name);\n        onClose && onClose();\n      } catch (error) {\n        throw error;\n      }\n    }\n  };\n\n  return (\n    <ModalForm\n      onCancel={onClose}\n      onFinish={onFinish}\n      layout=\"horizontal\"\n      requiredMark={false}\n    >\n      {(loading) => (\n        <>\n          <Form.Item\n            name=\"name\"\n            label=\"Name\"\n            initialValue={metadata.name}\n            rules={[{ required: true, message: 'Required field' }]}\n          >\n            <Input />\n          </Form.Item>\n          <Button\n            loading={loading}\n            className={styles.button}\n            htmlType=\"submit\"\n            type=\"primary\"\n          >\n            Change\n          </Button>\n        </>\n      )}\n    </ModalForm>\n  );\n};\n","import { SettingOutlined } from '@ant-design/icons';\nimport { WorkMetadata } from '@fancywork/core';\nimport { Button, Popover } from 'antd';\nimport { FC, useState } from 'react';\nimport { ChangeWorkNameModal } from './change-work-name-modal';\n\ntype Props = {\n  metadata: WorkMetadata;\n  onChangeName?: (name: string) => Promise<void> | void;\n};\n\nexport const WorkSettingsButton: FC<Props> = ({ metadata, onChangeName }) => {\n  const [visible, setVisible] = useState(false);\n  const [changeNameVisible, setChangeNameVisible] = useState(false);\n\n  return (\n    <>\n      {changeNameVisible ? (\n        <ChangeWorkNameModal\n          metadata={metadata}\n          onChange={onChangeName}\n          onClose={() => setChangeNameVisible(false)}\n        />\n      ) : null}\n      <Popover\n        trigger=\"click\"\n        visible={visible}\n        onVisibleChange={setVisible}\n        content={\n          <>\n            <Button\n              type=\"link\"\n              onClick={() => {\n                setChangeNameVisible(true);\n                setVisible(false);\n              }}\n            >\n              Change name\n            </Button>\n          </>\n        }\n      >\n        <SettingOutlined />\n      </Popover>\n    </>\n  );\n};\n","import {\n  DeleteOutlined,\n  EyeOutlined,\n  LoadingOutlined,\n} from '@ant-design/icons';\nimport { WorkMetadata } from '@fancywork/core';\nimport {\n  DownloadButton,\n  WorkInfoTable,\n  WorkProgress,\n} from '@fancywork/core-react';\nimport { WorkImage } from '@fancywork/storage';\nimport { useDatabase } from '@fancywork/storage-react';\nimport { Button, Card, Image, Popconfirm, Spin } from 'antd';\nimport { FC, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { WORK_PATHNAME } from '../../work-page/constants';\nimport styles from './index.module.scss';\nimport { WorkSettingsButton } from './work-settings-button';\n\ntype Props = {\n  metadata: WorkMetadata;\n  image?: WorkImage;\n};\n\nexport const WorkCard: FC<Props> = ({ metadata, image }) => {\n  const database = useDatabase();\n  const history = useHistory();\n\n  const [deletePending, setDeletePending] = useState(false);\n\n  return (\n    <Card\n      className={styles.root}\n      actions={[\n        <WorkSettingsButton\n          key=\"settings\"\n          metadata={metadata}\n          onChangeName={async (name: string) => {\n            await database.works.changeName(metadata.id, name);\n          }}\n        />,\n        <Popconfirm\n          title=\"Delete work\"\n          key=\"delete\"\n          okType=\"danger\"\n          disabled={deletePending}\n          onConfirm={async () => {\n            setDeletePending(true);\n            await database.works.delete(metadata.id);\n            setDeletePending(false);\n          }}\n        >\n          <Spin spinning={deletePending} indicator={<LoadingOutlined />}>\n            <DeleteOutlined />\n          </Spin>\n        </Popconfirm>,\n      ]}\n    >\n      <Card.Meta\n        avatar={\n          image ? (\n            <div className={styles.image}>\n              <Image\n                preview={{\n                  mask: <EyeOutlined />,\n                }}\n                src={image.dataURL}\n                alt={metadata.name}\n              />\n            </div>\n          ) : null\n        }\n        title={metadata.name}\n      />\n      <WorkInfoTable\n        metadata={metadata}\n        pagination={false}\n        className={styles.table}\n        scroll={{ x: true }}\n      />\n      <div className={styles.progress}>\n        <WorkProgress metadata={metadata} />\n      </div>\n      <div className={styles.cardButtons}>\n        <Button\n          type=\"primary\"\n          className={styles.cardButton}\n          onClick={() => {\n            history.push(`${WORK_PATHNAME}?id=${metadata.id}`);\n          }}\n        >\n          Continue\n        </Button>\n        <DownloadButton\n          className={styles.cardButton}\n          schemaLoader={async () => {\n            const work = await database.works.get(metadata.id);\n\n            if (work) {\n              return work.schema;\n            } else {\n              throw new Error('No work');\n            }\n          }}\n        />\n      </div>\n    </Card>\n  );\n};\n","import {\n  DatabasePaginationLayout,\n  Search,\n  useDatabasePagination,\n} from '@fancywork/storage-react';\nimport { Col, Row } from 'antd';\nimport { useHistory } from 'react-router-dom';\nimport { AppPage } from '../../types';\nimport { WORKS_PATHNAME } from './constants';\nimport styles from './index.module.scss';\nimport { WorkCard } from './work-card';\n\nconst PAGE_SIZE = 10;\n\nconst PARAM_NAME = 'search';\n\nexport const WorksPage: AppPage = () => {\n  const history = useHistory();\n\n  const pagination = useDatabasePagination(PAGE_SIZE, (database) => {\n    const params = new URLSearchParams(history.location.search);\n    return database.works.collection(params.get(PARAM_NAME));\n  });\n\n  return (\n    <DatabasePaginationLayout\n      title=\"My works\"\n      noDataText=\"No Works\"\n      onBack={() => {\n        history.goBack();\n      }}\n      databasePagination={pagination}\n      extraContent={\n        <Search\n          paramName={PARAM_NAME}\n          size=\"large\"\n          className={styles.search}\n          onSearch={() => {\n            pagination.reset();\n          }}\n        />\n      }\n    >\n      <Row gutter={[24, 24]}>\n        {pagination.data.map(({ metadata, image }) => (\n          <Col span={24} lg={12} key={metadata.id}>\n            <WorkCard metadata={metadata} image={image} />\n          </Col>\n        ))}\n      </Row>\n    </DatabasePaginationLayout>\n  );\n};\n\nWorksPage.pathname = WORKS_PATHNAME;\n","import { AppPage } from '../types';\nimport { CreateSchemePage } from './create-schema-page';\nimport { Error404Page } from './error-404-page';\nimport { HomePage } from './home-page';\nimport { SchemaPage } from './schema-page';\nimport { SchemasPage } from './schemas-page';\nimport { WorkPage } from './work-page';\nimport { WorksPage } from './works-page';\n\nexport const pages: Array<AppPage> = [\n  CreateSchemePage,\n  HomePage,\n  SchemaPage,\n  SchemasPage,\n  WorkPage,\n  WorksPage,\n  Error404Page,\n];\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      /* eslint-disable-next-line no-param-reassign */\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nexport const reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n","import { DatabaseProvider } from '@fancywork/storage-react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport { pages } from './pages';\nimport { reportWebVitals } from './reportWebVitals';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport 'antd/dist/antd.css';\nimport '@fancywork/core-react/dist/main.css';\nimport '@fancywork/storage-react/dist/main.css';\nimport './styles/global.scss';\n\nReactDOM.render(\n  <DatabaseProvider>\n    <BrowserRouter>\n      <Switch>\n        {pages.map((page) => (\n          <Route\n            exact\n            key={page.pathname}\n            path={page.pathname}\n            component={page}\n          />\n        ))}\n      </Switch>\n    </BrowserRouter>\n  </DatabaseProvider>,\n  document.getElementById('root')\n);\n\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar EventEmitter = /** @class */ (function () {\n    function EventEmitter() {\n        this.listeners = {};\n    }\n    EventEmitter.prototype.emit = function (eventName, eventData) {\n        var prevented = false;\n        var preventDefault = function () {\n            prevented = true;\n        };\n        var defaultPrevented = function () { return prevented; };\n        var data = {\n            target: this,\n            data: eventData,\n            preventDefault: preventDefault,\n            defaultPrevented: defaultPrevented,\n        };\n        var eventListeners = this.listeners[eventName.toString()];\n        if (eventListeners) {\n            eventListeners.forEach(function (listener) {\n                listener(data);\n            });\n        }\n        return prevented;\n    };\n    EventEmitter.prototype.addEventListener = function (eventName, listener) {\n        var eventListeners = this.listeners[eventName.toString()];\n        if (eventListeners) {\n            var index = eventListeners.findIndex(function (value) { return value === listener; });\n            if (index === -1) {\n                eventListeners.push(listener);\n            }\n        }\n        else {\n            this.listeners[eventName.toString()] = [listener];\n        }\n    };\n    EventEmitter.prototype.removeEventListener = function (eventName, listener) {\n        var eventListeners = this.listeners[eventName.toString()];\n        if (eventListeners) {\n            var index = eventListeners.findIndex(function (value) { return value === listener; });\n            if (index !== -1) {\n                eventListeners.splice(index, 1);\n            }\n        }\n    };\n    EventEmitter.prototype.removeAllEventListeners = function (eventName) {\n        delete this.listeners[eventName.toString()];\n    };\n    return EventEmitter;\n}());\n\nvar RGBAColor = /** @class */ (function () {\n    function RGBAColor(red, green, blue, alpha) {\n        var assert = function (valueName, value) {\n            if (value < 0 || value > 255) {\n                throw new RangeError(\"Parameter \\\"\" + valueName + \"\\\" must be in range [0; 255].\");\n            }\n            else {\n                return value;\n            }\n        };\n        this.red = assert('red', red);\n        this.green = assert('green', green);\n        this.blue = assert('blue', blue);\n        this.alpha = assert('alpha', alpha);\n    }\n    RGBAColor.prototype.valueOf = function () {\n        var number = this.alpha;\n        number |= this.blue << 8;\n        number |= this.green << 16;\n        number |= this.red << 24;\n        return number;\n    };\n    RGBAColor.prototype.toString = function () {\n        return \"rgba(\" + this.red + \", \" + this.green + \", \" + this.blue + \", \" + this.alpha / 255 + \")\";\n    };\n    RGBAColor.fromHex = function (hex) {\n        hex = hex.trim();\n        if (/^#([0-9a-fA-F]){3,4}$/.test(hex)) {\n            var hexParts = hex.substring(1).split('');\n            if (hexParts.length === 3) {\n                hexParts = [\n                    hexParts[0],\n                    hexParts[0],\n                    hexParts[1],\n                    hexParts[1],\n                    hexParts[2],\n                    hexParts[2],\n                    'F',\n                    'F',\n                ];\n            }\n            else {\n                hexParts = [\n                    hexParts[0],\n                    hexParts[0],\n                    hexParts[1],\n                    hexParts[1],\n                    hexParts[2],\n                    hexParts[2],\n                    hexParts[3],\n                    hexParts[3],\n                ];\n            }\n            hex = hexParts.join('');\n        }\n        else if (/^#[0-9a-fA-F]{6}$/.test(hex)) {\n            hex = hex.substring(1) + \"FF\";\n        }\n        else if (/^#[0-9a-fA-F]{8}$/.test(hex)) {\n            hex = hex.substring(1);\n        }\n        else {\n            throw new Error('Bad hex');\n        }\n        return this.fromNumber(+(\"0x\" + hex));\n    };\n    RGBAColor.fromNumber = function (value) {\n        var r = (value >> 24) & 0xff;\n        var g = (value >> 16) & 0xff;\n        var b = (value >> 8) & 0xff;\n        var a = value & 0xff;\n        return new RGBAColor(r, g, b, a);\n    };\n    return RGBAColor;\n}());\n\nvar RGBColor = /** @class */ (function () {\n    function RGBColor(red, green, blue) {\n        var assert = function (valueName, value) {\n            if (value < 0 || value > 255) {\n                throw new RangeError(\"Parameter \\\"\" + valueName + \"\\\" must be in range [0; 255].\");\n            }\n            else {\n                return value;\n            }\n        };\n        this.red = assert('red', red);\n        this.green = assert('green', green);\n        this.blue = assert('blue', blue);\n    }\n    RGBColor.prototype.valueOf = function () {\n        var number = this.blue << 8;\n        number |= this.green << 16;\n        number |= this.red << 24;\n        return number;\n    };\n    RGBColor.prototype.toString = function () {\n        return \"rgb(\" + this.red + \", \" + this.green + \", \" + this.blue + \")\";\n    };\n    RGBColor.fromHex = function (hex) {\n        hex = hex.trim();\n        if (/^#([0-9a-fA-F]){3,4}$/.test(hex)) {\n            var hexParts = hex.substring(1).split('');\n            if (hexParts.length === 3) {\n                hexParts = [\n                    hexParts[0],\n                    hexParts[0],\n                    hexParts[1],\n                    hexParts[1],\n                    hexParts[2],\n                    hexParts[2],\n                    'F',\n                    'F',\n                ];\n            }\n            else {\n                hexParts = [\n                    hexParts[0],\n                    hexParts[0],\n                    hexParts[1],\n                    hexParts[1],\n                    hexParts[2],\n                    hexParts[2],\n                    hexParts[3],\n                    hexParts[3],\n                ];\n            }\n            hex = hexParts.join('');\n        }\n        else if (/^#[0-9a-fA-F]{6}$/.test(hex)) {\n            hex = hex.substring(1) + \"FF\";\n        }\n        else if (/^#[0-9a-fA-F]{8}$/.test(hex)) {\n            hex = hex.substring(1);\n        }\n        else {\n            throw new Error('Bad hex');\n        }\n        return this.fromNumber(+(\"0x\" + hex));\n    };\n    RGBColor.fromNumber = function (value) {\n        var r = (value >> 24) & 0xff;\n        var g = (value >> 16) & 0xff;\n        var b = (value >> 8) & 0xff;\n        return new RGBColor(r, g, b);\n    };\n    return RGBColor;\n}());\n\nvar Vector2 = /** @class */ (function () {\n    function Vector2(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return Vector2;\n}());\n\nvar Vector2Int = /** @class */ (function () {\n    function Vector2Int(x, y) {\n        this.x = x;\n        this.y = y;\n        if (!Number.isInteger(x)) {\n            throw new TypeError('Expected integer \"x\"');\n        }\n        if (!Number.isInteger(y)) {\n            throw new TypeError('Expected integer \"y\"');\n        }\n    }\n    return Vector2Int;\n}());\n\nvar Vector3 = /** @class */ (function () {\n    function Vector3(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n    Vector3.prototype.multiply = function (value) {\n        return new Vector3(this.x * value, this.y * value, this.z * value);\n    };\n    Vector3.prototype.add = function (value) {\n        return new Vector3(this.x + value.x, this.y + value.y, this.z + value.z);\n    };\n    return Vector3;\n}());\n\nvar Vector4 = /** @class */ (function () {\n    function Vector4(x, y, z, w) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.w = w;\n    }\n    Vector4.prototype.multiply = function (value) {\n        return new Vector4(this.x * value, this.y * value, this.z * value, this.w * value);\n    };\n    Vector4.prototype.add = function (value) {\n        return new Vector4(this.x + value.x, this.y + value.y, this.z + value.z, this.w + value.w);\n    };\n    return Vector4;\n}());\n\nvar Animation = /** @class */ (function () {\n    function Animation(context, cellPredicate) {\n        this.context = context;\n        this.cellPredicate = cellPredicate;\n        this._finished = false;\n    }\n    Object.defineProperty(Animation.prototype, \"finished\", {\n        get: function () {\n            return this._finished;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Animation.prototype.draw = function (_i, _j, _x, _y, _chunk, _context) { };\n    Animation.prototype.postRender = function (_chunk, _context) { };\n    Animation.prototype.stop = function () {\n        this.finish();\n        this.onStop();\n    };\n    Animation.prototype.onStop = function () { };\n    Animation.prototype.finish = function () {\n        this._finished = true;\n        this.context.requireRedraw();\n    };\n    return Animation;\n}());\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nvar ContinuousAnimation = /** @class */ (function (_super) {\n    __extends(ContinuousAnimation, _super);\n    function ContinuousAnimation(context, options) {\n        var _this = _super.call(this, context, options === null || options === void 0 ? void 0 : options.cellPredicate) || this;\n        _this.options = options;\n        _this.started = false;\n        if (!options) {\n            _this.finish();\n            return _this;\n        }\n        _this.validate(options);\n        if (options.trigger === undefined) {\n            if (options.delay) {\n                _this.timeoutKey = setTimeout(function () {\n                    _this.start();\n                }, options.delay);\n            }\n            else {\n                _this.start();\n            }\n        }\n        return _this;\n    }\n    ContinuousAnimation.prototype.validate = function (options) {\n        if (options.delay && options.delay < 0) {\n            throw new RangeError('delay must be in range [0, infinity]');\n        }\n        if (options.duration && options.duration < 0) {\n            throw new RangeError('duration must be in range [0, infinity]');\n        }\n    };\n    ContinuousAnimation.prototype.draw = function (i, j, x, y, chunk) {\n        if (!this.options) {\n            return;\n        }\n        var deltaTime;\n        if (this.started) {\n            deltaTime = performance.now() - this.lastFrameTime;\n            this.lastFrameTime = performance.now();\n        }\n        else if (this.options.delay === undefined) {\n            deltaTime = 0;\n            this.start();\n        }\n        else {\n            return;\n        }\n        var time = performance.now() - this.startTime;\n        this.options.draw(x, y, {\n            i: i,\n            j: j,\n            time: time,\n            deltaTime: deltaTime,\n            chunk: chunk,\n        });\n        this.context.requireRedraw();\n    };\n    ContinuousAnimation.prototype.start = function () {\n        var _this = this;\n        if (!this.options) {\n            return;\n        }\n        this.started = true;\n        this.startTime = performance.now();\n        this.lastFrameTime = performance.now();\n        if (this.options.duration) {\n            this.timeoutKey = setTimeout(function () {\n                _this.finish();\n            }, this.options.duration);\n        }\n    };\n    ContinuousAnimation.prototype.onStop = function () {\n        if (this.timeoutKey) {\n            clearTimeout(this.timeoutKey);\n        }\n    };\n    return ContinuousAnimation;\n}(Animation));\n\nvar BezierCurve = /** @class */ (function () {\n    function BezierCurve(states, options) {\n        this.states = states;\n        this.options = options;\n        this.convertedStates = this.states.map(options.convertToIntermediate);\n    }\n    BezierCurve.prototype.evaluate = function (t) {\n        if (t < 0) {\n            t = 0;\n        }\n        else if (t > 1) {\n            t = 1;\n        }\n        var points = __spreadArray([], this.convertedStates, true);\n        var _a = this.options, add = _a.add, multiply = _a.multiply;\n        var length = this.convertedStates.length;\n        for (var limit = length; limit > 1; limit--) {\n            for (var i = 0; i < limit - 1; i++) {\n                points[i] = add(multiply(points[i], 1 - t), multiply(points[i + 1], t));\n            }\n        }\n        var result = points[0];\n        return this.options.convertFromIntermediate(result);\n    };\n    return BezierCurve;\n}());\n\nvar BezierCurveRGB = /** @class */ (function (_super) {\n    __extends(BezierCurveRGB, _super);\n    function BezierCurveRGB(states) {\n        return _super.call(this, states, {\n            multiply: function (a, b) {\n                return a.multiply(b);\n            },\n            add: function (a, b) {\n                return a.add(b);\n            },\n            convertFromIntermediate: function (vector) {\n                return new RGBColor(Math.floor(vector.x), Math.floor(vector.y), Math.floor(vector.z));\n            },\n            convertToIntermediate: function (color) {\n                return new Vector3(color.red, color.green, color.blue);\n            },\n        }) || this;\n    }\n    return BezierCurveRGB;\n}(BezierCurve));\n\nvar BezierCurveRGBA = /** @class */ (function (_super) {\n    __extends(BezierCurveRGBA, _super);\n    function BezierCurveRGBA(states) {\n        return _super.call(this, states, {\n            multiply: function (a, b) {\n                return a.multiply(b);\n            },\n            add: function (a, b) {\n                return a.add(b);\n            },\n            convertFromIntermediate: function (vector) {\n                return new RGBAColor(Math.floor(vector.x), Math.floor(vector.y), Math.floor(vector.z), Math.floor(vector.w));\n            },\n            convertToIntermediate: function (color) {\n                return new Vector4(color.red, color.green, color.blue, color.alpha);\n            },\n        }) || this;\n    }\n    return BezierCurveRGBA;\n}(BezierCurve));\n\nvar CELL_SIZE = 30;\nvar MAX_WIDTH = 999;\nvar MAX_HEIGHT = 999;\n\nvar Vertex = /** @class */ (function () {\n    function Vertex(paletteColor) {\n        this.paletteColor = paletteColor;\n        this.attachedColors = new Map();\n        this.color = RGBColor.fromHex(paletteColor.hex);\n    }\n    Object.defineProperty(Vertex.prototype, \"attachedColorsCount\", {\n        get: function () {\n            return this.attachedColors.size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Vertex.prototype.distance = function (value) {\n        if (value instanceof RGBColor) {\n            var red = Math.pow((this.color.red - value.red), 2);\n            var green = Math.pow((this.color.green - value.green), 2);\n            var blue = Math.pow((this.color.blue - value.blue), 2);\n            return Math.sqrt(red + green + blue);\n        }\n        else {\n            return this.distance(value.color);\n        }\n    };\n    Vertex.prototype.merge = function (vertex) {\n        var _this = this;\n        vertex.attachedColors.forEach(function (value, key) {\n            _this.attachedColors.set(key, value);\n        });\n    };\n    Vertex.prototype.attachColor = function (color) {\n        var key = color.valueOf();\n        var count = this.attachedColors.get(key);\n        if (count) {\n            this.attachedColors.set(key, count + 1);\n        }\n        else {\n            this.attachedColors.set(key, 1);\n        }\n    };\n    Vertex.prototype.isAttachedColor = function (color) {\n        return this.attachedColors.has(color.valueOf());\n    };\n    Vertex.prototype.getColor = function () {\n        return this.color;\n    };\n    Vertex.prototype.compareTo = function (vertex) {\n        if (this.attachedColorsCount < vertex.attachedColorsCount) {\n            return -1;\n        }\n        else if (this.attachedColorsCount > vertex.attachedColorsCount) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    };\n    return Vertex;\n}());\n\nvar KMeansPalette = /** @class */ (function () {\n    function KMeansPalette(palette) {\n        this.name = palette.name;\n        this.verticies = palette.colors.map(function (color) { return new Vertex(color); });\n    }\n    KMeansPalette.prototype.increaseColorWeight = function (color) {\n        var vertext = this.getNearestVertex(color);\n        if (vertext) {\n            vertext.attachColor(color);\n        }\n    };\n    KMeansPalette.prototype.getSimilarColor = function (color) {\n        var vertex = this.getNearestVertex(color);\n        if (vertex) {\n            return vertex.paletteColor;\n        }\n        else {\n            throw new Error('No similar color in palette');\n        }\n    };\n    KMeansPalette.prototype.reduce = function (requiredSize, reducer) {\n        this.deleteUnusedVerticies();\n        if (requiredSize && reducer) {\n            while (this.verticies.length > requiredSize) {\n                reducer.reduce(this.verticies);\n            }\n        }\n    };\n    KMeansPalette.prototype.deleteUnusedVerticies = function () {\n        this.verticies = this.verticies.sort(function (vertex, otherVertex) {\n            return otherVertex.compareTo(vertex);\n        });\n        for (var i = 0; i < this.verticies.length; i++) {\n            if (this.verticies[i].attachedColorsCount === 0) {\n                this.verticies.splice(i);\n                return;\n            }\n        }\n    };\n    KMeansPalette.prototype.getNearestVertex = function (color) {\n        var minDistance = Number.POSITIVE_INFINITY;\n        var nearest = undefined;\n        for (var i = 0; i < this.verticies.length; i++) {\n            var distance = this.verticies[i].distance(color);\n            if (distance < minDistance) {\n                minDistance = distance;\n                nearest = this.verticies[i];\n            }\n        }\n        return nearest;\n    };\n    return KMeansPalette;\n}());\n\nvar PaletteReducer = /** @class */ (function () {\n    function PaletteReducer() {\n    }\n    return PaletteReducer;\n}());\n\nvar AverageDistanceReducer = /** @class */ (function (_super) {\n    __extends(AverageDistanceReducer, _super);\n    function AverageDistanceReducer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AverageDistanceReducer.prototype.reduce = function (verticies) {\n        var minDistanceAverage = Number.POSITIVE_INFINITY;\n        var index1 = -1;\n        for (var i = 0; i < verticies.length; i++) {\n            var distanceAverage = 0;\n            for (var j = 0; j < verticies.length; j++) {\n                if (i !== j) {\n                    distanceAverage += verticies[i].distance(verticies[j]);\n                }\n            }\n            distanceAverage /= verticies.length - 1;\n            if (distanceAverage < minDistanceAverage) {\n                minDistanceAverage = distanceAverage;\n                index1 = i;\n            }\n        }\n        var minDistance = Number.POSITIVE_INFINITY;\n        var index2 = -1;\n        for (var i = 0; i < verticies.length; i++) {\n            if (i !== index1) {\n                var distance = verticies[index1].distance(verticies[i]);\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    index2 = i;\n                }\n            }\n        }\n        verticies[index2].merge(verticies[index1]);\n        verticies.splice(index1, 1);\n    };\n    return AverageDistanceReducer;\n}(PaletteReducer));\n\nvar ContrastReducer = /** @class */ (function (_super) {\n    __extends(ContrastReducer, _super);\n    function ContrastReducer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ContrastReducer.prototype.reduce = function (verticies) {\n        var minDistance = Number.POSITIVE_INFINITY;\n        var index1 = -1;\n        var index2 = -1;\n        for (var i = 0; i < verticies.length - 1; i++) {\n            for (var j = i + 1; j < verticies.length; j++) {\n                var distance = verticies[i].distance(verticies[j]);\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    index1 = i;\n                    index2 = j;\n                }\n            }\n        }\n        var count = 0;\n        var distance1 = 0;\n        var distance2 = 0;\n        for (var i = 0; i < verticies.length; i++) {\n            if (i !== index1 && i !== index2) {\n                count++;\n                distance1 = verticies[i].distance(verticies[index1]);\n                distance2 = verticies[i].distance(verticies[index2]);\n            }\n        }\n        if (count !== 0) {\n            distance1 /= count;\n            distance2 /= count;\n            if (distance1 < distance2) {\n                verticies[index2].merge(verticies[index1]);\n                verticies.splice(index2, 1);\n            }\n            else {\n                verticies[index1].merge(verticies[index2]);\n                verticies.splice(index1, 1);\n            }\n        }\n        else {\n            verticies[index1].merge(verticies[index2]);\n            verticies.splice(index2, 1);\n        }\n    };\n    return ContrastReducer;\n}(PaletteReducer));\n\nvar NearestReducer = /** @class */ (function (_super) {\n    __extends(NearestReducer, _super);\n    function NearestReducer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NearestReducer.prototype.reduce = function (verticies) {\n        var minDistance = Number.POSITIVE_INFINITY;\n        var index1 = -1;\n        var index2 = -1;\n        for (var i = 0; i < verticies.length - 1; i++) {\n            for (var j = i + 1; j < verticies.length; j++) {\n                var distance = verticies[i].distance(verticies[j]);\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    index1 = i;\n                    index2 = j;\n                }\n            }\n        }\n        if (verticies[index1].compareTo(verticies[index2]) >= 0) {\n            verticies[index1].merge(verticies[index2]);\n            verticies.splice(index2, 1);\n        }\n        else {\n            verticies[index2].merge(verticies[index1]);\n            verticies.splice(index1, 1);\n        }\n    };\n    return NearestReducer;\n}(PaletteReducer));\n\nvar PaletteReducerFactory = /** @class */ (function () {\n    function PaletteReducerFactory() {\n    }\n    PaletteReducerFactory.prototype.createReducer = function (algorithm) {\n        switch (algorithm) {\n            case 'nearest':\n                return new NearestReducer();\n            case 'contrast':\n                return new ContrastReducer();\n            case 'average-distance':\n                return new AverageDistanceReducer();\n            default:\n                throw new Error('Undefined algorithm');\n        }\n    };\n    return PaletteReducerFactory;\n}());\n\nvar COEFFICIENT = 1 / 16;\nvar QuantizationError = /** @class */ (function () {\n    function QuantizationError() {\n        this.red = 0;\n        this.green = 0;\n        this.blue = 0;\n    }\n    QuantizationError.prototype.clear = function () {\n        this.red = 0;\n        this.green = 0;\n        this.blue = 0;\n    };\n    QuantizationError.prototype.add = function (delta, factor) {\n        var value = factor * COEFFICIENT;\n        this.red += delta.red * value;\n        this.green += delta.green * value;\n        this.blue += delta.blue * value;\n    };\n    QuantizationError.prototype.apply = function (color) {\n        return {\n            red: clampColorComponent(color.red + this.red),\n            green: clampColorComponent(color.green + this.green),\n            blue: clampColorComponent(color.blue + this.blue),\n        };\n    };\n    QuantizationError.createArray = function (width) {\n        var array = new Array(width * 2);\n        for (var i = 0; i < width; i++) {\n            array[i] = new QuantizationError();\n        }\n        return array;\n    };\n    return QuantizationError;\n}());\nfunction clampColorComponent(component) {\n    component = Math.round(component);\n    return component < 0 ? 0 : component > 255 ? 255 : component;\n}\n\nfunction cellsEquals(cell, otherCell) {\n    if (cell.type === 'border' && otherCell.type === 'border') {\n        if (cell.axis === 'origin' && otherCell.axis === 'origin') {\n            return true;\n        }\n        else if (cell.axis !== 'origin' && otherCell.axis !== 'origin') {\n            return cell.axis === otherCell.axis && cell.number === otherCell.number;\n        }\n        else {\n            return false;\n        }\n    }\n    else if (cell.type === 'schema' && otherCell.type === 'schema') {\n        return cell.i === otherCell.i && cell.j === otherCell.j;\n    }\n    else {\n        return false;\n    }\n}\n\nvar CENTIMETERS_IN_INCH = 2.54;\nfunction convertSize(width, height, options) {\n    var converter = [\n        [\n            // Centimeter to centimeter\n            function () { return ({ width: width, height: height }); },\n            // Centimeter to inch\n            function () { return ({\n                width: width / CENTIMETERS_IN_INCH,\n                height: height / CENTIMETERS_IN_INCH,\n            }); },\n            // Centimeter to stitch\n            function () { return ({\n                width: (width / CENTIMETERS_IN_INCH) * options.stitchesPerInch,\n                height: (width / CENTIMETERS_IN_INCH) * options.stitchesPerInch,\n            }); },\n        ],\n        [\n            // Inch to centimeter\n            function () { return ({\n                width: width * CENTIMETERS_IN_INCH,\n                height: width * CENTIMETERS_IN_INCH,\n            }); },\n            // Inch to inch\n            function () { return ({ width: width, height: height }); },\n            // Inch to stitch\n            function () { return ({\n                width: width * options.stitchesPerInch,\n                height: height * options.stitchesPerInch,\n            }); },\n        ],\n        [\n            // Stitch to centimeter\n            function () { return ({\n                width: (width / options.stitchesPerInch) * CENTIMETERS_IN_INCH,\n                height: (height / options.stitchesPerInch) * CENTIMETERS_IN_INCH,\n            }); },\n            // Stitch to inch\n            function () { return ({\n                width: width / options.stitchesPerInch,\n                height: height / options.stitchesPerInch,\n            }); },\n            // Stitch to stitch\n            function () { return ({ width: width, height: height }); },\n        ],\n    ];\n    var fromIndex = getTypeIndex(options.from);\n    var toIndex = getTypeIndex(options.to);\n    var size = converter[fromIndex][toIndex]();\n    if (options.floor) {\n        return {\n            width: Math.floor(size.width),\n            height: Math.floor(size.height),\n        };\n    }\n    else {\n        return size;\n    }\n}\nfunction getTypeIndex(sizeType) {\n    switch (sizeType) {\n        case 'centimeter':\n            return 0;\n        case 'inch':\n            return 1;\n        case 'stitch':\n            return 2;\n        default:\n            throw new Error('Not implemented');\n    }\n}\n\nfunction executeInCanvasContext(callback) {\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    if (!context) {\n        throw new Error('2d context not supported');\n    }\n    var result = callback(context);\n    if (result instanceof Promise) {\n        result.finally(function () {\n            canvas.remove();\n        });\n        return result;\n    }\n    else {\n        canvas.remove();\n        return result;\n    }\n}\n\nfunction getImageDataPixel(imageData, offset) {\n    var red = imageData.data[offset + 0];\n    var green = imageData.data[offset + 1];\n    var blue = imageData.data[offset + 2];\n    var alpha = imageData.data[offset + 3];\n    return { red: red, green: green, blue: blue, alpha: alpha };\n}\n\nvar CHUNK_MS = 200;\nfunction forEachPixel(imageData, callback) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    var index = 0;\n                    var offset = 0;\n                    var imageSize = imageData.width * imageData.height;\n                    var processChunk = function () {\n                        var chunkStart = performance.now();\n                        try {\n                            for (; index < imageSize && performance.now() - chunkStart < CHUNK_MS; index++, offset += 4) {\n                                var _a = getImageDataPixel(imageData, offset), red = _a.red, green = _a.green, blue = _a.blue, alpha = _a.alpha;\n                                callback(red, green, blue, alpha);\n                            }\n                        }\n                        catch (error) {\n                            reject(error);\n                            return;\n                        }\n                        if (index < imageSize) {\n                            setTimeout(processChunk, 0);\n                        }\n                        else {\n                            resolve();\n                        }\n                    };\n                    processChunk();\n                })];\n        });\n    });\n}\n\nfunction convertComponent(component) {\n    component /= 255;\n    if (component <= 0.03928) {\n        return component / 12.92;\n    }\n    else {\n        return Math.pow(((component + 0.055) / 1.055), 2.4);\n    }\n}\nfunction getContrastColor(color) {\n    var rgbColor = color instanceof RGBColor ? color : RGBColor.fromHex(color);\n    var red = convertComponent(rgbColor.red);\n    var green = convertComponent(rgbColor.green);\n    var blue = convertComponent(rgbColor.blue);\n    var l = 0.2126 * red + 0.7152 * green + 0.0722 * blue;\n    if ((l + 0.05) / 0.5 > 1.05 / (l + 0.05)) {\n        return '#000';\n    }\n    else {\n        return '#fff';\n    }\n}\n\nfunction processImageInCanvas(callback, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _this = this;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, executeInCanvasContext(function (context) { return __awaiter(_this, void 0, void 0, function () {\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                        var image = new Image();\n                                        image.src = options.imageURL;\n                                        image.onload = function () {\n                                            var _a;\n                                            var imageWidth = (options === null || options === void 0 ? void 0 : options.width) || image.width;\n                                            var imageHeight = (options === null || options === void 0 ? void 0 : options.height) || image.height;\n                                            context.canvas.width = imageWidth;\n                                            context.canvas.height = imageHeight;\n                                            context.imageSmoothingEnabled = (_a = options === null || options === void 0 ? void 0 : options.imageSmoothingEnabled) !== null && _a !== void 0 ? _a : true;\n                                            try {\n                                                context.drawImage(image, 0, 0, imageWidth, imageHeight);\n                                                var result = callback(context, imageWidth, imageHeight);\n                                                if (result instanceof Promise) {\n                                                    result.then(resolve).catch(reject);\n                                                }\n                                                else {\n                                                    resolve(result);\n                                                }\n                                            }\n                                            catch (error) {\n                                                reject(error);\n                                            }\n                                            finally {\n                                                image.remove();\n                                            }\n                                        };\n                                        image.onerror = function (error) {\n                                            reject(error);\n                                            image.remove();\n                                        };\n                                    })];\n                                case 1: return [2 /*return*/, _a.sent()];\n                            }\n                        });\n                    }); })];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\n\nfunction createImagePalette(imageData, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var palette, maxColorsCount, reduceAlgorithm, imagePalette, reducer;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    palette = options.palette, maxColorsCount = options.maxColorsCount, reduceAlgorithm = options.reduceAlgorithm;\n                    imagePalette = new KMeansPalette(palette);\n                    return [4 /*yield*/, forEachPixel(imageData, function (red, green, blue, alpha) {\n                            if (alpha !== 0) {\n                                var color = new RGBColor(red, green, blue);\n                                imagePalette.increaseColorWeight(color);\n                            }\n                        })];\n                case 1:\n                    _a.sent();\n                    if (maxColorsCount && reduceAlgorithm) {\n                        reducer = new PaletteReducerFactory().createReducer(reduceAlgorithm);\n                        imagePalette.reduce(maxColorsCount, reducer);\n                    }\n                    else {\n                        imagePalette.reduce();\n                    }\n                    return [2 /*return*/, imagePalette];\n            }\n        });\n    });\n}\n\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}\n\nvar REGEX = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nfunction createSchemaGrid(imageData, palette, withDithering) {\n    var paletteColors = [];\n    var grid = [];\n    var errors = withDithering\n        ? QuantizationError.createArray(imageData.width * 2)\n        : [];\n    for (var j = 0, offset = 0; j < imageData.height; j++) {\n        var lineOffset = j % 2 === 0 ? 0 : imageData.width;\n        var nextLineOffset = j % 2 === 0 ? imageData.width : 0;\n        if (withDithering) {\n            for (var i = 0; i < imageData.width; i++) {\n                errors[nextLineOffset + i].clear();\n            }\n        }\n        var _loop_1 = function (i) {\n            var _a = getImageDataPixel(imageData, offset), alpha = _a.alpha, rest = __rest(_a, [\"alpha\"]);\n            var color = rest;\n            if (alpha === 0) {\n                grid.push(null);\n            }\n            else {\n                if (withDithering) {\n                    color = errors[lineOffset + i].apply(color);\n                }\n                var originalColor = new RGBColor(color.red, color.green, color.blue);\n                var similarColor_1 = palette.getSimilarColor(originalColor);\n                var index = paletteColors.findIndex(function (paletteColor) { return paletteColor === similarColor_1; });\n                if (index >= 0) {\n                    grid.push(index);\n                }\n                else {\n                    grid.push(paletteColors.length);\n                    paletteColors.push(similarColor_1);\n                }\n                if (withDithering) {\n                    var delta = computeColorDelta(originalColor, RGBColor.fromHex(similarColor_1.hex));\n                    /*\n                     * ...  x   7\n                     *  3   5   1\n                     *\n                     *   (1/16)\n                     */\n                    if (i + 1 !== imageData.width) {\n                        errors[lineOffset + i + 1].add(delta, 7);\n                    }\n                    if (j + 1 !== imageData.height) {\n                        if (i !== 0) {\n                            errors[nextLineOffset + i].add(delta, 3);\n                        }\n                        errors[nextLineOffset + i].add(delta, 5);\n                        if (i + 1 !== imageData.width) {\n                            errors[nextLineOffset + i + 1].add(delta, 1);\n                        }\n                    }\n                }\n            }\n        };\n        for (var i = 0; i < imageData.width; i++, offset += 4) {\n            _loop_1(i);\n        }\n    }\n    return {\n        grid: grid,\n        palette: {\n            name: palette.name,\n            colors: paletteColors,\n        },\n    };\n}\nfunction computeColorDelta(color, otherColor) {\n    return {\n        red: color.red - otherColor.red,\n        green: color.green - otherColor.green,\n        blue: color.blue - otherColor.blue,\n    };\n}\n\nfunction createSchema(imageURL, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var size, imageData, unoptimizedPalette, _a, grid, palette, metadata;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    size = convertSize(options.width, options.height, {\n                        stitchesPerInch: options.stitchesPerInch,\n                        from: options.sizeType,\n                        to: 'stitch',\n                    });\n                    if (size.width < 1 && size.width > MAX_WIDTH) {\n                        throw new RangeError(\"Schema width must be in range [1; \" + MAX_WIDTH + \"]\");\n                    }\n                    if (size.height < 1 && size.height > MAX_HEIGHT) {\n                        throw new RangeError(\"Schema height must be in range [1; \" + MAX_WIDTH + \"]\");\n                    }\n                    return [4 /*yield*/, processImageInCanvas(function (context, width, height) {\n                            return context.getImageData(0, 0, width, height);\n                        }, {\n                            imageURL: imageURL,\n                            width: size.width,\n                            height: size.height,\n                        })];\n                case 1:\n                    imageData = _b.sent();\n                    return [4 /*yield*/, createImagePalette(imageData, {\n                            palette: options.palette,\n                            maxColorsCount: options.maxColorsCount,\n                            reduceAlgorithm: options.reduceAlgorithm,\n                        })];\n                case 2:\n                    unoptimizedPalette = _b.sent();\n                    _a = createSchemaGrid(imageData, unoptimizedPalette, options.withDithering), grid = _a.grid, palette = _a.palette;\n                    metadata = createSchemaMetadata(imageData, {\n                        name: options.name,\n                        grid: grid,\n                        palette: palette,\n                        stitchesPerInch: options.stitchesPerInch,\n                    });\n                    return [2 /*return*/, {\n                            metadata: metadata,\n                            palette: palette,\n                            grid: grid,\n                        }];\n            }\n        });\n    });\n}\nfunction createSchemaMetadata(imageData, options) {\n    var _a;\n    return {\n        id: v4(),\n        name: options.name,\n        createdAt: new Date(),\n        stitchCount: (_a = options.grid.reduce(function (accumulator, value) {\n            if (value === undefined) {\n                return accumulator;\n            }\n            else {\n                return (accumulator !== null && accumulator !== void 0 ? accumulator : 0) + 1;\n            }\n        }, 0)) !== null && _a !== void 0 ? _a : 0,\n        canvasMetadata: {\n            width: imageData.width,\n            height: imageData.height,\n            stitchesPerInch: options.stitchesPerInch,\n        },\n        paletteMetadata: {\n            name: options.palette.name,\n            colorsCount: options.palette.colors.length,\n        },\n    };\n}\n\nfunction createSchemaImage(schema) {\n    return __awaiter(this, void 0, void 0, function () {\n        var grid, palette, metadata, _a, width, height, dataURL, CELL_SIZE;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    grid = schema.grid, palette = schema.palette, metadata = schema.metadata;\n                    _a = metadata.canvasMetadata, width = _a.width, height = _a.height;\n                    dataURL = executeInCanvasContext(function (context) {\n                        var data = new Uint8ClampedArray(grid.length * 4);\n                        var colors = palette.colors.map(function (_a) {\n                            var hex = _a.hex;\n                            return RGBColor.fromHex(hex);\n                        });\n                        for (var i = 0, offset = 0; i < grid.length; i++, offset += 4) {\n                            var colorIndex = grid[i];\n                            if (colorIndex !== null) {\n                                var color = colors[colorIndex];\n                                data[offset + 0] = color.red;\n                                data[offset + 1] = color.green;\n                                data[offset + 2] = color.blue;\n                                data[offset + 3] = 255;\n                            }\n                            else {\n                                data[offset + 3] = 0;\n                            }\n                        }\n                        context.canvas.width = width;\n                        context.canvas.height = height;\n                        var imageData = new ImageData(data, width, height);\n                        context.putImageData(imageData, 0, 0);\n                        return context.canvas.toDataURL();\n                    });\n                    CELL_SIZE = width > 500 || height > 500 ? 1 : 5;\n                    return [4 /*yield*/, processImageInCanvas(function (context) {\n                            return context.canvas.toDataURL();\n                        }, {\n                            imageURL: dataURL,\n                            width: width * CELL_SIZE,\n                            height: height * CELL_SIZE,\n                            imageSmoothingEnabled: false,\n                        })];\n                case 1: return [2 /*return*/, _b.sent()];\n            }\n        });\n    });\n}\n\nfunction downloadSchema(schema, minimized) {\n    var json = JSON.stringify(schema, function (key, value) {\n        return key.startsWith('_') ? undefined : value;\n    }, minimized ? undefined : 2);\n    var blob = new Blob([json], { type: 'application/json' });\n    var url = URL.createObjectURL(blob);\n    var anchor = document.createElement('a');\n    anchor.download = schema.metadata.name + \".json\";\n    anchor.href = url;\n    anchor.onclick = function () {\n        setTimeout(function () {\n            URL.revokeObjectURL(url);\n        }, 0);\n    };\n    anchor.click();\n    anchor.remove();\n}\n\nfunction createWork(name, schema) {\n    var length = schema.grid.length;\n    var embroidered = new Array(length);\n    for (var i = 0; i < length; i++) {\n        embroidered[i] = schema.grid[i] === undefined ? null : false;\n    }\n    return {\n        metadata: {\n            id: v4(),\n            name: name,\n            createdAt: new Date(),\n            lastActivity: new Date(),\n            stitchEmbroideredCount: 0,\n            schemaMetadata: schema.metadata,\n        },\n        schema: schema,\n        embroidered: embroidered,\n    };\n}\n\nfunction createWorkImage(work) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, grid, palette, metadata, _b, width, height, dataURL, CELL_SIZE;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    _a = work.schema, grid = _a.grid, palette = _a.palette, metadata = _a.metadata;\n                    _b = metadata.canvasMetadata, width = _b.width, height = _b.height;\n                    dataURL = executeInCanvasContext(function (context) {\n                        var data = new Uint8ClampedArray(grid.length * 4);\n                        var colors = palette.colors.map(function (_a) {\n                            var hex = _a.hex;\n                            return RGBColor.fromHex(hex);\n                        });\n                        for (var i = 0, offset = 0; i < grid.length; i++, offset += 4) {\n                            var colorIndex = grid[i];\n                            if (colorIndex !== null && work.embroidered[i]) {\n                                var color = colors[colorIndex];\n                                data[offset + 0] = color.red;\n                                data[offset + 1] = color.green;\n                                data[offset + 2] = color.blue;\n                                data[offset + 3] = 255;\n                            }\n                            else {\n                                data[offset + 3] = 0;\n                            }\n                        }\n                        context.canvas.width = width;\n                        context.canvas.height = height;\n                        var imageData = new ImageData(data, width, height);\n                        context.putImageData(imageData, 0, 0);\n                        return context.canvas.toDataURL();\n                    });\n                    CELL_SIZE = width > 500 || height > 500 ? 1 : 5;\n                    return [4 /*yield*/, processImageInCanvas(function (context) {\n                            return context.canvas.toDataURL();\n                        }, {\n                            imageURL: dataURL,\n                            width: width * CELL_SIZE,\n                            height: height * CELL_SIZE,\n                            imageSmoothingEnabled: false,\n                        })];\n                case 1: return [2 /*return*/, _c.sent()];\n            }\n        });\n    });\n}\n\nvar Chunk = /** @class */ (function () {\n    function Chunk(cellSize, cellsCount, canvasSize, offset) {\n        this.cellSize = cellSize;\n        this.halfCellSize = cellSize / 2;\n        this.cellOffset = new Vector2(offset.x % cellSize, offset.y % cellSize);\n        this.startCell = {\n            i: Math.floor(offset.x / cellSize),\n            j: Math.floor(offset.y / cellSize),\n        };\n        this.endCell = {\n            i: Math.min(this.startCell.i + Math.ceil(canvasSize.x / cellSize), cellsCount.x),\n            j: Math.min(this.startCell.j + Math.ceil(canvasSize.y / cellSize), cellsCount.y),\n        };\n        this.width =\n            this.cellOffset.x + (this.endCell.i - this.startCell.i + 1) * cellSize;\n        this.height =\n            this.cellOffset.y + (this.endCell.j - this.startCell.j + 1) * cellSize;\n    }\n    Chunk.prototype.getCellByCanvasPosition = function (pointerX, pointerY) {\n        if (pointerX < 0 ||\n            pointerY < 0 ||\n            pointerX > this.width ||\n            pointerY > this.height) {\n            return null;\n        }\n        var cellNumberI = Math.floor((pointerX - this.cellSize + this.cellOffset.x) / this.cellSize);\n        var cellNumberJ = Math.floor((pointerY - this.cellSize + this.cellOffset.y) / this.cellSize);\n        if (pointerX < this.cellSize && pointerY < this.cellSize) {\n            return {\n                type: 'border',\n                axis: 'origin',\n            };\n        }\n        else if (pointerX < this.cellSize) {\n            return {\n                type: 'border',\n                axis: 'y',\n                number: cellNumberJ + this.startCell.j,\n            };\n        }\n        else if (pointerY < this.cellSize) {\n            return {\n                type: 'border',\n                axis: 'x',\n                number: cellNumberI + this.startCell.i,\n            };\n        }\n        else {\n            return {\n                type: 'schema',\n                i: cellNumberI + this.startCell.i,\n                j: cellNumberJ + this.startCell.j,\n            };\n        }\n    };\n    Chunk.prototype.forEachCellI = function (callback) {\n        for (var i = this.startCell.i, x = this.cellSize - this.cellOffset.x; i < this.endCell.i; i++, x += this.cellSize) {\n            callback(i, x);\n        }\n    };\n    Chunk.prototype.forEachCellJ = function (callback) {\n        for (var j = this.startCell.j, y = this.cellSize - this.cellOffset.y; j < this.endCell.j; j++, y += this.cellSize) {\n            callback(j, y);\n        }\n    };\n    Chunk.prototype.forEachCell = function (callback) {\n        var _this = this;\n        this.forEachCellJ(function (cellNumberJ, y) {\n            _this.forEachCellI(function (cellNumberI, x) {\n                callback(cellNumberI, cellNumberJ, x, y, _this);\n            });\n        });\n    };\n    return Chunk;\n}());\n\nvar Renderer = /** @class */ (function () {\n    function Renderer() {\n    }\n    return Renderer;\n}());\n\nvar AttributeType;\n(function (AttributeType) {\n    AttributeType[AttributeType[\"Float\"] = 0] = \"Float\";\n    AttributeType[AttributeType[\"Vector2\"] = 1] = \"Vector2\";\n    AttributeType[AttributeType[\"Vector3\"] = 2] = \"Vector3\";\n    AttributeType[AttributeType[\"Vector4\"] = 3] = \"Vector4\";\n    AttributeType[AttributeType[\"Matrix3x3\"] = 4] = \"Matrix3x3\";\n})(AttributeType || (AttributeType = {}));\n\nvar Attribute = /** @class */ (function () {\n    function Attribute(gl, name, type, offset) {\n        this.name = name;\n        this.type = type;\n        this.offset = offset;\n        this.webglType = getWebGLType(gl, type);\n        this.size = getWebGLSize(type);\n        this.byteSize = getByteSize(type);\n    }\n    return Attribute;\n}());\nfunction getWebGLType(gl, type) {\n    switch (type) {\n        case AttributeType.Float:\n        case AttributeType.Vector2:\n        case AttributeType.Vector3:\n        case AttributeType.Vector4:\n        case AttributeType.Matrix3x3:\n            return gl.FLOAT;\n        default:\n            throw new Error('Undefined');\n    }\n}\nfunction getWebGLSize(type) {\n    switch (type) {\n        case AttributeType.Float:\n            return 1;\n        case AttributeType.Vector2:\n            return 2;\n        case AttributeType.Vector3:\n            return 3;\n        case AttributeType.Vector4:\n            return 4;\n        case AttributeType.Matrix3x3:\n            return 3;\n        default:\n            throw new Error('Undefined');\n    }\n}\nfunction getByteSize(type) {\n    switch (type) {\n        case AttributeType.Float:\n            return 4;\n        case AttributeType.Vector2:\n            return 8;\n        case AttributeType.Vector3:\n            return 12;\n        case AttributeType.Vector4:\n            return 16;\n        case AttributeType.Matrix3x3:\n            return 36;\n        default:\n            throw new Error('Undefined');\n    }\n}\n\nvar Attributes = /** @class */ (function () {\n    function Attributes(gl, attributes) {\n        this.stride = 0;\n        this.size = 0;\n        var offset = 0;\n        var storage = [];\n        for (var _i = 0, attributes_1 = attributes; _i < attributes_1.length; _i++) {\n            var _a = attributes_1[_i], name_1 = _a.name, type = _a.type;\n            var attribute = new Attribute(gl, name_1, type, offset);\n            this.size += attribute.size;\n            this.stride += attribute.byteSize;\n            storage.push(attribute);\n            offset += attribute.byteSize;\n        }\n        this.storage = Object.freeze(storage);\n    }\n    return Attributes;\n}());\n\nvar MAX_TEXTURE_WIDTH = 4096;\nvar MAX_TEXTURE_HEIGHT = 4096;\nvar FLOAT_BYTE_SIZE = 4;\nvar INDICES_PER_QUAD = 6;\nvar VERTICES_PER_QUAD = 4;\nvar WHITE_TEX_INDEX = 0;\nvar ATLAS_TEX_INDEX = 1;\nvar WEBGL1_MAX_QUADS = 3000;\nvar WEBGL2_MAX_QUADS = 5000;\n\nvar IndexBuffer = /** @class */ (function () {\n    /**\n     * @param {} indices Индексы вершин.\n     */\n    function IndexBuffer(gl, type, indices) {\n        this.gl = gl;\n        this.type = type;\n        this.id = gl.createBuffer();\n        if (this.id === null) {\n            throw new Error('cannot create buffer');\n        }\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.id);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n    }\n    IndexBuffer.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.id);\n    };\n    IndexBuffer.prototype.unbind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    };\n    IndexBuffer.prototype.destroy = function () {\n        this.gl.deleteBuffer(this.id);\n        this.id = null;\n    };\n    return IndexBuffer;\n}());\n\nvar RendererData = /** @class */ (function () {\n    function RendererData(gl, attributes, indices) {\n        this.gl = gl;\n        this.offset = 0;\n        this.quadIndex = 0;\n        if (indices.length === 0 || indices.length % INDICES_PER_QUAD !== 0) {\n            throw new Error('the number of indices must be a multiple of 6 and be greater than 0');\n        }\n        for (var i = 0, offset = 0; i < indices.length; i += 6, offset += 4) {\n            indices[i + 0] = offset + 0;\n            indices[i + 1] = offset + 1;\n            indices[i + 2] = offset + 2;\n            indices[i + 3] = offset + 0;\n            indices[i + 4] = offset + 3;\n            indices[i + 5] = offset + 2;\n        }\n        this.indexBuffer = this.createIndexBuffer(indices);\n        this.maxQuadCount = indices.length / INDICES_PER_QUAD;\n        var verticesCount = this.maxQuadCount * VERTICES_PER_QUAD;\n        this.vertices = new Float32Array(verticesCount * attributes.size);\n        this.vertexBuffer = this.createVertexBuffer(verticesCount, attributes);\n    }\n    RendererData.prototype.bind = function () {\n        this.vertexBuffer.bind();\n        this.indexBuffer.bind();\n    };\n    RendererData.prototype.isFull = function () {\n        return this.quadIndex >= this.maxQuadCount;\n    };\n    RendererData.prototype.flush = function () {\n        if (this.quadIndex === 0) {\n            return;\n        }\n        this.draw();\n        this.reset();\n    };\n    RendererData.prototype.draw = function () {\n        var gl = this.gl;\n        this.vertexBuffer.setData(this.vertices);\n        gl.drawElements(gl.TRIANGLES, this.quadIndex * INDICES_PER_QUAD, this.indexBuffer.type, 0);\n    };\n    RendererData.prototype.reset = function () {\n        this.quadIndex = 0;\n        this.offset = 0;\n    };\n    RendererData.prototype.setPosition = function (position) {\n        this.vertices[this.offset++] = position.x;\n        this.vertices[this.offset++] = position.y;\n    };\n    RendererData.prototype.setColor = function (color) {\n        this.vertices[this.offset++] = color.x;\n        this.vertices[this.offset++] = color.y;\n        this.vertices[this.offset++] = color.z;\n        this.vertices[this.offset++] = color.w;\n    };\n    RendererData.prototype.setTexIndex = function (index) {\n        this.vertices[this.offset++] = index;\n    };\n    RendererData.prototype.setTexCoords = function (texCoords) {\n        this.vertices[this.offset++] = texCoords.x;\n        this.vertices[this.offset++] = texCoords.y;\n    };\n    RendererData.prototype.addVertices = function (positions, color, texIndex, texCoords) {\n        if (this.isFull()) {\n            this.flush();\n        }\n        texIndex = texIndex !== null && texIndex !== void 0 ? texIndex : WHITE_TEX_INDEX;\n        texCoords = texCoords !== null && texCoords !== void 0 ? texCoords : [\n            new Vector2(0, 0),\n            new Vector2(0, 1),\n            new Vector2(1, 1),\n            new Vector2(1, 0),\n        ];\n        var normalizedColor = new Vector4(color.red, color.green, color.blue, color.alpha).multiply(1 / 255);\n        for (var i = 0; i < 4; i++) {\n            var position = positions[i];\n            var coords = texCoords[i];\n            this.setVertex(position, normalizedColor, texIndex, coords);\n        }\n        this.quadIndex++;\n    };\n    RendererData.prototype.destroy = function () {\n        this.vertexBuffer.destroy();\n        this.indexBuffer.destroy();\n    };\n    return RendererData;\n}());\n\nvar Shader = /** @class */ (function () {\n    function Shader(gl, name, vertexSource, fragmentSource) {\n        this.gl = gl;\n        var vertexShader = null;\n        var fragmentShader = null;\n        try {\n            vertexShader = createShader(name, gl, gl.VERTEX_SHADER, vertexSource);\n            fragmentShader = createShader(name, gl, gl.FRAGMENT_SHADER, fragmentSource);\n        }\n        catch (error) {\n            gl.deleteShader(vertexShader);\n            gl.deleteShader(fragmentShader);\n            throw error;\n        }\n        this.id = gl.createProgram();\n        if (!this.id) {\n            throw new Error('cannot create program');\n        }\n        gl.attachShader(this.id, vertexShader);\n        gl.attachShader(this.id, fragmentShader);\n        gl.linkProgram(this.id);\n        if (!gl.getProgramParameter(this.id, gl.LINK_STATUS)) {\n            var info = gl.getProgramInfoLog(this.id);\n            gl.deleteProgram(this.id);\n            gl.deleteShader(vertexShader);\n            gl.deleteShader(fragmentShader);\n            throw new ShaderError(name, \"Cannot link vertex and fragment shader. Info: \" + info);\n        }\n        gl.deleteShader(vertexShader);\n        gl.deleteShader(fragmentShader);\n    }\n    Shader.prototype.bind = function () {\n        this.gl.useProgram(this.id);\n    };\n    Shader.prototype.unbind = function () {\n        this.gl.useProgram(null);\n    };\n    Shader.prototype.setInt = function (name, x) {\n        if (!this.id) {\n            return;\n        }\n        var gl = this.gl;\n        var location = gl.getUniformLocation(this.id, name);\n        gl.uniform1i(location, x);\n    };\n    Shader.prototype.setIntArray = function (name, values) {\n        if (!this.id) {\n            return;\n        }\n        var gl = this.gl;\n        var location = gl.getUniformLocation(this.id, name);\n        gl.uniform1iv(location, values);\n    };\n    Shader.prototype.setFloat = function (name, x) {\n        if (!this.id) {\n            return;\n        }\n        var gl = this.gl;\n        var location = gl.getUniformLocation(this.id, name);\n        gl.uniform1f(location, x);\n    };\n    Shader.prototype.setFloat2 = function (name, x, y) {\n        if (!this.id) {\n            return;\n        }\n        var gl = this.gl;\n        var location = gl.getUniformLocation(this.id, name);\n        gl.uniform2f(location, x, y);\n    };\n    Shader.prototype.setFloat3 = function (name, x, y, z) {\n        if (!this.id) {\n            return;\n        }\n        var gl = this.gl;\n        var location = gl.getUniformLocation(this.id, name);\n        gl.uniform3f(location, x, y, z);\n    };\n    Shader.prototype.setFloat4 = function (name, x, y, z, w) {\n        if (!this.id) {\n            return;\n        }\n        var gl = this.gl;\n        var location = gl.getUniformLocation(this.id, name);\n        gl.uniform4f(location, x, y, z, w);\n    };\n    Shader.prototype.setMatrix3x3 = function (name, matrix) {\n        if (!this.id) {\n            return;\n        }\n        var gl = this.gl;\n        var location = gl.getUniformLocation(this.id, name);\n        gl.uniformMatrix3fv(location, false, matrix);\n    };\n    Shader.prototype.destroy = function () {\n        this.gl.deleteProgram(this.id);\n        this.id = null;\n    };\n    return Shader;\n}());\nvar createShader = function (name, gl, type, source) {\n    var shader = gl.createShader(type);\n    if (!shader) {\n        throw new ShaderError(name, 'Cannot create shader');\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        var info = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        if (info === null) {\n            throw new ShaderError(name, 'Unknown error');\n        }\n        else {\n            throw new ShaderError(name, info);\n        }\n    }\n    return shader;\n};\nvar ShaderError = /** @class */ (function (_super) {\n    __extends(ShaderError, _super);\n    function ShaderError(shaderName, message) {\n        var _this = _super.call(this, \"Shader: \\\"\" + shaderName + \"\\\". \" + message) || this;\n        _this.shaderName = shaderName;\n        _this.name = 'ShaderError';\n        return _this;\n    }\n    return ShaderError;\n}(Error));\n\nvar Texture = /** @class */ (function () {\n    function Texture(gl, source) {\n        this.gl = gl;\n        if (source.width > MAX_TEXTURE_WIDTH) {\n            throw new RangeError(\"source width must be less or equal than \" + MAX_TEXTURE_WIDTH);\n        }\n        if (source.height > MAX_TEXTURE_HEIGHT) {\n            throw new RangeError(\"source height must be less or equal than \" + MAX_TEXTURE_HEIGHT);\n        }\n        this.width = source.width;\n        this.height = source.height;\n        this.id = gl.createTexture();\n        if (this.id === null) {\n            throw new Error('cannot create texture');\n        }\n        gl.bindTexture(gl.TEXTURE_2D, this.id);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\n    }\n    Texture.prototype.bind = function (slot) {\n        var gl = this.gl;\n        gl.activeTexture(gl.TEXTURE0 + slot);\n        gl.bindTexture(gl.TEXTURE_2D, this.id);\n    };\n    Texture.prototype.unbind = function () {\n        var gl = this.gl;\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    };\n    Texture.prototype.destroy = function () {\n        this.gl.deleteTexture(this.id);\n        this.id = null;\n    };\n    return Texture;\n}());\n\nvar VertexBuffer = /** @class */ (function () {\n    function VertexBuffer(gl, size, attributes) {\n        this.gl = gl;\n        this.attributes = attributes;\n        this.id = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id);\n        gl.bufferData(gl.ARRAY_BUFFER, size * attributes.stride, gl.DYNAMIC_DRAW);\n    }\n    VertexBuffer.prototype.bind = function () {\n        if (this.id === null) {\n            return;\n        }\n        var gl = this.gl;\n        var program = gl.getParameter(gl.CURRENT_PROGRAM);\n        if (program == null) {\n            return;\n        }\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id);\n        for (var _i = 0, _a = this.attributes.storage; _i < _a.length; _i++) {\n            var attribute = _a[_i];\n            var location_1 = gl.getAttribLocation(program, attribute.name);\n            if (location_1 === -1) {\n                continue;\n            }\n            gl.enableVertexAttribArray(location_1);\n            switch (attribute.type) {\n                case AttributeType.Float:\n                case AttributeType.Vector2:\n                case AttributeType.Vector3:\n                case AttributeType.Vector4:\n                    gl.vertexAttribPointer(location_1, attribute.size, attribute.webglType, false, this.attributes.stride, attribute.offset);\n                    break;\n                case AttributeType.Matrix3x3:\n                    for (var j = 0; j < attribute.size; j++) {\n                        gl.vertexAttribPointer(location_1 + j, attribute.size, attribute.webglType, false, this.attributes.stride, attribute.offset + attribute.size * j * FLOAT_BYTE_SIZE);\n                    }\n                    break;\n            }\n        }\n    };\n    VertexBuffer.prototype.unbind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    };\n    VertexBuffer.prototype.destroy = function () {\n        this.gl.deleteBuffer(this.id);\n        this.id = null;\n    };\n    return VertexBuffer;\n}());\n\nvar Atlas = /** @class */ (function () {\n    function Atlas(gl, schemaInfo) {\n        this.symbolMap = {};\n        this.numberMap = {};\n        this.cellSize = schemaInfo.cellSize * window.devicePixelRatio;\n        var canvas = this.createCanvas(schemaInfo);\n        this.texture = new Texture(gl, canvas);\n        canvas.remove();\n    }\n    Atlas.prototype.createCanvas = function (schemaInfo) {\n        var canvas = document.createElement('canvas');\n        var _a = this.computeTextureSize(schemaInfo), width = _a.width, height = _a.height;\n        var context = canvas.getContext('2d');\n        if (!context) {\n            throw new Error('2d context not supported');\n        }\n        canvas.width = width;\n        canvas.height = height;\n        var fontSize = 15 * devicePixelRatio + \"px\";\n        var fontFamily = \"sans-serif\";\n        context.fillStyle = '#fff';\n        context.textAlign = 'center';\n        context.font = \"bold \" + fontSize + \" \" + fontFamily;\n        context.textBaseline = 'middle';\n        var numbersCount = Math.max(schemaInfo.width, schemaInfo.height);\n        for (var i = 0; i < numbersCount; i++) {\n            this.numberMap[i] = this.addText((i + 1).toString(), i, context);\n        }\n        context.textAlign = 'center';\n        context.font = fontSize + \" \" + fontFamily;\n        context.textBaseline = 'middle';\n        var symbolsCount = schemaInfo.symbols.length;\n        for (var i = 0; i < symbolsCount; i++) {\n            var symbol = schemaInfo.symbols[i];\n            this.symbolMap[symbol] = this.addText(symbol, i + numbersCount, context);\n        }\n        return canvas;\n    };\n    Atlas.prototype.computeTextureSize = function (schemaInfo) {\n        var numbersCount = Math.max(schemaInfo.width, schemaInfo.height);\n        var symbolsCount = schemaInfo.symbols.length;\n        var count = numbersCount + symbolsCount;\n        var countInRow = Math.floor(MAX_TEXTURE_WIDTH / this.cellSize);\n        var rowsCount = Math.ceil(count / countInRow);\n        return {\n            width: rowsCount > 1 ? MAX_TEXTURE_WIDTH : count * this.cellSize,\n            height: rowsCount * this.cellSize,\n        };\n    };\n    Atlas.prototype.addText = function (text, index, context) {\n        var cellSize = this.cellSize;\n        var countInRow = Math.floor(MAX_TEXTURE_WIDTH / cellSize);\n        var row = Math.floor(index / countInRow);\n        var column = index % countInRow;\n        var x = column * cellSize;\n        var y = row * cellSize;\n        context.fillText(text, x + cellSize / 2, y + cellSize / 2);\n        var _a = context.canvas, width = _a.width, height = _a.height;\n        return this.toTexCoords(new Vector2(x, y), width, height);\n    };\n    Atlas.prototype.getBorderNumberTexCoords = function (number) {\n        return this.numberMap[number];\n    };\n    Atlas.prototype.getSchemaSymbolTexCoords = function (symbol) {\n        return this.symbolMap[symbol];\n    };\n    Atlas.prototype.toTexCoords = function (_a, width, height) {\n        var x = _a.x, y = _a.y;\n        var cellSize = this.cellSize;\n        return [\n            new Vector2(x / width, (y + cellSize) / height),\n            new Vector2(x / width, y / height),\n            new Vector2((x + cellSize) / width, y / height),\n            new Vector2((x + cellSize) / width, (y + cellSize) / height), // RIGHT BOTTOm\n        ];\n    };\n    Atlas.prototype.bind = function (slot) {\n        this.texture.bind(slot);\n    };\n    Atlas.prototype.destroy = function () {\n        this.texture.destroy();\n    };\n    return Atlas;\n}());\n\nvar WebGLRenderer = /** @class */ (function (_super) {\n    __extends(WebGLRenderer, _super);\n    function WebGLRenderer(gl, schemaInfo, shader, data) {\n        var _this = _super.call(this) || this;\n        _this.gl = gl;\n        _this.schemaInfo = schemaInfo;\n        _this.shader = shader;\n        _this.data = data;\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n        _this.shader.bind();\n        _this.data.bind();\n        _this.whiteTexture = _this.createWhiteTexture();\n        _this.atlas = new Atlas(gl, schemaInfo);\n        _this.whiteTexture.bind(WHITE_TEX_INDEX);\n        _this.atlas.bind(ATLAS_TEX_INDEX);\n        return _this;\n    }\n    WebGLRenderer.prototype.createWhiteTexture = function () {\n        var imageData = new ImageData(1, 1);\n        imageData.data[0] = 255;\n        imageData.data[1] = 255;\n        imageData.data[2] = 255;\n        imageData.data[3] = 255;\n        return new Texture(this.gl, imageData);\n    };\n    WebGLRenderer.prototype.start = function () {\n        var gl = this.gl;\n        var _a = gl.canvas, width = _a.width, height = _a.height;\n        gl.viewport(0, 0, width, height);\n        gl.clearColor(255, 255, 255, 255);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        var matrix = this.getProjectionMatrix(width, height);\n        this.shader.setMatrix3x3('u_ProjectionMatrix', matrix);\n        this.shader.setIntArray('u_Textures', [WHITE_TEX_INDEX, ATLAS_TEX_INDEX]);\n    };\n    WebGLRenderer.prototype.getProjectionMatrix = function (width, height) {\n        var ratio = window.devicePixelRatio;\n        return [(2 / width) * ratio, 0, 0, 0, (-2 / height) * ratio, 0, -1, 1, 1];\n    };\n    WebGLRenderer.prototype.drawRect = function (x, y, width, height, color) {\n        var positions = this.computePositions(x, y, width, height);\n        var rgbaColor = this.transformColor(color);\n        this.data.addVertices(positions, rgbaColor);\n    };\n    WebGLRenderer.prototype.drawSchemaSymbol = function (symbol, x, y, color) {\n        var positions = this.computePositions(x, y);\n        var rgbaColor = this.transformColor(color);\n        var texCoords = this.atlas.getSchemaSymbolTexCoords(symbol);\n        this.data.addVertices(positions, rgbaColor, ATLAS_TEX_INDEX, texCoords);\n    };\n    WebGLRenderer.prototype.drawBorderNumber = function (number, x, y) {\n        var positions = this.computePositions(x, y);\n        var rgbaColor = new RGBAColor(0, 0, 0, 255);\n        var texCoords = this.atlas.getBorderNumberTexCoords(number);\n        this.data.addVertices(positions, rgbaColor, ATLAS_TEX_INDEX, texCoords);\n    };\n    WebGLRenderer.prototype.drawLine = function (x0, y0, x1, y1, options) {\n        var deltaX = x1 - x0;\n        var deltaY = y1 - y0;\n        if (deltaX !== 0 && deltaY !== 0) {\n            throw new Error('not supported');\n        }\n        var color = options.color, lineWidth = options.lineWidth;\n        var halfLineWidth = lineWidth / 2;\n        if (deltaX !== 0) {\n            this.drawRect(x0, y0 - halfLineWidth, deltaX, lineWidth, color);\n        }\n        else {\n            this.drawRect(x0 - halfLineWidth, y0, lineWidth, deltaY, color);\n        }\n    };\n    WebGLRenderer.prototype.transformColor = function (color) {\n        if (color instanceof RGBAColor) {\n            return color;\n        }\n        else {\n            return new RGBAColor(color.red, color.green, color.blue, 255);\n        }\n    };\n    WebGLRenderer.prototype.computePositions = function (x, y, width, height) {\n        width = width !== null && width !== void 0 ? width : this.schemaInfo.cellSize;\n        height = height !== null && height !== void 0 ? height : this.schemaInfo.cellSize;\n        return [\n            new Vector2(x, y + height),\n            new Vector2(x, y),\n            new Vector2(x + width, y),\n            new Vector2(x + width, y + height),\n        ];\n    };\n    WebGLRenderer.prototype.end = function () {\n        this.data.flush();\n    };\n    WebGLRenderer.prototype.destroy = function () {\n        this.atlas.destroy();\n        this.data.destroy();\n        this.whiteTexture.destroy();\n    };\n    return WebGLRenderer;\n}(Renderer));\n\nvar WebGL1IndexBuffer = /** @class */ (function (_super) {\n    __extends(WebGL1IndexBuffer, _super);\n    function WebGL1IndexBuffer(gl, indices) {\n        var _this = this;\n        var type;\n        if (indices instanceof Uint8Array) {\n            type = gl.UNSIGNED_BYTE;\n        }\n        else if (indices instanceof Uint16Array) {\n            type = gl.UNSIGNED_SHORT;\n        }\n        else {\n            throw new Error('Not supported');\n        }\n        _this = _super.call(this, gl, type, indices) || this;\n        return _this;\n    }\n    return WebGL1IndexBuffer;\n}(IndexBuffer));\n\nvar fragmentShaderSource$1 = \"precision mediump float;uniform sampler2D u_Textures[2];varying vec4 v_Color;varying float v_TexIndex;varying vec2 v_TexCoords;vec4 getTextureColor(float texIndex,vec2 texCoords){if(texIndex==0.0){return texture2D(u_Textures[0],texCoords);}else{return texture2D(u_Textures[1],texCoords);}}void main(){gl_FragColor=getTextureColor(v_TexIndex,v_TexCoords)*v_Color;}\";\n\nvar vertexShaderSource$1 = \"attribute vec2 a_Position;attribute vec4 a_Color;attribute float a_TexIndex;attribute vec2 a_TexCoords;uniform mat3 u_ProjectionMatrix;varying vec4 v_Color;varying float v_TexIndex;varying vec2 v_TexCoords;void main(){v_Color=a_Color;v_TexIndex=a_TexIndex;v_TexCoords=a_TexCoords;gl_Position=vec4(u_ProjectionMatrix*vec3(a_Position,1.0),1.0);}\";\n\nvar WebGL1VertexBuffer = /** @class */ (function (_super) {\n    __extends(WebGL1VertexBuffer, _super);\n    function WebGL1VertexBuffer(gl, size, attributes) {\n        return _super.call(this, gl, size, attributes) || this;\n    }\n    WebGL1VertexBuffer.prototype.setData = function (data) {\n        if (this.id === null) {\n            return;\n        }\n        var gl = this.gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id);\n        gl.bufferSubData(gl.ARRAY_BUFFER, 0, data);\n    };\n    return WebGL1VertexBuffer;\n}(VertexBuffer));\n\nvar WebGL1RendererData = /** @class */ (function (_super) {\n    __extends(WebGL1RendererData, _super);\n    function WebGL1RendererData(gl, maxQuadCount) {\n        var _this = this;\n        var attributes = new Attributes(gl, [\n            { name: 'a_Position', type: AttributeType.Vector2 },\n            { name: 'a_Color', type: AttributeType.Vector4 },\n            { name: 'a_TexIndex', type: AttributeType.Float },\n            { name: 'a_TexCoords', type: AttributeType.Vector2 },\n        ]);\n        var maxVerticesCount = maxQuadCount * VERTICES_PER_QUAD;\n        var maxIndicesCount = maxQuadCount * INDICES_PER_QUAD;\n        var indices = maxVerticesCount <= Math.pow(2, 8)\n            ? new Uint8Array(maxIndicesCount)\n            : new Uint16Array(maxIndicesCount);\n        _this = _super.call(this, gl, attributes, indices) || this;\n        return _this;\n    }\n    WebGL1RendererData.prototype.createIndexBuffer = function (indices) {\n        return new WebGL1IndexBuffer(this.gl, indices);\n    };\n    WebGL1RendererData.prototype.createVertexBuffer = function (verticesCount, attributes) {\n        return new WebGL1VertexBuffer(this.gl, verticesCount, attributes);\n    };\n    WebGL1RendererData.prototype.setData = function (data) {\n        this.vertexBuffer.setData(data);\n    };\n    WebGL1RendererData.prototype.setVertex = function (position, color, texIndex, texCoords) {\n        this.setPosition(position);\n        this.setColor(color);\n        this.setTexIndex(texIndex);\n        this.setTexCoords(texCoords);\n    };\n    return WebGL1RendererData;\n}(RendererData));\n\nvar WebGL1Renderer = /** @class */ (function (_super) {\n    __extends(WebGL1Renderer, _super);\n    function WebGL1Renderer(gl, schemaInfo) {\n        var _this = this;\n        var data = new WebGL1RendererData(gl, WEBGL1_MAX_QUADS);\n        var shader = new Shader(gl, 'WEBGL1_SHADER', vertexShaderSource$1, fragmentShaderSource$1);\n        _this = _super.call(this, gl, schemaInfo, shader, data) || this;\n        return _this;\n    }\n    return WebGL1Renderer;\n}(WebGLRenderer));\n\nvar WebGL2IndexBuffer = /** @class */ (function (_super) {\n    __extends(WebGL2IndexBuffer, _super);\n    function WebGL2IndexBuffer(gl, indices) {\n        var _this = this;\n        var type;\n        if (indices instanceof Uint8Array) {\n            type = gl.UNSIGNED_BYTE;\n        }\n        else if (indices instanceof Uint16Array) {\n            type = gl.UNSIGNED_SHORT;\n        }\n        else if (indices instanceof Uint32Array) {\n            type = gl.UNSIGNED_INT;\n        }\n        else {\n            throw new Error('Not supported');\n        }\n        _this = _super.call(this, gl, type, indices) || this;\n        return _this;\n    }\n    return WebGL2IndexBuffer;\n}(IndexBuffer));\n\nvar fragmentShaderSource = \"#version 300 es\\nprecision mediump float;uniform sampler2D u_Textures[2];in vec4 v_Color;in float v_TexIndex;in vec2 v_TexCoords;out vec4 color;vec4 getTextureColor(float texIndex,vec2 texCoords){if(texIndex==0.0){return texture(u_Textures[0],texCoords);}else{return texture(u_Textures[1],texCoords);}}void main(){color=getTextureColor(v_TexIndex,v_TexCoords)*v_Color;}\";\n\nvar vertexShaderSource = \"#version 300 es\\nin vec2 a_Position;in vec4 a_Color;in float a_TexIndex;in vec2 a_TexCoords;uniform mat3 u_ProjectionMatrix;out vec4 v_Color;out float v_TexIndex;out vec2 v_TexCoords;void main(){v_Color=a_Color;v_TexIndex=a_TexIndex;v_TexCoords=a_TexCoords;gl_Position=vec4(u_ProjectionMatrix*vec3(a_Position,1.0),1.0);}\";\n\nvar WebGL2VertexBuffer = /** @class */ (function (_super) {\n    __extends(WebGL2VertexBuffer, _super);\n    function WebGL2VertexBuffer(gl, size, attributes) {\n        return _super.call(this, gl, size, attributes) || this;\n    }\n    WebGL2VertexBuffer.prototype.setData = function (data, length) {\n        if (this.id === null) {\n            return;\n        }\n        var gl = this.gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.id);\n        gl.bufferSubData(gl.ARRAY_BUFFER, 0, data, 0, length);\n    };\n    return WebGL2VertexBuffer;\n}(VertexBuffer));\n\nvar WebGL2RendererData = /** @class */ (function (_super) {\n    __extends(WebGL2RendererData, _super);\n    function WebGL2RendererData(gl, maxQuadCount) {\n        var _this = this;\n        var attributes = new Attributes(gl, [\n            { name: 'a_Position', type: AttributeType.Vector2 },\n            { name: 'a_Color', type: AttributeType.Vector4 },\n            { name: 'a_TexIndex', type: AttributeType.Float },\n            { name: 'a_TexCoords', type: AttributeType.Vector2 },\n        ]);\n        var maxVerticesCount = maxQuadCount * VERTICES_PER_QUAD;\n        var maxIndicesCount = maxQuadCount * INDICES_PER_QUAD;\n        var indices = maxVerticesCount <= Math.pow(2, 8)\n            ? new Uint8Array(maxIndicesCount)\n            : maxVerticesCount <= Math.pow(2, 16)\n                ? new Uint16Array(maxIndicesCount)\n                : new Uint32Array(maxIndicesCount);\n        _this = _super.call(this, gl, attributes, indices) || this;\n        return _this;\n    }\n    WebGL2RendererData.prototype.createIndexBuffer = function (indices) {\n        return new WebGL2IndexBuffer(this.gl, indices);\n    };\n    WebGL2RendererData.prototype.createVertexBuffer = function (verticesCount, attributes) {\n        return new WebGL2VertexBuffer(this.gl, verticesCount, attributes);\n    };\n    WebGL2RendererData.prototype.setData = function (data) {\n        this.vertexBuffer.setData(data, this.quadIndex * VERTICES_PER_QUAD);\n    };\n    WebGL2RendererData.prototype.setVertex = function (position, color, texIndex, texCoords) {\n        this.setPosition(position);\n        this.setColor(color);\n        this.setTexIndex(texIndex);\n        this.setTexCoords(texCoords);\n    };\n    return WebGL2RendererData;\n}(RendererData));\n\nvar WebGL2Renderer = /** @class */ (function (_super) {\n    __extends(WebGL2Renderer, _super);\n    function WebGL2Renderer(gl, schemaInfo) {\n        var _this = this;\n        var data = new WebGL2RendererData(gl, WEBGL2_MAX_QUADS);\n        var shader = new Shader(gl, 'WEBGL2_SHADER', vertexShaderSource, fragmentShaderSource);\n        _this = _super.call(this, gl, schemaInfo, shader, data) || this;\n        return _this;\n    }\n    return WebGL2Renderer;\n}(WebGLRenderer));\n\nvar SchemaCanvas = /** @class */ (function (_super) {\n    __extends(SchemaCanvas, _super);\n    function SchemaCanvas(viewProvider, root) {\n        var _this = _super.call(this) || this;\n        _this.viewProvider = viewProvider;\n        _this.drawRequired = true;\n        _this._isDestroyed = false;\n        _this.onResize = function () {\n            _this.resize();\n        };\n        _this.onKeyDown = function (keyboardEvent) {\n            if (keyboardEvent.code === 'Period' && !keyboardEvent.repeat) {\n                _this.toggleTimeDisplay();\n            }\n        };\n        _this.onScroll = function () {\n            _this.drawRequired = true;\n        };\n        _this.pointerDownPosition = null;\n        _this.onPointerDown = function (pointerEvent) {\n            if (pointerEvent.isPrimary) {\n                _this.scrollArea.setPointerCapture(pointerEvent.pointerId);\n                _this.pointerDownPosition = _this.clientPositionToCanvas(pointerEvent.clientX, pointerEvent.clientY);\n            }\n        };\n        _this.onPointerMove = function (pointerEvent) {\n            if (!pointerEvent.isPrimary) {\n                return;\n            }\n            var position = _this.clientPositionToCanvas(pointerEvent.clientX, pointerEvent.clientY);\n            var chunk = _this.computeChunk();\n            var cell = chunk.getCellByCanvasPosition(position.x, position.y);\n            if (cell === null) {\n                return;\n            }\n            switch (cell.type) {\n                case 'border':\n                    _this.emit('borderCellPointerMove', { cell: cell, pointerEvent: pointerEvent }) ||\n                        _this.onBorderCellPointerMove(cell, pointerEvent);\n                    break;\n                case 'schema':\n                    _this.emit('schemaCellPointerMove', { cell: cell, pointerEvent: pointerEvent }) ||\n                        _this.onSchemaCellPointerMove(cell, pointerEvent);\n                    break;\n                default:\n                    throw new Error('Not implemented');\n            }\n        };\n        _this.onPointerUp = function (pointerEvent) {\n            if (_this.pointerDownPosition === null || !pointerEvent.isPrimary) {\n                return;\n            }\n            var chunk = _this.computeChunk();\n            var clickPosition = _this.clientPositionToCanvas(pointerEvent.clientX, pointerEvent.clientY);\n            var poinerDownCell = chunk.getCellByCanvasPosition(_this.pointerDownPosition.x, _this.pointerDownPosition.y);\n            var clickCell = chunk.getCellByCanvasPosition(clickPosition.x, clickPosition.y);\n            _this.pointerDownPosition = null;\n            if (poinerDownCell === null || clickCell === null) {\n                return;\n            }\n            if (cellsEquals(poinerDownCell, clickCell)) {\n                switch (clickCell.type) {\n                    case 'border':\n                        _this.emit('borderCellClick', { cell: clickCell, pointerEvent: pointerEvent }) ||\n                            _this.onBorderCellClick(clickCell, pointerEvent);\n                        break;\n                    case 'schema':\n                        _this.emit('schemaCellClick', { cell: clickCell, pointerEvent: pointerEvent }) ||\n                            _this.onSchemaCellClick(clickCell, pointerEvent);\n                        break;\n                    default:\n                        throw new Error('Not implemented');\n                }\n            }\n        };\n        _this.onPointerCancel = function (poinerEvent) {\n            if (poinerEvent.isPrimary) {\n                _this.pointerDownPosition = null;\n            }\n        };\n        _this.touchStarted = false;\n        _this.touchScrollPrevented = false;\n        _this.onTouchStart = function (touchEvent) {\n            if (_this.touchStarted) {\n                return;\n            }\n            _this.touchStarted = true;\n            _this.touchScrollPrevented = false;\n            var chunk = _this.computeChunk();\n            var position = _this.clientPositionToCanvas(touchEvent.touches[0].clientX, touchEvent.touches[0].clientY);\n            var cell = chunk.getCellByCanvasPosition(position.x, position.y);\n            if (cell === null) {\n                return;\n            }\n            switch (cell.type) {\n                case 'border':\n                    _this.emit('borderCellTouchStart', { cell: cell, touchEvent: touchEvent }) ||\n                        _this.onBorderCellTouchStart(cell, touchEvent);\n                    break;\n                case 'schema':\n                    _this.emit('schemaCellTouchStart', { cell: cell, touchEvent: touchEvent }) ||\n                        _this.onSchemaCellTouchStart(cell, touchEvent);\n                    break;\n                default:\n                    throw new Error('Not implemented');\n            }\n            if (touchEvent.defaultPrevented) {\n                _this.touchScrollPrevented = true;\n            }\n        };\n        _this.onTouchMove = function (touchEvent) {\n            if (_this.touchScrollPrevented) {\n                touchEvent.preventDefault();\n            }\n            else {\n                return;\n            }\n            var chunk = _this.computeChunk();\n            var position = _this.clientPositionToCanvas(touchEvent.touches[0].clientX, touchEvent.touches[0].clientY);\n            var cell = chunk.getCellByCanvasPosition(position.x, position.y);\n            if (cell === null) {\n                return;\n            }\n            switch (cell.type) {\n                case 'border':\n                    _this.emit('borderCellTouchMove', { cell: cell, touchEvent: touchEvent }) ||\n                        _this.onBorderCellTouchMove(cell, touchEvent);\n                    break;\n                case 'schema':\n                    _this.emit('schemaCellTouchMove', { cell: cell, touchEvent: touchEvent }) ||\n                        _this.onSchemaCellTouchMove(cell, touchEvent);\n                    break;\n                default:\n                    throw new Error('Not implemented');\n            }\n        };\n        _this.onTouchEnd = function (touchEvent) {\n            // Last touch end\n            if (touchEvent.touches.length === 0) {\n                _this.touchStarted = false;\n                _this.touchScrollPrevented = false;\n            }\n        };\n        var _a = _this.viewProvider.schema.metadata.canvasMetadata, width = _a.width, height = _a.height;\n        _this.cellsCount = new Vector2Int(width, height);\n        _this.canvas = _this.createCanvas();\n        _this.renderer = _this.createRenderer();\n        _this.scrollArea = _this.createScrollArea();\n        _this.timeDisplay = _this.createTimeDisplay();\n        root.innerHTML = '';\n        root.appendChild(_this.canvas);\n        root.appendChild(_this.scrollArea);\n        root.appendChild(_this.timeDisplay);\n        _this.resize();\n        _this.attach();\n        return _this;\n    }\n    Object.defineProperty(SchemaCanvas.prototype, \"isDestroyed\", {\n        get: function () {\n            return this._isDestroyed;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SchemaCanvas.prototype.createCanvas = function () {\n        var canvas = document.createElement('canvas');\n        canvas.style.position = 'absolute';\n        canvas.style.width = '100%';\n        canvas.style.height = '100%';\n        return canvas;\n    };\n    SchemaCanvas.prototype.createRenderer = function () {\n        var schemaInfo = {\n            cellSize: CELL_SIZE,\n            width: this.cellsCount.x,\n            height: this.cellsCount.y,\n            symbols: this.viewProvider.getSymbols(),\n        };\n        var webgl2 = this.canvas.getContext('webgl2');\n        if (webgl2) {\n            return new WebGL2Renderer(webgl2, schemaInfo);\n        }\n        var webgl = this.canvas.getContext('webgl');\n        if (webgl) {\n            return new WebGL1Renderer(webgl, schemaInfo);\n        }\n        throw new Error('webgl not supported');\n    };\n    SchemaCanvas.prototype.createTimeDisplay = function () {\n        var timeDisplay = document.createElement('div');\n        timeDisplay.style.position = 'absolute';\n        timeDisplay.style.top = '0';\n        timeDisplay.style.left = '0';\n        timeDisplay.style.width = '30px';\n        timeDisplay.style.height = '30px';\n        timeDisplay.style.display = 'none';\n        timeDisplay.style.justifyContent = 'center';\n        timeDisplay.style.alignItems = 'center';\n        return timeDisplay;\n    };\n    SchemaCanvas.prototype.createScrollArea = function () {\n        var scrollArea = document.createElement('div');\n        scrollArea.style.position = 'absolute';\n        scrollArea.style.width = '100%';\n        scrollArea.style.height = '100%';\n        scrollArea.style.zIndex = '10';\n        scrollArea.style.overflow = 'auto';\n        scrollArea.style.touchAction = 'pan-x pan-y';\n        var mock = document.createElement('div');\n        mock.style.width = CELL_SIZE * (this.cellsCount.x + 1) + \"px\";\n        mock.style.height = CELL_SIZE * (this.cellsCount.y + 1) + \"px\";\n        scrollArea.appendChild(mock);\n        return scrollArea;\n    };\n    SchemaCanvas.prototype.attach = function () {\n        var _this = this;\n        // Global\n        window.addEventListener('resize', this.onResize);\n        window.addEventListener('keydown', this.onKeyDown);\n        window.requestAnimationFrame(function () {\n            _this.drawLoop();\n        });\n        // Local\n        this.scrollArea.addEventListener('scroll', this.onScroll);\n        this.scrollArea.addEventListener('pointerdown', this.onPointerDown);\n        this.scrollArea.addEventListener('pointermove', this.onPointerMove);\n        this.scrollArea.addEventListener('pointerup', this.onPointerUp);\n        this.scrollArea.addEventListener('pointercancel', this.onPointerCancel);\n        this.scrollArea.addEventListener('touchstart', this.onTouchStart);\n        this.scrollArea.addEventListener('touchmove', this.onTouchMove);\n        this.scrollArea.addEventListener('touchend', this.onTouchEnd);\n    };\n    SchemaCanvas.prototype.detach = function () {\n        // Global only\n        window.removeEventListener('resize', this.onResize);\n        window.removeEventListener('keydown', this.onKeyDown);\n    };\n    SchemaCanvas.prototype.resize = function () {\n        var canvas = this.canvas;\n        canvas.style.width = this.scrollArea.clientWidth + \"px\";\n        canvas.style.height = this.scrollArea.clientHeight + \"px\";\n        var rect = canvas.getBoundingClientRect();\n        var width = Math.round(rect.width * window.devicePixelRatio);\n        var height = Math.round(rect.height * window.devicePixelRatio);\n        canvas.width = width;\n        canvas.height = height;\n        this.drawRequired = true;\n    };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onBorderCellClick = function (_cell, _pointerEvent) { };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onSchemaCellClick = function (_cell, _pointerEvent) { };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onBorderCellPointerMove = function (_cell, _pointerEvent) { };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onSchemaCellPointerMove = function (_cell, _pointerEvent) { };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onBorderCellTouchStart = function (_cell, _touchEvent) { };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onSchemaCellTouchStart = function (_cell, _touchEvent) { };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onBorderCellTouchMove = function (_cell, _touchEvent) { };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onSchemaCellTouchMove = function (_cell, _touchEvent) { };\n    SchemaCanvas.prototype.clientPositionToCanvas = function (x, y) {\n        var rect = this.scrollArea.getBoundingClientRect();\n        return new Vector2(x - rect.x, y - rect.y);\n    };\n    SchemaCanvas.prototype.toggleTimeDisplay = function () {\n        if (this.timeDisplay.style.display === 'none') {\n            this.timeDisplay.style.display = 'flex';\n        }\n        else {\n            this.timeDisplay.style.display = 'none';\n        }\n    };\n    SchemaCanvas.prototype.scrollToCell = function (cell, options) {\n        var x;\n        var y;\n        if (cell.type === 'border') {\n            x = cell.axis === 'x' ? cell.number * CELL_SIZE : 0;\n            y = cell.axis === 'y' ? cell.number * CELL_SIZE : 0;\n        }\n        else {\n            x = cell.i * CELL_SIZE;\n            y = cell.j * CELL_SIZE;\n        }\n        var scrollArea = this.scrollArea;\n        var offset = new Vector2(options && options.center ? -(scrollArea.clientWidth / 2 - CELL_SIZE) : 0, options && options.center ? -(scrollArea.clientHeight / 2 - CELL_SIZE) : 0);\n        scrollArea.scroll({\n            left: x + offset.x,\n            top: y + offset.y,\n            behavior: 'smooth',\n        });\n    };\n    SchemaCanvas.prototype.requireRedraw = function () {\n        this.drawRequired = true;\n    };\n    SchemaCanvas.prototype.drawLoop = function () {\n        var _this = this;\n        if (this.isDestroyed) {\n            return;\n        }\n        if (this.drawRequired) {\n            this.drawRequired = false;\n            this.draw();\n        }\n        window.requestAnimationFrame(function () {\n            _this.drawLoop();\n        });\n    };\n    SchemaCanvas.prototype.draw = function () {\n        var time = performance.now();\n        var chunk = this.computeChunk();\n        this.renderer.start();\n        this.preRender(chunk);\n        this.drawCells(chunk);\n        this.drawScale(chunk);\n        this.drawGrid(chunk);\n        this.postRender(chunk);\n        this.renderer.end();\n        this.emit('redraw', chunk) || this.onRedraw(chunk);\n        var delta = Math.round(performance.now() - time);\n        this.timeDisplay.innerText = delta.toString();\n    };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.preRender = function (_chunk) { };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.postRender = function (_chunk) { };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onRedraw = function (_chunk) { };\n    SchemaCanvas.prototype.drawCells = function (chunk) {\n        chunk.forEachCell(this.drawCell.bind(this));\n    };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.drawCell = function (i, j, x, y, chunk) {\n        var cell = this.viewProvider.getCell(i, j);\n        if (cell === null) {\n            return;\n        }\n        var rectColor = RGBAColor.fromHex(cell.color.hex);\n        this.renderer.drawRect(x, y, chunk.cellSize, chunk.cellSize, rectColor);\n        var symbolColor = RGBAColor.fromHex(cell.symbolColor);\n        this.renderer.drawSchemaSymbol(cell.symbol, x, y, symbolColor);\n    };\n    SchemaCanvas.prototype.drawScale = function (chunk) {\n        var _this = this;\n        var whiteColor = new RGBAColor(255, 255, 255, 255);\n        this.renderer.drawRect(0, 0, chunk.width, chunk.cellSize, whiteColor);\n        this.renderer.drawRect(0, 0, chunk.cellSize, chunk.height, whiteColor);\n        chunk.forEachCellI(function (i, x) {\n            _this.renderer.drawBorderNumber(i, x, 0);\n        });\n        chunk.forEachCellJ(function (j, y) {\n            _this.renderer.drawBorderNumber(j, 0, y);\n        });\n    };\n    SchemaCanvas.prototype.drawGrid = function (chunk) {\n        var _this = this;\n        var whiteColor = new RGBAColor(255, 255, 255, 255);\n        this.renderer.drawRect(0, 0, chunk.cellSize, chunk.cellSize, whiteColor);\n        var color = new RGBAColor(0, 0, 0, 255);\n        var lineWidth = 2.5;\n        this.renderer.drawLine(chunk.cellSize, 0, chunk.cellSize, chunk.height, {\n            lineWidth: lineWidth,\n            color: color,\n        });\n        this.renderer.drawLine(0, chunk.cellSize, chunk.width, chunk.cellSize, {\n            lineWidth: lineWidth,\n            color: color,\n        });\n        color = new RGBAColor(50, 50, 50, 255);\n        lineWidth = 1;\n        chunk.forEachCellI(function (i, x) {\n            if ((i + 1) % 9 !== 0) {\n                x += chunk.cellSize;\n                _this.renderer.drawLine(x, 0, x, chunk.height, {\n                    lineWidth: lineWidth,\n                    color: color,\n                });\n            }\n        });\n        chunk.forEachCellJ(function (j, y) {\n            if ((j + 1) % 9 !== 0) {\n                y += chunk.cellSize;\n                _this.renderer.drawLine(0, y, chunk.width, y, {\n                    lineWidth: lineWidth,\n                    color: color,\n                });\n            }\n        });\n        lineWidth = 2;\n        chunk.forEachCellI(function (i, x) {\n            if ((i + 1) % 9 === 0) {\n                x += chunk.cellSize;\n                _this.renderer.drawLine(x, 0, x, chunk.height, {\n                    lineWidth: lineWidth,\n                    color: color,\n                });\n            }\n        });\n        chunk.forEachCellJ(function (j, y) {\n            if ((j + 1) % 9 === 0) {\n                y += chunk.cellSize;\n                _this.renderer.drawLine(0, y, chunk.width, y, {\n                    lineWidth: lineWidth,\n                    color: color,\n                });\n            }\n        });\n    };\n    SchemaCanvas.prototype.computeChunk = function () {\n        var canvas = this.canvas;\n        var offset = this.getOffset();\n        var canvasSize = new Vector2(canvas.width, canvas.height);\n        return new Chunk(CELL_SIZE, this.cellsCount, canvasSize, offset);\n    };\n    SchemaCanvas.prototype.getOffset = function () {\n        var clamp = function (x, min, max) {\n            return x < min ? min : x > max ? max : x;\n        };\n        var x = clamp(this.scrollArea.scrollLeft, 0, this.scrollArea.scrollWidth - this.scrollArea.clientWidth);\n        var y = clamp(this.scrollArea.scrollTop, 0, this.scrollArea.scrollHeight - this.scrollArea.clientHeight);\n        return new Vector2(x, y);\n    };\n    SchemaCanvas.prototype.destroy = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this._isDestroyed = true;\n        this.detach();\n        this.canvas.remove();\n        this.scrollArea.remove();\n        this.renderer.destroy();\n        this.emit('destroy', {}) || this.onDestroy();\n    };\n    /**\n     * @returns `true` if you need to stop the propagation\n     */\n    SchemaCanvas.prototype.onDestroy = function () { };\n    return SchemaCanvas;\n}(EventEmitter));\n\nvar AnimatedSchemaCanvas = /** @class */ (function (_super) {\n    __extends(AnimatedSchemaCanvas, _super);\n    function AnimatedSchemaCanvas() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.animations = [];\n        _this.context = {\n            renderer: _this.renderer,\n            requireRedraw: _this.requireRedraw.bind(_this),\n            viewProvider: _this.viewProvider,\n        };\n        return _this;\n    }\n    AnimatedSchemaCanvas.prototype.drawCell = function (i, j, x, y, chunk) {\n        var animationIndex = this.animations.findIndex(function (_a) {\n            var cellPredicate = _a.cellPredicate;\n            return cellPredicate && cellPredicate(i, j);\n        });\n        if (animationIndex !== -1) {\n            var animation = this.animations[animationIndex];\n            if (animation.finished) {\n                this.animations.splice(animationIndex, 1);\n            }\n            else {\n                animation.draw(i, j, x, y, chunk, this.context);\n                // Stop propagation\n                return true;\n            }\n        }\n    };\n    AnimatedSchemaCanvas.prototype.postRender = function (chunk) {\n        var _this = this;\n        var animations = __spreadArray([], this.animations, true);\n        animations.forEach(function (animation, index) {\n            if (animation.finished) {\n                _this.animations.splice(index, 1);\n            }\n            else {\n                animation.postRender(chunk, _this.context);\n            }\n        });\n    };\n    AnimatedSchemaCanvas.prototype.startAnimation = function (animation) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        this.animations.unshift(new (animation.bind.apply(animation, __spreadArray([void 0, this.context], args, false)))());\n    };\n    AnimatedSchemaCanvas.prototype.stopAnimation = function (animation) {\n        this.animations = this.animations.filter(function (value) {\n            return !(value instanceof animation);\n        });\n    };\n    return AnimatedSchemaCanvas;\n}(SchemaCanvas));\n\nvar CELL_BACKGROUND_COLOR = new RGBAColor(255, 255, 255, 255);\nvar CELL_FOREGROUND_COLOR = new RGBAColor(0, 0, 0, 255);\nvar SELECTED_CELL_BACKGROUND_COLOR = new RGBAColor(210, 210, 210, 255);\n\nvar CellTransition = /** @class */ (function (_super) {\n    __extends(CellTransition, _super);\n    function CellTransition(context, options) {\n        var _this = this;\n        var duration = 150;\n        var renderer = context.renderer, viewProvider = context.viewProvider;\n        var cell = viewProvider.getCell(options.i, options.j);\n        if (!cell) {\n            _this = _super.call(this, context) || this;\n            return;\n        }\n        var colorCurve = new BezierCurveRGBA([\n            options.fromColor,\n            options.toColor,\n        ]);\n        var symbol = cell.symbol;\n        var transparent = new RGBAColor(0, 0, 0, 0);\n        var symbolColor = CELL_FOREGROUND_COLOR;\n        var symbolColorFrom = options.mode === 'embroider' ? symbolColor : transparent;\n        var symbolColorTo = options.mode === 'embroider' ? transparent : symbolColor;\n        var symbolColorCurve = new BezierCurveRGBA([\n            symbolColorFrom,\n            symbolColorTo,\n        ]);\n        _this = _super.call(this, context, {\n            duration: duration,\n            draw: function (x, y, _a) {\n                var time = _a.time, chunk = _a.chunk;\n                var color = colorCurve.evaluate(time / duration);\n                renderer.drawRect(x, y, chunk.cellSize, chunk.cellSize, color);\n                var symbolColor = symbolColorCurve.evaluate(time / duration);\n                renderer.drawSchemaSymbol(symbol, x, y, symbolColor);\n            },\n            cellPredicate: function (i, j) {\n                if (i !== options.i || j !== options.j) {\n                    return false;\n                }\n                var cell = viewProvider.getCell(i, j);\n                if (cell) {\n                    var mode = options.mode;\n                    return ((cell.embroidered && mode === 'embroider') ||\n                        (!cell.embroidered && mode === 'erase'));\n                }\n                else {\n                    return false;\n                }\n            },\n        }) || this;\n        return _this;\n    }\n    return CellTransition;\n}(ContinuousAnimation));\n\nvar ColorSelection = /** @class */ (function (_super) {\n    __extends(ColorSelection, _super);\n    function ColorSelection(context, options) {\n        var _this = this;\n        var duration = 250;\n        var from = options.mode === 'in'\n            ? CELL_BACKGROUND_COLOR\n            : SELECTED_CELL_BACKGROUND_COLOR;\n        var to = options.mode === 'in'\n            ? SELECTED_CELL_BACKGROUND_COLOR\n            : CELL_BACKGROUND_COLOR;\n        var curve = new BezierCurveRGBA([from, to]);\n        var renderer = context.renderer, viewProvider = context.viewProvider;\n        var symbolColor = CELL_FOREGROUND_COLOR;\n        _this = _super.call(this, context, {\n            duration: duration,\n            draw: function (x, y, _a) {\n                var i = _a.i, j = _a.j, time = _a.time, chunk = _a.chunk;\n                var cell = viewProvider.getCell(i, j);\n                if (cell) {\n                    var color = curve.evaluate(time / duration);\n                    renderer.drawRect(x, y, chunk.cellSize, chunk.cellSize, color);\n                    var symbol = cell.symbol;\n                    renderer.drawSchemaSymbol(symbol, x, y, symbolColor);\n                }\n            },\n            cellPredicate: function (i, j) {\n                var cell = viewProvider.getCell(i, j);\n                return !!cell && !cell.embroidered && cell.color.code === options.code;\n            },\n        }) || this;\n        return _this;\n    }\n    return ColorSelection;\n}(ContinuousAnimation));\n\nvar MOUSE_LEFT_BUTTON = 1;\nvar WorkCanvas = /** @class */ (function (_super) {\n    __extends(WorkCanvas, _super);\n    function WorkCanvas() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.eraseMode = false;\n        return _this;\n    }\n    WorkCanvas.prototype.drawCell = function (i, j, x, y, chunk) {\n        var prevented = _super.prototype.drawCell.call(this, i, j, x, y, chunk);\n        if (prevented) {\n            return true;\n        }\n        var cell = this.viewProvider.getCell(i, j);\n        if (cell) {\n            if (cell.embroidered) {\n                var color = RGBAColor.fromHex(cell.color.hex);\n                this.renderer.drawRect(x, y, chunk.cellSize, chunk.cellSize, color);\n            }\n            else {\n                var color = new RGBAColor(0, 0, 0, 255);\n                if (cell.color.code === this.penColorCode) {\n                    var backgroundColor = new RGBAColor(210, 210, 210, 255);\n                    this.renderer.drawRect(x, y, chunk.cellSize, chunk.cellSize, backgroundColor);\n                }\n                this.renderer.drawSchemaSymbol(cell.symbol, x, y, color);\n            }\n        }\n    };\n    WorkCanvas.prototype.setIsEraseMode = function (value) {\n        this.eraseMode = value;\n        this.requireRedraw();\n    };\n    WorkCanvas.prototype.setPenColorCode = function (code) {\n        if (this.penColorCode === code) {\n            return;\n        }\n        if (this.penColorCode) {\n            this.stopAnimation(ColorSelection);\n            this.startAnimation(ColorSelection, {\n                mode: 'out',\n                code: this.penColorCode,\n            });\n        }\n        this.penColorCode = code;\n        this.requireRedraw();\n        if (code) {\n            this.startAnimation(ColorSelection, {\n                mode: 'in',\n                code: code,\n            });\n        }\n    };\n    WorkCanvas.prototype.scrollToNotEmbroidered = function (colorCode) {\n        var _a = this.viewProvider.schema.metadata.canvasMetadata, width = _a.width, height = _a.height;\n        for (var j = 0; j < height; j++) {\n            for (var i = 0; i < width; i++) {\n                var cell = this.viewProvider.getCell(i, j);\n                if (cell && cell.color.code === colorCode && !cell.embroidered) {\n                    this.scrollToCell({ i: i, j: j, type: 'schema' }, {\n                        center: true,\n                    });\n                    return;\n                }\n            }\n        }\n    };\n    WorkCanvas.prototype.onSchemaCellClick = function (cell) {\n        this.processCell(cell);\n    };\n    WorkCanvas.prototype.onSchemaCellPointerMove = function (cell, event) {\n        if (event.buttons === MOUSE_LEFT_BUTTON) {\n            this.processCell(cell);\n        }\n    };\n    WorkCanvas.prototype.onSchemaCellTouchStart = function (cell, event) {\n        var processed = this.processCell(cell);\n        if (processed) {\n            event.preventDefault();\n        }\n    };\n    WorkCanvas.prototype.onSchemaCellTouchMove = function (cell) {\n        this.processCell(cell);\n    };\n    WorkCanvas.prototype.processCell = function (cell) {\n        var i = cell.i, j = cell.j;\n        var schemaCell = this.viewProvider.getCell(i, j);\n        if (schemaCell === null) {\n            return false;\n        }\n        if (schemaCell.color.code !== this.penColorCode && !this.eraseMode) {\n            return false;\n        }\n        if (schemaCell.embroidered && this.eraseMode) {\n            this.eraseCell(i, j, schemaCell.color);\n            return true;\n        }\n        else if (!schemaCell.embroidered && !this.eraseMode) {\n            this.embroiderСell(i, j, schemaCell.color);\n            return true;\n        }\n        return false;\n    };\n    WorkCanvas.prototype.eraseCell = function (i, j, color) {\n        this.viewProvider.eraseCell(i, j);\n        this.requireRedraw();\n        this.startAnimation(CellTransition, {\n            i: i,\n            j: j,\n            mode: 'erase',\n            fromColor: RGBAColor.fromHex(color.hex),\n            toColor: color.code === this.penColorCode\n                ? SELECTED_CELL_BACKGROUND_COLOR\n                : CELL_BACKGROUND_COLOR,\n        });\n        this.emit('cellErased', { i: i, j: j });\n    };\n    WorkCanvas.prototype.embroiderСell = function (i, j, color) {\n        this.viewProvider.embroiderСell(i, j);\n        this.requireRedraw();\n        this.startAnimation(CellTransition, {\n            i: i,\n            j: j,\n            mode: 'embroider',\n            fromColor: color.code === this.penColorCode\n                ? SELECTED_CELL_BACKGROUND_COLOR\n                : CELL_BACKGROUND_COLOR,\n            toColor: RGBAColor.fromHex(color.hex),\n        });\n        this.emit('cellEmbroidered', { i: i, j: j });\n    };\n    return WorkCanvas;\n}(AnimatedSchemaCanvas));\n\nvar ALPHABET = [\n    '0',\n    '1',\n    '2',\n    '3',\n    '4',\n    '5',\n    '6',\n    '7',\n    '8',\n    '9',\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n    'G',\n    'H',\n    'I',\n    'J',\n    'K',\n    'L',\n    'M',\n    'N',\n    'O',\n    'P',\n    'Q',\n    'R',\n    'S',\n    'T',\n    'U',\n    'V',\n    'W',\n    'X',\n    'Y',\n    'Z',\n];\nvar SchemaViewProvider = /** @class */ (function () {\n    function SchemaViewProvider(schema) {\n        this.schema = schema;\n        this.colorMap = [];\n        var length = schema.palette.colors.length;\n        for (var i = 0; i < length; i++) {\n            var symbol = SchemaViewProvider.generateSymbol(i);\n            var symbolColor = getContrastColor(schema.palette.colors[i].hex);\n            this.colorMap.push({\n                symbol: symbol,\n                symbolColor: symbolColor,\n            });\n        }\n    }\n    SchemaViewProvider.prototype.getCell = function (i, j) {\n        var cellIndex = this.getCellIndex(i, j);\n        var colorIndex = this.schema.grid[cellIndex];\n        if (colorIndex === null) {\n            return null;\n        }\n        else {\n            return __assign({ color: this.schema.palette.colors[colorIndex] }, this.colorMap[colorIndex]);\n        }\n    };\n    SchemaViewProvider.prototype.getColorSymbol = function (code) {\n        var index = this.schema.palette.colors.findIndex(function (color) { return color.code === code; });\n        if (index === -1) {\n            return undefined;\n        }\n        else {\n            return this.colorMap[index].symbol;\n        }\n    };\n    SchemaViewProvider.prototype.getSymbols = function () {\n        return this.colorMap.map(function (_a) {\n            var symbol = _a.symbol;\n            return symbol;\n        });\n    };\n    SchemaViewProvider.prototype.getCellIndex = function (i, j) {\n        var width = this.schema.metadata.canvasMetadata.width;\n        return j * width + i;\n    };\n    SchemaViewProvider.generateSymbol = function (index) {\n        if (!Number.isInteger(index)) {\n            throw new TypeError('Integer expected');\n        }\n        index += 1;\n        var base = ALPHABET.length;\n        var result = '';\n        while (index >= base) {\n            result += ALPHABET[index % base];\n            index = Math.floor(index / base);\n        }\n        result += ALPHABET[index];\n        return result.split('').reverse().join('');\n    };\n    return SchemaViewProvider;\n}());\n\nvar WorkViewProvider = /** @class */ (function (_super) {\n    __extends(WorkViewProvider, _super);\n    function WorkViewProvider(work) {\n        var _this = _super.call(this, work.schema) || this;\n        _this.work = work;\n        _this.colorStatistics = {};\n        var length = work.schema.palette.colors.length;\n        for (var i = 0; i < length; i++) {\n            var color = work.schema.palette.colors[i];\n            _this.colorStatistics[color.code] = {\n                cellsCount: 0,\n                embroideredCellsCount: 0,\n            };\n        }\n        var _a = work.schema.metadata.canvasMetadata, width = _a.width, height = _a.height;\n        for (var j = 0; j < height; j++) {\n            for (var i = 0; i < width; i++) {\n                var cell = _this.getCell(i, j);\n                if (cell) {\n                    var statistics = _this.colorStatistics[cell.color.code];\n                    statistics.cellsCount++;\n                    if (cell.embroidered) {\n                        statistics.embroideredCellsCount++;\n                    }\n                }\n            }\n        }\n        return _this;\n    }\n    WorkViewProvider.prototype.embroiderСell = function (i, j) {\n        var cell = this.getCell(i, j);\n        var cellIndex = this.getCellIndex(i, j);\n        if (cell && this.work.embroidered[cellIndex] === false) {\n            this.work.embroidered[cellIndex] = true;\n            this.work.metadata.stitchEmbroideredCount++;\n            var statistics = this.colorStatistics[cell.color.code];\n            statistics.embroideredCellsCount++;\n        }\n    };\n    WorkViewProvider.prototype.eraseCell = function (i, j) {\n        var cell = this.getCell(i, j);\n        var cellIndex = this.getCellIndex(i, j);\n        if (cell && this.work.embroidered[cellIndex] === true) {\n            this.work.embroidered[cellIndex] = false;\n            this.work.metadata.stitchEmbroideredCount--;\n            var statistics = this.colorStatistics[cell.color.code];\n            statistics.embroideredCellsCount--;\n        }\n    };\n    WorkViewProvider.prototype.getColorStatistics = function (code) {\n        var statistics = this.colorStatistics[code];\n        if (statistics) {\n            return __assign({}, statistics);\n        }\n        else {\n            throw new Error('No color');\n        }\n    };\n    WorkViewProvider.prototype.getCell = function (i, j) {\n        var cell = _super.prototype.getCell.call(this, i, j);\n        if (cell) {\n            var cellIndex = this.getCellIndex(i, j);\n            var embroidered = this.work.embroidered[cellIndex];\n            return __assign(__assign({}, cell), { embroidered: embroidered });\n        }\n        else {\n            return null;\n        }\n    };\n    return WorkViewProvider;\n}(SchemaViewProvider));\n\nvar anchor = {\n    name: 'Anchor',\n    colors: [\n        { code: '2', hex: '#faf9f5' },\n        { code: '6', hex: '#fdbca1' },\n        { code: '9', hex: '#fbccb8' },\n        { code: '10', hex: '#e6876c' },\n        { code: '11', hex: '#e46647' },\n        { code: '13', hex: '#c24731' },\n        { code: '18', hex: '#44684e' },\n        { code: '19', hex: '#aa102e' },\n        { code: '23', hex: '#e9c4c9' },\n        { code: '25', hex: '#fcb1ba' },\n        { code: '26', hex: '#f999a5' },\n        { code: '28', hex: '#d55d63' },\n        { code: '31', hex: '#fcbbc1' },\n        { code: '33', hex: '#ff988e' },\n        { code: '35', hex: '#f65d5b' },\n        { code: '36', hex: '#f7b4b7' },\n        { code: '40', hex: '#ff7a90' },\n        { code: '41', hex: '#fc6a84' },\n        { code: '42', hex: '#b73745' },\n        { code: '44', hex: '#4e1622' },\n        { code: '45', hex: '#5f1f2c' },\n        { code: '46', hex: '#d82e26' },\n        { code: '47', hex: '#ce1f32' },\n        { code: '48', hex: '#f9d6dd' },\n        { code: '50', hex: '#f0b7d2' },\n        { code: '55', hex: '#efa8ca' },\n        { code: '57', hex: '#ca0b51' },\n        { code: '59', hex: '#bf1c48' },\n        { code: '62', hex: '#f19ac2' },\n        { code: '63', hex: '#d1466c' },\n        { code: '65', hex: '#912644' },\n        { code: '66', hex: '#f1b3bf' },\n        { code: '68', hex: '#e6849a' },\n        { code: '72', hex: '#4c1a31' },\n        { code: '73', hex: '#fad0d5' },\n        { code: '74', hex: '#e5abaf' },\n        { code: '75', hex: '#df6877' },\n        { code: '76', hex: '#e56d7f' },\n        { code: '79', hex: '#c2596d' },\n        { code: '85', hex: '#e9b8d9' },\n        { code: '86', hex: '#c07ba3' },\n        { code: '87', hex: '#b34e8c' },\n        { code: '88', hex: '#9f2d6f' },\n        { code: '89', hex: '#832a58' },\n        { code: '90', hex: '#c1aec2' },\n        { code: '95', hex: '#dfc0db' },\n        { code: '97', hex: '#ae99b1' },\n        { code: '98', hex: '#a772a4' },\n        { code: '99', hex: '#7b3f6c' },\n        { code: '022', hex: '#702623' },\n        { code: '100', hex: '#723657' },\n        { code: '102', hex: '#541244' },\n        { code: '108', hex: '#ceb6e4' },\n        { code: '111', hex: '#9f65a4' },\n        { code: '117', hex: '#c1d4ec' },\n        { code: '118', hex: '#9389c1' },\n        { code: '119', hex: '#6c5086' },\n        { code: '120', hex: '#c8d2e6' },\n        { code: '122', hex: '#073563' },\n        { code: '129', hex: '#c6d3e1' },\n        { code: '130', hex: '#6c91c0' },\n        { code: '131', hex: '#445997' },\n        { code: '133', hex: '#181f66' },\n        { code: '134', hex: '#190f60' },\n        { code: '140', hex: '#9fbbd5' },\n        { code: '145', hex: '#6e8db5' },\n        { code: '146', hex: '#366390' },\n        { code: '147', hex: '#2c4180' },\n        { code: '148', hex: '#124477' },\n        { code: '150', hex: '#0c1225' },\n        { code: '152', hex: '#02101c' },\n        { code: '158', hex: '#d3e9e7' },\n        { code: '159', hex: '#b4d3e3' },\n        { code: '160', hex: '#cfe5f0' },\n        { code: '162', hex: '#166d92' },\n        { code: '164', hex: '#12557e' },\n        { code: '167', hex: '#7cbec6' },\n        { code: '168', hex: '#4fa1a9' },\n        { code: '169', hex: '#296e87' },\n        { code: '175', hex: '#8ea7c0' },\n        { code: '176', hex: '#94a8c9' },\n        { code: '177', hex: '#62669a' },\n        { code: '178', hex: '#161151' },\n        { code: '185', hex: '#9cd3cc' },\n        { code: '186', hex: '#8fd3d4' },\n        { code: '187', hex: '#56b69c' },\n        { code: '188', hex: '#009a7b' },\n        { code: '189', hex: '#08926f' },\n        { code: '204', hex: '#88c78d' },\n        { code: '205', hex: '#40a756' },\n        { code: '206', hex: '#d1e2d7' },\n        { code: '208', hex: '#a2ccaa' },\n        { code: '209', hex: '#58a96b' },\n        { code: '210', hex: '#4a805b' },\n        { code: '211', hex: '#007c3d' },\n        { code: '214', hex: '#91ab84' },\n        { code: '215', hex: '#76996c' },\n        { code: '216', hex: '#59896f' },\n        { code: '217', hex: '#496f5c' },\n        { code: '218', hex: '#043810' },\n        { code: '226', hex: '#3e9730' },\n        { code: '227', hex: '#007a3f' },\n        { code: '229', hex: '#008c4c' },\n        { code: '230', hex: '#00793b' },\n        { code: '231', hex: '#e3dcdb' },\n        { code: '232', hex: '#c5b6b4' },\n        { code: '233', hex: '#978e87' },\n        { code: '234', hex: '#e0dee0' },\n        { code: '235', hex: '#95909d' },\n        { code: '236', hex: '#2f3b36' },\n        { code: '238', hex: '#70b145' },\n        { code: '240', hex: '#b8cea6' },\n        { code: '241', hex: '#abd58b' },\n        { code: '242', hex: '#87a462' },\n        { code: '243', hex: '#88ab5c' },\n        { code: '244', hex: '#568357' },\n        { code: '246', hex: '#1f561f' },\n        { code: '254', hex: '#e3ee9f' },\n        { code: '255', hex: '#a9c33e' },\n        { code: '256', hex: '#82ae44' },\n        { code: '257', hex: '#759a3e' },\n        { code: '258', hex: '#4f6c33' },\n        { code: '259', hex: '#f3f6d4' },\n        { code: '260', hex: '#85905c' },\n        { code: '261', hex: '#bac28b' },\n        { code: '262', hex: '#72885f' },\n        { code: '263', hex: '#2e3d1a' },\n        { code: '265', hex: '#a8b144' },\n        { code: '266', hex: '#929937' },\n        { code: '267', hex: '#6a823d' },\n        { code: '268', hex: '#486131' },\n        { code: '271', hex: '#fbe2df' },\n        { code: '273', hex: '#646253' },\n        { code: '274', hex: '#e5eae9' },\n        { code: '275', hex: '#f5f0df' },\n        { code: '276', hex: '#e0d0b0' },\n        { code: '277', hex: '#957b2f' },\n        { code: '278', hex: '#d2d057' },\n        { code: '279', hex: '#d1c66d' },\n        { code: '280', hex: '#a6a036' },\n        { code: '281', hex: '#91852a' },\n        { code: '288', hex: '#2e9148' },\n        { code: '289', hex: '#fce740' },\n        { code: '292', hex: '#f9f287' },\n        { code: '293', hex: '#fdf09c' },\n        { code: '295', hex: '#f1d863' },\n        { code: '297', hex: '#ffe35f' },\n        { code: '298', hex: '#fbdf0d' },\n        { code: '300', hex: '#ffeda9' },\n        { code: '301', hex: '#ffe276' },\n        { code: '302', hex: '#ffda5a' },\n        { code: '303', hex: '#ffc33a' },\n        { code: '305', hex: '#e2b73a' },\n        { code: '306', hex: '#e8b539' },\n        { code: '308', hex: '#b38132' },\n        { code: '309', hex: '#ba8225' },\n        { code: '310', hex: '#936626' },\n        { code: '311', hex: '#f7ca84' },\n        { code: '314', hex: '#febc46' },\n        { code: '316', hex: '#fc7e0c' },\n        { code: '323', hex: '#faa463' },\n        { code: '326', hex: '#d45d28' },\n        { code: '328', hex: '#f78465' },\n        { code: '330', hex: '#ff781e' },\n        { code: '332', hex: '#e15729' },\n        { code: '335', hex: '#ea592c' },\n        { code: '340', hex: '#9b3b1b' },\n        { code: '341', hex: '#8c3b1a' },\n        { code: '342', hex: '#d0c8e4' },\n        { code: '343', hex: '#bbc8d6' },\n        { code: '351', hex: '#934d29' },\n        { code: '352', hex: '#825534' },\n        { code: '357', hex: '#945c2d' },\n        { code: '358', hex: '#775437' },\n        { code: '359', hex: '#7b5e26' },\n        { code: '360', hex: '#502f1b' },\n        { code: '361', hex: '#eed7a1' },\n        { code: '362', hex: '#e1c395' },\n        { code: '366', hex: '#e2d1b2' },\n        { code: '372', hex: '#e8d290' },\n        { code: '373', hex: '#af8846' },\n        { code: '375', hex: '#866226' },\n        { code: '376', hex: '#c9af93' },\n        { code: '379', hex: '#a4866c' },\n        { code: '381', hex: '#3b2811' },\n        { code: '382', hex: '#2d1705' },\n        { code: '386', hex: '#e7e5dd' },\n        { code: '388', hex: '#dcdcd7' },\n        { code: '390', hex: '#e2dfd3' },\n        { code: '391', hex: '#d6d3c1' },\n        { code: '392', hex: '#bab599' },\n        { code: '393', hex: '#978266' },\n        { code: '398', hex: '#ced0d5' },\n        { code: '399', hex: '#b7bbc7' },\n        { code: '400', hex: '#504f50' },\n        { code: '401', hex: '#323a39' },\n        { code: '410', hex: '#04acce' },\n        { code: '677', hex: '#9e887f' },\n        { code: '681', hex: '#6d6f42' },\n        { code: '778', hex: '#f6e1d0' },\n        { code: '802', hex: '#fff276' },\n        { code: '806', hex: '#7d98b5' },\n        { code: '831', hex: '#bcae83' },\n        { code: '832', hex: '#917d4a' },\n        { code: '837', hex: '#c5d2cf' },\n        { code: '838', hex: '#a7bec2' },\n        { code: '840', hex: '#5f7171' },\n        { code: '843', hex: '#9b9648' },\n        { code: '846', hex: '#635f2f' },\n        { code: '847', hex: '#e3e6dc' },\n        { code: '850', hex: '#7c999b' },\n        { code: '851', hex: '#3b4f45' },\n        { code: '852', hex: '#ececd2' },\n        { code: '853', hex: '#999c6c' },\n        { code: '854', hex: '#a08f4d' },\n        { code: '858', hex: '#bec0a8' },\n        { code: '859', hex: '#899770' },\n        { code: '860', hex: '#93a181' },\n        { code: '861', hex: '#4b5035' },\n        { code: '862', hex: '#343c1d' },\n        { code: '869', hex: '#c7bac7' },\n        { code: '870', hex: '#ccc1d0' },\n        { code: '871', hex: '#966e6e' },\n        { code: '873', hex: '#72535a' },\n        { code: '874', hex: '#cab751' },\n        { code: '875', hex: '#a6c5b4' },\n        { code: '876', hex: '#699d85' },\n        { code: '877', hex: '#799a83' },\n        { code: '878', hex: '#488269' },\n        { code: '879', hex: '#14361e' },\n        { code: '881', hex: '#e3be8e' },\n        { code: '883', hex: '#cda072' },\n        { code: '886', hex: '#ede0ba' },\n        { code: '887', hex: '#ccbc7d' },\n        { code: '888', hex: '#b19563' },\n        { code: '889', hex: '#74623f' },\n        { code: '890', hex: '#d59c4c' },\n        { code: '893', hex: '#e5bbb5' },\n        { code: '895', hex: '#c57e7a' },\n        { code: '896', hex: '#aa5048' },\n        { code: '897', hex: '#4f080c' },\n        { code: '898', hex: '#9e9072' },\n        { code: '899', hex: '#c7baa2' },\n        { code: '900', hex: '#d0cfc9' },\n        { code: '901', hex: '#a47829' },\n        { code: '903', hex: '#ada183' },\n        { code: '904', hex: '#5c4c2d' },\n        { code: '905', hex: '#442e10' },\n        { code: '906', hex: '#6f5422' },\n        { code: '907', hex: '#bfa43a' },\n        { code: '914', hex: '#b68472' },\n        { code: '923', hex: '#005d2e' },\n        { code: '924', hex: '#837d2f' },\n        { code: '925', hex: '#e4752b' },\n        { code: '926', hex: '#f6f2eb' },\n        { code: '928', hex: '#b8dae9' },\n        { code: '933', hex: '#f0e3d4' },\n        { code: '936', hex: '#804133' },\n        { code: '941', hex: '#7971a0' },\n        { code: '942', hex: '#d8bf95' },\n        { code: '944', hex: '#845f2e' },\n        { code: '968', hex: '#ddb3b1' },\n        { code: '977', hex: '#4f819d' },\n        { code: '978', hex: '#5a82a2' },\n        { code: '979', hex: '#2d426b' },\n        { code: '0401', hex: '#343936' },\n        { code: '1001', hex: '#e6973f' },\n        { code: '1002', hex: '#e8aa5f' },\n        { code: '1003', hex: '#d6834d' },\n        { code: '1004', hex: '#c36b29' },\n        { code: '1005', hex: '#811024' },\n        { code: '1006', hex: '#b33034' },\n        { code: '1007', hex: '#b8846c' },\n        { code: '1008', hex: '#d8b39d' },\n        { code: '1009', hex: '#f8eedc' },\n        { code: '1010', hex: '#f2e0ce' },\n        { code: '1011', hex: '#feebe2' },\n        { code: '1012', hex: '#f2c6b8' },\n        { code: '1013', hex: '#c4856f' },\n        { code: '1014', hex: '#9a3b2d' },\n        { code: '1015', hex: '#892b21' },\n        { code: '1016', hex: '#e6bcc3' },\n        { code: '1017', hex: '#c68c9f' },\n        { code: '1018', hex: '#874c49' },\n        { code: '1019', hex: '#6f2e35' },\n        { code: '1020', hex: '#fcdcda' },\n        { code: '1021', hex: '#f4c4c1' },\n        { code: '1022', hex: '#e29690' },\n        { code: '1023', hex: '#e8868c' },\n        { code: '1024', hex: '#c36154' },\n        { code: '1025', hex: '#bf3e31' },\n        { code: '1026', hex: '#ecd0c4' },\n        { code: '1027', hex: '#a45d55' },\n        { code: '1028', hex: '#863248' },\n        { code: '1029', hex: '#800137' },\n        { code: '1030', hex: '#ab9ac6' },\n        { code: '1031', hex: '#ceddea' },\n        { code: '1032', hex: '#ccd5da' },\n        { code: '1033', hex: '#a4b5c6' },\n        { code: '1034', hex: '#8f9ca7' },\n        { code: '1035', hex: '#78828f' },\n        { code: '1036', hex: '#444d58' },\n        { code: '1037', hex: '#e8edf3' },\n        { code: '1038', hex: '#a8c6d8' },\n        { code: '1039', hex: '#6b9cb9' },\n        { code: '1040', hex: '#abafa3' },\n        { code: '1041', hex: '#565d59' },\n        { code: '1043', hex: '#ccdcbe' },\n        { code: '1044', hex: '#29542f' },\n        { code: '1045', hex: '#c09557' },\n        { code: '1046', hex: '#c4863a' },\n        { code: '1047', hex: '#e8a76d' },\n        { code: '1048', hex: '#c27d45' },\n        { code: '1049', hex: '#ab6734' },\n        { code: '1050', hex: '#d2caba' },\n        { code: '1060', hex: '#c4e7e8' },\n        { code: '1062', hex: '#b4d5d4' },\n        { code: '1064', hex: '#7fb5c0' },\n        { code: '1066', hex: '#1c869b' },\n        { code: '1068', hex: '#44929d' },\n        { code: '1070', hex: '#6eb2a7' },\n        { code: '1072', hex: '#6cbfa8' },\n        { code: '1074', hex: '#42917f' },\n        { code: '1076', hex: '#00604e' },\n        { code: '1080', hex: '#c3ad9a' },\n        { code: '1082', hex: '#b39f8c' },\n        { code: '1084', hex: '#977e65' },\n        { code: '1086', hex: '#684e37' },\n        { code: '1088', hex: '#573c2a' },\n        { code: '1090', hex: '#57baf5' },\n        { code: '1092', hex: '#cae8de' },\n        { code: '1098', hex: '#e65952' },\n        { code: '1104', hex: '#00765c' },\n        { code: '1506', hex: '#4d4c34' },\n        { code: '4146', hex: '#e7ceb9' },\n        { code: '5975', hex: '#b97161' },\n        { code: '8581', hex: '#938e6e' },\n        { code: '9159', hex: '#cbdde7' },\n        { code: '9575', hex: '#eac0b4' },\n        { code: '159, 144', hex: '#c1d3df' },\n        { code: '878, 212', hex: '#2f644b' },\n        { code: '433, 1089', hex: '#0095d3' },\n    ],\n};\n\nvar dmc = {\n    name: 'DMC',\n    colors: [\n        { code: '150', hex: '#93203a' },\n        { code: '151', hex: '#ecb9bc' },\n        { code: '152', hex: '#e4b9b6' },\n        { code: '153', hex: '#dfc0db' },\n        { code: '154', hex: '#581727' },\n        { code: '155', hex: '#ab9ac6' },\n        { code: '156', hex: '#8692bb' },\n        { code: '157', hex: '#c8d2e6' },\n        { code: '158', hex: '#453f75' },\n        { code: '159', hex: '#9aa4c2' },\n        { code: '160', hex: '#8c98b4' },\n        { code: '161', hex: '#6a6983' },\n        { code: '162', hex: '#cfe5f0' },\n        { code: '163', hex: '#488269' },\n        { code: '164', hex: '#abcf8a' },\n        { code: '165', hex: '#d7d477' },\n        { code: '166', hex: '#a8b144' },\n        { code: '167', hex: '#9d763d' },\n        { code: '168', hex: '#ccd2d5' },\n        { code: '169', hex: '#959ba0' },\n        { code: '208', hex: '#9f65a4' },\n        { code: '209', hex: '#b698c6' },\n        { code: '210', hex: '#ceb6e4' },\n        { code: '211', hex: '#d0c8e4' },\n        { code: '221', hex: '#ac544c' },\n        { code: '223', hex: '#c57e7a' },\n        { code: '224', hex: '#e5bbb5' },\n        { code: '225', hex: '#ecd0c4' },\n        { code: '300', hex: '#653c1e' },\n        { code: '301', hex: '#ab6734' },\n        { code: '304', hex: '#aa102e' },\n        { code: '307', hex: '#fce740' },\n        { code: '309', hex: '#b73745' },\n        { code: '311', hex: '#194465' },\n        { code: '312', hex: '#2d426b' },\n        { code: '315', hex: '#824646' },\n        { code: '316', hex: '#c68c9f' },\n        { code: '317', hex: '#5a6067' },\n        { code: '318', hex: '#8f9096' },\n        { code: '319', hex: '#3e5a2f' },\n        { code: '320', hex: '#6e8a69' },\n        { code: '321', hex: '#ce1f32' },\n        { code: '322', hex: '#647e9d' },\n        { code: '326', hex: '#a92332' },\n        { code: '327', hex: '#723657' },\n        { code: '333', hex: '#6c5086' },\n        { code: '334', hex: '#4c698c' },\n        { code: '335', hex: '#e56d7f' },\n        { code: '336', hex: '#0c1225' },\n        { code: '340', hex: '#9389c1' },\n        { code: '341', hex: '#a2accd' },\n        { code: '347', hex: '#bf3e31' },\n        { code: '349', hex: '#c24731' },\n        { code: '350', hex: '#e46647' },\n        { code: '351', hex: '#f78465' },\n        { code: '352', hex: '#f69d80' },\n        { code: '353', hex: '#fdbca1' },\n        { code: '355', hex: '#9a3b2d' },\n        { code: '356', hex: '#a06757' },\n        { code: '367', hex: '#4c7047' },\n        { code: '368', hex: '#91ab84' },\n        { code: '369', hex: '#ccdcbe' },\n        { code: '370', hex: '#bbaa55' },\n        { code: '371', hex: '#a08f4d' },\n        { code: '372', hex: '#9c8c4a' },\n        { code: '400', hex: '#934d29' },\n        { code: '402', hex: '#e8a76d' },\n        { code: '407', hex: '#c49a87' },\n        { code: '413', hex: '#565d59' },\n        { code: '414', hex: '#95909d' },\n        { code: '415', hex: '#ced0d5' },\n        { code: '420', hex: '#866226' },\n        { code: '433', hex: '#775437' },\n        { code: '434', hex: '#b78237' },\n        { code: '435', hex: '#c4863a' },\n        { code: '436', hex: '#c09557' },\n        { code: '437', hex: '#e1c395' },\n        { code: '444', hex: '#fbdf0d' },\n        { code: '445', hex: '#f9f287' },\n        { code: '451', hex: '#978e87' },\n        { code: '452', hex: '#c5b6b4' },\n        { code: '453', hex: '#e3dcdb' },\n        { code: '469', hex: '#798738' },\n        { code: '470', hex: '#98a859' },\n        { code: '471', hex: '#929937' },\n        { code: '472', hex: '#dee077' },\n        { code: '498', hex: '#98232c' },\n        { code: '500', hex: '#14361e' },\n        { code: '501', hex: '#496f5c' },\n        { code: '502', hex: '#799a83' },\n        { code: '503', hex: '#8ebea9' },\n        { code: '504', hex: '#d1e2d7' },\n        { code: '505', hex: '#4a805b' },\n        { code: '517', hex: '#166d92' },\n        { code: '518', hex: '#6b9cb9' },\n        { code: '519', hex: '#a8c6d8' },\n        { code: '520', hex: '#4f6035' },\n        { code: '522', hex: '#93a181' },\n        { code: '523', hex: '#a5a888' },\n        { code: '524', hex: '#bec0a8' },\n        { code: '535', hex: '#504f50' },\n        { code: '543', hex: '#f0e3d4' },\n        { code: '550', hex: '#541244' },\n        { code: '552', hex: '#7b3f6c' },\n        { code: '553', hex: '#a772a4' },\n        { code: '554', hex: '#ae99b1' },\n        { code: '561', hex: '#44684e' },\n        { code: '562', hex: '#649a73' },\n        { code: '563', hex: '#a2ccaa' },\n        { code: '564', hex: '#b8cea6' },\n        { code: '580', hex: '#7a8035' },\n        { code: '581', hex: '#9fa146' },\n        { code: '597', hex: '#7fb5c0' },\n        { code: '598', hex: '#a5dbde' },\n        { code: '600', hex: '#bf1c48' },\n        { code: '601', hex: '#d34067' },\n        { code: '602', hex: '#ca0b51' },\n        { code: '603', hex: '#ef7ba1' },\n        { code: '604', hex: '#efa8ca' },\n        { code: '606', hex: '#ea592c' },\n        { code: '608', hex: '#f06e46' },\n        { code: '610', hex: '#806638' },\n        { code: '611', hex: '#9e9072' },\n        { code: '612', hex: '#917d4a' },\n        { code: '613', hex: '#bcae83' },\n        { code: '632', hex: '#8c593e' },\n        { code: '640', hex: '#938962' },\n        { code: '642', hex: '#bab599' },\n        { code: '644', hex: '#d6d3c1' },\n        { code: '645', hex: '#6c6e58' },\n        { code: '646', hex: '#97978e' },\n        { code: '647', hex: '#abafa3' },\n        { code: '648', hex: '#d0cfc9' },\n        { code: '666', hex: '#d82e26' },\n        { code: '676', hex: '#eed7a1' },\n        { code: '677', hex: '#ede0ba' },\n        { code: '680', hex: '#af8334' },\n        { code: '699', hex: '#015731' },\n        { code: '700', hex: '#2e9148' },\n        { code: '701', hex: '#007a3f' },\n        { code: '702', hex: '#50a348' },\n        { code: '703', hex: '#70b145' },\n        { code: '704', hex: '#bad765' },\n        { code: '712', hex: '#e1e1d9' },\n        { code: '718', hex: '#9f2d6f' },\n        { code: '720', hex: '#ec6810' },\n        { code: '721', hex: '#e4752b' },\n        { code: '722', hex: '#faa463' },\n        { code: '725', hex: '#fad558' },\n        { code: '726', hex: '#ffe35f' },\n        { code: '727', hex: '#feee89' },\n        { code: '728', hex: '#e8b539' },\n        { code: '729', hex: '#cc993d' },\n        { code: '730', hex: '#746d2b' },\n        { code: '731', hex: '#837d2f' },\n        { code: '732', hex: '#91852a' },\n        { code: '733', hex: '#a6a036' },\n        { code: '734', hex: '#c9b639' },\n        { code: '738', hex: '#d8bf95' },\n        { code: '739', hex: '#e0d0b0' },\n        { code: '740', hex: '#ff7600' },\n        { code: '741', hex: '#febc46' },\n        { code: '742', hex: '#ffc33a' },\n        { code: '743', hex: '#ffda5a' },\n        { code: '744', hex: '#ffe276' },\n        { code: '745', hex: '#ffeda9' },\n        { code: '746', hex: '#f5f0df' },\n        { code: '747', hex: '#d3e9e7' },\n        { code: '754', hex: '#efc1aa' },\n        { code: '758', hex: '#eac0b4' },\n        { code: '760', hex: '#e29690' },\n        { code: '761', hex: '#f4c4c1' },\n        { code: '762', hex: '#e9e9eb' },\n        { code: '772', hex: '#f3f6d4' },\n        { code: '775', hex: '#ceddea' },\n        { code: '776', hex: '#eeaeb0' },\n        { code: '777', hex: '#822741' },\n        { code: '778', hex: '#ddb3b1' },\n        { code: '779', hex: '#604545' },\n        { code: '780', hex: '#936626' },\n        { code: '781', hex: '#ba8225' },\n        { code: '782', hex: '#b38132' },\n        { code: '783', hex: '#d59c4c' },\n        { code: '791', hex: '#161151' },\n        { code: '792', hex: '#7971a0' },\n        { code: '793', hex: '#686d8d' },\n        { code: '794', hex: '#7d98b5' },\n        { code: '796', hex: '#181f66' },\n        { code: '797', hex: '#2c4180' },\n        { code: '798', hex: '#445997' },\n        { code: '799', hex: '#6e8db5' },\n        { code: '800', hex: '#c1d3df' },\n        { code: '801', hex: '#7b5e26' },\n        { code: '806', hex: '#437490' },\n        { code: '807', hex: '#70a8b3' },\n        { code: '809', hex: '#6c91c0' },\n        { code: '813', hex: '#91b4ce' },\n        { code: '814', hex: '#5f1f2c' },\n        { code: '815', hex: '#9d3030' },\n        { code: '816', hex: '#811024' },\n        { code: '817', hex: '#bd2e2e' },\n        { code: '818', hex: '#f9d6dd' },\n        { code: '819', hex: '#fbe2df' },\n        { code: '820', hex: '#190f60' },\n        { code: '822', hex: '#e2dfd3' },\n        { code: '824', hex: '#124477' },\n        { code: '825', hex: '#366390' },\n        { code: '826', hex: '#5a82a2' },\n        { code: '827', hex: '#b4d3e3' },\n        { code: '828', hex: '#cae2eb' },\n        { code: '829', hex: '#6f5422' },\n        { code: '830', hex: '#8d7529' },\n        { code: '831', hex: '#957b2f' },\n        { code: '832', hex: '#b19a3f' },\n        { code: '833', hex: '#bfa43a' },\n        { code: '834', hex: '#cab751' },\n        { code: '838', hex: '#573c2a' },\n        { code: '839', hex: '#684e37' },\n        { code: '840', hex: '#977e65' },\n        { code: '841', hex: '#b39f8c' },\n        { code: '842', hex: '#cdb9a4' },\n        { code: '844', hex: '#6c6e58' },\n        { code: '869', hex: '#775820' },\n        { code: '890', hex: '#043810' },\n        { code: '891', hex: '#ef4949' },\n        { code: '892', hex: '#f85b64' },\n        { code: '893', hex: '#fc6a84' },\n        { code: '894', hex: '#f999a5' },\n        { code: '895', hex: '#29542f' },\n        { code: '898', hex: '#502f1b' },\n        { code: '899', hex: '#ee8593' },\n        { code: '900', hex: '#d45d28' },\n        { code: '902', hex: '#4f080c' },\n        { code: '904', hex: '#4f6c33' },\n        { code: '905', hex: '#759a3e' },\n        { code: '906', hex: '#82ae44' },\n        { code: '907', hex: '#a9c33e' },\n        { code: '909', hex: '#00793b' },\n        { code: '910', hex: '#008c4c' },\n        { code: '911', hex: '#40a756' },\n        { code: '912', hex: '#58a96b' },\n        { code: '913', hex: '#88c78d' },\n        { code: '915', hex: '#800137' },\n        { code: '917', hex: '#832a58' },\n        { code: '918', hex: '#8c3b1a' },\n        { code: '919', hex: '#9b3b1b' },\n        { code: '920', hex: '#a74f2a' },\n        { code: '921', hex: '#c36b29' },\n        { code: '922', hex: '#d6834d' },\n        { code: '924', hex: '#3b4f45' },\n        { code: '926', hex: '#7c999b' },\n        { code: '927', hex: '#a7bec2' },\n        { code: '928', hex: '#e5eae9' },\n        { code: '930', hex: '#78828f' },\n        { code: '931', hex: '#8f9ca7' },\n        { code: '932', hex: '#a4b5c6' },\n        { code: '934', hex: '#4d4c34' },\n        { code: '935', hex: '#4b5035' },\n        { code: '936', hex: '#5d5c2b' },\n        { code: '937', hex: '#4f5925' },\n        { code: '938', hex: '#3b2811' },\n        { code: '939', hex: '#02101c' },\n        { code: '943', hex: '#009a7b' },\n        { code: '945', hex: '#e3be8e' },\n        { code: '946', hex: '#e15729' },\n        { code: '947', hex: '#f26922' },\n        { code: '948', hex: '#feebe2' },\n        { code: '950', hex: '#e7ceb9' },\n        { code: '951', hex: '#f2e0ce' },\n        { code: '954', hex: '#abd58b' },\n        { code: '955', hex: '#b4e8b3' },\n        { code: '956', hex: '#ff7a90' },\n        { code: '957', hex: '#f9afb7' },\n        { code: '958', hex: '#51c0bb' },\n        { code: '959', hex: '#8fd3d4' },\n        { code: '961', hex: '#df6877' },\n        { code: '962', hex: '#f08d9f' },\n        { code: '963', hex: '#fad0d5' },\n        { code: '964', hex: '#9cd3cc' },\n        { code: '966', hex: '#b8cea6' },\n        { code: '967', hex: '#fbdbcd' },\n        { code: '970', hex: '#ff781e' },\n        { code: '971', hex: '#fc7e0c' },\n        { code: '972', hex: '#ffb401' },\n        { code: '973', hex: '#fbd215' },\n        { code: '975', hex: '#945c2d' },\n        { code: '976', hex: '#e6973f' },\n        { code: '977', hex: '#e59034' },\n        { code: '986', hex: '#1f561f' },\n        { code: '987', hex: '#568357' },\n        { code: '988', hex: '#88ab5c' },\n        { code: '989', hex: '#87a462' },\n        { code: '991', hex: '#00765c' },\n        { code: '992', hex: '#6cbfa8' },\n        { code: '993', hex: '#8ec2b3' },\n        { code: '995', hex: '#0064b0' },\n        { code: '996', hex: '#57baf5' },\n        { code: '3011', hex: '#635f2f' },\n        { code: '3012', hex: '#9b9648' },\n        { code: '3013', hex: '#999c6c' },\n        { code: '3021', hex: '#3b2e08' },\n        { code: '3022', hex: '#938e6e' },\n        { code: '3023', hex: '#b2ae95' },\n        { code: '3024', hex: '#dcdcd7' },\n        { code: '3031', hex: '#442e10' },\n        { code: '3032', hex: '#ada183' },\n        { code: '3033', hex: '#d7d0c2' },\n        { code: '3041', hex: '#966e6e' },\n        { code: '3042', hex: '#ccc1d0' },\n        { code: '3045', hex: '#b19563' },\n        { code: '3046', hex: '#ccbc7d' },\n        { code: '3047', hex: '#ececd2' },\n        { code: '3051', hex: '#6d6f42' },\n        { code: '3052', hex: '#899770' },\n        { code: '3053', hex: '#bac28b' },\n        { code: '3064', hex: '#cda072' },\n        { code: '3072', hex: '#e3e6dc' },\n        { code: '3078', hex: '#fdf09c' },\n        { code: '3325', hex: '#c6d3e1' },\n        { code: '3326', hex: '#f7b4b7' },\n        { code: '3328', hex: '#c36154' },\n        { code: '3340', hex: '#f38351' },\n        { code: '3341', hex: '#fbbe9d' },\n        { code: '3345', hex: '#486131' },\n        { code: '3346', hex: '#6a823d' },\n        { code: '3347', hex: '#78983b' },\n        { code: '3348', hex: '#e3ee9f' },\n        { code: '3354', hex: '#e5abaf' },\n        { code: '3362', hex: '#2e3d1a' },\n        { code: '3363', hex: '#72885f' },\n        { code: '3364', hex: '#85905c' },\n        { code: '3371', hex: '#2d1705' },\n        { code: '3607', hex: '#b34e8c' },\n        { code: '3608', hex: '#c07ba3' },\n        { code: '3609', hex: '#e9b8d9' },\n        { code: '3685', hex: '#742338' },\n        { code: '3687', hex: '#c2596d' },\n        { code: '3688', hex: '#e6849a' },\n        { code: '3689', hex: '#e8b9c5' },\n        { code: '3705', hex: '#f65d5b' },\n        { code: '3706', hex: '#ff988e' },\n        { code: '3708', hex: '#fcbbc1' },\n        { code: '3712', hex: '#db7d73' },\n        { code: '3713', hex: '#fcdcda' },\n        { code: '3716', hex: '#fcb1ba' },\n        { code: '3721', hex: '#aa5048' },\n        { code: '3722', hex: '#a45d55' },\n        { code: '3726', hex: '#874c49' },\n        { code: '3727', hex: '#e6bcc3' },\n        { code: '3731', hex: '#c65a6b' },\n        { code: '3733', hex: '#eda6ac' },\n        { code: '3740', hex: '#72535a' },\n        { code: '3743', hex: '#e0dee0' },\n        { code: '3746', hex: '#8572a4' },\n        { code: '3747', hex: '#bcc0d8' },\n        { code: '3750', hex: '#444d58' },\n        { code: '3752', hex: '#bbc8d6' },\n        { code: '3753', hex: '#ccd5da' },\n        { code: '3755', hex: '#9fbbd5' },\n        { code: '3756', hex: '#e8edf3' },\n        { code: '3760', hex: '#4f819d' },\n        { code: '3761', hex: '#b8dae9' },\n        { code: '3765', hex: '#296e87' },\n        { code: '3766', hex: '#7cbec6' },\n        { code: '3768', hex: '#5f7171' },\n        { code: '3770', hex: '#f8eedc' },\n        { code: '3771', hex: '#dfb090' },\n        { code: '3772', hex: '#b8846c' },\n        { code: '3773', hex: '#d8b39d' },\n        { code: '3774', hex: '#f6e1d0' },\n        { code: '3776', hex: '#c27d45' },\n        { code: '3777', hex: '#892b21' },\n        { code: '3778', hex: '#c4856f' },\n        { code: '3779', hex: '#f2c6b8' },\n        { code: '3781', hex: '#5c4c2d' },\n        { code: '3782', hex: '#c7baa2' },\n        { code: '3787', hex: '#605b45' },\n        { code: '3790', hex: '#74623f' },\n        { code: '3799', hex: '#343936' },\n        { code: '3801', hex: '#e65952' },\n        { code: '3802', hex: '#6f2e35' },\n        { code: '3803', hex: '#912644' },\n        { code: '3804', hex: '#c33c62' },\n        { code: '3805', hex: '#ce507f' },\n        { code: '3806', hex: '#f19ac2' },\n        { code: '3807', hex: '#073563' },\n        { code: '3808', hex: '#0c464b' },\n        { code: '3809', hex: '#1c869b' },\n        { code: '3810', hex: '#44929d' },\n        { code: '3811', hex: '#cae8de' },\n        { code: '3812', hex: '#028063' },\n        { code: '3813', hex: '#b8cebe' },\n        { code: '3814', hex: '#3f8878' },\n        { code: '3815', hex: '#4c7c60' },\n        { code: '3816', hex: '#699d85' },\n        { code: '3817', hex: '#a6c5b4' },\n        { code: '3818', hex: '#007c3d' },\n        { code: '3819', hex: '#d2d057' },\n        { code: '3820', hex: '#ddb442' },\n        { code: '3821', hex: '#e2b73a' },\n        { code: '3822', hex: '#f1d863' },\n        { code: '3823', hex: '#fffcdc' },\n        { code: '3824', hex: '#fbccb8' },\n        { code: '3825', hex: '#fdc391' },\n        { code: '3826', hex: '#c38c55' },\n        { code: '3827', hex: '#e8aa5f' },\n        { code: '3828', hex: '#af8846' },\n        { code: '3829', hex: '#a47829' },\n        { code: '3830', hex: '#b97161' },\n        { code: '3831', hex: '#b33034' },\n        { code: '3832', hex: '#d55d63' },\n        { code: '3833', hex: '#e8868c' },\n        { code: '3834', hex: '#642441' },\n        { code: '3836', hex: '#c1aec2' },\n        { code: '3837', hex: '#7c4087' },\n        { code: '3838', hex: '#62669a' },\n        { code: '3839', hex: '#94a8c9' },\n        { code: '3840', hex: '#c1d4ec' },\n        { code: '3841', hex: '#cbdde7' },\n        { code: '3842', hex: '#12557e' },\n        { code: '3843', hex: '#0095d3' },\n        { code: '3844', hex: '#04acce' },\n        { code: '3845', hex: '#01cbec' },\n        { code: '3846', hex: '#63d3e1' },\n        { code: '3847', hex: '#00604e' },\n        { code: '3848', hex: '#42917f' },\n        { code: '3849', hex: '#6eb2a7' },\n        { code: '3850', hex: '#08926f' },\n        { code: '3851', hex: '#56b69c' },\n        { code: '3852', hex: '#cc972b' },\n        { code: '3853', hex: '#fc9749' },\n        { code: '3854', hex: '#f7b25c' },\n        { code: '3855', hex: '#f7ca84' },\n        { code: '3856', hex: '#ebbc9a' },\n        { code: '3857', hex: '#804133' },\n        { code: '3858', hex: '#8d5745' },\n        { code: '3859', hex: '#b68472' },\n        { code: '3860', hex: '#947974' },\n        { code: '3861', hex: '#9e887f' },\n        { code: '3862', hex: '#845f2e' },\n        { code: '3863', hex: '#a4866c' },\n        { code: '3864', hex: '#c3ad9a' },\n        { code: '3865', hex: '#faf9f5' },\n        { code: '3866', hex: '#e7e5dd' },\n        { code: 'Ecru', hex: '#f2efe5' },\n    ],\n};\n\nvar gamma = {\n    name: 'Gamma',\n    colors: [\n        { code: '0001', hex: '#f2efe5' },\n        { code: '0002', hex: '#74401d' },\n        { code: '0003', hex: '#3c5780' },\n        { code: '0004', hex: '#b7bbc7' },\n        { code: '0005', hex: '#6e8db5' },\n        { code: '0006', hex: '#d3d4db' },\n        { code: '0007', hex: '#c4863a' },\n        { code: '0008', hex: '#929937' },\n        { code: '0009', hex: '#d7d0c2' },\n        { code: '0010', hex: '#a6a036' },\n        { code: '0011', hex: '#ea592c' },\n        { code: '0012', hex: '#e83124' },\n        { code: '0013', hex: '#00793b' },\n        { code: '0014', hex: '#2e9148' },\n        { code: '0015', hex: '#40a756' },\n        { code: '0016', hex: '#feee89' },\n        { code: '0017', hex: '#d1c66d' },\n        { code: '0018', hex: '#e0d0b0' },\n        { code: '0019', hex: '#ffc33a' },\n        { code: '0020', hex: '#ffe276' },\n        { code: '0021', hex: '#ffeda9' },\n        { code: '0022', hex: '#b78237' },\n        { code: '0023', hex: '#8ea7c0' },\n        { code: '0024', hex: '#bd2e2e' },\n        { code: '0025', hex: '#fbe2df' },\n        { code: '0026', hex: '#0c1225' },\n        { code: '0027', hex: '#c1d3df' },\n        { code: '0028', hex: '#702623' },\n        { code: '0029', hex: '#4f6c33' },\n        { code: '0030', hex: '#759a3e' },\n        { code: '0031', hex: '#832a58' },\n        { code: '0032', hex: '#a74f2a' },\n        { code: '0033', hex: '#87a462' },\n        { code: '0034', hex: '#e7e5dd' },\n        { code: '0035', hex: '#6d6f42' },\n        { code: '0036', hex: '#72885f' },\n        { code: '0037', hex: '#e9b8d9' },\n        { code: '0038', hex: '#7d3248' },\n        { code: '0039', hex: '#6b8084' },\n        { code: '0040', hex: '#f8eedc' },\n        { code: '0041', hex: '#f6f289' },\n        { code: '0042', hex: '#ffe21a' },\n        { code: '0043', hex: '#fffcdc' },\n        { code: '0044', hex: '#e15729' },\n        { code: '0045', hex: '#fbccb8' },\n        { code: '0046', hex: '#d6834d' },\n        { code: '0047', hex: '#ebbc9a' },\n        { code: '0048', hex: '#c27d45' },\n        { code: '0049', hex: '#e6973f' },\n        { code: '0050', hex: '#e8aa5f' },\n        { code: '0051', hex: '#eac0b4' },\n        { code: '0052', hex: '#d8b39d' },\n        { code: '0053', hex: '#b6a7a6' },\n        { code: '0054', hex: '#e1c395' },\n        { code: '0055', hex: '#63461f' },\n        { code: '0056', hex: '#c3ad9a' },\n        { code: '0057', hex: '#b39f8c' },\n        { code: '0058', hex: '#978266' },\n        { code: '0059', hex: '#bab599' },\n        { code: '0060', hex: '#97978e' },\n        { code: '0061', hex: '#95909d' },\n        { code: '0062', hex: '#bf3e31' },\n        { code: '0063', hex: '#e65952' },\n        { code: '0064', hex: '#a92332' },\n        { code: '0065', hex: '#eda6ac' },\n        { code: '0066', hex: '#f7b4b7' },\n        { code: '0067', hex: '#ab979e' },\n        { code: '0068', hex: '#c1aec2' },\n        { code: '0069', hex: '#ce507f' },\n        { code: '0070', hex: '#efa8ca' },\n        { code: '0071', hex: '#d1466c' },\n        { code: '0072', hex: '#b34e8c' },\n        { code: '0073', hex: '#9f2d6f' },\n        { code: '0074', hex: '#a772a4' },\n        { code: '0075', hex: '#541244' },\n        { code: '0076', hex: '#ceb6e4' },\n        { code: '0077', hex: '#7b3f6c' },\n        { code: '0078', hex: '#9389c1' },\n        { code: '0079', hex: '#6c5086' },\n        { code: '0080', hex: '#7971a0' },\n        { code: '0081', hex: '#94a8c9' },\n        { code: '0082', hex: '#445997' },\n        { code: '0083', hex: '#181f66' },\n        { code: '0084', hex: '#366390' },\n        { code: '0085', hex: '#04acce' },\n        { code: '0086', hex: '#0064b0' },\n        { code: '0087', hex: '#01cbec' },\n        { code: '0088', hex: '#008c4c' },\n        { code: '0089', hex: '#4c7047' },\n        { code: '0090', hex: '#798738' },\n        { code: '0091', hex: '#bac28b' },\n        { code: '0092', hex: '#9c8c4a' },\n        { code: '0093', hex: '#ccbc7d' },\n        { code: '0094', hex: '#957b2f' },\n        { code: '0095', hex: '#ececd2' },\n        { code: '0096', hex: '#ede0ba' },\n        { code: '0097', hex: '#d19d2f' },\n        { code: '0098', hex: '#e8d290' },\n        { code: '0099', hex: '#f1d863' },\n        { code: '0101', hex: '#fff3ad' },\n        { code: '0102', hex: '#fdf09c' },\n        { code: '0104', hex: '#ffda5a' },\n        { code: '0105', hex: '#febc46' },\n        { code: '0107', hex: '#fc9749' },\n        { code: '0108', hex: '#e4752b' },\n        { code: '0109', hex: '#ec6810' },\n        { code: '0111', hex: '#9f65a4' },\n        { code: '0112', hex: '#7c4087' },\n        { code: '0116', hex: '#fc6a84' },\n        { code: '0118', hex: '#ef4949' },\n        { code: '0119', hex: '#d82e26' },\n        { code: '0120', hex: '#ce1f32' },\n        { code: '0150', hex: '#d0cfc9' },\n        { code: '0152', hex: '#abafa3' },\n        { code: '0154', hex: '#6c6e58' },\n        { code: '0155', hex: '#4d4c34' },\n        { code: '0201', hex: '#fad0d5' },\n        { code: '0202', hex: '#f0b7d2' },\n        { code: '0204', hex: '#ef7ba1' },\n        { code: '0207', hex: '#bad765' },\n        { code: '0209', hex: '#70b145' },\n        { code: '0210', hex: '#3e9730' },\n        { code: '0214', hex: '#d59c4c' },\n        { code: '0215', hex: '#ba8225' },\n        { code: '0216', hex: '#936626' },\n        { code: '0217', hex: '#7a5127' },\n        { code: '0219', hex: '#653c1e' },\n        { code: '0220', hex: '#502f1b' },\n        { code: '0301', hex: '#cbdde7' },\n        { code: '0302', hex: '#c1d4ec' },\n        { code: '0304', hex: '#6c91c0' },\n        { code: '0306', hex: '#2c4180' },\n        { code: '0308', hex: '#161151' },\n        { code: '0309', hex: '#feebe2' },\n        { code: '0310', hex: '#fbdbcd' },\n        { code: '0312', hex: '#fbbe9d' },\n        { code: '0314', hex: '#f78465' },\n        { code: '0315', hex: '#f06e46' },\n        { code: '0319', hex: '#50a348' },\n        { code: '0321', hex: '#007a3f' },\n        { code: '0402', hex: '#f19ac2' },\n        { code: '0404', hex: '#ca0b51' },\n        { code: '0406', hex: '#822741' },\n        { code: '0407', hex: '#711f2e' },\n        { code: '0409', hex: '#5f1f2c' },\n        { code: '0410', hex: '#4e1622' },\n        { code: '0411', hex: '#96c59d' },\n        { code: '0414', hex: '#007c3d' },\n        { code: '0416', hex: '#e0dee0' },\n        { code: '0417', hex: '#ccc1d0' },\n        { code: '0500', hex: '#f3f6d4' },\n        { code: '0502', hex: '#abd58b' },\n        { code: '0504', hex: '#58a96b' },\n        { code: '0506', hex: '#00765c' },\n        { code: '0512', hex: '#5a82a2' },\n        { code: '0513', hex: '#166d92' },\n        { code: '0514', hex: '#fff276' },\n        { code: '0516', hex: '#fbdf0d' },\n        { code: '0605', hex: '#8fd3d4' },\n        { code: '0606', hex: '#51c0bb' },\n        { code: '0609', hex: '#c07ba3' },\n        { code: '0614', hex: '#78983b' },\n        { code: '0653', hex: '#c9b639' },\n        { code: '0654', hex: '#b19a3f' },\n        { code: '0655', hex: '#8d7529' },\n        { code: '0657', hex: '#7b5e26' },\n        { code: '0661', hex: '#e5eae9' },\n        { code: '0662', hex: '#c5d2cf' },\n        { code: '0663', hex: '#a7bec2' },\n        { code: '0664', hex: '#7c999b' },\n        { code: '0665', hex: '#5f7171' },\n        { code: '0666', hex: '#3b4f45' },\n        { code: '0670', hex: '#e3dcdb' },\n        { code: '0672', hex: '#c5b6b4' },\n        { code: '0674', hex: '#978e87' },\n        { code: '0703', hex: '#fdbca1' },\n        { code: '0705', hex: '#e6876c' },\n        { code: '0707', hex: '#e46647' },\n        { code: '0708', hex: '#c24731' },\n        { code: '0709', hex: '#98232c' },\n        { code: '0715', hex: '#ccdcbe' },\n        { code: '0716', hex: '#91ab84' },\n        { code: '0717', hex: '#76996c' },\n        { code: '0718', hex: '#568357' },\n        { code: '0719', hex: '#3e5a2f' },\n        { code: '0720', hex: '#29542f' },\n        { code: '0725', hex: '#c7bac7' },\n        { code: '0727', hex: '#ae99b1' },\n        { code: '0752', hex: '#e8edf3' },\n        { code: '0753', hex: '#ceddea' },\n        { code: '0754', hex: '#bbc8d6' },\n        { code: '0755', hex: '#a4b5c6' },\n        { code: '0756', hex: '#7d98b5' },\n        { code: '0757', hex: '#4c698c' },\n        { code: '0759', hex: '#073563' },\n        { code: '0765', hex: '#ecd0c4' },\n        { code: '0767', hex: '#c4856f' },\n        { code: '0768', hex: '#a06757' },\n        { code: '0771', hex: '#8c3b1a' },\n        { code: '0772', hex: '#804133' },\n        { code: '0802', hex: '#e2d1b2' },\n        { code: '0803', hex: '#d8bf95' },\n        { code: '0808', hex: '#845f2e' },\n        { code: '0809', hex: '#775437' },\n        { code: '0811', hex: '#573c2a' },\n        { code: '0812', hex: '#3b2811' },\n        { code: '0816', hex: '#dee077' },\n        { code: '0817', hex: '#d2d057' },\n        { code: '0818', hex: '#a8b144' },\n        { code: '0820', hex: '#7a8035' },\n        { code: '0821', hex: '#4f5925' },\n        { code: '0823', hex: '#2e3d1a' },\n        { code: '0852', hex: '#d3e9e7' },\n        { code: '0853', hex: '#c4e7e8' },\n        { code: '0854', hex: '#a5dbde' },\n        { code: '0855', hex: '#7cbec6' },\n        { code: '0856', hex: '#4fa1a9' },\n        { code: '0857', hex: '#1c869b' },\n        { code: '0860', hex: '#0c464b' },\n        { code: '0865', hex: '#ac544c' },\n        { code: '0867', hex: '#9d3030' },\n        { code: '0869', hex: '#811024' },\n        { code: '0870', hex: '#4f080c' },\n        { code: '0875', hex: '#e9c4c9' },\n        { code: '0876', hex: '#ddb3b1' },\n        { code: '0879', hex: '#874c49' },\n        { code: '0902', hex: '#f9d6dd' },\n        { code: '0904', hex: '#f1b3bf' },\n        { code: '0905', hex: '#e6849a' },\n        { code: '0906', hex: '#c2596d' },\n        { code: '0907', hex: '#912644' },\n        { code: '0908', hex: '#742338' },\n        { code: '0909', hex: '#581727' },\n        { code: '0915', hex: '#d2caba' },\n        { code: '0917', hex: '#9e9072' },\n        { code: '0919', hex: '#74623f' },\n        { code: '0924', hex: '#e3be8e' },\n        { code: '0925', hex: '#cda072' },\n        { code: '0926', hex: '#c38c55' },\n        { code: '0928', hex: '#945c2d' },\n        { code: '0929', hex: '#825534' },\n        { code: '0930', hex: '#603920' },\n        { code: '0953', hex: '#d1e2d7' },\n        { code: '0954', hex: '#8ebea9' },\n        { code: '0956', hex: '#488269' },\n        { code: '0957', hex: '#496f5c' },\n        { code: '0958', hex: '#44684e' },\n        { code: '0960', hex: '#14361e' },\n        { code: '0966', hex: '#e6e9ea' },\n        { code: '0967', hex: '#ccd5da' },\n        { code: '0970', hex: '#8f9ca7' },\n        { code: '0971', hex: '#78828f' },\n        { code: '0972', hex: '#444d58' },\n        { code: '1095', hex: '#d0c8e4' },\n        { code: '2125', hex: '#eed7a1' },\n        { code: '2135', hex: '#c4944f' },\n        { code: '3010', hex: '#fcdcda' },\n        { code: '3011', hex: '#f4c4c1' },\n        { code: '3012', hex: '#e29690' },\n        { code: '3013', hex: '#e4b9b6' },\n        { code: '3014', hex: '#c57e7a' },\n        { code: '3015', hex: '#a45d55' },\n        { code: '3016', hex: '#e6bcc3' },\n        { code: '3017', hex: '#966e6e' },\n        { code: '3018', hex: '#b19563' },\n        { code: '3019', hex: '#cc993d' },\n        { code: '3020', hex: '#ddb442' },\n        { code: '3021', hex: '#f2e0ce' },\n        { code: '3022', hex: '#ab6734' },\n        { code: '3023', hex: '#934d29' },\n        { code: '3024', hex: '#fae9df' },\n        { code: '3025', hex: '#efc1aa' },\n        { code: '3026', hex: '#dfb090' },\n        { code: '3027', hex: '#b97161' },\n        { code: '3028', hex: '#b68472' },\n        { code: '3029', hex: '#8d5745' },\n        { code: '3030', hex: '#e7ceb9' },\n        { code: '3031', hex: '#c49a87' },\n        { code: '3032', hex: '#947974' },\n        { code: '3033', hex: '#f0e3d4' },\n        { code: '3034', hex: '#c9af93' },\n        { code: '3035', hex: '#a4866c' },\n        { code: '3036', hex: '#e1e1d9' },\n        { code: '3037', hex: '#938962' },\n        { code: '3038', hex: '#dcdcd7' },\n        { code: '3039', hex: '#b2ae95' },\n        { code: '3040', hex: '#938e6e' },\n        { code: '3041', hex: '#c7baa2' },\n        { code: '3042', hex: '#f6f2eb' },\n        { code: '3043', hex: '#e3e6dc' },\n        { code: '3044', hex: '#ceccc5' },\n        { code: '3045', hex: '#ccd2d5' },\n        { code: '3046', hex: '#959ba0' },\n        { code: '3047', hex: '#a2accd' },\n        { code: '3048', hex: '#8692bb' },\n        { code: '3049', hex: '#b8bfd2' },\n        { code: '3050', hex: '#8c98b4' },\n        { code: '3051', hex: '#c6d3e1' },\n        { code: '3052', hex: '#647e9d' },\n        { code: '3053', hex: '#cae2eb' },\n        { code: '3054', hex: '#a8c6d8' },\n        { code: '3055', hex: '#6b9cb9' },\n        { code: '3056', hex: '#7fb5c0' },\n        { code: '3057', hex: '#44929d' },\n        { code: '3058', hex: '#6eb2a7' },\n        { code: '3059', hex: '#42917f' },\n        { code: '3060', hex: '#6cbfa8' },\n        { code: '3061', hex: '#a6c5b4' },\n        { code: '3062', hex: '#699d85' },\n        { code: '3063', hex: '#59896f' },\n        { code: '3064', hex: '#899770' },\n        { code: '3065', hex: '#93a181' },\n        { code: '3066', hex: '#999c6c' },\n        { code: '3067', hex: '#9b9648' },\n        { code: '3068', hex: '#bbaa55' },\n        { code: '3069', hex: '#cab751' },\n        { code: '3070', hex: '#2f3b36' },\n        { code: '3071', hex: '#db7d73' },\n        { code: '3072', hex: '#c36154' },\n        { code: '3073', hex: '#f69d80' },\n        { code: '3074', hex: '#fcbbc1' },\n        { code: '3075', hex: '#ff988e' },\n        { code: '3076', hex: '#f65d5b' },\n        { code: '3077', hex: '#f999a5' },\n        { code: '3078', hex: '#f85b64' },\n        { code: '3079', hex: '#f9afb7' },\n        { code: '3080', hex: '#ff7a90' },\n        { code: '3081', hex: '#fcb1ba' },\n        { code: '3082', hex: '#f08d9f' },\n        { code: '3083', hex: '#df6877' },\n        { code: '3084', hex: '#e8868c' },\n        { code: '3085', hex: '#d55d63' },\n        { code: '3086', hex: '#b33034' },\n        { code: '3087', hex: '#eeaeb0' },\n        { code: '3088', hex: '#ee8593' },\n        { code: '3089', hex: '#e56d7f' },\n        { code: '3090', hex: '#b73745' },\n        { code: '3091', hex: '#e5abaf' },\n        { code: '3092', hex: '#c65a6b' },\n        { code: '3093', hex: '#e8b9c5' },\n        { code: '3094', hex: '#863248' },\n        { code: '3095', hex: '#e5bbb5' },\n        { code: '3096', hex: '#aa5048' },\n        { code: '3097', hex: '#85312e' },\n        { code: '3098', hex: '#c68c9f' },\n        { code: '3099', hex: '#824646' },\n        { code: '3100', hex: '#6f2e35' },\n        { code: '3101', hex: '#72535a' },\n        { code: '3102', hex: '#642441' },\n        { code: '3103', hex: '#c33c62' },\n        { code: '3104', hex: '#d34067' },\n        { code: '3105', hex: '#bf1c48' },\n        { code: '3106', hex: '#800137' },\n        { code: '3107', hex: '#b698c6' },\n        { code: '3108', hex: '#723657' },\n        { code: '3109', hex: '#bcc0d8' },\n        { code: '3110', hex: '#8572a4' },\n        { code: '3111', hex: '#686d8d' },\n        { code: '3112', hex: '#62669a' },\n        { code: '3113', hex: '#789bc0' },\n        { code: '3114', hex: '#190f60' },\n        { code: '3115', hex: '#b4d3e3' },\n        { code: '3116', hex: '#91b4ce' },\n        { code: '3117', hex: '#9fbbd5' },\n        { code: '3118', hex: '#2d426b' },\n        { code: '3119', hex: '#194465' },\n        { code: '3120', hex: '#02101c' },\n        { code: '3121', hex: '#57baf5' },\n        { code: '3122', hex: '#0095d3' },\n        { code: '3123', hex: '#63d3e1' },\n        { code: '3124', hex: '#b8dae9' },\n        { code: '3125', hex: '#4f819d' },\n        { code: '3126', hex: '#12557e' },\n        { code: '3127', hex: '#70a8b3' },\n        { code: '3128', hex: '#437490' },\n        { code: '3129', hex: '#296e87' },\n        { code: '3130', hex: '#b4d5d4' },\n        { code: '3131', hex: '#00604e' },\n        { code: '3132', hex: '#9cd3cc' },\n        { code: '3133', hex: '#008679' },\n        { code: '3134', hex: '#56b69c' },\n        { code: '3135', hex: '#009a7b' },\n        { code: '3136', hex: '#08926f' },\n        { code: '3137', hex: '#8ec2b3' },\n        { code: '3138', hex: '#3f8878' },\n        { code: '3139', hex: '#176a59' },\n        { code: '3140', hex: '#a2ccaa' },\n        { code: '3141', hex: '#649a73' },\n        { code: '3142', hex: '#2f644b' },\n        { code: '3143', hex: '#4c7c60' },\n        { code: '3144', hex: '#b8cebe' },\n        { code: '3145', hex: '#799a83' },\n        { code: '3146', hex: '#789899' },\n        { code: '3147', hex: '#b4e8b3' },\n        { code: '3148', hex: '#88c78d' },\n        { code: '3149', hex: '#005d2e' },\n        { code: '3150', hex: '#bbd7ae' },\n        { code: '3151', hex: '#6e8a69' },\n        { code: '3152', hex: '#043810' },\n        { code: '3153', hex: '#88ab5c' },\n        { code: '3154', hex: '#1f561f' },\n        { code: '3155', hex: '#6a823d' },\n        { code: '3156', hex: '#486131' },\n        { code: '3157', hex: '#8cbc5c' },\n        { code: '3158', hex: '#015731' },\n        { code: '3159', hex: '#a9c33e' },\n        { code: '3160', hex: '#82ae44' },\n        { code: '3161', hex: '#98a859' },\n        { code: '3162', hex: '#5d5c2b' },\n        { code: '3163', hex: '#4b5035' },\n        { code: '3164', hex: '#343c1d' },\n        { code: '3165', hex: '#bec0a8' },\n        { code: '3166', hex: '#a5a888' },\n        { code: '3167', hex: '#4f6035' },\n        { code: '3168', hex: '#85905c' },\n        { code: '3169', hex: '#9fa146' },\n        { code: '3170', hex: '#777830' },\n        { code: '3171', hex: '#91852a' },\n        { code: '3172', hex: '#837d2f' },\n        { code: '3173', hex: '#746d2b' },\n        { code: '3174', hex: '#635f2f' },\n        { code: '3175', hex: '#a08f4d' },\n        { code: '3176', hex: '#bfa43a' },\n        { code: '3177', hex: '#806c26' },\n        { code: '3178', hex: '#6f5422' },\n        { code: '3179', hex: '#bcae83' },\n        { code: '3180', hex: '#917d4a' },\n        { code: '3181', hex: '#806638' },\n        { code: '3182', hex: '#af8846' },\n        { code: '3183', hex: '#775820' },\n        { code: '3184', hex: '#866226' },\n        { code: '3185', hex: '#b38132' },\n        { code: '3186', hex: '#9b6324' },\n        { code: '3187', hex: '#f5f0df' },\n        { code: '3188', hex: '#af8334' },\n        { code: '3189', hex: '#a47829' },\n        { code: '3190', hex: '#e2b73a' },\n        { code: '3191', hex: '#cc972b' },\n        { code: '3192', hex: '#fce740' },\n        { code: '3193', hex: '#ffe35f' },\n        { code: '3194', hex: '#fad558' },\n        { code: '3195', hex: '#ff9500' },\n        { code: '3196', hex: '#ff7600' },\n        { code: '3197', hex: '#ffb401' },\n        { code: '3198', hex: '#fc7e0c' },\n        { code: '3199', hex: '#ff781e' },\n        { code: '3200', hex: '#f26922' },\n        { code: '3201', hex: '#d45d28' },\n        { code: '3202', hex: '#f38351' },\n        { code: '3203', hex: '#fdc391' },\n        { code: '3204', hex: '#faa463' },\n        { code: '3205', hex: '#c36b29' },\n        { code: '3206', hex: '#9b3b1b' },\n        { code: '3207', hex: '#e8a76d' },\n        { code: '3208', hex: '#f7ca84' },\n        { code: '3209', hex: '#f7b25c' },\n        { code: '3210', hex: '#e59034' },\n        { code: '3211', hex: '#9a3b2d' },\n        { code: '3212', hex: '#892b21' },\n        { code: '3213', hex: '#f2c6b8' },\n        { code: '3214', hex: '#f6e1d0' },\n        { code: '3215', hex: '#b8846c' },\n        { code: '3216', hex: '#8c593e' },\n        { code: '3217', hex: '#9e887f' },\n        { code: '3218', hex: '#c09557' },\n        { code: '3219', hex: '#2d1705' },\n        { code: '3220', hex: '#cdb9a4' },\n        { code: '3221', hex: '#977e65' },\n        { code: '3222', hex: '#684e37' },\n        { code: '3223', hex: '#5c4c2d' },\n        { code: '3224', hex: '#442e10' },\n        { code: '3225', hex: '#e2dfd3' },\n        { code: '3226', hex: '#ada183' },\n        { code: '3227', hex: '#605b45' },\n        { code: '3228', hex: '#3b2e08' },\n        { code: '3229', hex: '#646253' },\n        { code: '3230', hex: '#504f50' },\n        { code: '3231', hex: '#e9e9eb' },\n        { code: '3232', hex: '#545659' },\n        { code: '3233', hex: '#323a39' },\n        { code: '3235', hex: '#93203a' },\n        { code: '3236', hex: '#ecb9bc' },\n        { code: '3237', hex: '#4c1a31' },\n        { code: '3238', hex: '#ab9ac6' },\n        { code: '3239', hex: '#c8d2e6' },\n        { code: '3240', hex: '#453f75' },\n        { code: '3241', hex: '#9aa4c2' },\n        { code: '3242', hex: '#6a6983' },\n        { code: '3243', hex: '#cfe5f0' },\n        { code: '3244', hex: '#d7d477' },\n        { code: '3245', hex: '#bec132' },\n        { code: '3246', hex: '#4a805b' },\n        { code: '3247', hex: '#d6d3c1' },\n        { code: '3248', hex: '#e8b539' },\n        { code: '3249', hex: '#604545' },\n        { code: '3250', hex: '#faf9f5' },\n        { code: '3251', hex: '#dfc0db' },\n        { code: '3252', hex: '#abcf8a' },\n        { code: '3253', hex: '#9d763d' },\n        { code: '3255', hex: '#ced0d5' },\n        { code: '3256', hex: '#adafbb' },\n        { code: '3257', hex: '#8f9096' },\n        { code: '3258', hex: '#5a6067' },\n        { code: '3259', hex: '#565d59' },\n        { code: '3260', hex: '#343936' },\n        { code: '4055', hex: '#aa102e' },\n        { code: '4105', hex: '#b8cea6' },\n        { code: '5135', hex: '#124477' },\n        { code: '5140', hex: '#f9f287' },\n        { code: '5165', hex: '#fbd215' },\n        { code: '6035', hex: '#cae8de' },\n        { code: '6075', hex: '#028063' },\n        { code: '6080', hex: '#ebc7df' },\n        { code: '6115', hex: '#e3ee9f' },\n    ],\n};\n\nvar madeira = {\n    name: 'Madeira',\n    colors: [\n        { code: '101', hex: '#f5f0df' },\n        { code: '102', hex: '#f9f287' },\n        { code: '103', hex: '#fff276' },\n        { code: '104', hex: '#fce740' },\n        { code: '105', hex: '#ffe21a' },\n        { code: '106', hex: '#fbd215' },\n        { code: '107', hex: '#ffb401' },\n        { code: '108', hex: '#ffe35f' },\n        { code: '109', hex: '#ffe276' },\n        { code: '110', hex: '#fdf09c' },\n        { code: '112', hex: '#ffeda9' },\n        { code: '113', hex: '#ffda5a' },\n        { code: '114', hex: '#ffc33a' },\n        { code: '201', hex: '#ff9500' },\n        { code: '202', hex: '#fc7e0c' },\n        { code: '204', hex: '#ff781e' },\n        { code: '205', hex: '#f26922' },\n        { code: '206', hex: '#f06e46' },\n        { code: '207', hex: '#e15729' },\n        { code: '208', hex: '#d45d28' },\n        { code: '209', hex: '#ea592c' },\n        { code: '210', hex: '#e83124' },\n        { code: '211', hex: '#bd2e2e' },\n        { code: '212', hex: '#c24731' },\n        { code: '213', hex: '#e46647' },\n        { code: '214', hex: '#e6876c' },\n        { code: '301', hex: '#f38351' },\n        { code: '302', hex: '#fbbe9d' },\n        { code: '303', hex: '#f69d80' },\n        { code: '304', hex: '#fdbca1' },\n        { code: '305', hex: '#f2c6b8' },\n        { code: '306', hex: '#feebe2' },\n        { code: '307', hex: '#fdc391' },\n        { code: '310', hex: '#d6834d' },\n        { code: '312', hex: '#a74f2a' },\n        { code: '313', hex: '#9b3b1b' },\n        { code: '314', hex: '#8c3b1a' },\n        { code: '401', hex: '#b97161' },\n        { code: '402', hex: '#a06757' },\n        { code: '403', hex: '#c4856f' },\n        { code: '404', hex: '#f4c4c1' },\n        { code: '405', hex: '#db7d73' },\n        { code: '406', hex: '#c36154' },\n        { code: '407', hex: '#bf3e31' },\n        { code: '408', hex: '#fcbbc1' },\n        { code: '409', hex: '#ff988e' },\n        { code: '410', hex: '#f65d5b' },\n        { code: '411', hex: '#e65952' },\n        { code: '412', hex: '#ef4949' },\n        { code: '413', hex: '#ff7a90' },\n        { code: '414', hex: '#e8868c' },\n        { code: '502', hex: '#f9d6dd' },\n        { code: '503', hex: '#eeaeb0' },\n        { code: '504', hex: '#f7b4b7' },\n        { code: '506', hex: '#d55d63' },\n        { code: '507', hex: '#b73745' },\n        { code: '508', hex: '#822741' },\n        { code: '509', hex: '#93203a' },\n        { code: '511', hex: '#98232c' },\n        { code: '513', hex: '#811024' },\n        { code: '514', hex: '#711f2e' },\n        { code: '601', hex: '#4f080c' },\n        { code: '604', hex: '#c33c62' },\n        { code: '605', hex: '#e6849a' },\n        { code: '606', hex: '#f1b3bf' },\n        { code: '607', hex: '#fcb1ba' },\n        { code: '609', hex: '#f08d9f' },\n        { code: '610', hex: '#b33034' },\n        { code: '611', hex: '#d1466c' },\n        { code: '612', hex: '#f9afb7' },\n        { code: '614', hex: '#efa8ca' },\n        { code: '701', hex: '#f19ac2' },\n        { code: '702', hex: '#ce507f' },\n        { code: '703', hex: '#ca0b51' },\n        { code: '705', hex: '#800137' },\n        { code: '706', hex: '#832a58' },\n        { code: '707', hex: '#9f2d6f' },\n        { code: '708', hex: '#b34e8c' },\n        { code: '709', hex: '#c07ba3' },\n        { code: '710', hex: '#ebc7df' },\n        { code: '801', hex: '#d0c8e4' },\n        { code: '802', hex: '#ceb6e4' },\n        { code: '803', hex: '#b698c6' },\n        { code: '805', hex: '#723657' },\n        { code: '806', hex: '#72535a' },\n        { code: '808', hex: '#e9c4c9' },\n        { code: '809', hex: '#c68c9f' },\n        { code: '810', hex: '#824646' },\n        { code: '811', hex: '#85312e' },\n        { code: '812', hex: '#c57e7a' },\n        { code: '813', hex: '#eda6ac' },\n        { code: '814', hex: '#ecd0c4' },\n        { code: '901', hex: '#bcc0d8' },\n        { code: '902', hex: '#ab9ac6' },\n        { code: '903', hex: '#6c5086' },\n        { code: '904', hex: '#190f60' },\n        { code: '905', hex: '#62669a' },\n        { code: '906', hex: '#686d8d' },\n        { code: '907', hex: '#c8d2e6' },\n        { code: '908', hex: '#c1d3df' },\n        { code: '909', hex: '#9fbbd5' },\n        { code: '910', hex: '#6e8db5' },\n        { code: '911', hex: '#445997' },\n        { code: '912', hex: '#2c4180' },\n        { code: '0112', hex: '#f1d863' },\n        { code: '0308', hex: '#e4752b' },\n        { code: '0309', hex: '#ec6810' },\n        { code: '0311', hex: '#fc9749' },\n        { code: '0501', hex: '#fbe2df' },\n        { code: '0508', hex: '#aa102e' },\n        { code: '0711', hex: '#ae99b1' },\n        { code: '0712', hex: '#7c4087' },\n        { code: '0713', hex: '#7b3f6c' },\n        { code: '0714', hex: '#541244' },\n        { code: '0804', hex: '#9f65a4' },\n        { code: '0806', hex: '#947974' },\n        { code: '0907', hex: '#8ea7c0' },\n        { code: '0913', hex: '#181f66' },\n        { code: '1001', hex: '#ccd5da' },\n        { code: '1002', hex: '#a8c6d8' },\n        { code: '1003', hex: '#7d98b5' },\n        { code: '1004', hex: '#4c698c' },\n        { code: '1005', hex: '#2d426b' },\n        { code: '1006', hex: '#194465' },\n        { code: '1007', hex: '#0c1225' },\n        { code: '1009', hex: '#02101c' },\n        { code: '1010', hex: '#12557e' },\n        { code: '1011', hex: '#366390' },\n        { code: '1012', hex: '#5a82a2' },\n        { code: '1014', hex: '#b8dae9' },\n        { code: '1101', hex: '#b8cebe' },\n        { code: '1102', hex: '#0064b0' },\n        { code: '1103', hex: '#0095d3' },\n        { code: '1104', hex: '#d3e9e7' },\n        { code: '1105', hex: '#70a8b3' },\n        { code: '1106', hex: '#6b9cb9' },\n        { code: '1107', hex: '#4f819d' },\n        { code: '1108', hex: '#44929d' },\n        { code: '1109', hex: '#42917f' },\n        { code: '1110', hex: '#7fb5c0' },\n        { code: '1111', hex: '#6eb2a7' },\n        { code: '1112', hex: '#9cd3cc' },\n        { code: '1113', hex: '#8fd3d4' },\n        { code: '1114', hex: '#51c0bb' },\n        { code: '1201', hex: '#8ec2b3' },\n        { code: '1202', hex: '#56b69c' },\n        { code: '1203', hex: '#3f8878' },\n        { code: '1204', hex: '#00765c' },\n        { code: '1205', hex: '#2f644b' },\n        { code: '1206', hex: '#649a73' },\n        { code: '1207', hex: '#a2ccaa' },\n        { code: '1209', hex: '#bbd7ae' },\n        { code: '1210', hex: '#b4e8b3' },\n        { code: '1211', hex: '#abd58b' },\n        { code: '1212', hex: '#88c78d' },\n        { code: '1213', hex: '#58a96b' },\n        { code: '1214', hex: '#40a756' },\n        { code: '1301', hex: '#008c4c' },\n        { code: '1302', hex: '#00793b' },\n        { code: '1304', hex: '#2e9148' },\n        { code: '1305', hex: '#007a3f' },\n        { code: '1306', hex: '#3e9730' },\n        { code: '1307', hex: '#70b145' },\n        { code: '1308', hex: '#bad765' },\n        { code: '1309', hex: '#ccdcbe' },\n        { code: '1310', hex: '#91ab84' },\n        { code: '1311', hex: '#76996c' },\n        { code: '1312', hex: '#1f561f' },\n        { code: '1313', hex: '#3e5a2f' },\n        { code: '1314', hex: '#29542f' },\n        { code: '1401', hex: '#87a462' },\n        { code: '1402', hex: '#88ab5c' },\n        { code: '1403', hex: '#568357' },\n        { code: '1406', hex: '#486131' },\n        { code: '1407', hex: '#6a823d' },\n        { code: '1408', hex: '#78983b' },\n        { code: '1410', hex: '#a9c33e' },\n        { code: '1411', hex: '#82ae44' },\n        { code: '1412', hex: '#759a3e' },\n        { code: '1413', hex: '#4f6c33' },\n        { code: '1414', hex: '#d7d477' },\n        { code: '1501', hex: '#929937' },\n        { code: '1502', hex: '#9fa146' },\n        { code: '1503', hex: '#777830' },\n        { code: '1504', hex: '#798738' },\n        { code: '1505', hex: '#5d5c2b' },\n        { code: '1506', hex: '#343c1d' },\n        { code: '1507', hex: '#635f2f' },\n        { code: '1508', hex: '#4b5035' },\n        { code: '1509', hex: '#85905c' },\n        { code: '1510', hex: '#bac28b' },\n        { code: '1511', hex: '#999c6c' },\n        { code: '1512', hex: '#a5a888' },\n        { code: '1513', hex: '#899770' },\n        { code: '1601', hex: '#2e3d1a' },\n        { code: '1602', hex: '#72885f' },\n        { code: '1604', hex: '#e3ee9f' },\n        { code: '1605', hex: '#9b9648' },\n        { code: '1610', hex: '#d1c66d' },\n        { code: '1611', hex: '#a6a036' },\n        { code: '1612', hex: '#91852a' },\n        { code: '1614', hex: '#746d2b' },\n        { code: '1702', hex: '#8ebea9' },\n        { code: '1703', hex: '#4c7c60' },\n        { code: '1704', hex: '#44684e' },\n        { code: '1705', hex: '#14361e' },\n        { code: '1706', hex: '#3b4f45' },\n        { code: '1707', hex: '#7c999b' },\n        { code: '1708', hex: '#a7bec2' },\n        { code: '1710', hex: '#a4b5c6' },\n        { code: '1711', hex: '#91b4ce' },\n        { code: '1712', hex: '#444d58' },\n        { code: '1713', hex: '#2f3b36' },\n        { code: '1714', hex: '#323a39' },\n        { code: '1802', hex: '#b7bbc7' },\n        { code: '1803', hex: '#c5b6b4' },\n        { code: '1805', hex: '#e3e6dc' },\n        { code: '1807', hex: '#ab979e' },\n        { code: '1808', hex: '#978e87' },\n        { code: '1810', hex: '#4d4c34' },\n        { code: '1811', hex: '#6c6e58' },\n        { code: '1812', hex: '#938e6e' },\n        { code: '1813', hex: '#abafa3' },\n        { code: '1814', hex: '#ceccc5' },\n        { code: '1902', hex: '#b2ae95' },\n        { code: '1903', hex: '#978266' },\n        { code: '1904', hex: '#3b2e08' },\n        { code: '1905', hex: '#74623f' },\n        { code: '1906', hex: '#c3ad9a' },\n        { code: '1907', hex: '#c7baa2' },\n        { code: '1908', hex: '#f6f2eb' },\n        { code: '1909', hex: '#f6e1d0' },\n        { code: '1910', hex: '#c9af93' },\n        { code: '1911', hex: '#b39f8c' },\n        { code: '1912', hex: '#9e887f' },\n        { code: '1913', hex: '#845f2e' },\n        { code: '1914', hex: '#573c2a' },\n        { code: '2001', hex: '#d7d0c2' },\n        { code: '2002', hex: '#ada183' },\n        { code: '2003', hex: '#442e10' },\n        { code: '2004', hex: '#2d1705' },\n        { code: '2005', hex: '#3b2811' },\n        { code: '2007', hex: '#502f1b' },\n        { code: '2008', hex: '#775437' },\n        { code: '2009', hex: '#b78237' },\n        { code: '2010', hex: '#c4863a' },\n        { code: '2011', hex: '#c27d45' },\n        { code: '2012', hex: '#f7ca84' },\n        { code: '2013', hex: '#e8aa5f' },\n        { code: '2102', hex: '#e8d290' },\n        { code: '2103', hex: '#b19563' },\n        { code: '2104', hex: '#ba8225' },\n        { code: '2105', hex: '#866226' },\n        { code: '2106', hex: '#5c4c2d' },\n        { code: '2107', hex: '#806638' },\n        { code: '2108', hex: '#917d4a' },\n        { code: '2109', hex: '#af8846' },\n        { code: '2110', hex: '#9c8c4a' },\n        { code: '2112', hex: '#806c26' },\n        { code: '2113', hex: '#775820' },\n        { code: '2114', hex: '#6f5422' },\n        { code: '2201', hex: '#957b2f' },\n        { code: '2202', hex: '#bfa43a' },\n        { code: '2203', hex: '#cc972b' },\n        { code: '2204', hex: '#d59c4c' },\n        { code: '2205', hex: '#ececd2' },\n        { code: '2206', hex: '#cab751' },\n        { code: '2207', hex: '#eed7a1' },\n        { code: '2209', hex: '#c4944f' },\n        { code: '2210', hex: '#a47829' },\n        { code: '2211', hex: '#e59034' },\n        { code: '2214', hex: '#9b6324' },\n        { code: '2301', hex: '#e8a76d' },\n        { code: '2302', hex: '#e6973f' },\n        { code: '2304', hex: '#74401d' },\n        { code: '2305', hex: '#934d29' },\n        { code: '2306', hex: '#c36b29' },\n        { code: '2307', hex: '#f7b25c' },\n        { code: '2308', hex: '#f2e0ce' },\n        { code: '2309', hex: '#ebbc9a' },\n        { code: '2311', hex: '#804133' },\n        { code: '2312', hex: '#c49a87' },\n        { code: '2314', hex: '#f8eedc' },\n        { code: '2402', hex: '#faf9f5' },\n        { code: '2404', hex: '#e2d1b2' },\n        { code: '2501', hex: '#702623' },\n        { code: '2502', hex: '#9d3030' },\n        { code: '2503', hex: '#fbccb8' },\n        { code: '2504', hex: '#e8edf3' },\n        { code: '2506', hex: '#296e87' },\n        { code: '2507', hex: '#00604e' },\n        { code: '2508', hex: '#6b8084' },\n        { code: '2509', hex: '#ddb442' },\n        { code: '2510', hex: '#e2b73a' },\n        { code: '2512', hex: '#fffcdc' },\n        { code: '2514', hex: '#d19d2f' },\n        { code: '2601', hex: '#b8846c' },\n        { code: '2602', hex: '#653c1e' },\n        { code: '2603', hex: '#4f6035' },\n        { code: '2605', hex: '#dfb090' },\n        { code: '2606', hex: '#6f2e35' },\n        { code: '2607', hex: '#4e1622' },\n        { code: '2608', hex: '#5f1f2c' },\n        { code: '2609', hex: '#912644' },\n        { code: '2610', hex: '#e6bcc3' },\n        { code: '2611', hex: '#c7bac7' },\n        { code: '2612', hex: '#ccc1d0' },\n        { code: '2702', hex: '#073563' },\n        { code: '2703', hex: '#bec132' },\n        { code: '2704', hex: '#005d2e' },\n        { code: '2705', hex: '#028063' },\n        { code: '2706', hex: '#008679' },\n        { code: 'Ecru', hex: '#f2efe5' },\n        { code: '1714, 1809', hex: '#504f50' },\n    ],\n};\n\nvar palettes = Object.freeze([dmc, anchor, gamma, madeira]);\n\nexports.AnimatedSchemaCanvas = AnimatedSchemaCanvas;\nexports.Animation = Animation;\nexports.BezierCurve = BezierCurve;\nexports.BezierCurveRGB = BezierCurveRGB;\nexports.BezierCurveRGBA = BezierCurveRGBA;\nexports.CELL_SIZE = CELL_SIZE;\nexports.Chunk = Chunk;\nexports.ContinuousAnimation = ContinuousAnimation;\nexports.EventEmitter = EventEmitter;\nexports.MAX_HEIGHT = MAX_HEIGHT;\nexports.MAX_WIDTH = MAX_WIDTH;\nexports.RGBAColor = RGBAColor;\nexports.RGBColor = RGBColor;\nexports.SchemaCanvas = SchemaCanvas;\nexports.SchemaViewProvider = SchemaViewProvider;\nexports.Vector2 = Vector2;\nexports.Vector2Int = Vector2Int;\nexports.Vector3 = Vector3;\nexports.Vector4 = Vector4;\nexports.WorkCanvas = WorkCanvas;\nexports.WorkViewProvider = WorkViewProvider;\nexports.cellsEquals = cellsEquals;\nexports.convertSize = convertSize;\nexports.createSchema = createSchema;\nexports.createSchemaImage = createSchemaImage;\nexports.createWork = createWork;\nexports.createWorkImage = createWorkImage;\nexports.downloadSchema = downloadSchema;\nexports.getContrastColor = getContrastColor;\nexports.palettes = palettes;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar require$$0 = require('react');\nvar core = require('@fancywork/core');\nvar antd = require('antd');\nvar icons = require('@ant-design/icons');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar require$$0__default = /*#__PURE__*/_interopDefaultLegacy(require$$0);\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar jsxRuntime = {exports: {}};\n\nvar reactJsxRuntime_production_min = {};\n\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n/** @license React v17.0.2\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nvar f=require$$0__default[\"default\"],g=60103;reactJsxRuntime_production_min.Fragment=60107;if(\"function\"===typeof Symbol&&Symbol.for){var h=Symbol.for;g=h(\"react.element\");reactJsxRuntime_production_min.Fragment=h(\"react.fragment\");}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,k){var b,d={},e=null,l=null;void 0!==k&&(e=\"\"+k);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(l=a.ref);for(b in a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return {$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;\n\nvar reactJsxRuntime_development = {};\n\n/** @license React v17.0.2\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n(function (exports) {\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function() {\n\nvar React = require$$0__default[\"default\"];\nvar _assign = objectAssign;\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types. If there is no native Symbol\n// nor polyfill, then a plain number is used for performance.\nvar REACT_ELEMENT_TYPE = 0xeac7;\nvar REACT_PORTAL_TYPE = 0xeaca;\nexports.Fragment = 0xeacb;\nvar REACT_STRICT_MODE_TYPE = 0xeacc;\nvar REACT_PROFILER_TYPE = 0xead2;\nvar REACT_PROVIDER_TYPE = 0xeacd;\nvar REACT_CONTEXT_TYPE = 0xeace;\nvar REACT_FORWARD_REF_TYPE = 0xead0;\nvar REACT_SUSPENSE_TYPE = 0xead1;\nvar REACT_SUSPENSE_LIST_TYPE = 0xead8;\nvar REACT_MEMO_TYPE = 0xead3;\nvar REACT_LAZY_TYPE = 0xead4;\nvar REACT_BLOCK_TYPE = 0xead9;\nvar REACT_SERVER_BLOCK_TYPE = 0xeada;\nvar REACT_FUNDAMENTAL_TYPE = 0xead5;\nvar REACT_DEBUG_TRACING_MODE_TYPE = 0xeae1;\nvar REACT_LEGACY_HIDDEN_TYPE = 0xeae3;\n\nif (typeof Symbol === 'function' && Symbol.for) {\n  var symbolFor = Symbol.for;\n  REACT_ELEMENT_TYPE = symbolFor('react.element');\n  REACT_PORTAL_TYPE = symbolFor('react.portal');\n  exports.Fragment = symbolFor('react.fragment');\n  REACT_STRICT_MODE_TYPE = symbolFor('react.strict_mode');\n  REACT_PROFILER_TYPE = symbolFor('react.profiler');\n  REACT_PROVIDER_TYPE = symbolFor('react.provider');\n  REACT_CONTEXT_TYPE = symbolFor('react.context');\n  REACT_FORWARD_REF_TYPE = symbolFor('react.forward_ref');\n  REACT_SUSPENSE_TYPE = symbolFor('react.suspense');\n  REACT_SUSPENSE_LIST_TYPE = symbolFor('react.suspense_list');\n  REACT_MEMO_TYPE = symbolFor('react.memo');\n  REACT_LAZY_TYPE = symbolFor('react.lazy');\n  REACT_BLOCK_TYPE = symbolFor('react.block');\n  REACT_SERVER_BLOCK_TYPE = symbolFor('react.server.block');\n  REACT_FUNDAMENTAL_TYPE = symbolFor('react.fundamental');\n  symbolFor('react.scope');\n  symbolFor('react.opaque.id');\n  REACT_DEBUG_TRACING_MODE_TYPE = symbolFor('react.debug_trace_mode');\n  symbolFor('react.offscreen');\n  REACT_LEGACY_HIDDEN_TYPE = symbolFor('react.legacy_hidden');\n}\n\nvar MAYBE_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    printWarning('error', format, args);\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    }\n\n    var argsWithFormat = args.map(function (item) {\n      return '' + item;\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// Filter certain DOM attributes (e.g. src, href) if their values are empty strings.\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\n\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === exports.Fragment || type === REACT_PROFILER_TYPE || type === REACT_DEBUG_TRACING_MODE_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || type === REACT_LEGACY_HIDDEN_TYPE || enableScopeAPI ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_BLOCK_TYPE || type[0] === REACT_SERVER_BLOCK_TYPE) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var functionName = innerType.displayName || innerType.name || '';\n  return outerType.displayName || (functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName);\n}\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n}\n\nfunction getComponentName(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  {\n    if (typeof type.tag === 'number') {\n      error('Received an unexpected object in getComponentName(). ' + 'This is likely a bug in React. Please file an issue.');\n    }\n  }\n\n  if (typeof type === 'function') {\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case exports.Fragment:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n        return getContextName(context) + '.Consumer';\n\n      case REACT_PROVIDER_TYPE:\n        var provider = type;\n        return getContextName(provider._context) + '.Provider';\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        return getComponentName(type.type);\n\n      case REACT_BLOCK_TYPE:\n        return getComponentName(type._render);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentName(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n    }\n  }\n\n  return null;\n}\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: _assign({}, props, {\n          value: prevLog\n        }),\n        info: _assign({}, props, {\n          value: prevInfo\n        }),\n        warn: _assign({}, props, {\n          value: prevWarn\n        }),\n        error: _assign({}, props, {\n          value: prevError\n        }),\n        group: _assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: _assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: _assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, source, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if (!fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  var control;\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n\n  try {\n    // This should throw.\n    if (construct) {\n      // Something should be setting the props in the constructor.\n      var Fake = function () {\n        throw Error();\n      }; // $FlowFixMe\n\n\n      Object.defineProperty(Fake.prototype, 'props', {\n        set: function () {\n          // We use a throwing setter instead of frozen or non-writable props\n          // because that won't throw in a non-strict mode function.\n          throw Error();\n        }\n      });\n\n      if (typeof Reflect === 'object' && Reflect.construct) {\n        // We construct a different control for this case to include any extra\n        // frames added by the construct call.\n        try {\n          Reflect.construct(Fake, []);\n        } catch (x) {\n          control = x;\n        }\n\n        Reflect.construct(fn, [], Fake);\n      } else {\n        try {\n          Fake.call();\n        } catch (x) {\n          control = x;\n        }\n\n        fn.call(Fake.prototype);\n      }\n    } else {\n      try {\n        throw Error();\n      } catch (x) {\n        control = x;\n      }\n\n      fn();\n    }\n  } catch (sample) {\n    // This is inlined manually because closure doesn't do it for us.\n    if (sample && control && typeof sample.stack === 'string') {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sample.stack.split('\\n');\n      var controlLines = control.stack.split('\\n');\n      var s = sampleLines.length - 1;\n      var c = controlLines.length - 1;\n\n      while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n        // We expect at least one stack frame to be shared.\n        // Typically this will be the root most one. However, stack frames may be\n        // cut off due to maximum stack limits. In this case, one maybe cut off\n        // earlier than the other. We assume that the sample is longer or the same\n        // and there for cut off earlier. So we should find the root most frame in\n        // the sample somewhere in the control.\n        c--;\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at ');\n\n                {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, source, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, source, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, source, ownerFn);\n\n      case REACT_BLOCK_TYPE:\n        return describeFunctionComponentFrame(type._render);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), source, ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar loggedTypeFailures = {};\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction checkPropTypes(typeSpecs, values, location, componentName, element) {\n  {\n    // $FlowFixMe This is okay but Flow doesn't know it.\n    var has = Function.call.bind(Object.prototype.hasOwnProperty);\n\n    for (var typeSpecName in typeSpecs) {\n      if (has(typeSpecs, typeSpecName)) {\n        var error$1 = void 0; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error$1 = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED');\n        } catch (ex) {\n          error$1 = ex;\n        }\n\n        if (error$1 && !(error$1 instanceof Error)) {\n          setCurrentlyValidatingElement(element);\n\n          error('%s: type specification of %s' + ' `%s` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a %s. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).', componentName || 'React class', location, typeSpecName, typeof error$1);\n\n          setCurrentlyValidatingElement(null);\n        }\n\n        if (error$1 instanceof Error && !(error$1.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error$1.message] = true;\n          setCurrentlyValidatingElement(element);\n\n          error('Failed %s type: %s', location, error$1.message);\n\n          setCurrentlyValidatingElement(null);\n        }\n      }\n    }\n  }\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar RESERVED_PROPS = {\n  key: true,\n  ref: true,\n  __self: true,\n  __source: true\n};\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentName(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentName(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingRef = function () {\n      if (!specialPropRefWarningShown) {\n        specialPropRefWarningShown = true;\n\n        error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingRef.isReactWarning = true;\n    Object.defineProperty(props, 'ref', {\n      get: warnAboutAccessingRef,\n      configurable: true\n    });\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nvar ReactElement = function (type, key, ref, self, source, owner, props) {\n  var element = {\n    // This tag allows us to uniquely identify this as a React Element\n    $$typeof: REACT_ELEMENT_TYPE,\n    // Built-in properties that belong on the element\n    type: type,\n    key: key,\n    ref: ref,\n    props: props,\n    // Record the component responsible for creating this element.\n    _owner: owner\n  };\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // self and source are DEV only properties.\n\n    Object.defineProperty(element, '_self', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: self\n    }); // Two elements created in two different places should be considered\n    // equal for testing purposes and therefore we hide it from enumeration.\n\n    Object.defineProperty(element, '_source', {\n      configurable: false,\n      enumerable: false,\n      writable: false,\n      value: source\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV(type, config, maybeKey, source, self) {\n  {\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      ref = config.ref;\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && !RESERVED_PROPS.hasOwnProperty(propName)) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    return ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n  }\n}\n\nvar ReactCurrentOwner$1 = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame$1 = ReactSharedInternals.ReactDebugCurrentFrame;\n\nfunction setCurrentlyValidatingElement$1(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, element._source, owner ? owner.type : null);\n      ReactDebugCurrentFrame$1.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame$1.setExtraStackFrame(null);\n    }\n  }\n}\n\nvar propTypesMisspellWarningShown;\n\n{\n  propTypesMisspellWarningShown = false;\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\nfunction isValidElement(object) {\n  {\n    return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner$1.current) {\n      var name = getComponentName(ReactCurrentOwner$1.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n\nfunction getSourceInfoErrorAddendum(source) {\n  {\n    if (source !== undefined) {\n      var fileName = source.fileName.replace(/^.*[\\\\\\/]/, '');\n      var lineNumber = source.lineNumber;\n      return '\\n\\nCheck your code at ' + fileName + ':' + lineNumber + '.';\n    }\n\n    return '';\n  }\n}\n/**\n * Warn if there's no key explicitly set on dynamic arrays of children or\n * object keys are not valid. This allows us to keep track of children between\n * updates.\n */\n\n\nvar ownerHasKeyUseWarning = {};\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = typeof parentType === 'string' ? parentType : parentType.displayName || parentType.name;\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner$1.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentName(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement$1(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement$1(null);\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object') {\n      return;\n    }\n\n    if (Array.isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else if (node) {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Given an element, validate that its props follow the propTypes definition,\n * provided by the type.\n *\n * @param {ReactElement} element\n */\n\n\nfunction validatePropTypes(element) {\n  {\n    var type = element.type;\n\n    if (type === null || type === undefined || typeof type === 'string') {\n      return;\n    }\n\n    var propTypes;\n\n    if (typeof type === 'function') {\n      propTypes = type.propTypes;\n    } else if (typeof type === 'object' && (type.$$typeof === REACT_FORWARD_REF_TYPE || // Note: Memo only checks outer props here.\n    // Inner props are checked in the reconciler.\n    type.$$typeof === REACT_MEMO_TYPE)) {\n      propTypes = type.propTypes;\n    } else {\n      return;\n    }\n\n    if (propTypes) {\n      // Intentionally inside to avoid triggering lazy initializers:\n      var name = getComponentName(type);\n      checkPropTypes(propTypes, element.props, 'prop', name, element);\n    } else if (type.PropTypes !== undefined && !propTypesMisspellWarningShown) {\n      propTypesMisspellWarningShown = true; // Intentionally inside to avoid triggering lazy initializers:\n\n      var _name = getComponentName(type);\n\n      error('Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?', _name || 'Unknown');\n    }\n\n    if (typeof type.getDefaultProps === 'function' && !type.getDefaultProps.isReactClassApproved) {\n      error('getDefaultProps is only used on classic React.createClass ' + 'definitions. Use a static property named `defaultProps` instead.');\n    }\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement$1(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement$1(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement$1(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement$1(null);\n    }\n  }\n}\n\nfunction jsxWithValidation(type, props, key, isStaticChildren, source, self) {\n  {\n    var validType = isValidElementType(type); // We warn in this case but don't throw. We expect the element creation to\n    // succeed and there will likely be errors in render.\n\n    if (!validType) {\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var sourceInfo = getSourceInfoErrorAddendum(source);\n\n      if (sourceInfo) {\n        info += sourceInfo;\n      } else {\n        info += getDeclarationErrorAddendum();\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (Array.isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentName(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    }\n\n    var element = jsxDEV(type, props, key, source, self); // The result can be nullish if a mock or a custom function is used.\n    // TODO: Drop this when these are no longer allowed as the type argument.\n\n    if (element == null) {\n      return element;\n    } // Skip key warning if the type isn't valid since our key validation logic\n    // doesn't expect a non-string/function type and can throw confusing errors.\n    // We don't want exception behavior to differ between dev and prod.\n    // (Rendering will throw with a helpful message and as soon as the type is\n    // fixed, the key warnings will appear.)\n\n\n    if (validType) {\n      var children = props.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (Array.isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    }\n\n    if (type === exports.Fragment) {\n      validateFragmentProps(element);\n    } else {\n      validatePropTypes(element);\n    }\n\n    return element;\n  }\n} // These two functions exist to still get child warnings in dev\n// even with the prod transform. This means that jsxDEV is purely\n// opt-in behavior for better messages but that we won't stop\n// giving you warnings if you use production apis.\n\nfunction jsxWithValidationStatic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, true);\n  }\n}\nfunction jsxWithValidationDynamic(type, props, key) {\n  {\n    return jsxWithValidation(type, props, key, false);\n  }\n}\n\nvar jsx =  jsxWithValidationDynamic ; // we may want to special case jsxs internally to take advantage of static children.\n// for now we can ship identical prod functions\n\nvar jsxs =  jsxWithValidationStatic ;\n\nexports.jsx = jsx;\nexports.jsxs = jsxs;\n  })();\n}\n}(reactJsxRuntime_development));\n\nif (process.env.NODE_ENV === 'production') {\n  jsxRuntime.exports = reactJsxRuntime_production_min;\n} else {\n  jsxRuntime.exports = reactJsxRuntime_development;\n}\n\nvar ColorsTable = function (_a) {\n    var palette = _a.palette, symbolResolver = _a.symbolResolver, stitchCountResolver = _a.stitchCountResolver, rest = __rest(_a, [\"palette\", \"symbolResolver\", \"stitchCountResolver\"]);\n    var otherPalettes = require$$0.useMemo(function () {\n        var copy = __spreadArray([], core.palettes);\n        var index = copy.findIndex(function (value) { return value.name === palette.name; });\n        copy.splice(index, 1);\n        return copy;\n    }, [palette]);\n    var data = require$$0.useMemo(function () {\n        var getAnalogs = function (hex) {\n            var analogs = {};\n            otherPalettes.forEach(function (palette) {\n                var _a, _b;\n                analogs[palette.name] =\n                    (_b = (_a = palette.colors.find(function (color) {\n                        return color.hex === hex;\n                    })) === null || _a === void 0 ? void 0 : _a.code) !== null && _b !== void 0 ? _b : '-';\n            });\n            return analogs;\n        };\n        return palette.colors.map(function (color) {\n            return {\n                symbol: symbolResolver ? symbolResolver(color.code) : undefined,\n                hex: color.hex,\n                code: color.code,\n                stitchCount: stitchCountResolver\n                    ? stitchCountResolver(color.code)\n                    : undefined,\n                analogs: getAnalogs(color.hex),\n            };\n        });\n    }, [palette, symbolResolver, stitchCountResolver, otherPalettes]);\n    var symbolColumn = symbolResolver\n        ? [\n            {\n                title: 'Symbol',\n                dataIndex: 'symbol',\n            },\n        ]\n        : [];\n    var stitchCountColumn = stitchCountResolver\n        ? [\n            {\n                title: 'Stitch count',\n                dataIndex: 'stitchCount',\n                render: function (value) {\n                    return jsxRuntime.exports.jsx(antd.Typography.Text, __assign({ ellipsis: true }, { children: value }), void 0);\n                },\n            },\n        ]\n        : [];\n    var columns = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], symbolColumn), [\n        {\n            title: 'Color',\n            dataIndex: 'hex',\n            render: function (value) {\n                return (jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment, { children: [jsxRuntime.exports.jsx(\"div\", { style: {\n                                display: 'inline-block',\n                                marginRight: '5px',\n                                width: '10px',\n                                height: '10px',\n                                backgroundColor: value,\n                            } }, void 0), value] }, void 0));\n            },\n        }\n    ]), stitchCountColumn), [\n        {\n            title: palette.name,\n            dataIndex: 'code',\n        },\n        {\n            title: 'Analogs',\n            children: otherPalettes.map(function (palette) {\n                return {\n                    title: palette.name,\n                    dataIndex: ['analogs', palette.name],\n                };\n            }),\n        },\n    ]);\n    return jsxRuntime.exports.jsx(antd.Table, __assign({ columns: columns, dataSource: data, rowKey: \"code\" }, rest), void 0);\n};\n\nvar DownloadButton = function (_a) {\n    var schemaLoader = _a.schemaLoader, props = __rest(_a, [\"schemaLoader\"]);\n    var _b = require$$0.useState(false), visible = _b[0], setVisible = _b[1];\n    return (jsxRuntime.exports.jsx(antd.Popover, __assign({ trigger: \"click\", visible: visible, onVisibleChange: setVisible, content: jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment, { children: [jsxRuntime.exports.jsx(antd.Button, __assign({ type: \"link\", onClick: function () { return __awaiter(void 0, void 0, void 0, function () {\n                        var schema;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [4 /*yield*/, schemaLoader()];\n                                case 1:\n                                    schema = _a.sent();\n                                    core.downloadSchema(schema, true);\n                                    setVisible(false);\n                                    return [2 /*return*/];\n                            }\n                        });\n                    }); } }, { children: \"Download minimized\" }), void 0), jsxRuntime.exports.jsx(antd.Button, __assign({ type: \"link\", onClick: function () { return __awaiter(void 0, void 0, void 0, function () {\n                        var schema;\n                        return __generator(this, function (_a) {\n                            switch (_a.label) {\n                                case 0: return [4 /*yield*/, schemaLoader()];\n                                case 1:\n                                    schema = _a.sent();\n                                    core.downloadSchema(schema, false);\n                                    setVisible(false);\n                                    return [2 /*return*/];\n                            }\n                        });\n                    }); } }, { children: \"Download formatted\" }), void 0)] }, void 0) }, { children: jsxRuntime.exports.jsx(antd.Button, __assign({}, props, { onClick: undefined }, { children: \"Download Schema\" }), void 0) }), void 0));\n};\n\nvar SchemaInfoTable = function (_a) {\n    var metadata = _a.metadata, rest = __rest(_a, [\"metadata\"]);\n    var columns = [\n        {\n            title: 'Property',\n            dataIndex: 'property',\n            render: function (value) {\n                return jsxRuntime.exports.jsx(antd.Typography.Text, __assign({ ellipsis: true }, { children: value }), void 0);\n            },\n        },\n        {\n            title: 'Value',\n            dataIndex: 'value',\n            render: function (value) {\n                return jsxRuntime.exports.jsx(antd.Typography.Text, __assign({ ellipsis: true }, { children: value }), void 0);\n            },\n        },\n    ];\n    var size = {\n        width: metadata.canvasMetadata.width,\n        height: metadata.canvasMetadata.height,\n    };\n    var sizeInCentimeters = core.convertSize(size.width, size.height, {\n        from: 'stitch',\n        to: 'centimeter',\n        stitchesPerInch: metadata.canvasMetadata.stitchesPerInch,\n    });\n    var sizeInInches = core.convertSize(size.width, size.height, {\n        from: 'stitch',\n        to: 'inch',\n        stitchesPerInch: metadata.canvasMetadata.stitchesPerInch,\n    });\n    var round = function (number) {\n        return Math.round(number * 100) / 100;\n    };\n    var data = [\n        {\n            property: 'Schema name',\n            value: metadata.name,\n        },\n        {\n            property: 'Width',\n            value: size.width + \" stitch, \" + round(sizeInCentimeters.width) + \" cm, \" + round(sizeInInches.width) + \" inch\",\n        },\n        {\n            property: 'Height',\n            value: size.height + \" stitch, \" + round(sizeInCentimeters.height) + \" cm, \" + round(sizeInInches.height) + \" inch\",\n        },\n        {\n            property: 'Stitches per inch',\n            value: metadata.canvasMetadata.stitchesPerInch,\n        },\n        {\n            property: 'Palette name',\n            value: metadata.paletteMetadata.name,\n        },\n        {\n            property: 'Number of colors',\n            value: metadata.paletteMetadata.colorsCount,\n        },\n        {\n            property: 'Number of stitches',\n            value: metadata.stitchCount,\n        },\n    ];\n    return (jsxRuntime.exports.jsx(antd.Table, __assign({ columns: columns, dataSource: data, rowKey: \"property\" }, rest), void 0));\n};\n\nvar styles$4 = {\"root\":\"layout_root__2qhRB\",\"header\":\"layout_header__28NdO\",\"main\":\"layout_main__2Moup\"};\n\nvar Layout = function (_a) {\n    var style = _a.style, headerChildren = _a.headerChildren, children = _a.children, rest = __rest(_a, [\"style\", \"headerChildren\", \"children\"]);\n    return (jsxRuntime.exports.jsxs(\"div\", __assign({ className: styles$4.root, style: style }, { children: [jsxRuntime.exports.jsx(antd.PageHeader, __assign({}, rest, { className: styles$4.header }, { children: headerChildren }), void 0), jsxRuntime.exports.jsx(\"main\", __assign({ className: styles$4.main }, { children: children }), void 0)] }), void 0));\n};\n\nvar styles$3 = {\"wrapper\":\"schema-viewer_wrapper__1gzp0\",\"root\":\"schema-viewer_root__2WuE4\"};\n\nvar SchemaViewer = function (_a) {\n    var schema = _a.schema, onBack = _a.onBack;\n    var rootRef = require$$0.useRef(null);\n    require$$0.useEffect(function () {\n        if (rootRef.current === null) {\n            throw new Error('No root');\n        }\n        var provider = new core.SchemaViewProvider(schema);\n        var schemaCanvas = new core.SchemaCanvas(provider, rootRef.current);\n        return function () {\n            schemaCanvas.destroy();\n        };\n    }, [schema]);\n    return (jsxRuntime.exports.jsx(\"div\", __assign({ className: styles$3.wrapper }, { children: jsxRuntime.exports.jsx(Layout, __assign({ title: schema.metadata.name, subTitle: \"view only\", onBack: onBack }, { children: jsxRuntime.exports.jsx(\"div\", { className: styles$3.root, ref: rootRef }, void 0) }), void 0) }), void 0));\n};\n\nvar WorkInfoTable = function (_a) {\n    var metadata = _a.metadata, rest = __rest(_a, [\"metadata\"]);\n    var columns = [\n        {\n            title: 'Property',\n            dataIndex: 'property',\n            render: function (value) {\n                return jsxRuntime.exports.jsx(antd.Typography.Text, __assign({ ellipsis: true }, { children: value }), void 0);\n            },\n        },\n        {\n            title: 'Value',\n            dataIndex: 'value',\n            render: function (value) {\n                return jsxRuntime.exports.jsx(antd.Typography.Text, __assign({ ellipsis: true }, { children: value }), void 0);\n            },\n        },\n    ];\n    var schemaMetadata = metadata.schemaMetadata;\n    var size = {\n        width: schemaMetadata.canvasMetadata.width,\n        height: schemaMetadata.canvasMetadata.height,\n    };\n    var sizeInCentimeters = core.convertSize(size.width, size.height, {\n        from: 'stitch',\n        to: 'centimeter',\n        stitchesPerInch: schemaMetadata.canvasMetadata.stitchesPerInch,\n    });\n    var sizeInInches = core.convertSize(size.width, size.height, {\n        from: 'stitch',\n        to: 'inch',\n        stitchesPerInch: schemaMetadata.canvasMetadata.stitchesPerInch,\n    });\n    var round = function (number) {\n        return Math.round(number * 100) / 100;\n    };\n    var data = [\n        {\n            property: 'Name',\n            value: metadata.name,\n        },\n        {\n            property: 'Schema name',\n            value: schemaMetadata.name,\n        },\n        {\n            property: 'Width',\n            value: size.width + \" stitch, \" + round(sizeInCentimeters.width) + \" cm, \" + round(sizeInInches.width) + \" inch\",\n        },\n        {\n            property: 'Height',\n            value: size.height + \" stitch, \" + round(sizeInCentimeters.height) + \" cm, \" + round(sizeInInches.height) + \" inch\",\n        },\n        {\n            property: 'Stitches per inch',\n            value: schemaMetadata.canvasMetadata.stitchesPerInch,\n        },\n        {\n            property: 'Palette name',\n            value: schemaMetadata.paletteMetadata.name,\n        },\n        {\n            property: 'Number of colors',\n            value: schemaMetadata.paletteMetadata.colorsCount,\n        },\n        {\n            property: 'Number of stitches',\n            value: schemaMetadata.stitchCount,\n        },\n        {\n            property: 'Embroidered stitches',\n            value: metadata.stitchEmbroideredCount,\n        },\n    ];\n    return (jsxRuntime.exports.jsx(antd.Table, __assign({ columns: columns, dataSource: data, rowKey: \"property\" }, rest), void 0));\n};\n\nvar WorkProgress = function (_a) {\n    var metadata = _a.metadata, props = __rest(_a, [\"metadata\"]);\n    var percent = Math.floor((metadata.stitchEmbroideredCount / metadata.schemaMetadata.stitchCount) *\n        100);\n    return jsxRuntime.exports.jsx(antd.Progress, __assign({ percent: percent }, props), void 0);\n};\n\nvar useBreakpoint$1 = {};\n\nvar interopRequireDefault = {exports: {}};\n\n(function (module) {\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n}(interopRequireDefault));\n\nvar slicedToArray = {exports: {}};\n\nvar arrayWithHoles = {exports: {}};\n\n(function (module) {\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n}(arrayWithHoles));\n\nvar iterableToArrayLimit = {exports: {}};\n\n(function (module) {\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n}(iterableToArrayLimit));\n\nvar unsupportedIterableToArray = {exports: {}};\n\nvar arrayLikeToArray = {exports: {}};\n\n(function (module) {\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n}(arrayLikeToArray));\n\n(function (module) {\nvar arrayLikeToArray$1 = arrayLikeToArray.exports;\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray$1(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray$1(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n}(unsupportedIterableToArray));\n\nvar nonIterableRest = {exports: {}};\n\n(function (module) {\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n}(nonIterableRest));\n\n(function (module) {\nvar arrayWithHoles$1 = arrayWithHoles.exports;\n\nvar iterableToArrayLimit$1 = iterableToArrayLimit.exports;\n\nvar unsupportedIterableToArray$1 = unsupportedIterableToArray.exports;\n\nvar nonIterableRest$1 = nonIterableRest.exports;\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles$1(arr) || iterableToArrayLimit$1(arr, i) || unsupportedIterableToArray$1(arr, i) || nonIterableRest$1();\n}\n\nmodule.exports = _slicedToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n}(slicedToArray));\n\nvar responsiveObserve = {};\n\nvar defineProperty = {exports: {}};\n\n(function (module) {\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n}(defineProperty));\n\nvar _extends = {exports: {}};\n\n(function (module) {\nfunction _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n}(_extends));\n\n(function (exports) {\n\nvar _interopRequireDefault = interopRequireDefault.exports;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.responsiveMap = exports.responsiveArray = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(defineProperty.exports);\n\nvar _extends3 = _interopRequireDefault(_extends.exports);\n\nvar responsiveArray = ['xxl', 'xl', 'lg', 'md', 'sm', 'xs'];\nexports.responsiveArray = responsiveArray;\nvar responsiveMap = {\n  xs: '(max-width: 575px)',\n  sm: '(min-width: 576px)',\n  md: '(min-width: 768px)',\n  lg: '(min-width: 992px)',\n  xl: '(min-width: 1200px)',\n  xxl: '(min-width: 1600px)'\n};\nexports.responsiveMap = responsiveMap;\nvar subscribers = new Map();\nvar subUid = -1;\nvar screens = {};\nvar responsiveObserve = {\n  matchHandlers: {},\n  dispatch: function dispatch(pointMap) {\n    screens = pointMap;\n    subscribers.forEach(function (func) {\n      return func(screens);\n    });\n    return subscribers.size >= 1;\n  },\n  subscribe: function subscribe(func) {\n    if (!subscribers.size) this.register();\n    subUid += 1;\n    subscribers.set(subUid, func);\n    func(screens);\n    return subUid;\n  },\n  unsubscribe: function unsubscribe(token) {\n    subscribers[\"delete\"](token);\n    if (!subscribers.size) this.unregister();\n  },\n  unregister: function unregister() {\n    var _this = this;\n\n    Object.keys(responsiveMap).forEach(function (screen) {\n      var matchMediaQuery = responsiveMap[screen];\n      var handler = _this.matchHandlers[matchMediaQuery];\n      handler === null || handler === void 0 ? void 0 : handler.mql.removeListener(handler === null || handler === void 0 ? void 0 : handler.listener);\n    });\n    subscribers.clear();\n  },\n  register: function register() {\n    var _this2 = this;\n\n    Object.keys(responsiveMap).forEach(function (screen) {\n      var matchMediaQuery = responsiveMap[screen];\n\n      var listener = function listener(_ref) {\n        var matches = _ref.matches;\n\n        _this2.dispatch((0, _extends3[\"default\"])((0, _extends3[\"default\"])({}, screens), (0, _defineProperty2[\"default\"])({}, screen, matches)));\n      };\n\n      var mql = window.matchMedia(matchMediaQuery);\n      mql.addListener(listener);\n      _this2.matchHandlers[matchMediaQuery] = {\n        mql: mql,\n        listener: listener\n      };\n      listener(mql);\n    });\n  }\n};\nvar _default = responsiveObserve;\nexports[\"default\"] = _default;\n}(responsiveObserve));\n\n(function (exports) {\n\nvar _interopRequireDefault = interopRequireDefault.exports;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(slicedToArray.exports);\n\nvar _react = require$$0__default[\"default\"];\n\nvar _responsiveObserve = _interopRequireDefault(responsiveObserve);\n\nfunction useBreakpoint() {\n  var _useState = (0, _react.useState)({}),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      screens = _useState2[0],\n      setScreens = _useState2[1];\n\n  (0, _react.useEffect)(function () {\n    var token = _responsiveObserve[\"default\"].subscribe(function (supportScreens) {\n      setScreens(supportScreens);\n    });\n\n    return function () {\n      return _responsiveObserve[\"default\"].unsubscribe(token);\n    };\n  }, []);\n  return screens;\n}\n\nvar _default = useBreakpoint;\nexports[\"default\"] = _default;\n}(useBreakpoint$1));\n\nvar useBreakpoint = /*@__PURE__*/getDefaultExportFromCjs(useBreakpoint$1);\n\nvar styles$2 = {\"container\":\"colors-list_container__xKeW7\",\"leftBorder\":\"colors-list_left-border__2baM_\",\"rightBorder\":\"colors-list_right-border__1O2WK\",\"content\":\"colors-list_content__h40oO\",\"color\":\"colors-list_color__Csa8W\",\"selected\":\"colors-list_selected__3rM5Z\",\"success\":\"colors-list_success__38kgw\"};\n\nvar ColorsList = function (_a) {\n    var className = _a.className, palette = _a.palette, viewProvider = _a.viewProvider, colorCode = _a.colorCode, onColorClick = _a.onColorClick;\n    var _b = require$$0.useState(false), leftBorderVisible = _b[0], setLeftBorderVisible = _b[1];\n    var _c = require$$0.useState(false), rightBorderVisible = _c[0], setRightBorderVisible = _c[1];\n    var divRef = require$$0.useRef(null);\n    var colors = require$$0.useMemo(function () {\n        return palette.colors.map(function (color) {\n            return {\n                code: color.code,\n                hex: color.hex,\n                symbol: viewProvider.getColorSymbol(color.code),\n                symbolColor: core.getContrastColor(color.hex),\n            };\n        });\n    }, [viewProvider, palette]);\n    var updateBorders = require$$0.useCallback(function () {\n        if (divRef.current) {\n            setLeftBorderVisible(divRef.current.scrollLeft !== 0);\n            setRightBorderVisible(divRef.current.scrollLeft + divRef.current.clientWidth <\n                divRef.current.scrollWidth);\n        }\n    }, []);\n    require$$0.useEffect(function () {\n        updateBorders();\n        var listener = function () {\n            updateBorders();\n        };\n        window.addEventListener('resize', listener);\n        return function () {\n            window.removeEventListener('resize', listener);\n        };\n    }, [updateBorders]);\n    return (jsxRuntime.exports.jsx(\"div\", __assign({ className: styles$2.container + \" \" + className + \" \" + (leftBorderVisible ? styles$2.leftBorder : '') + \" \" + (rightBorderVisible ? styles$2.rightBorder : '') }, { children: jsxRuntime.exports.jsx(\"div\", __assign({ ref: divRef, className: styles$2.content, onScroll: updateBorders }, { children: colors.map(function (_a) {\n                var code = _a.code, hex = _a.hex, symbol = _a.symbol, symbolColor = _a.symbolColor;\n                var statistics = viewProvider.getColorStatistics(code);\n                if (statistics.cellsCount === statistics.embroideredCellsCount) {\n                    return (jsxRuntime.exports.jsx(\"div\", __assign({ className: styles$2.color + \" \" + styles$2.success }, { children: jsxRuntime.exports.jsx(icons.CheckOutlined, {}, void 0) }), code));\n                }\n                else {\n                    return (jsxRuntime.exports.jsx(\"div\", __assign({ className: styles$2.color + \" \" + (code === colorCode ? styles$2.selected : ''), style: {\n                            backgroundColor: hex,\n                            color: symbolColor,\n                        }, onClick: function () {\n                            onColorClick(code);\n                        } }, { children: symbol }), code));\n                }\n            }) }), void 0) }), void 0));\n};\n\nvar styles$1 = {\"wrapper\":\"work-viewer_wrapper__psGUJ\",\"root\":\"work-viewer_root__2HGf_\",\"headerContent\":\"work-viewer_header-content__H8t2_\",\"colors\":\"work-viewer_colors__185qe\"};\n\nvar styles = {\"button\":\"work-viewer-menu_button__1o-J6\",\"result\":\"work-viewer-menu_result__3mM5l\"};\n\nvar WorkViewerMenu = function (_a) {\n    var work = _a.work, viewProvider = _a.viewProvider, onSave = _a.onSave;\n    var _b = require$$0.useState(false), visible = _b[0], setVisible = _b[1];\n    var _c = require$$0.useState(false), infoModalVisible = _c[0], setInfoModalVisible = _c[1];\n    var _d = require$$0.useState(false), colorsModalVisible = _d[0], setColorsModalVisible = _d[1];\n    var _e = require$$0.useState(false), resultModalVisible = _e[0], setResultModalVisible = _e[1];\n    var _f = require$$0.useState(), result = _f[0], setResult = _f[1];\n    var _g = require$$0.useState(false), loading = _g[0], setLoading = _g[1];\n    var menu = (jsxRuntime.exports.jsxs(antd.Menu, __assign({ disabled: loading, onClick: function (event) { return __awaiter(void 0, void 0, void 0, function () {\n            var _a, image, error_1;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = event.key;\n                        switch (_a) {\n                            case 'save': return [3 /*break*/, 1];\n                            case 'info': return [3 /*break*/, 2];\n                            case 'colors': return [3 /*break*/, 3];\n                            case 'result': return [3 /*break*/, 4];\n                        }\n                        return [3 /*break*/, 10];\n                    case 1:\n                        onSave && onSave();\n                        return [3 /*break*/, 10];\n                    case 2:\n                        setInfoModalVisible(true);\n                        return [3 /*break*/, 10];\n                    case 3:\n                        setColorsModalVisible(true);\n                        return [3 /*break*/, 10];\n                    case 4:\n                        setLoading(true);\n                        _b.label = 5;\n                    case 5:\n                        _b.trys.push([5, 7, 8, 9]);\n                        return [4 /*yield*/, core.createWorkImage(work)];\n                    case 6:\n                        image = _b.sent();\n                        setResult(image);\n                        setResultModalVisible(true);\n                        return [3 /*break*/, 9];\n                    case 7:\n                        error_1 = _b.sent();\n                        if (error_1 instanceof Error) {\n                            antd.message.error(error_1.message);\n                        }\n                        else {\n                            antd.message.error('Unknown error');\n                        }\n                        return [3 /*break*/, 9];\n                    case 8:\n                        setLoading(false);\n                        return [7 /*endfinally*/];\n                    case 9: return [3 /*break*/, 10];\n                    case 10:\n                        setVisible(false);\n                        return [2 /*return*/];\n                }\n            });\n        }); } }, { children: [onSave ? (jsxRuntime.exports.jsx(antd.Menu.Item, __assign({ className: styles.button }, { children: \"Save\" }), \"save\")) : null, jsxRuntime.exports.jsx(antd.Menu.Item, __assign({ className: styles.button }, { children: \"Info\" }), \"info\"), jsxRuntime.exports.jsx(antd.Menu.Item, __assign({ className: styles.button }, { children: \"Colors\" }), \"colors\"), jsxRuntime.exports.jsx(antd.Menu.Item, __assign({ className: styles.button }, { children: jsxRuntime.exports.jsx(antd.Spin, __assign({ spinning: loading }, { children: \"Result\" }), void 0) }), \"result\")] }), void 0));\n    return (jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment, { children: [jsxRuntime.exports.jsx(antd.Modal, __assign({ title: \"Info\", visible: infoModalVisible, width: 550, onCancel: function () {\n                    setInfoModalVisible(false);\n                }, footer: null, centered: true }, { children: jsxRuntime.exports.jsx(WorkInfoTable, { metadata: work.metadata, scroll: { x: true }, pagination: false }, void 0) }), void 0), jsxRuntime.exports.jsx(antd.Modal, __assign({ visible: colorsModalVisible, width: 1200, title: \"Colors\", onCancel: function () {\n                    setColorsModalVisible(false);\n                }, footer: null, centered: true }, { children: jsxRuntime.exports.jsx(ColorsTable, { palette: work.schema.palette, symbolResolver: function (code) {\n                        var _a;\n                        return (_a = viewProvider.getColorSymbol(code)) !== null && _a !== void 0 ? _a : 'none';\n                    }, stitchCountResolver: function (code) {\n                        var statistics = viewProvider.getColorStatistics(code);\n                        return statistics.embroideredCellsCount + \"/\" + statistics.cellsCount;\n                    }, scroll: { x: true }, pagination: { simple: true } }, void 0) }), void 0), jsxRuntime.exports.jsx(antd.Modal, __assign({ visible: resultModalVisible, width: 1200, title: \"Result\", onCancel: function () {\n                    setResultModalVisible(false);\n                }, footer: null, centered: true }, { children: jsxRuntime.exports.jsx(\"div\", __assign({ className: styles.result }, { children: jsxRuntime.exports.jsx(antd.Image, { alt: \"Result\", preview: false, src: result }, void 0) }), void 0) }), void 0), jsxRuntime.exports.jsx(antd.Dropdown, __assign({ overlay: menu, visible: visible, onVisibleChange: function (value) {\n                    setVisible(value);\n                }, trigger: ['click'] }, { children: jsxRuntime.exports.jsx(antd.Button, __assign({ style: {\n                        border: 'none',\n                        padding: 0,\n                    } }, { children: jsxRuntime.exports.jsx(icons.EllipsisOutlined, { style: {\n                            fontSize: 20,\n                            verticalAlign: 'top',\n                        } }, void 0) }), void 0) }), void 0)] }, void 0));\n};\n\nvar WorkViewer = function (_a) {\n    var work = _a.work, autoSaveTimeout = _a.autoSaveTimeout, onBack = _a.onBack, onSave = _a.onSave;\n    var rootRef = require$$0.useRef(null);\n    var viewProvider = require$$0.useMemo(function () { return new core.WorkViewProvider(work); }, [work]);\n    var _b = require$$0.useState(), canvas = _b[0], setCanvas = _b[1];\n    var sm = useBreakpoint().sm;\n    var _c = require$$0.useState(false), eraseMode = _c[0], setEraseMode = _c[1];\n    var _d = require$$0.useState(), penColorCode = _d[0], setPenColorCode = _d[1];\n    var _e = require$$0.useState(), forceUpdate = _e[1];\n    var _f = require$$0.useState(false), saving = _f[0], setSaving = _f[1];\n    var _g = require$$0.useState(true), saveResult = _g[0], setSaveResult = _g[1];\n    var _h = require$$0.useState(false), changed = _h[0], setChanged = _h[1];\n    var changedCells = require$$0.useRef(new Set());\n    require$$0.useEffect(function () {\n        if (rootRef.current === null) {\n            throw new Error('No root');\n        }\n        var workCanvas = new core.WorkCanvas(viewProvider, rootRef.current);\n        setCanvas(workCanvas);\n        var update = function (_a) {\n            var cell = _a.data;\n            forceUpdate({});\n            setChanged(true);\n            changedCells.current.add(cell);\n        };\n        workCanvas.addEventListener('cellEmbroidered', update);\n        workCanvas.addEventListener('cellErased', update);\n        return function () {\n            workCanvas.destroy();\n            setCanvas(undefined);\n        };\n    }, [viewProvider]);\n    require$$0.useEffect(function () {\n        if (canvas) {\n            canvas.setIsEraseMode(eraseMode);\n            canvas.setPenColorCode(penColorCode);\n        }\n    }, [canvas, eraseMode, penColorCode]);\n    var save = require$$0.useCallback(function () { return __awaiter(void 0, void 0, void 0, function () {\n        var changes, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!onSave) {\n                        return [2 /*return*/];\n                    }\n                    setSaving(true);\n                    setChanged(false);\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, 4, 5]);\n                    changes = changedCells.current;\n                    changedCells.current = new Set();\n                    return [4 /*yield*/, onSave(changes)];\n                case 2:\n                    _a.sent();\n                    setSaveResult(true);\n                    return [3 /*break*/, 5];\n                case 3:\n                    error_1 = _a.sent();\n                    setSaveResult(false);\n                    if (error_1 instanceof Error) {\n                        antd.message.error(error_1.message);\n                    }\n                    else {\n                        antd.message.error('Unknown error');\n                    }\n                    return [3 /*break*/, 5];\n                case 4:\n                    setSaving(false);\n                    return [7 /*endfinally*/];\n                case 5: return [2 /*return*/];\n            }\n        });\n    }); }, [onSave]);\n    require$$0.useEffect(function () {\n        if (changed && autoSaveTimeout) {\n            var timeout_1 = setTimeout(function () {\n                save();\n            }, autoSaveTimeout);\n            return function () {\n                clearTimeout(timeout_1);\n            };\n        }\n    }, [changed, save, autoSaveTimeout]);\n    return (jsxRuntime.exports.jsx(\"div\", __assign({ className: styles$1.wrapper }, { children: jsxRuntime.exports.jsx(Layout, __assign({ tags: saving ? (jsxRuntime.exports.jsx(antd.Tag, __assign({ color: \"blue\" }, { children: \"Saving...\" }), void 0)) : changed ? (jsxRuntime.exports.jsx(antd.Tag, __assign({ color: \"orange\" }, { children: \"Changed\" }), void 0)) : saveResult ? (jsxRuntime.exports.jsx(antd.Tag, __assign({ color: \"green\" }, { children: \"Saved\" }), void 0)) : (jsxRuntime.exports.jsx(antd.Tag, __assign({ color: \"red\" }, { children: \"Error\" }), void 0)), title: work.metadata.name, onBack: onBack, headerChildren: jsxRuntime.exports.jsxs(\"div\", __assign({ className: styles$1.headerContent }, { children: [jsxRuntime.exports.jsx(ColorsList, { className: styles$1.colors, palette: work.schema.palette, viewProvider: viewProvider, colorCode: penColorCode, onColorClick: function (colorCode) {\n                            if (colorCode === penColorCode) {\n                                if (canvas) {\n                                    canvas.scrollToNotEmbroidered(colorCode);\n                                }\n                            }\n                            else {\n                                setPenColorCode(colorCode);\n                            }\n                        } }, void 0), jsxRuntime.exports.jsx(WorkProgress, { className: styles$1.progress, metadata: work.metadata, type: \"circle\", width: 65 }, void 0)] }), void 0), extra: jsxRuntime.exports.jsxs(jsxRuntime.exports.Fragment, { children: [sm ? (jsxRuntime.exports.jsx(antd.Button, __assign({ type: \"primary\", onClick: save, icon: jsxRuntime.exports.jsx(icons.SaveOutlined, {}, void 0) }, { children: \"Save\" }), void 0)) : null, jsxRuntime.exports.jsx(antd.Button, { type: eraseMode ? 'default' : 'dashed', danger: eraseMode, onClick: function () {\n                            setEraseMode(function (value) { return !value; });\n                        }, icon: jsxRuntime.exports.jsx(icons.ClearOutlined, {}, void 0) }, void 0), jsxRuntime.exports.jsx(WorkViewerMenu, { work: work, onSave: sm ? undefined : save, viewProvider: viewProvider }, void 0)] }, void 0) }, { children: jsxRuntime.exports.jsx(\"div\", { className: styles$1.root, ref: rootRef }, void 0) }), void 0) }), void 0));\n};\n\nexports.ColorsTable = ColorsTable;\nexports.DownloadButton = DownloadButton;\nexports.SchemaInfoTable = SchemaInfoTable;\nexports.SchemaViewer = SchemaViewer;\nexports.WorkInfoTable = WorkInfoTable;\nexports.WorkProgress = WorkProgress;\nexports.WorkViewer = WorkViewer;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"generator-result_root__3gdKQ\",\"firstBlock\":\"generator-result_first-block__1N71T\",\"secondBlock\":\"generator-result_second-block__37poh\",\"row\":\"generator-result_row__Dg3NC\",\"image\":\"generator-result_image__3yD7j\",\"info\":\"generator-result_info__3JLl-\",\"inputNumber\":\"generator-result_input-number__1isIl\",\"button\":\"generator-result_button__2Yf0R\"};"],"sourceRoot":""}