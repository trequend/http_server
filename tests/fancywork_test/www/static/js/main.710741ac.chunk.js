/*! For license information please see main.710741ac.chunk.js.LICENSE.txt */
(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{101:function(e,t,n){e.exports={root:"palette-settings_root__CHhgN",row:"palette-settings_row__2E-0B",image:"palette-settings_image__1otLG",form:"palette-settings_form__26wX2",inputNumber:"palette-settings_input-number__10vZN",button:"palette-settings_button__23O0l",checkbox:"palette-settings_checkbox__1nQl9"}},102:function(e,t,n){e.exports={root:"size-settings_root__35ULr",row:"size-settings_row__2exzR",image:"size-settings_image__1Q-J0",form:"size-settings_form__r7Tbp",inputNumber:"size-settings_input-number__UWDdt",button:"size-settings_button__2KOu6",checkbox:"size-settings_checkbox__1rNw-"}},118:function(e,t,n){e.exports={root:"home-page_root__2p-WD",header:"home-page_header__37e_g",logo:"home-page_logo__1-ADE",main:"home-page_main__2mEp1",menu:"home-page_menu__p8WAF",buttons:"home-page_buttons__3D31S",footer:"home-page_footer__3yVqw"}},119:function(e,t,n){e.exports={root:"schema-card_root__2yyOY",image:"schema-card_image__GXfev",table:"schema-card_table__2pudq",cardButton:"schema-card_card-button__1BqaE",cardButtons:"schema-card_card-buttons__22De_"}},120:function(e,t,n){e.exports={root:"work-card_root__2BTh9",image:"work-card_image__wu5RE",table:"work-card_table__1e2g9",cardButton:"work-card_card-button__1qbyz",cardButtons:"work-card_card-buttons__1px2O",schema:"work-card_schema__3s_wH",progress:"work-card_progress__1qtzL"}},132:function(e,t,n){e.exports={root:"general-settings_root__jL5Hk",row:"general-settings_row__WX39F",image:"general-settings_image__1OnjX",form:"general-settings_form__1FIwg",inputNumber:"general-settings_input-number__1B9eW",button:"general-settings_button__1OGEx"}},248:function(e,t,n){e.exports={root:"basic-layout_root__1ofBD",header:"basic-layout_header__1r4-b",main:"basic-layout_main__du0pa"}},265:function(e,t,n){e.exports={root:"fullscreen-spin_root__34oAU",icon:"fullscreen-spin_icon__1TBUf"}},266:function(e,t,n){e.exports={button:"create-work-modal_button__1f14O",tag:"create-work-modal_tag__3t0GP"}},267:function(e,t,n){e.exports={button:"change-schema-name-modal_button__2t5w0",alert:"change-schema-name-modal_alert__fJfz4"}},321:function(e,t,n){e.exports={message:"choose-image_message__3uyag"}},322:function(e,t,n){e.exports={root:"error-404-page_root__30VWX"}},323:function(e,t,n){e.exports={search:"schemas-page_search__ngXj4"}},324:function(e,t,n){e.exports={search:"works-page_search__3yG6V"}},325:function(e,t,n){e.exports={button:"change-work-name-modal_button__2wzce"}},327:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o=n(53),c=function(e,t){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},c(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function d(e,t,n,r){return new(n||(n=Promise))((function(o,c){function i(e){try{s(r.next(e))}catch(t){c(t)}}function a(e){try{s(r.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}s((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,o,c,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}var h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)};function l(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var c=arguments[t],i=0,a=c.length;i<a;i++,o++)r[o]=c[i];return r}var f=Object.keys,x=Array.isArray,p="undefined"!==typeof self?self:"undefined"!==typeof window?window:e;function b(e,t){return"object"!==typeof t||f(t).forEach((function(n){e[n]=t[n]})),e}"undefined"===typeof Promise||p.Promise||(p.Promise=Promise);var v=Object.getPrototypeOf,m={}.hasOwnProperty;function y(e,t){return m.call(e,t)}function g(e,t){"function"===typeof t&&(t=t(v(e))),f(t).forEach((function(n){_(e,n,t[n])}))}var w=Object.defineProperty;function _(e,t,n,r){w(e,t,b(n&&y(n,"get")&&"function"===typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function j(e){return{from:function(t){return e.prototype=Object.create(t.prototype),_(e.prototype,"constructor",e),{extend:g.bind(null,e.prototype)}}}}var O=Object.getOwnPropertyDescriptor;function C(e,t){var n;return O(e,t)||(n=v(e))&&C(n,t)}var S=[].slice;function k(e,t,n){return S.call(e,t,n)}function E(e,t){return t(e)}function P(e){if(!e)throw new Error("Assertion Failed")}function T(e){p.setImmediate?r(e):setTimeout(e,0)}function I(e,t){return e.reduce((function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e}),{})}function R(e,t){if(y(e,t))return e[t];if(!t)return e;if("string"!==typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var c=R(e,t[r]);n.push(c)}return n}var i=t.indexOf(".");if(-1!==i){var a=e[t.substr(0,i)];return void 0===a?void 0:R(a,t.substr(i+1))}}function N(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!==typeof t&&"length"in t){P("string"!==typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)N(e,t[r],n[r])}else{var c=t.indexOf(".");if(-1!==c){var i=t.substr(0,c),a=t.substr(c+1);if(""===a)void 0===n?x(e)&&!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=n;else{var s=e[i];s||(s=e[i]={}),N(s,a,n)}}else void 0===n?x(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function A(e,t){"string"===typeof t?N(e,t,void 0):"length"in t&&[].map.call(t,(function(t){N(e,t,void 0)}))}function M(e){var t={};for(var n in e)y(e,n)&&(t[n]=e[n]);return t}var D=[].concat;function B(e){return D.apply([],e)}var F="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(B([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return p[e]})),L=F.map((function(e){return p[e]})),z=I(F,(function(e){return[e,!0]}));function K(e){if(!e||"object"!==typeof e)return e;var t;if(x(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(K(e[n]))}else if(L.indexOf(e.constructor)>=0)t=e;else for(var o in t=e.constructor?Object.create(e.constructor.prototype):{},e)y(e,o)&&(t[o]=K(e[o]));return t}var U={}.toString;function q(e){return U.call(e).slice(8,-1)}var V=function e(t,n){return"Array"===n?""+t.map((function(t){return e(t,q(t))})):"ArrayBuffer"===n?""+new Uint8Array(t):"Date"===n?t.getTime():ArrayBuffer.isView(t)?""+new Uint8Array(t.buffer):t};function W(e,t,n,r){return n=n||{},r=r||"",f(e).forEach((function(o){if(y(t,o)){var c=e[o],i=t[o];if("object"===typeof c&&"object"===typeof i&&c&&i){var a=q(c),s=q(i);a===s?z[a]?V(c,a)!==V(i,s)&&(n[r+o]=t[o]):W(c,i,n,r+o+"."):n[r+o]=t[o]}else c!==i&&(n[r+o]=t[o])}else n[r+o]=void 0})),f(t).forEach((function(o){y(e,o)||(n[r+o]=t[o])})),n}var H="undefined"!==typeof Symbol&&Symbol.iterator,G=H?function(e){var t;return null!=e&&(t=e[H])&&t.apply(e)}:function(){return null},Y={};function X(e){var t,n,r,o;if(1===arguments.length){if(x(e))return e.slice();if(this===Y&&"string"===typeof e)return[e];if(o=G(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"===typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var J="undefined"!==typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},$="undefined"!==typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Q(e,t){$=e,Z=t}var Z=function(){return!0},ee=!new Error("").stack;function te(){if(ee)try{throw new Error}catch(e){return e}return new Error}function ne(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Z).map((function(e){return"\n"+e})).join("")):""}var re=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],oe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(re),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function ie(e,t){this._e=te(),this.name=e,this.message=t}function ae(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function se(e,t,n,r){this._e=te(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=ae(e,t)}function de(e,t){this._e=te(),this.name="BulkError",this.failures=t,this.message=ae(e,t)}j(ie).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ne(this._e,2))}},toString:function(){return this.name+": "+this.message}}),j(se).from(ie),j(de).from(ie);var ue=oe.reduce((function(e,t){return e[t]=t+"Error",e}),{}),he=ie,le=oe.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=te(),this.name=n,e?"string"===typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"===typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=ce[t]||n,this.inner=null)}return j(r).from(he),e[t]=r,e}),{});le.Syntax=SyntaxError,le.Type=TypeError,le.Range=RangeError;var fe=re.reduce((function(e,t){return e[t+"Error"]=le[t],e}),{});var xe=oe.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=le[t]),e}),{});function pe(){}function be(e){return e}function ve(e,t){return null==e||e===be?t:function(n){return t(e(n))}}function me(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ye(e,t){return e===pe?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?me(r,this.onsuccess):r),o&&(this.onerror=this.onerror?me(o,this.onerror):o),void 0!==c?c:n}}function ge(e,t){return e===pe?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?me(n,this.onsuccess):n),r&&(this.onerror=this.onerror?me(r,this.onerror):r)}}function we(e,t){return e===pe?t:function(n){var r=e.apply(this,arguments);b(n,r);var o=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?me(o,this.onsuccess):o),c&&(this.onerror=this.onerror?me(c,this.onerror):c),void 0===r?void 0===i?void 0:i:b(r,i)}}function _e(e,t){return e===pe?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function je(e,t){return e===pe?t:function(){var n=e.apply(this,arguments);if(n&&"function"===typeof n.then){for(var r=this,o=arguments.length,c=new Array(o);o--;)c[o]=arguments[o];return n.then((function(){return t.apply(r,c)}))}return t.apply(this,arguments)}}xe.ModifyError=se,xe.DexieError=ie,xe.BulkError=de;var Oe={},Ce="undefined"===typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"===typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),Se=Ce[0],ke=Ce[1],Ee=Ce[2],Pe=ke&&ke.then,Te=Se&&Se.constructor,Ie=!!Ee,Re=!1,Ne=Ee?function(){Ee.then(nt)}:p.setImmediate?r.bind(null,nt):p.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){nt(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(nt,0)},Ae=function(e,t){qe.push([e,t]),De&&(Ne(),De=!1)},Me=!0,De=!0,Be=[],Fe=[],Le=null,ze=be,Ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:kt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{kt(e[0],e[1])}catch(t){}}))}},Ue=Ke,qe=[],Ve=0,We=[];function He(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=pe,this._lib=!1;var t=this._PSD=Ue;if($&&(this._stackHolder=te(),this._prev=null,this._numPrev=0),"function"!==typeof e){if(e!==Oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Je(this,this._value))}this._state=null,this._value=null,++t.ref,Xe(this,e)}var Ge={get:function(){var e=Ue,t=lt;function n(n,r){var o=this,c=!e.global&&(e!==Ue||t!==lt),i=c&&!bt(),a=new He((function(t,a){Qe(o,new Ye(Ot(n,e,c,i),Ot(r,e,c,i),t,a,e))}));return $&&tt(a,this),a}return n.prototype=Oe,n},set:function(e){_(this,"then",e&&e.prototype===Oe?Ge:{get:function(){return e},set:Ge.set})}};function Ye(e,t,n,r,o){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o}function Xe(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&rt();t&&"function"===typeof t.then?Xe(e,(function(e,n){t instanceof He?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,$e(e)),n&&ot()}}),Je.bind(null,e))}catch(n){Je(e,n)}}function Je(e,t){if(Fe.push(t),null===e._state){var n=e._lib&&rt();t=ze(t),e._state=!1,e._value=t,$&&null!==t&&"object"===typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}((function(){var n=C(t,"stack");t._promise=e,_(t,"stack",{get:function(){return Re?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Be.some((function(t){return t._value===e._value}))||Be.push(e)}(e),$e(e),n&&ot()}}function $e(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Qe(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===Ve&&(++Ve,Ae((function(){0===--Ve&&ct()}),[]))}function Qe(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ve,Ae(Ze,[n,e,t])}else e._listeners.push(t)}function Ze(e,t,n){try{Le=t;var r,o=t._value;t._state?r=e(o):(Fe.length&&(Fe=[]),r=e(o),-1===Fe.indexOf(o)&&function(e){var t=Be.length;for(;t;)if(Be[--t]._value===e._value)return void Be.splice(t,1)}(t)),n.resolve(r)}catch(c){n.reject(c)}finally{Le=null,0===--Ve&&ct(),--n.psd.ref||n.psd.finalize()}}function et(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var o,c,i=e._value;null!=i?(o=i.name||"Error",c=i.message||i,r=ne(i,0)):(o=i,c=""),t.push(o+(c?": "+c:"")+r)}return $&&((r=ne(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&et(e._prev,t,n)),t}function tt(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function nt(){rt()&&ot()}function rt(){var e=Me;return Me=!1,De=!1,e}function ot(){var e,t,n;do{for(;qe.length>0;)for(e=qe,qe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(qe.length>0);Me=!0,De=!0}function ct(){var e=Be;Be=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=We.slice(0),n=t.length;n;)t[--n]()}function it(e){return new He(Oe,!1,e)}function at(e,t){var n=Ue;return function(){var r=rt(),o=Ue;try{return gt(n,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{gt(o,!1),r&&ot()}}}g(He.prototype,{then:Ge,_then:function(e,t){Qe(this,new Ye(null,null,e,t,Ue))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"===typeof t?this.then(null,(function(e){return e instanceof t?n(e):it(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):it(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),it(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Re=!0;var e=et(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Re=!1}}},timeout:function(e,t){var n=this;return e<1/0?new He((function(r,o){var c=setTimeout((function(){return o(new le.Timeout(t))}),e);n.then(r,o).finally(clearTimeout.bind(null,c))})):this}}),"undefined"!==typeof Symbol&&Symbol.toStringTag&&_(He.prototype,Symbol.toStringTag,"Dexie.Promise"),Ke.env=wt(),g(He,{all:function(){var e=X.apply(null,arguments).map(vt);return new He((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(o,c){return He.resolve(o).then((function(n){e[c]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof He)return e;if(e&&"function"===typeof e.then)return new He((function(t,n){e.then(t,n)}));var t=new He(Oe,!0,e);return tt(t,Le),t},reject:it,race:function(){var e=X.apply(null,arguments).map(vt);return new He((function(t,n){e.map((function(e){return He.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Ue},set:function(e){return Ue=e}},totalEchoes:{get:function(){return lt}},newPSD:xt,usePSD:_t,scheduler:{get:function(){return Ae},set:function(e){Ae=e}},rejectionMapper:{get:function(){return ze},set:function(e){ze=e}},follow:function(e,t){return new He((function(n,r){return xt((function(t,n){var r=Ue;r.unhandleds=[],r.onunhandled=n,r.finalize=me((function(){var e=this;!function(e){function t(){e(),We.splice(We.indexOf(t),1)}We.push(t),++Ve,Ae((function(){0===--Ve&&ct()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),Te&&(Te.allSettled&&_(He,"allSettled",(function(){var e=X.apply(null,arguments).map(vt);return new He((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,o){return He.resolve(e).then((function(e){return r[o]={status:"fulfilled",value:e}}),(function(e){return r[o]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),Te.any&&"undefined"!==typeof AggregateError&&_(He,"any",(function(){var e=X.apply(null,arguments).map(vt);return new He((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach((function(e,c){return He.resolve(e).then((function(e){return t(e)}),(function(e){o[c]=e,--r||n(new AggregateError(o))}))}))}))})));var st={awaits:0,echoes:0,id:0},dt=0,ut=[],ht=0,lt=0,ft=0;function xt(e,t,n,r){var o=Ue,c=Object.create(o);c.parent=o,c.ref=0,c.global=!1,c.id=++ft;var i=Ke.env;c.env=Ie?{Promise:He,PromiseProp:{value:He,configurable:!0,writable:!0},all:He.all,race:He.race,allSettled:He.allSettled,any:He.any,resolve:He.resolve,reject:He.reject,nthen:Ct(i.nthen,c),gthen:Ct(i.gthen,c)}:{},t&&b(c,t),++o.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=_t(c,e,n,r);return 0===c.ref&&c.finalize(),a}function pt(){return st.id||(st.id=++dt),++st.awaits,st.echoes+=100,st.id}function bt(){return!!st.awaits&&(0===--st.awaits&&(st.id=0),st.echoes=100*st.awaits,!0)}function vt(e){return st.echoes&&e&&e.constructor===Te?(pt(),e.then((function(e){return bt(),e}),(function(e){return bt(),Et(e)}))):e}function mt(e){++lt,st.echoes&&0!==--st.echoes||(st.echoes=st.id=0),ut.push(Ue),gt(e,!0)}function yt(){var e=ut[ut.length-1];ut.pop(),gt(e,!1)}function gt(e,t){var n=Ue;if((t?!st.echoes||ht++&&e===Ue:!ht||--ht&&e===Ue)||jt(t?mt.bind(null,e):yt),e!==Ue&&(Ue=e,n===Ke&&(Ke.env=wt()),Ie)){var r=Ke.env.Promise,o=e.env;ke.then=o.nthen,r.prototype.then=o.gthen,(n.global||e.global)&&(Object.defineProperty(p,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function wt(){var e=p.Promise;return Ie?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(p,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:ke.then,gthen:e.prototype.then}:{}}function _t(e,t,n,r,o){var c=Ue;try{return gt(e,!0),t(n,r,o)}finally{gt(c,!1)}}function jt(e){Pe.call(Se,e)}function Ot(e,t,n,r){return"function"!==typeof e?e:function(){var o=Ue;n&&pt(),gt(t,!0);try{return e.apply(this,arguments)}finally{gt(o,!1),r&&jt(bt)}}}function Ct(e,t){return function(n,r){return e.call(this,Ot(n,t),Ot(r,t))}}-1===(""+Pe).indexOf("[native code]")&&(pt=bt=pe);var St="unhandledrejection";function kt(e,t){var n;try{n=t.onuncatched(e)}catch(c){}if(!1!==n)try{var r,o={promise:t,reason:e};if(p.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(St,!0,!0),b(r,o)):p.CustomEvent&&b(r=new CustomEvent(St,{detail:o}),o),r&&p.dispatchEvent&&(dispatchEvent(r),!p.PromiseRejectionEvent&&p.onunhandledrejection))try{p.onunhandledrejection(r)}catch(i){}$&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(c){}}var Et=He.reject;function Pt(e,t,n,r){if(e._state.openComplete||Ue.letThrough){var o=e._createTransaction(t,n,e._dbSchema);try{o.create()}catch(c){return Et(c)}return o._promise(t,(function(e,t){return xt((function(){return Ue.trans=o,r(e,t,o)}))})).then((function(e){return o._completion.then((function(){return e}))}))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Et(new le.DatabaseClosed);e.open().catch(pe)}return e._state.dbReadyPromise.then((function(){return Pt(e,t,n,r)}))}var Tt="3.0.3",It=String.fromCharCode(65535),Rt=-1/0,Nt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",At="String expected.",Mt=[],Dt="undefined"!==typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Bt=Dt,Ft=Dt,Lt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},zt="__dbnames",Kt="readonly",Ut="readwrite";function qt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Vt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wt(e){return function(t){return void 0===R(t,e)&&A(t=K(t),e),t}}var Ht=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Ue.trans,o=this.name;function c(e,n,r){if(!r.schema[o])throw new le.NotFound("Table "+o+" not part of transaction");return t(r.idbtrans,r)}var i=rt();try{return r&&r.db===this.db?r===Ue.trans?r._promise(e,c,n):xt((function(){return r._promise(e,c,n)}),{trans:r,transless:Ue.transless||Ue}):Pt(this.db,e,[this.name],c)}finally{i&&ot()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"===typeof e)return new this.db.WhereClause(this,e);if(x(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=f(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==It)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&$&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,o=this.db._deps.indexedDB;function c(e,t){try{return 0===o.cmp(e,t)}catch(n){return!1}}var i=t.reduce((function(t,n){var o=t[0],i=t[1],a=r[n],s=e[n];return[o||a,o||!a?qt(i,a&&a.multi?function(e){var t=R(e,n);return x(t)&&t.some((function(e){return c(s,e)}))}:function(e){return c(s,R(e,n))}):i]}),[null,null]),a=i[0],s=i[1];return a?this.where(a.name).equals(e[a.keyPath]).filter(s):n?this.filter(s):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,x(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(y(t,r))try{n[r]=t[r]}catch(o){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){b(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,c=r.keyPath,i=e;return c&&o&&(i=Wt(c)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]})})).then((function(e){return e.numFailures?He.reject(e.failures[0]):e.lastResult})).then((function(t){if(c)try{N(e,c,t)}catch(n){}return t}))},e.prototype.update=function(e,t){if("object"!==typeof t||x(t))throw new le.InvalidArgument("Modifications must be an object.");if("object"!==typeof e||x(e))return this.where(":id").equals(e).modify(t);f(t).forEach((function(n){N(e,n,t[n])}));var n=R(e,this.schema.primKey.keyPath);return void 0===n?Et(new le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,c=r.keyPath,i=e;return c&&o&&(i=Wt(c)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?He.reject(e.failures[0]):e.lastResult})).then((function(t){if(c)try{N(e,c,t)}catch(n){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?He.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Vt})})).then((function(e){return e.numFailures?He.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,c=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,i=n.auto,a=n.keyPath;if(a&&o)throw new le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,d=a&&i?e.map(Wt(a)):e;return r.core.mutate({trans:t,type:"add",keys:o,values:d,wantResults:c}).then((function(e){var t=e.numFailures,n=e.results,o=e.lastResult,i=e.failures;if(0===t)return c?n:o;throw new de(r.name+".bulkAdd(): "+t+" of "+s+" operations failed",Object.keys(i).map((function(e){return i[e]})))}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0,c=(n=n||(o?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,i=n.auto,a=n.keyPath;if(a&&o)throw new le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,d=a&&i?e.map(Wt(a)):e;return r.core.mutate({trans:t,type:"put",keys:o,values:d,wantResults:c}).then((function(e){var t=e.numFailures,n=e.results,o=e.lastResult,i=e.failures;if(0===t)return c?n:o;throw new de(r.name+".bulkPut(): "+t+" of "+s+" operations failed",Object.keys(i).map((function(e){return i[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,o=e.lastResult,c=e.failures;if(0===r)return o;throw new de(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",c)}))},e}();function Gt(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,c=new Array(o-1);--o;)c[o-1]=arguments[o];return t[n].subscribe.apply(null,c),e}if("string"===typeof n)return t[n]};n.addEventType=c;for(var r=1,o=arguments.length;r<o;++r)c(arguments[r]);return n;function c(e,r,o){if("object"===typeof e)return i(e);r||(r=_e),o||(o=pe);var c={subscribers:[],fire:o,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter((function(t){return t!==e})),c.fire=c.subscribers.reduce(r,o)}};return t[e]=n[e]=c,c}function i(e){f(e).forEach((function(t){var n=e[t];if(x(n))c(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new le.InvalidArgument("Invalid event config");var r=c(t,be,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){T((function(){e.apply(null,t)}))}))}))}}))}}function Yt(e,t){return j(t).from({prototype:e}),t}function Xt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Jt(e,t){e.filter=qt(e.filter,t)}function $t(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return qt(r(),t())}:t,e.justLimit=n&&!r}function Qt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new le.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Zt(e,t,n){var r=Qt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function en(e,t,n,r){var o=e.replayFilter?qt(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},i=function(e,n,r){if(!o||o(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var i=n.primaryKey,a=""+i;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(i)),y(c,a)||(c[a]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(i,n),tn(Zt(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}return tn(Zt(e,r,n),qt(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function tn(e,t,n,r){var o=at(r?function(e,t,o){return n(r(e),t,o)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=pe}),(function(t){e.fail(t),n=pe}))||o(e.value,e,(function(e){return n=e})),n()}))}))}var nn=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Et.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Et.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=qt(t.algorithm,e)},e.prototype._iterate=function(e,t){return en(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&b(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return en(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(Xt(n,!0))return r.count({trans:e,query:{index:Qt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var o=0;return en(n,(function(){return++o,!1}),e,r).then((function(){return o}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function c(e,t){return t?c(e[n[t]],t-1):e[r]}var i="next"===this._ctx.dir?1:-1;function a(e,t){var n=c(e,o),r=c(t,o);return n<r?-i:n>r?i:0}return this.toArray((function(e){return e.sort(a)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&Xt(n,!0)&&n.limit>0){var r=n.valueMapper,o=Qt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var c=[];return en(n,(function(e){return c.push(e)}),e,n.table.core).then((function(){return c}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Xt(t)?$t(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):$t(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),$t(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return Jt(this._ctx,(function(n,r,o){return!e(n.value)||(r(o),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return Jt(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=qt(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Xt(t,!0)&&t.limit>0)return this._read((function(e){var n=Qt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Jt(this._ctx,(function(e){var t=e.primaryKey.toString(),r=y(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var o;if("function"===typeof e)o=e;else{var c=f(e),i=c.length;o=function(t){for(var n=!1,r=0;r<i;++r){var o=c[r],a=e[o];R(t,o)!==a&&(N(t,o,a),n=!0)}return n}}var a=n.table.core,s=a.schema.primaryKey,d=s.outbound,u=s.extractKey,h="testmode"in Yn?1:2e3,l=t.db.core.cmp,x=[],p=0,b=[],v=function(e,t){var n=t.failures,r=t.numFailures;p+=e-r;for(var o=0,c=f(n);o<c.length;o++){var i=c[o];x.push(n[i])}};return t.clone().primaryKeys().then((function(e){return function t(n){var c=Math.min(h,e.length-n);return a.getMany({trans:r,keys:e.slice(n,n+c)}).then((function(i){for(var s=[],f=[],x=d?[]:null,p=[],b=0;b<c;++b){var m=i[b],y={value:K(m),primKey:e[n+b]};!1!==o.call(y,y.value,y)&&(null==y.value?p.push(e[n+b]):d||0===l(u(m),u(y.value))?(f.push(y.value),d&&x.push(e[n+b])):(p.push(e[n+b]),s.push(y.value)))}return Promise.resolve(s.length>0&&a.mutate({trans:r,type:"add",values:s}).then((function(e){for(var t in e.failures)p.splice(parseInt(t),1);v(s.length,e)}))).then((function(e){return f.length>0&&a.mutate({trans:r,type:"put",keys:x,values:f}).then((function(e){return v(f.length,e)}))})).then((function(){return p.length>0&&a.mutate({trans:r,type:"delete",keys:p}).then((function(e){return v(p.length,e)}))})).then((function(){return e.length>n+c&&t(n+h)}))}))}(0).then((function(){if(x.length>0)throw new se("Error modifying one or more objects",x,p,b);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return Xt(e)&&(e.isPrimKey&&!Ft||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new se("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function rn(e,t){return e<t?-1:e===t?0:1}function on(e,t){return e>t?-1:e===t?0:1}function cn(e,t,n){var r=e instanceof ln?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function an(e){return new e.Collection(e,(function(){return hn("")})).limit(0)}function sn(e,t,n,r,o,c){for(var i=Math.min(e.length,r.length),a=-1,s=0;s<i;++s){var d=t[s];if(d!==r[s])return o(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):o(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;o(e[s],d)<0&&(a=s)}return i<r.length&&"next"===c?e+n.substr(e.length):i<e.length&&"prev"===c?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function dn(e,t,n,r){var o,c,i,a,s,d,u,h=n.length;if(!n.every((function(e){return"string"===typeof e})))return cn(e,At);function l(e){o=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),c=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),i="next"===e?rn:on;var t=n.map((function(e){return{lower:c(e),upper:o(e)}})).sort((function(e,t){return i(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),s=t.map((function(e){return e.lower})),d=e,u="next"===e?"":r}l("next");var f=new e.Collection(e,(function(){return un(a[0],s[h-1]+r)}));f._ondirectionchange=function(e){l(e)};var x=0;return f._addAlgorithm((function(e,n,r){var o=e.key;if("string"!==typeof o)return!1;var l=c(o);if(t(l,s,x))return!0;for(var f=null,p=x;p<h;++p){var b=sn(o,l,a[p],s[p],i,d);null===b&&null===f?x=p+1:(null===f||i(f,b)>0)&&(f=b)}return n(null!==f?function(){e.continue(f+u)}:r),!1})),f}function un(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function hn(e){return{type:1,lower:e,upper:e}}var ln=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?an(this):new this.Collection(this,(function(){return un(e,t,!n,!r)}))}catch(o){return cn(this,Nt)}},e.prototype.equals=function(e){return null==e?cn(this,Nt):new this.Collection(this,(function(){return hn(e)}))},e.prototype.above=function(e){return null==e?cn(this,Nt):new this.Collection(this,(function(){return un(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?cn(this,Nt):new this.Collection(this,(function(){return un(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?cn(this,Nt):new this.Collection(this,(function(){return un(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?cn(this,Nt):new this.Collection(this,(function(){return un(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!==typeof e?cn(this,At):this.between(e,e+It,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):dn(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],It)},e.prototype.equalsIgnoreCase=function(e){return dn(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=X.apply(Y,arguments);return 0===e.length?an(this):dn(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=X.apply(Y,arguments);return 0===e.length?an(this):dn(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,It)},e.prototype.anyOf=function(){var e=this,t=X.apply(Y,arguments),n=this._cmp;try{t.sort(n)}catch(c){return cn(this,Nt)}if(0===t.length)return an(this);var r=new this.Collection(this,(function(){return un(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm((function(e,r,c){for(var i=e.key;n(i,t[o])>0;)if(++o===t.length)return r(c),!1;return 0===n(i,t[o])||(r((function(){e.continue(t[o])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[Rt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=X.apply(Y,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(n){return cn(this,Nt)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Rt,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,o=this._ascending,c=this._descending,i=this._min,a=this._max;if(0===e.length)return an(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&o(e[0],e[1])<=0})))return cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",le.InvalidArgument);var s=!t||!1!==t.includeLowers,d=t&&!0===t.includeUppers;var u,h=o;function l(e,t){return h(e[0],t[0])}try{u=e.reduce((function(e,t){for(var n=0,o=e.length;n<o;++n){var c=e[n];if(r(t[0],c[1])<0&&r(t[1],c[0])>0){c[0]=i(c[0],t[0]),c[1]=a(c[1],t[1]);break}}return n===o&&e.push(t),e}),[]),u.sort(l)}catch(m){return cn(this,Nt)}var f=0,x=d?function(e){return o(e,u[f][1])>0}:function(e){return o(e,u[f][1])>=0},p=s?function(e){return c(e,u[f][0])>0}:function(e){return c(e,u[f][0])>=0};var b=x,v=new this.Collection(this,(function(){return un(u[0][0],u[u.length-1][1],!s,!d)}));return v._ondirectionchange=function(e){"next"===e?(b=x,h=o):(b=p,h=c),u.sort(l)},v._addAlgorithm((function(e,t,r){for(var c=e.key;b(c);)if(++f===u.length)return t(r),!1;return!!function(e){return!x(e)&&!p(e)}(c)||(0===n._cmp(c,u[f][1])||0===n._cmp(c,u[f][0])||t((function(){h===o?e.continue(u[f][0]):e.continue(u[f][1])})),!1)})),v},e.prototype.startsWithAnyOf=function(){var e=X.apply(Y,arguments);return e.every((function(e){return"string"===typeof e}))?0===e.length?an(this):this.inAnyRange(e.map((function(e){return[e,e+It]}))):cn(this,"startsWithAnyOf() only works with strings")},e}();function fn(e){return 1===e.length?e[0]:e}function xn(e){try{return e.only([[]]),[[]]}catch(t){return It}}function pn(e){return at((function(t){return bn(t),e(t.target.error),!1}))}function bn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var vn=function(){function e(){}return e.prototype._lock=function(){return P(!Ue.global),++this._reculock,1!==this._reculock||Ue.global||(Ue.lockOwnerFor=this),this},e.prototype._unlock=function(){if(P(!Ue.global),0===--this._reculock)for(Ue.global||(Ue.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{_t(e[1],e[0])}catch(t){}}return this},e.prototype._locked=function(){return this._reculock&&Ue.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(P(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new le.DatabaseClosed(r);case"MissingAPIError":throw new le.MissingAPI(r.message,r);default:throw new le.OpenFailed(r)}if(!this.active)throw new le.TransactionInactive;return P(null===this._completion._state),(e=this.idbtrans=e||n.transaction(fn(this.storeNames),this.mode)).onerror=at((function(n){bn(n),t._reject(e.error)})),e.onabort=at((function(n){bn(n),t.active&&t._reject(new le.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=at((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Et(new le.ReadOnly("Transaction is readonly"));if(!this.active)return Et(new le.TransactionInactive);if(this._locked())return new He((function(o,c){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,c)},Ue])}));if(n)return xt((function(){var e=new He((function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var o=new He((function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)}));return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=He.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var o=t._waitingFor;return new He((function(e,r){n.then((function(n){return t._waitingQueue.push(at(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(at(r.bind(null,e)))})).finally((function(){t._waitingFor===o&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new le.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(y(t,e))return t[e];var n=this.schema[e];if(!n)throw new le.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function mn(e,t,n,r,o,c,i){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:c,src:(n&&!i?"&":"")+(r?"*":"")+(o?"++":"")+yn(t)}}function yn(e){return"string"===typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function gn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:I(n,(function(e){return[e.name,e]}))}}function wn(e){return null==e?function(){}:"string"===typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return R(t,e)}}(e):function(t){return R(t,e)}}function _n(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function jn(e){return[].slice.call(e)}var On=0;function Cn(e){return null==e?":id":"string"===typeof e?e:"["+e.join("+")+"]"}function Sn(e,t,n,r){var o=t.cmp.bind(t);function c(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,o=e.lowerOpen,c=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!c):void 0===r?n.lowerBound(t,!!o):n.bound(t,r,!!o,!!c)}var i=function(e,t){var n=jn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=x(t),o=null==t,c={},i={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:wn(t)},indexes:jn(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,o=e.keyPath,i={name:t,compound:x(o),keyPath:o,unique:n,multiEntry:r,extractKey:wn(o)};return c[Cn(o)]=i,i})),getIndexByKeyPath:function(e){return c[Cn(e)]}};return c[":id"]=i.primaryKey,null!=t&&(c[Cn(t)]=i.primaryKey),i}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!==typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),a=i.schema,s=i.hasGetAll,d=a.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,o=n.type,i=n.keys,a=n.values,s=n.range,d=n.wantResults;return new Promise((function(n,u){n=at(n);var h=r.objectStore(t),f=null==h.keyPath,x="put"===o||"add"===o;if(!x&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var p=(i||a||{length:1}).length;if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var b,v=d&&l(i||_n(e.primaryKey,{type:o,keys:i,values:a})),m=[],y=0,g=function(e){++y,bn(e),v&&(v[e.target._reqno]=void 0),m[e.target._reqno]=e.target.error},w=function(e){var t=e.target;v[t._reqno]=t.result};if("deleteRange"===o){if(4===s.type)return n({numFailures:y,failures:m,results:v,lastResult:void 0});b=3===s.type?h.clear():h.delete(c(s))}else{var _=x?f?[a,i]:[a,null]:[i,null],j=_[0],O=_[1];if(x)for(var C=0;C<p;++C)(b=O&&void 0!==O[C]?h[o](j[C],O[C]):h[o](j[C]))._reqno=C,v&&void 0===v[C]&&(b.onsuccess=w),b.onerror=g;else for(C=0;C<p;++C)(b=h[o](j[C]))._reqno=C,b.onerror=g}var S=function(e){var t=e.target.result;v&&(v[p-1]=t),n({numFailures:y,failures:m,results:v,lastResult:t})};b.onerror=function(e){g(e),S(e)},b.onsuccess=S}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,o){e=at(e);for(var c,i=n.objectStore(t),a=r.length,s=new Array(a),d=0,u=0,h=function(t){var n=t.target;s[n._pos]=n.result,++u===d&&e(s)},l=pn(o),f=0;f<a;++f)null!=r[f]&&((c=i.get(r[f]))._pos=f,c.onsuccess=h,c.onerror=l,++d);0===d&&e(s)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,o){e=at(e);var c=n.objectStore(t).get(r);c.onsuccess=function(t){return e(t.target.result)},c.onerror=pn(o)}))},query:function(e){return function(n){return new Promise((function(r,o){r=at(r);var i=n.trans,a=n.values,s=n.limit,d=n.query,u=s===1/0?void 0:s,h=d.index,l=d.range,f=i.objectStore(t),x=h.isPrimaryKey?f:f.index(h.name),p=c(l);if(0===s)return r({result:[]});if(e){var b=a?x.getAll(p,u):x.getAllKeys(p,u);b.onsuccess=function(e){return r({result:e.target.result})},b.onerror=pn(o)}else{var v=0,m=a||!("openKeyCursor"in x)?x.openCursor(p):x.openKeyCursor(p),y=[];m.onsuccess=function(e){var t=m.result;return t?(y.push(a?t.value:t.primaryKey),++v===s?r({result:y}):void t.continue()):r({result:y})},m.onerror=pn(o)}}))}}(s),openCursor:function(e){var n=e.trans,r=e.values,o=e.query,i=e.reverse,a=e.unique;return new Promise((function(e,s){e=at(e);var d=o.index,u=o.range,h=n.objectStore(t),l=d.isPrimaryKey?h:h.index(d.name),f=i?a?"prevunique":"prev":a?"nextunique":"next",x=r||!("openKeyCursor"in l)?l.openCursor(c(u),f):l.openKeyCursor(c(u),f);x.onerror=pn(s),x.onsuccess=at((function(t){var r=x.result;if(r){r.___id=++On,r.done=!1;var o=r.continue.bind(r),c=r.continuePrimaryKey;c&&(c=c.bind(r));var i=r.advance.bind(r),a=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=at(s),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=at(e),x.onerror=pn(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=a,e(t)}})),n=function(){if(x.result)try{e()}catch(t){r.fail(t)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return x.onsuccess=at((function(e){x.onsuccess=n,n()})),r.continue=o,r.continuePrimaryKey=c,r.advance=i,n(),t},e(r)}else e(null)}),s)}))},count:function(e){var n=e.query,r=e.trans,o=n.index,i=n.range;return new Promise((function(e,n){var a=r.objectStore(t),s=o.isPrimaryKey?a:a.index(o.name),d=c(i),u=d?s.count(d):s.count();u.onsuccess=at((function(t){return e(t.target.result)})),u.onerror=pn(n)}))}}}(e)})),u={};return d.forEach((function(e){return u[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!u[e])throw new Error("Table '"+e+"' not found");return u[e]},cmp:o,MIN_KEY:-1/0,MAX_KEY:xn(n),schema:a}}function kn(e,t,n,r){var o=n.IDBKeyRange,c=function(e,t){return t.reduce((function(e,t){var n=t.create;return h(h({},e),n(e))}),e)}(Sn(t,n.indexedDB,o,r),e.dbcore);return{dbcore:c}}function En(e,t){var n=t.db,r=kn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function Pn(e,t,n,r){n.forEach((function(n){var o=r[n];t.forEach((function(t){var r=C(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?_(t,n,{get:function(){return this.table(n)},set:function(e){w(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))}))}))}function Tn(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function In(e,t){return e._cfg.version-t._cfg.version}function Rn(e,t,n,r){var o=e._dbSchema,c=e._createTransaction("readwrite",e._storeNames,o);c.create(n),c._completion.catch(r);var i=c._reject.bind(c),a=Ue.transless||Ue;xt((function(){Ue.trans=c,Ue.transless=a,0===t?(f(o).forEach((function(e){An(n,e,o[e].primKey,o[e].indexes)})),En(e,n),He.follow((function(){return e.on.populate.fire(c)})).catch(i)):function(e,t,n,r){var o=[],c=e._versions,i=e._dbSchema=Dn(e,e.idbdb,r),a=!1;function s(){return o.length?He.resolve(o.shift()(n.idbtrans)).then(s):He.resolve()}return c.filter((function(e){return e._cfg.version>=t})).forEach((function(c){o.push((function(){var o=i,s=c._cfg.dbschema;Bn(e,o,r),Bn(e,s,r),i=e._dbSchema=s;var d=Nn(o,s);d.add.forEach((function(e){An(r,e[0],e[1].primKey,e[1].indexes)})),d.change.forEach((function(e){if(e.recreate)throw new le.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Mn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Mn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=c._cfg.contentUpgrade;if(u&&c._cfg.version>t){En(e,r),n._memoizedTables={},a=!0;var h=M(s);d.del.forEach((function(e){h[e]=o[e]})),Tn(e,[e.Transaction.prototype]),Pn(e,[e.Transaction.prototype],f(h),h),n.schema=h;var l,x=J(u);x&&pt();var p=He.follow((function(){if((l=u(n))&&x){var e=bt.bind(null,null);l.then(e,e)}}));return l&&"function"===typeof l.then?He.resolve(l):p.then((function(){return l}))}})),o.push((function(t){a&&Bt||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(c._cfg.dbschema,t);Tn(e,[e.Transaction.prototype]),Pn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),s().then((function(){var e,t;t=r,f(e=i).forEach((function(n){t.db.objectStoreNames.contains(n)||An(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,c,n).catch(i)}))}function Nn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var o=e[n],c=t[n];if(o){var i={name:n,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!==""+(c.primKey.keyPath||"")||o.primKey.auto!==c.primKey.auto&&!Dt)i.recreate=!0,r.change.push(i);else{var a=o.idxByName,s=c.idxByName,d=void 0;for(d in a)s[d]||i.del.push(d);for(d in s){var u=a[d],h=s[d];u?u.src!==h.src&&i.change.push(h):i.add.push(h)}(i.del.length>0||i.add.length>0||i.change.length>0)&&r.change.push(i)}}else r.add.push([n,c])}return r}function An(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Mn(o,e)})),o}function Mn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Dn(e,t,n){var r={};return k(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),o=t.keyPath,c=mn(yn(o),o||"",!1,!1,!!t.autoIncrement,o&&"string"!==typeof o,!0),i=[],a=0;a<t.indexNames.length;++a){var s=t.index(t.indexNames[a]);o=s.keyPath;var d=mn(s.name,o,!!s.unique,!!s.multiEntry,!1,o&&"string"!==typeof o,!1);i.push(d)}r[e]=gn(e,c,i)})),r}function Bn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var c=r[o],i=n.objectStore(c);e._hasGetAll="getAll"in i;for(var a=0;a<i.indexNames.length;++a){var s=i.indexNames[a],d=i.index(s).keyPath,u="string"===typeof d?d:"["+k(d).join("+")+"]";if(t[c]){var h=t[c].idxByName[u];h&&(h.name=s,delete t[c].idxByName[u],t[c].idxByName[s]=h)}}}"undefined"!==typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&p.WorkerGlobalScope&&p instanceof p.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var Fn,Ln=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){f(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return mn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),x(r),0===t)})),o=r.shift();if(o.multi)throw new le.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new le.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new le.Schema("Index must have a name and cannot be an empty string")})),t[n]=gn(n,o,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?b(this._cfg.storesSource,e):e;var n=t._versions,r={},o={};return n.forEach((function(e){b(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)})),t._dbSchema=o,Tn(t,[t._allTables,t,t.Transaction.prototype]),Pn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],f(o),o),t._storeNames=f(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function zn(e){return xt((function(){return Ue.letThrough=!0,e()}))}function Kn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Et(t.dbOpenError):e}));$&&(t.openCanceller._stackHolder=te()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,o=null;return He.race([t.openCanceller,new He((function(r,c){if(!n)throw new le.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=e.name,a=t.autoSchema?n.open(i):n.open(i,Math.round(10*e.verno));if(!a)throw new le.MissingAPI("IndexedDB API not available");a.onerror=pn(c),a.onblocked=at(e._fireOnBlocked),a.onupgradeneeded=at((function(r){if(o=a.transaction,t.autoSchema&&!e._options.allowEmptyDB){a.onerror=bn,o.abort(),a.result.close();var s=n.deleteDatabase(i);s.onsuccess=s.onerror=at((function(){c(new le.NoSuchDatabase("Database "+i+" doesnt exist"))}))}else{o.onerror=pn(c);var d=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=a.result,Rn(e,d/10,o,c)}}),c),a.onsuccess=at((function(){o=null;var n=e.idbdb=a.result,c=k(n.objectStoreNames);if(c.length>0)try{var s=n.transaction(fn(c),"readonly");t.autoSchema?function(e,t,n){e.verno=t.version/10;var r=e._dbSchema=Dn(0,t,n);e._storeNames=k(t.objectStoreNames,0),Pn(e,[e._allTables],f(r),r)}(e,n,s):(Bn(e,e._dbSchema,s),function(e,t){var n=Nn(Dn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,s)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),En(e,s)}catch(d){}Mt.push(e),n.onversionchange=at((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),Fn.add(i),r()}),c)}))]).then((function(){return t.onReadyBeingFired=[],He.resolve(zn(e.on.ready.fire)).then((function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(je,pe);return t.onReadyBeingFired=[],He.resolve(zn(n)).then(e)}}))})).finally((function(){t.onReadyBeingFired=null})).then((function(){return t.isBeingOpened=!1,e})).catch((function(n){try{o&&o.abort()}catch(r){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,Et(t.dbOpenError)})).finally((function(){t.openComplete=!0,r()}))}function Un(e){var t=function(t){return e.next(t)},n=o(t),r=o((function(t){return e.throw(t)}));function o(e){return function(t){var o=e(t),c=o.value;return o.done?c:c&&"function"===typeof c.then?c.then(n,r):x(c)?Promise.all(c).then(n,r):n(c)}}return o(t)()}function qn(e,t,n){var r=arguments.length;if(r<2)throw new le.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var c=B(o);return[e,c,n]}function Vn(e,t,n,r,o){return He.resolve().then((function(){var c=Ue.transless||Ue,i=e._createTransaction(t,n,e._dbSchema,r),a={trans:i,transless:c};r?i.idbtrans=r.idbtrans:i.create();var s,d=J(o);d&&pt();var u=He.follow((function(){if(s=o.call(i,i))if(d){var e=bt.bind(null,null);s.then(e,e)}else"function"===typeof s.next&&"function"===typeof s.throw&&(s=Un(s))}),a);return(s&&"function"===typeof s.then?He.resolve(s).then((function(e){return i.active?e:Et(new le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return s}))).then((function(e){return r&&i._resolve(),i._completion.then((function(){return e}))})).catch((function(e){return i._reject(e),Et(e)}))}))}function Wn(e,t,n){for(var r=x(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}var Hn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return h(h({},e),{table:function(t){var n=e.table(t),r=n.schema,o={},c=[];function i(e,t,n){var r=Cn(e),a=o[r]=o[r]||[],s=null==e?0:"string"===typeof e?1:e.length,d=t>0,u=h(h({},n),{isVirtual:d,isPrimaryKey:!d&&n.isPrimaryKey,keyTail:t,keyLength:s,extractKey:wn(e),unique:!d&&n.unique});(a.push(u),u.isPrimaryKey||c.push(u),s>1)&&i(2===s?e[0]:e.slice(0,s-1),t+1,n);return a.sort((function(e,t){return e.keyTail-t.keyTail})),u}var a=i(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[a];for(var s=0,d=r.indexes;s<d.length;s++){var u=d[s];i(u.keyPath,0,u)}function l(t){var n,r,o=t.query.index;return o.isVirtual?h(h({},t),{query:{index:o,range:(n=t.query.range,r=o.keyTail,{type:1===n.type?2:n.type,lower:Wn(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:!0,upper:Wn(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:!0})}}):t}var f=h(h({},n),{schema:h(h({},r),{primaryKey:a,indexes:c,getIndexByKeyPath:function(e){var t=o[Cn(e)];return t&&t[0]}}),count:function(e){return n.count(l(e))},query:function(e){return n.query(l(e))},openCursor:function(t){var r=t.query.index,o=r.keyTail,c=r.isVirtual,i=r.keyLength;if(!c)return n.openCursor(t);return n.openCursor(l(t)).then((function(n){return n&&function(n){var r=Object.create(n,{continue:{value:function(r){null!=r?n.continue(Wn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?n.continue(Wn(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,o)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Wn(t,e.MAX_KEY,o),r)}},key:{get:function(){var e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:function(){return n.value}}});return r}(n)}))}});return f}})}},Gn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return h(h({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,o=h(h({},n),{mutate:function(e){var o=Ue.trans,c=o.table(t).hook,i=c.deleting,a=c.creating,s=c.updating;switch(e.type){case"add":if(a.fire===pe)break;return o._promise("readwrite",(function(){return d(e)}),!0);case"put":if(a.fire===pe&&s.fire===pe)break;return o._promise("readwrite",(function(){return d(e)}),!0);case"delete":if(i.fire===pe)break;return o._promise("readwrite",(function(){return d(e)}),!0);case"deleteRange":if(i.fire===pe)break;return o._promise("readwrite",(function(){return function(e){return u(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function d(e){var t=Ue.trans,o=e.keys||_n(r,e);if(!o)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?h(h({},e),{keys:o,wantResults:!0}):h({},e)).type&&(e.values=l(e.values)),e.keys&&(e.keys=l(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}(n,e,o).then((function(c){var d=o.map((function(n,o){var d=c[o],u={onerror:null,onsuccess:null};if("delete"===e.type)i.fire.call(u,n,d,t);else if("add"===e.type||void 0===d){var h=a.fire.call(u,n,e.values[o],t);null==n&&null!=h&&(n=h,e.keys[o]=n,r.outbound||N(e.values[o],r.keyPath,n))}else{var l=W(d,e.values[o]),f=s.fire.call(u,l,n,d,t);if(f){var x=e.values[o];Object.keys(f).forEach((function(e){y(x,e)?x[e]=f[e]:N(x,e,f[e])}))}}return u}));return n.mutate(e).then((function(t){for(var n=t.failures,r=t.results,i=t.numFailures,a=t.lastResult,s=0;s<o.length;++s){var u=r?r[s]:o[s],h=d[s];null==u?h.onerror&&h.onerror(n[s]):h.onsuccess&&h.onsuccess("put"===e.type&&c[s]?e.values[s]:u)}return{failures:n,results:r,numFailures:i,lastResult:a}})).catch((function(e){return d.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function u(e,t,o){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:o}).then((function(n){var r=n.result;return d({type:"delete",keys:r,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):r.length<o?{failures:[],numFailures:0,lastResult:void 0}:u(e,h(h({},t),{lower:r[r.length-1],lowerOpen:!0}),o)}))}))}}});return o}})}},Yn=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=n=h({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var c=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var i,a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:pe,dbReadyPromise:null,cancelOpen:pe,openCanceller:null,autoSchema:!0};a.dbReadyPromise=new He((function(e){a.dbReadyResolve=e})),a.openCanceller=new He((function(e,t){a.cancelOpen=t})),this._state=a,this.name=t,this.on=Gt(this,"populate","blocked","versionchange",{ready:[je,pe]}),this.on.ready.subscribe=E(this.on.ready.subscribe,(function(t){return function(n,o){e.vip((function(){var e=r._state;if(e.openComplete)e.dbOpenError||He.resolve().then(n),o&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),o&&t(n);else{t(n);var c=r;o||t((function e(){c.on.ready.unsubscribe(n),c.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(i=this,Yt(nn.prototype,(function(e,t){this.db=i;var n=Vt,r=null;if(t)try{n=t()}catch(s){r=s}var o=e._ctx,c=o.table,a=c.hook.reading.fire;this._ctx={table:c,index:o.index,isPrimKey:!o.index||c.schema.primKey.keyPath&&o.index===c.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:a!==be?a:null}}))),this.Table=function(e){return Yt(Ht.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Gt(null,{creating:[ye,pe],reading:[ve,be],updating:[we,pe],deleting:[ge,pe]})}))}(this),this.Transaction=function(e){return Yt(vn.prototype,(function(t,n,r,o){var c=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=Gt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new He((function(e,t){c._resolve=e,c._reject=t})),this._completion.then((function(){c.active=!1,c.on.complete.fire()}),(function(e){var t=c.active;return c.active=!1,c.on.error.fire(e),c.parent?c.parent._reject(e):t&&c.idbtrans&&c.idbtrans.abort(),Et(e)}))}))}(this),this.Version=function(e){return Yt(Ln.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Yt(ln.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var o=e._deps.indexedDB;if(!o)throw new le.MissingAPI("indexedDB API missing");this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(e,t){return o.cmp(t,e)},this._max=function(e,t){return o.cmp(e,t)>0?e:t},this._min=function(e,t){return o.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=xn(n.IDBKeyRange),this._createTransaction=function(e,t,n,o){return new r.Transaction(e,t,n,o)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),Mt.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Hn),this.use(Gn),c.forEach((function(e){return e(r)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new le.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(In),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||Ue.letThrough?e():new He((function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new le.DatabaseClosed);t.open().catch(pe)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;o&&this.unuse({stack:t,name:o});var c=this._middlewares[t]||(this._middlewares[t]=[]);return c.push({stack:t,create:n,level:null==r?10:r,name:o}),c.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return Kn(this)},e.prototype.close=function(){var e=Mt.indexOf(this),t=this._state;if(e>=0&&Mt.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(n){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new le.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new He((function(e){t.dbReadyResolve=e})),t.openCanceller=new He((function(e,n){t.cancelOpen=n}))},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new He((function(r,o){var c=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=at((function(){Fn.remove(e.name),r()})),t.onerror=pn(o),t.onblocked=e._fireOnBlocked};if(t)throw new le.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(c):c()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return f(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=qn.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,o=Ue.trans;o&&o.db===this&&-1===e.indexOf("!")||(o=null);var c,i,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(i=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!==typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Kt)c=Kt;else{if("rw"!=e&&e!=Ut)throw new le.InvalidArgument("Invalid transaction mode: "+e);c=Ut}if(o){if(o.mode===Kt&&c===Ut){if(!a)throw new le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&i.forEach((function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!a)throw new le.SubTransaction("Table "+e+" not included in parent transaction.");o=null}})),a&&o&&!o.active&&(o=null)}}catch(d){return o?o._promise(null,(function(e,t){t(d)})):Et(d)}var s=Vn.bind(null,this,c,i,o,n);return o?o._promise(c,s,"lock"):Ue.trans?_t(Ue.transless,(function(){return r._whenReady(s)})):this._whenReady(s)},e.prototype.table=function(e){if(!y(this._allTables,e))throw new le.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),Xn=Yn;function Jn(){}function $n(e,t){return e===Jn?t:function(){var n=e.apply(this,arguments);if(n&&"function"===typeof n.then){var r=this,o=arguments;return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}function Qn(){var e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:7&n|8).toString(16)}))}g(Xn,h(h({},xe),{delete:function(e){return new Xn(e).delete()},exists:function(e){return new Xn(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return Fn?Fn.getDatabaseNames().then(e):He.resolve([])},defineClass:function(){return function(e){b(this,e)}},ignoreTransaction:function(e){return Ue.trans?_t(Ue.transless,e):e()},vip:zn,async:function(e){return function(){try{var t=Un(e.apply(this,arguments));return t&&"function"===typeof t.then?t:He.resolve(t)}catch(n){return Et(n)}}},spawn:function(e,t,n){try{var r=Un(e.apply(n,t||[]));return r&&"function"===typeof r.then?r:He.resolve(r)}catch(o){return Et(o)}},currentTransaction:{get:function(){return Ue.trans||null}},waitFor:function(e,t){var n=He.resolve("function"===typeof e?Xn.ignoreTransaction(e):e).timeout(t||6e4);return Ue.trans?Ue.trans.waitFor(n):n},Promise:He,debug:{get:function(){return $},set:function(e){Q(e,"dexie"===e?function(){return!0}:Lt)}},derive:j,extend:b,props:g,override:E,Events:Gt,getByKeyPath:R,setByKeyPath:N,delByKeyPath:A,shallowClone:M,deepClone:K,getObjectDiff:W,asap:T,minKey:Rt,addons:[],connections:Mt,errnames:ue,dependencies:function(){try{return{indexedDB:p.indexedDB||p.mozIndexedDB||p.webkitIndexedDB||p.msIndexedDB,IDBKeyRange:p.IDBKeyRange||p.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Tt,version:Tt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:Xn,Dexie:Xn})),Xn.maxKey=xn(Xn.dependencies.IDBKeyRange),function(e){try{Fn=function(e){var t,n=e&&"function"===typeof e.databases;if(!n){var r=new Yn(zt,{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?He.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==zt}))})):t.toCollection().primaryKeys()},add:function(e){return!n&&e!==zt&&t.put({name:e}).catch(pe)},remove:function(e){return!n&&e!==zt&&t.delete(e).catch(pe)}}}(e)}catch(t){}}(Yn.dependencies.indexedDB),He.rejectionMapper=function(e,t){if(!e||e instanceof ie||e instanceof TypeError||e instanceof SyntaxError||!e.name||!fe[e.name])return e;var n=new fe[e.name](t||e.message,e);return"stack"in e&&_(n,"stack",{get:function(){return this.inner.stack}}),n},Q($,Lt);function Zn(e){return function(t){if(!t.hook._observing){t.hook._observing=!0;var n=t.name;t.hook("creating").subscribe(function(e,t){return function(n,r,o){var c=void 0;void 0===n&&t.schema.primKey.uuid&&(n=c=Qn(),t.schema.primKey.keyPath&&Yn.setByKeyPath(r,t.schema.primKey.keyPath,n));var i={source:o.source||null,table:t.name,key:void 0===n?null:n,type:1,obj:r},a=e._changes.add(i).then((function(e){return o._lastWrittenRevision=Math.max(o._lastWrittenRevision,e),e}));return this.onsuccess=function(t){n!=t&&a._then((function(){i.key=t,e._changes.put(i)}))},this.onerror=function(){a._then((function(t){e._changes.delete(t)}))},c}}(e,t)),t.hook("updating").subscribe(function(e,t){return function(n,r,o,c){var i={},a=!1,s=Yn.deepClone(o);for(var d in n){var u=n[d];if("undefined"===typeof u)Yn.delByKeyPath(s,d),i[d]=null,a=!0;else{var h=Yn.getByKeyPath(o,d);u!==h&&JSON.stringify(u)!==JSON.stringify(h)&&(Yn.setByKeyPath(s,d,u),i[d]=u,a=!0)}}if(a){var l={source:c.source||null,table:t,key:r,type:2,mods:i,oldObj:o,obj:s},f=e._changes.add(l);this.onsuccess=function(){f._then((function(e){c._lastWrittenRevision=Math.max(c._lastWrittenRevision,e)}))},this.onerror=function(){f._then((function(t){e._changes.delete(t)}))}}}}(e,n)),t.hook("deleting").subscribe(function(e,t){return function(n,r,o){var c=e._changes.add({source:o.source||null,table:t,key:n,type:3,oldObj:r}).then((function(e){return o._lastWrittenRevision=Math.max(o._lastWrittenRevision,e),e})).catch((function(e){console.log(r),console.log(e.stack)}));this.onerror=function(){c._then((function(t){e._changes.delete(t)}))}}}(e,n))}}}var er=Yn.Promise;function tr(e,t,n,r,o){var c={};function i(){return r.node?Yn.ignoreTransaction((function(){return e.transaction("rw","_intercomm",(function(){return e._intercomm.where({destinationNode:r.node.id}).toArray((function(t){return t.forEach((function(t){return function(t){if("response"===t.type){var n=c[t.requestId.toString()];n&&(t.isFailure?n.reject(t.message.error):n.resolve(t.message.result),delete c[t.requestId.toString()])}else t.resolve=function(n){e.observable.sendMessage("response",{result:n},t.sender,{requestId:t.id})},t.reject=function(n){e.observable.sendMessage("response",{error:n.toString()},t.sender,{isFailure:!0,requestId:t.id})},e.on.message.fire(t)}(t)})),e._intercomm.where("id").anyOf(t.map((function(e){return e.id}))).delete()}))}))})):er.reject(new Yn.DatabaseClosedError)}return e.observable.sendMessage=function(n,i,a,s){if(s=s||{},!r.node)return s.wantReply?er.reject(new Yn.DatabaseClosedError):er.resolve();var d={message:i,destinationNode:a,sender:r.node.id,type:n};return Yn.extend(d,s),Yn.ignoreTransaction((function(){var n=["_intercomm"];s.wantReply&&n.push("_syncNodes");var r=e.transaction("rw",n,(function(){return s.wantReply?e._syncNodes.where("id").equals(a).count((function(t){return t?e._intercomm.add(d):e._syncNodes.where("isMaster").above(0).first((function(t){return d.destinationNode=t.id,e._intercomm.add(d)}))})):e._intercomm.add(d)})).then((function(n){var r=null;return s.wantReply&&(r=new er((function(e,t){c[n.toString()]={resolve:e,reject:t}}))),o&&o.setItem("Dexie.Observable/intercomm/"+e.name,n.toString()),t.on.intercomm.fire(e.name),r}));return s.wantReply?r:void r.catch((function(){}))}))},e.observable.broadcastMessage=function(t,n,o){if(r.node){var c=r.node.id;Yn.ignoreTransaction((function(){e._syncNodes.toArray((function(r){return er.all(r.filter((function(e){return"local"===e.type&&(o||e.id!==c)})).map((function(r){return e.observable.sendMessage(t,n,r.id)})))})).catch((function(){}))}))}},{onIntercomm:function(t){t===e.name&&i().catch("DatabaseClosedError",(function(){}))},consumeIntercommMessages:i}}function nr(e){return function(t,n){t._changes="++rev",t._syncNodes="++id,myRevision,lastHeartBeat,&url,isMaster,type,status",t._intercomm="++id,destinationNode",t._uncommittedChanges="++id,node",e.call(this,t,n),Object.keys(n).forEach((function(e){var t=n[e];0===t.primKey.name.indexOf("$$")&&(t.primKey.uuid=!0,t.primKey.name=t.primKey.name.substr(2),t.primKey.keyPath=t.primKey.keyPath.substr(2))})),Object.keys(n).forEach((function(e){0!==e.indexOf("_")&&0!==e.indexOf("$")&&(n[e].observable=!0)}))}}var rr=self,or=Yn.defineClass({rev:Number,source:String,table:String,key:Object,type:Number,obj:Object,mods:Object,oldObj:Object}),cr=Yn.override,ir=Yn.Promise,ar=!1;function sr(e){if(!/^3\./.test(Yn.version))throw new Error("Missing dexie version 3.x");if(e.observable){if("{version}"!==e.observable.version)throw new Error("Mixed versions of dexie-observable")}else{var t=2e4,n=sr.localStorageImpl,r=Yn.defineClass({myRevision:Number,type:String,lastHeartBeat:Number,deleteTimeStamp:Number,url:String,isMaster:Number,syncProtocol:String,syncContext:null,syncOptions:Object,connected:!1,status:Number,appliedRemoteRevision:null,remoteBaseRevisions:[{local:Number,remote:null}],dbUploadState:{tablesToUpload:[String],currentTable:String,currentKey:null,localBaseRevision:Number}});e.observable={version:"{version}"},e.observable.SyncNode=r;var o=function(e,t,n){return function(r){t.latestRevision[e.name]<r&&(t.latestRevision[e.name]=r,Yn.ignoreTransaction((function(){t.on("latestRevisionIncremented").fire(e.name,r)})),n&&n.setItem("Dexie.Observable/latestRevision/"+e.name,r))}}(e,sr,n),c=function(e,t){return function(n){return function(r,o,c,i){if(e.dynamicallyOpened())return n.apply(this,arguments);var a=!1;"readwrite"===r&&o.some((function(e){return c[e]&&c[e].observable}))&&(a=!0,-1===(o=o.slice(0)).indexOf("_changes")&&o.push("_changes"));var s=n.call(this,r,o,c,i);return a&&(s._lastWrittenRevision=0,s.on("complete",(function(){if(s._lastWrittenRevision)if(i){var e=function e(t){return t.parent?e(t.parent):t}(i);e._lastWrittenRevision=Math.max(s._lastWrittenRevision,e.lastWrittenRevision||0)}else t.timeoutHandle&&clearTimeout(t.timeoutHandle),t.timeoutHandle=setTimeout((function(){delete t.timeoutHandle,t(s._lastWrittenRevision)}),25)})),s.parent&&s.parent.source&&(s.source=s.parent.source)),s}}}(e,o),i=Zn(e),a=function(e,t,n){return function(r){return function(){return Object.keys(e._allTables).forEach((function(r){var o=e._allTables[r];o.schema.observable&&n(o),"_syncNodes"===o.name&&o.mapToClass(t)})),r.apply(this,arguments)}}}(e,r,i),s={node:null},d=tr(e,sr,0,s,n),u=d.onIntercomm,h=d.consumeIntercommMessages;Object.defineProperty(e,"_localSyncNode",{get:function(){return s.node}});var l=null,f=null;Yn.fake&&(e.version(1).stores({_syncNodes:"++id,myRevision,lastHeartBeat",_changes:"++rev",_intercomm:"++id,destinationNode",_uncommittedChanges:"++id,node"}),e._syncNodes.mapToClass(r),e._changes.mapToClass(or),s.node=new r({myRevision:0,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null})),e.Version.prototype._parseStoresSpec=cr(e.Version.prototype._parseStoresSpec,nr),e.on.addEventType({changes:"asap",cleanup:[$n,Jn],message:"asap"}),e._createTransaction=cr(e._createTransaction,c),sr.latestRevision[e.name]=sr.latestRevision[e.name]||0,e.open=cr(e.open,a),e.close=cr(e.close,(function(t){return function(){return e.dynamicallyOpened()||(o.timeoutHandle&&(clearTimeout(o.timeoutHandle),delete o.timeoutHandle),sr.on("latestRevisionIncremented").unsubscribe(p),sr.on("suicideNurseCall").unsubscribe(w),sr.on("intercomm").unsubscribe(u),sr.on("beforeunload").unsubscribe(g),s.node&&s.node.id&&(sr.on.suicideNurseCall.fire(e.name,s.node.id),n&&n.setItem("Dexie.Observable/deadnode:"+s.node.id.toString()+"/"+e.name,"dead"),s.node.deleteTimeStamp=1,s.node.lastHeartBeat=0,e._syncNodes.put(s.node),s.node=null),l&&clearTimeout(l),l=null,f&&clearTimeout(f),f=null),t.apply(this,arguments)}})),e.delete=cr(e.delete,(function(t){return function(){return t.apply(this,arguments).then((function(t){return sr.latestRevision[e.name]=0,t}))}})),e.on("ready",(function(){return e.dynamicallyOpened()?e:e.table("_changes").orderBy("rev").last((function(n){var o=n?n.rev:0;return s.node=new r({myRevision:o,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null,isMaster:0}),sr.latestRevision[e.name]<o&&(sr.latestRevision[e.name]=o,Yn.ignoreTransaction((function(){sr.on.latestRevisionIncremented.fire(o)}))),e._syncNodes.put(s.node).then(Yn.ignoreTransaction((function(){var n=1;return e._syncNodes.orderBy("isMaster").reverse().modify((function(e){e.isMaster&&(e.lastHeartBeat<Date.now()-t?e.isMaster=0:n=0),s.node&&e.id===s.node.id&&(e.isMaster=s.node.isMaster=n)}))}))).then((function(){sr.on("latestRevisionIncremented",p),sr.on("beforeunload",g),sr.on("suicideNurseCall",w),sr.on("intercomm",u),l=setTimeout(m,500),f=setTimeout(v,15e3)})).then((function(){y()}))}))}),!0);var x=0}function p(t,n){if(t===e.name){if(x>=n)return;x=n,Yn.vip((function(){b().catch("DatabaseClosedError",(function(){}))}))}}function b(t,n,r){if(!n&&b.ongoingOperation)return b.ongoingOperation;var o=!1,c=s.node;if(!c)return ir.reject(new Yn.DatabaseClosedError);var i=e._changes.where("rev").above(c.myRevision).limit(1e3).toArray((function(t){if(t.length>0){var n=t[t.length-1];o=1e3===t.length,e.on("changes").fire(t,o),c.myRevision=n.rev}else r&&e.on("changes").fire([],!1);var i=!1;return e._syncNodes.where(":id").equals(c.id).modify((function(e){i=!0,e.lastHeartBeat=Date.now(),e.deleteTimeStamp=null,e.myRevision=Math.max(e.myRevision,c.myRevision)})).then((function(){return i}))})).then((function(t){if(!t)throw ar?new Error("Browser is shutting down"):(e.close(),console.error("Out of sync"),rr.location&&rr.location.reload(!0),new Error("Out of sync"));if(o||sr.latestRevision[e.name]>c.myRevision)return b(sr.latestRevision[e.name],(n||0)+1,o)})).finally((function(){delete b.ongoingOperation}));return n||(b.ongoingOperation=i),i}function v(){f=null;var t=s.node&&s.node.id;t&&e.transaction("rw!",e._syncNodes,(function(){e._syncNodes.where({id:t}).first((function(t){if(t)return t.lastHeartBeat=Date.now(),t.deleteTimeStamp=null,e._syncNodes.put(t);e.isOpen()&&e.close()}))})).catch("DatabaseClosedError",(function(){})).finally((function(){s.node&&s.node.id===t&&e.isOpen()&&(f=setTimeout(v,15e3))}))}function m(){l=null;var t=s.node&&s.node.id;t&&Yn.vip((function(){b(sr.latestRevision[e.name]).then(y).then(h).catch("DatabaseClosedError",(function(){})).finally((function(){s.node&&s.node.id===t&&e.isOpen()&&(l=setTimeout(m,500))}))}))}function y(){var r=s.node;return r?e.transaction("rw","_syncNodes","_changes","_intercomm",(function(){var o=!1;e._syncNodes.where("lastHeartBeat").below(Date.now()-t).filter((function(e){return"local"===e.type})).modify((function(t){t.deleteTimeStamp&&t.deleteTimeStamp<Date.now()?(delete this.value,n&&n.removeItem("Dexie.Observable/deadnode:"+t.id+"/"+e.name),t.isMaster&&(e._syncNodes.update(r,{isMaster:1}),o=!0),e._intercomm.where({destinationNode:t.id}).modify((function(e){e.wantReply?e.destinationNode=r.id:delete this.value}))):t.deleteTimeStamp||(t.deleteTimeStamp=Date.now()+2e4)})).then((function(){return sr.deleteOldChanges(e),e.on("cleanup").fire(o)}))})):ir.reject(new Yn.DatabaseClosedError)}function g(){s.node&&(ar=!0,s.node.deleteTimeStamp=1,s.node.lastHeartBeat=0,e._syncNodes.put(s.node),sr.wereTheOneDying=!0,n&&n.setItem("Dexie.Observable/deadnode:"+s.node.id.toString()+"/"+e.name,"dead"))}function w(t,n){t!==e.name||sr.wereTheOneDying||Yn.vip((function(){e._syncNodes.update(n,{deleteTimeStamp:1,lastHeartBeat:0}).then(y)}))}}sr.version="{version}",sr.latestRevision={},sr.on=Yn.Events(null,"latestRevisionIncremented","suicideNurseCall","intercomm","beforeunload"),sr.createUUID=Qn,sr.deleteOldChanges=function e(t){Yn.ignoreTransaction((function(){return t._syncNodes.orderBy("myRevision").first((function(e){return t._changes.where("rev").below(e.myRevision).limit(100).primaryKeys()})).then((function(n){if(0!==n.length)return t._changes.bulkDelete(n).then((function(){100===n.length&&setTimeout((function(){return t.isOpen()&&e(t)}),500)}))}))})).catch((function(){}))},sr._onStorage=function(e){return function(t){if(t.key&&0===t.key.indexOf("Dexie.Observable/")){var n=t.key.split("/"),r=n[1],o=n[2];if("latestRevision"===r){var c=parseInt(t.newValue,10);!isNaN(c)&&c>e.latestRevision[o]&&(e.latestRevision[o]=c,Yn.ignoreTransaction((function(){e.on("latestRevisionIncremented").fire(o,c)})))}else if(0===r.indexOf("deadnode:")){var i=parseInt(r.split(":")[1],10);t.newValue&&e.on.suicideNurseCall.fire(o,i)}else"intercomm"===r&&t.newValue&&e.on.intercomm.fire(o)}}}(sr),sr._onBeforeUnload=function(){sr.on.beforeunload.fire()};try{sr.localStorageImpl=rr.localStorage}catch(Nr){}if((null===rr||void 0===rr?void 0:rr.addEventListener)&&(rr.addEventListener("storage",sr._onStorage),rr.addEventListener("beforeunload",sr._onBeforeUnload)),Yn.Observable){if("{version}"!==Yn.Observable.version)throw new Error("Mixed versions of dexie-observable")}else Yn.Observable=sr,Yn.addons.push(sr);var dr,ur,hr,lr=function(){function e(e){this.dexie=e}return e.prototype.table=function(e){return this.dexie.table(e.toString())},e.prototype.transaction=function(e,t,n){return d(this,void 0,void 0,(function(){var r;return u(this,(function(o){switch(o.label){case 0:return r=t.map((function(e){return e.toString()})),[4,this.dexie.transaction(e,r,n)];case 1:return[2,o.sent()]}}))}))},e.prototype.createIterableCollection=function(e){return{count:function(){return e.count()},range:function(t,n){return e.offset(t).limit(n).toArray()}}},e}(),fr="schemas",xr="schema_metadata",pr="schema_images";!function(e){e.Id="id"}(dr||(dr={})),function(e){e.Id="id"}(ur||(ur={})),function(e){e.SchemaId="schemaId"}(hr||(hr={}));var br=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.add=function(e,t){return d(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return[4,this.transaction("rw",[fr,xr,pr],(function(){var r=e.metadata;n.table(fr).add(a({id:r.id},function(e){return e.metadata,s(e,["metadata"])}(e))),n.table(xr).add(r),n.table(pr).add({schemaId:r.id,dataURL:t})}))];case 1:return[2,r.sent()]}}))}))},t.prototype.get=function(e){return d(this,void 0,void 0,(function(){var t=this;return u(this,(function(n){switch(n.label){case 0:return[4,this.transaction("r",[fr,xr],(function(){return d(t,void 0,void 0,(function(){var t,n,r;return u(this,(function(o){switch(o.label){case 0:return[4,this.table(fr).get(e)];case 1:if(!(t=o.sent()))throw new Error("No schema");return[4,this.table(xr).get((r={},r[ur.Id]=e,r))];case 2:if(!(n=o.sent()))throw new Error("No metadata");return[2,a(a({},(c=t,c.id,s(c,["id"]))),{metadata:n})]}var c}))}))}))];case 1:return[2,n.sent()]}}))}))},t.prototype.getImage=function(e){return d(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.table(pr).get(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.changeName=function(e,t){return d(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return[4,this.table(xr).where((n={},n[ur.Id]=e,n)).modify((function(e){e.name=t}))];case 1:return r.sent(),[2]}}))}))},t.prototype.collection=function(e){var t=this,n=null===e||void 0===e?void 0:e.toLowerCase(),r=e?this.table(xr).filter((function(e){return-1!==e.name.toLowerCase().indexOf(n)})).reverse():this.table(xr).toCollection().reverse();return{count:function(){return r.count()},range:function(e,n){return d(t,void 0,void 0,(function(){var t,o=this;return u(this,(function(c){switch(c.label){case 0:return[4,r.offset(e).limit(n).toArray()];case 1:return t=c.sent(),[4,Promise.all(t.map((function(e){return d(o,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,this.getImage(e.id)];case 1:if(t=n.sent())return[2,{metadata:e,image:t}];throw new Error("No image with id "+e.id)}}))}))})))];case 2:return[2,c.sent()]}}))}))}}},t.prototype.delete=function(e){return d(this,void 0,void 0,(function(){var t=this;return u(this,(function(n){switch(n.label){case 0:return[4,this.transaction("rw",[fr,xr,pr],(function(){var n,r;t.table(fr).where((n={},n[dr.Id]=e,n)).delete(),t.table(xr).where((r={},r[ur.Id]=e,r)).delete(),t.table(pr).delete(e)}))];case 1:return[2,n.sent()]}}))}))},t}(lr);function vr(e,t){for(var n=e*t,r=new Array(n),o=0;o<n;o++)r[o]=null;return r}function mr(e,t,n){var r=t.chunksPerRow,o=t.lastChunkWidth,c=n%r,i=(n-c)/r,a=e.schemaMetadata.canvasMetadata,s=a.width,d=a.height,u=s-c*t.width,h=d-i*t.height,l=Math.min(u,t.width),f=Math.min(h,t.height),x=(t.width*t.height*(r-1)+o*t.height)*i+t.width*c;return{start:x,end:x+s*f,offset:s,chunkWidth:l,chunkHeight:f}}function yr(e,t,n){for(var r=mr(e.metadata,t,n),o=r.start,c=r.end,i=r.offset,a=r.chunkWidth,s=vr(a,r.chunkHeight),d=o,u=0;d<c;d+=i)for(var h=0;h<a;h++,u++)s[u]=e.embroidered[d+h];return{workId:e.metadata.id,number:n,embroidered:s}}function gr(e,t,n){for(var r=function(e,t){var n=e.metadata.schemaMetadata.canvasMetadata.height,r=Math.ceil(n/t.height);return t.chunksPerRow*r}(e,t),o=0;o<r;o++){n(yr(e,t,o))}}var wr,_r,jr,Or,Cr,Sr="works",kr="work_metadata",Er="work_images",Pr="work_chunks",Tr="work_chunks_metadata";!function(e){e.Id="id"}(wr||(wr={})),function(e){e.Id="id",e.LastActivity="lastActivity"}(_r||(_r={})),function(e){e.WorkId="workId"}(jr||(jr={})),function(e){e.WorkId="workId",e.Number="number"}(Or||(Or={})),function(e){e.WorkId="workId"}(Cr||(Cr={}));var Ir=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.add=function(e,t){return d(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return[4,this.transaction("rw",[Sr,kr,Er,Pr,Tr],(function(){var r=e.metadata,o=function(e,t,n){var r=n.schemaMetadata.canvasMetadata,o=Math.ceil(r.width/e),c=r.width-(o-1)*e;return{workId:n.id,width:e,height:t,chunksPerRow:o,lastChunkWidth:c}}(64,64,r);n.table(Sr).add(a({id:r.id},function(e){return e.embroidered,e.metadata,s(e,["embroidered","metadata"])}(e))),n.table(kr).add(r),n.table(Er).add({workId:r.id,dataURL:t}),n.table(Tr).add(o),gr(e,o,(function(e){n.table(Pr).add(e)}))}))];case 1:return[2,r.sent()]}}))}))},t.prototype.changeName=function(e,t){return d(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return[4,this.table(kr).where((n={},n[_r.Id]=e,n)).modify((function(e){e.name=t}))];case 1:return r.sent(),[2]}}))}))},t.prototype.saveChanges=function(e,t){return d(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return[4,this.transaction("rw",[Sr,kr,Pr,Tr],(function(){return d(n,void 0,void 0,(function(){var n,r,o,c,i,a=this;return u(this,(function(s){switch(s.label){case 0:return n=e.metadata,r=n.id,n.lastActivity=new Date,[4,this.table(kr).where((i={},i[_r.Id]=r,i)).modify(n)];case 1:return s.sent(),[4,this.table(Tr).get(r)];case 2:if(!(o=s.sent()))throw new Error("No chunk metadata");return c=new Set,t.forEach((function(e){c.add(function(e,t){var n=e.i,r=e.j,o=t.width,c=t.height,i=t.chunksPerRow,a=Math.floor(n/o);return Math.floor(r/c)*i+a}(e,o))})),c.forEach((function(t){var n,c=yr(e,o,t);a.table(Pr).where((n={},n[Or.WorkId]=r,n[Or.Number]=t,n)).modify(c)})),[2]}}))}))}))];case 1:return r.sent(),[2]}}))}))},t.prototype.get=function(e){return d(this,void 0,void 0,(function(){var t=this;return u(this,(function(n){switch(n.label){case 0:return[4,this.transaction("r",[Sr,kr,Pr,Tr],(function(){return d(t,void 0,void 0,(function(){var t,n,r,o,c,i,d,h;return u(this,(function(u){switch(u.label){case 0:return[4,this.table(Sr).get(e)];case 1:if(!(t=u.sent()))throw new Error("No work");return[4,this.table(kr).get((h={},h[_r.Id]=e,h))];case 2:if(!(n=u.sent()))throw new Error("No metadata");return[4,this.table(Tr).get(e)];case 3:if(!(r=u.sent()))throw new Error("No chunk metadata");return o=n.schemaMetadata.canvasMetadata,c=o.width,i=o.height,d=vr(c,i),[4,this.table(Pr).where("["+Or.WorkId+"+"+Or.Number+"]").between([e,Yn.minKey],[e,Yn.maxKey]).each((function(e){!function(e,t,n,r){for(var o=mr(e,n,r.number),c=o.start,i=o.end,a=o.offset,s=o.chunkWidth,d=c,u=0;d<i;d+=a)for(var h=0;h<s;h++,u++)t[d+h]=r.embroidered[u]}(n,d,r,e)}))];case 4:return u.sent(),[2,a(a({},(l=t,l.id,s(l,["id"]))),{metadata:n,embroidered:d})]}var l}))}))}))];case 1:return[2,n.sent()]}}))}))},t.prototype.getImage=function(e){return d(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.table(Er).get(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.getLastWorkMetadata=function(){return d(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.table(kr).orderBy(_r.LastActivity).reverse().first()];case 1:return[2,e.sent()]}}))}))},t.prototype.collection=function(e){var t=this,n=null===e||void 0===e?void 0:e.toLowerCase(),r=e?this.table(kr).filter((function(e){return-1!==e.name.toLowerCase().indexOf(n)})).reverse():this.table(kr).orderBy(_r.LastActivity).reverse();return{count:function(){return r.count()},range:function(e,n){return d(t,void 0,void 0,(function(){var t,o=this;return u(this,(function(c){switch(c.label){case 0:return[4,r.offset(e).limit(n).toArray()];case 1:return t=c.sent(),[4,Promise.all(t.map((function(e){return d(o,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,this.getImage(e.id)];case 1:if(t=n.sent())return[2,{metadata:e,image:t}];throw new Error("No image with id "+e.id)}}))}))})))];case 2:return[2,c.sent()]}}))}))}}},t.prototype.delete=function(e){return d(this,void 0,void 0,(function(){var t=this;return u(this,(function(n){switch(n.label){case 0:return[4,this.transaction("rw",[Sr,kr,Er,Pr,Tr],(function(){var n;t.table(Sr).delete(e),t.table(kr).where((n={},n[_r.Id]=e,n)).delete(),t.table(Er).delete(e),t.table(Pr).where("["+Or.WorkId+"+"+Or.Number+"]").between([e,Yn.minKey],[e,Yn.maxKey]).delete(),t.table(Tr).delete(e)}))];case 1:return[2,n.sent()]}}))}))},t}(lr);var Rr=function(e){function t(t){var n=e.call(this)||this;return n.attach(t),n.schemas=new br(t),n.works=new Ir(t),n}return i(t,e),t.prototype.attach=function(e){var t=this;e.on("changes",(function(e,n){t.emit("changes",{changes:e,partial:n})}))},t.open=function(){return d(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return function(e){var t;e.version(1).stores(((t={}).schemas=dr.Id,t.schema_metadata="++, &"+ur.Id,t.schema_images=hr.SchemaId,t.works=wr.Id,t.work_metadata="++, &"+_r.Id+", "+_r.LastActivity,t.work_images=jr.WorkId,t.work_chunks="["+Or.WorkId+"+"+Or.Number+"]",t.work_chunks_metadata=Cr.WorkId,t))}(e=new Yn("fancywork",{autoOpen:!1})),[4,e.open()];case 1:return n.sent(),[2,{database:new t(e),close:function(){e.close()}}]}}))}))},t}(o.EventEmitter);t.Database=Rr}).call(this,n(133),n(328).setImmediate)},40:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(327),c=n(43),i=n(79);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=a(r),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)};function u(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function h(e,t,n,r){return new(n||(n=Promise))((function(o,c){function i(e){try{s(r.next(e))}catch(t){c(t)}}function a(e){try{s(r.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}s((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,o,c,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}var f={exports:{}},x={},p=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;function m(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(c){return!1}})()&&Object.assign;var y=s.default,g=60103;if(x.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var w=Symbol.for;g=w("react.element"),x.Fragment=w("react.fragment")}var _=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,o={},c=null,i=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(i=t.ref),t)j.call(t,r)&&!O.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:g,type:e,key:c,ref:i,props:o,_owner:_.current}}x.jsx=C,x.jsxs=C;f.exports=x;var S=s.default.createContext(void 0);function k(){var e=r.useContext(S);if(void 0===e)throw new Error("No app storage provider");return e}var E="database-pagination-layout_root__1Gx0u",P="database-pagination-layout_header__dvzi6",T="database-pagination-layout_main__384zy",I="database-pagination-layout_empty__2_nIE",R="database-pagination-layout_content__cU5ME",N="database-pagination-layout_spin__dM02W",A="database-pagination-layout_empty-spin__3lJNX",M="database-pagination-layout_pagination__39agX";function D(e,t){var n=i.useHistory(),o=r.useState((function(){return new URLSearchParams(n.location.search).get(e)})),c=o[0],a=o[1],s=r.useRef(t);r.useEffect((function(){s.current=t}),[t]);var d=r.useCallback((function(t){var r=new URLSearchParams(n.location.search),o=s.current;!t||o&&o.isDefaultValue&&o.isDefaultValue(o.parse(t))?r.delete(e):r.set(e,t),n.replace({search:r.toString()}),a(t?t.toString():null)}),[e,n]);return[t?t.parse(c):c,d]}var B="search_text__3DqAK";t.DatabasePaginationLayout=function(e){var t=e.children,n=e.style,o=e.databasePagination,i=e.noDataText,a=e.extraContent,s=u(e,["children","style","databasePagination","noDataText","extraContent"]),h=o.loading,l=o.total,x=o.page,p=o.pageSize,b=o.setPage;return r.useEffect((function(){window.scroll({top:0,behavior:"smooth"})}),[x]),f.exports.jsxs("div",d({className:E,style:n},{children:[f.exports.jsx(c.PageHeader,d({},s,{className:P}),void 0),f.exports.jsx("main",d({className:T},{children:f.exports.jsxs("div",d({className:R},{children:[f.exports.jsx(f.exports.Fragment,{children:a},void 0),h&&void 0===l||0!==l?f.exports.jsxs(f.exports.Fragment,{children:[f.exports.jsx(c.Spin,d({spinning:h,delay:void 0===l?50:0,className:N},{children:t}),void 0),f.exports.jsx("div",d({className:M},{children:l?f.exports.jsx(c.Pagination,{total:l,pageSize:p,current:x,hideOnSinglePage:!0,onChange:function(e){b(e)}},void 0):null}),void 0)]},void 0):f.exports.jsx("div",d({className:I},{children:f.exports.jsx(c.Spin,d({spinning:h,className:A,delay:250},{children:f.exports.jsx(c.Empty,{description:i},void 0)}),void 0)}),void 0)]}),void 0)}),void 0)]}),void 0)},t.DatabaseProvider=function(e){var t=e.children,n=r.useState(),c=n[0],i=n[1];return r.useEffect((function(){var e=!1,t=function(){e=!0};return h(void 0,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return[4,o.Database.open()];case 1:return n=r.sent(),e?n.close():(i(n.database),t=n.close),[2]}}))})),function(){t()}}),[]),c?f.exports.jsx(S.Provider,d({value:c},{children:t}),void 0):null},t.Search=function(e){var t=e.paramName,n=e.onSearch,r=e.className,o=e.style,i=u(e,["paramName","onSearch","className","style"]),a=D(t),s=a[0],h=a[1];return f.exports.jsxs("div",d({className:r,style:o},{children:[f.exports.jsx(c.Input.Search,d({allowClear:!0,enterButton:"Search"},i,{defaultValue:null!==s&&void 0!==s?s:"",onSearch:function(e,t){h(e),n&&n(e,t)}}),void 0),s?f.exports.jsxs("p",d({className:B},{children:["Search: ",s]}),void 0):null]}),void 0)},t.useDatabase=k,t.useDatabaseItem=function(e){var t=this,n=k(),o=r.useState(!1),c=o[0],i=o[1],a=r.useState(),s=a[0],d=a[1],u=r.useState(),f=u[0],x=u[1],p=r.useRef(e);return r.useEffect((function(){h(t,void 0,void 0,(function(){var e,t;return l(this,(function(r){switch(r.label){case 0:i(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,p.current(n)];case 2:return e=r.sent(),i(!1),x(e),[3,4];case 3:return t=r.sent(),i(!1),t instanceof Error?d(t.message):d("Unknown error"),[3,4];case 4:return[2]}}))}))}),[n]),{item:f,error:s,loading:c}},t.useDatabasePagination=function(e,t){var n=this,o=k(),c=D("page",{parse:function(e){if(e){var t=Number.parseInt(e,10);return Number.isNaN(t)||t<1?1:t}return 1},isDefaultValue:function(e){return 1===e}}),i=c[0],a=c[1],s=r.useState(!1),d=s[0],u=s[1],f=r.useState(),x=f[0],p=f[1],b=r.useState(),v=b[0],m=b[1],y=r.useState([]),g=y[0],w=y[1],_=r.useRef(t);r.useEffect((function(){_.current=t}),[t]);var j=r.useCallback((function(t){var r=t-1;h(n,void 0,void 0,(function(){var n,c,i,s;return l(this,(function(d){switch(d.label){case 0:u(!0),d.label=1;case 1:return d.trys.push([1,4,5,6]),[4,(n=_.current(o)).count()];case 2:return c=d.sent(),t>1&&r*e>=c?(t=Math.ceil(c/e),a(t),[2]):[4,n.range(r*e,e)];case 3:return i=d.sent(),w(i),p(c),[3,6];case 4:return(s=d.sent())instanceof Error?m(s.message):m("Error"),[3,6];case 5:return u(!1),[7];case 6:return[2]}}))}))}),[a,o,e]);r.useEffect((function(){j(i)}),[j,i]);var O=function(){j(i)},C=r.useRef(O);return C.current=O,r.useEffect((function(){var e=function(e){e.data.partial||C.current()};return o.addEventListener("changes",e),function(){o.removeEventListener("changes",e)}}),[o]),{loading:d,total:x,page:i,pageSize:e,data:g,error:v,refresh:O,setPage:function(e){a(e)},reset:function(){1===i?j(i):a(1)}}},t.useSearchParam=D},520:function(e,t,n){},521:function(e,t,n){},522:function(e,t,n){},523:function(e,t,n){"use strict";n.r(t);var r=n(40),o=n(39),c=n.n(o),i=n(79),a=n(35),s=n(25),d=n.n(s),u=n(38),h=n(28),l=n(48),f=n(53),x=n(182),p=n(37),b=n(0),v=n.n(b),m=n(7),y=v.a.createContext(void 0),g=function(e){var t=e.children,n=e.layout,r=e.onFinish,o=Object(b.useState)(0),c=Object(h.a)(o,2),i=c[0],a=c[1],s=v.a.Children.toArray(t);Object(b.useEffect)((function(){var e=s.length;i>e-1&&0!==e&&a(s.length-1)}),[s.length,i]);var d=Object(b.useCallback)((function(){a((function(e){return 0===e?e:e-1}))}),[]),u=Object(b.useCallback)((function(){var e=s.length;i===e-1?r&&r():a(i+1)}),[i,r,s.length]);return Object(m.jsx)(y.Provider,{value:{goBack:0===i?void 0:d,completeStage:u,layout:n},children:s.length>0&&i>=0&&i<s.length?s[i]:null})};g.Stage=function(e){var t=e.children,n=e.title,r=e.overrideDefaultLayout;return Object(m.jsx)(y.Consumer,{children:function(e){if(void 0===e)throw new Error("No context (Stages)");var o=e.goBack,c=e.completeStage,i=e.layout,a=function(e){var t=e.children;return Object(m.jsx)(i,{title:n,onBack:o,children:t})},s=t(c,{DefaultLayout:a,goBack:o});return r?s:Object(m.jsx)(a,{children:s})}})};var w=n(153),_=n(246),j=n(285),O=n(248),C=n.n(O),S=["style","children"],k=function(e){var t=e.style,n=e.children,r=Object(_.a)(e,S);return Object(m.jsxs)("div",{className:C.a.root,style:t,children:[Object(m.jsx)(j.a,Object(w.a)(Object(w.a)({},r),{},{className:C.a.header})),Object(m.jsx)("main",{className:C.a.main,children:n})]})},E=n(52),P=n(104),T=n(265),I=n.n(T),R=function(e){var t=e.loading,n=e.delay,r=Object(b.useState)(!1),o=Object(h.a)(r,2),c=o[0],i=o[1];return Object(b.useEffect)((function(){if(t&&n){var e=!1,r=setTimeout((function(){e=!0,i(!0)}),n);return function(){e||clearTimeout(r)}}i(null!==t&&void 0!==t&&t)}),[t,n]),Object(b.useEffect)((function(){if(c){var e=document.body.style.overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}}),[c]),c?Object(m.jsx)("div",{className:I.a.root,children:Object(m.jsx)(P.a,{indicator:Object(m.jsx)(E.a,{className:I.a.icon})})}):null},N=n(308),A=n(306),M=["onCancel","onFinish","children"],D=function(e){var t=e.onCancel,n=e.onFinish,r=e.children,o=Object(_.a)(e,M),c=Object(b.useState)(!1),i=Object(h.a)(c,2),a=i[0],s=i[1];return Object(m.jsx)(N.a,{title:"Change schema name",closable:!0,visible:!0,onCancel:t,width:"400px",footer:null,centered:!0,children:Object(m.jsx)(A.a,Object(w.a)(Object(w.a)({onFinish:function(e){if(n){var t=function(){var t=Object(u.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),t.prev=1,t.next=4,n(e);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),s(!1),t.t0 instanceof Error?x.b.error(t.t0.message):x.b.error("Unknown error");case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();t()}}},o),{},{children:"function"===typeof r?r(a):r}))})},B="".concat("","/schemas"),F="".concat("","/create/schema"),L=n(313),z=n(262),K=n.n(z),U=n(321),q=n.n(U),V=function(e){var t=e.onChoose;return Object(m.jsxs)(K.a,{accept:"image/*",onChange:function(e){e.file&&e.file.originFileObj&&t(e.file.originFileObj)},children:[Object(m.jsx)("p",{className:"ant-upload-drag-icon",children:Object(m.jsx)(L.a,{})}),Object(m.jsx)("p",{className:"".concat(q.a.message," ant-upload-text"),children:"Click or drag file to this area to choose image"})]})},W=n(116),H=n(75),G=n(309),Y=n(137),X=n(71),J=n(307),$=n(132),Q=n.n($),Z=function(e){var t=e.imageURL,n=e.initialValues,r=e.onSubmit;return Object(m.jsx)("div",{className:Q.a.root,children:Object(m.jsxs)(W.a,{gutter:{xs:0,md:24},className:Q.a.row,children:[Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsx)("div",{className:Q.a.image,children:Object(m.jsx)(G.a,{src:t})})}),Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsxs)(A.a,{layout:"vertical",className:Q.a.form,requiredMark:!1,onFinish:function(e){var t={name:e.name,palette:f.palettes.find((function(t){return t.name===e.palette})),stitchesPerInch:e.stitchesPerInch};r(t)},children:[Object(m.jsx)(A.a.Item,{name:"name",label:"Name",initialValue:null===n||void 0===n?void 0:n.name,rules:[{required:!0,message:"Required field"}],children:Object(m.jsx)(Y.a,{type:"text"})}),Object(m.jsx)(A.a.Item,{name:"palette",label:"Threads palette",initialValue:null===n||void 0===n?void 0:n.palette.name,rules:[{required:!0,message:"Required field"}],children:Object(m.jsx)(X.a,{children:f.palettes.map((function(e){return Object(m.jsx)(X.a.Option,{value:e.name,children:e.name},e.name)}))})}),Object(m.jsx)(A.a.Item,{name:"stitchesPerInch",label:"Stitches per inch",tooltip:"Canvas property",initialValue:null===n||void 0===n?void 0:n.stitchesPerInch,normalize:function(e){return""===e?"":Math.abs(Math.round(e))},rules:[{required:!0,message:"Required field"}],children:Object(m.jsx)(J.a,{min:1,className:Q.a.inputNumber})}),Object(m.jsx)(p.a,{htmlType:"submit",type:"primary",className:Q.a.button,children:"Next step"})]})})]})})},ee=n(62),te=n(95),ne=n.n(te),re=function(e){var t=e.schema,n=e.schemaImage,r=e.layout,o=e.onSave,c=Object(b.useState)(!1),i=Object(h.a)(c,2),a=i[0],s=i[1];return a?Object(m.jsx)(ee.SchemaViewer,{schema:t,onBack:function(){s(!1)}}):Object(m.jsx)(r,{children:Object(m.jsxs)("div",{className:ne.a.root,children:[Object(m.jsx)("div",{className:ne.a.firstBlock,children:Object(m.jsxs)(W.a,{gutter:{xs:0,md:24},className:ne.a.row,children:[Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsx)("div",{className:ne.a.image,children:Object(m.jsx)(G.a,{src:n})})}),Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsxs)("div",{className:ne.a.info,children:[Object(m.jsx)(p.a,{className:ne.a.button,type:"primary",onClick:function(){o&&o()},children:"Save"}),Object(m.jsx)(p.a,{className:ne.a.button,onClick:function(){s(!0)},children:"View Schema"}),Object(m.jsx)(ee.DownloadButton,{schemaLoader:function(){return t},className:ne.a.button}),Object(m.jsx)(ee.SchemaInfoTable,{metadata:t.metadata,pagination:!1,scroll:{x:!0}})]})})]})}),Object(m.jsx)("div",{className:ne.a.secondBlock,children:Object(m.jsx)(ee.ColorsTable,{palette:t.palette,scroll:{x:!0},pagination:{simple:!0}})})]})})},oe=n(84),ce=n(101),ie=n.n(ce),ae=function(e){var t=e.imageURL,n=e.initialValues,r=e.onSubmit,o=Object(b.useState)(!!n&&n.unlimitedColors),c=Object(h.a)(o,2),i=c[0],a=c[1],s=Object(b.useState)(!n||n.withDithering),d=Object(h.a)(s,2),u=d[0],l=d[1];return Object(m.jsx)("div",{className:ie.a.root,children:Object(m.jsxs)(W.a,{gutter:{xs:0,md:24},className:ie.a.row,children:[Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsx)("div",{className:ie.a.image,children:Object(m.jsx)(G.a,{src:t})})}),Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsxs)(A.a,{layout:"vertical",className:ie.a.form,requiredMark:!1,onFinish:function(e){var t={reduceAlgorithm:e.reduceAlgorithm,maxColorsCount:e.maxColorsCount,unlimitedColors:i,withDithering:u};r(t)},children:[i?null:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(A.a.Item,{name:"reduceAlgorithm",label:"Palette reduce algorithm",initialValue:null===n||void 0===n?void 0:n.reduceAlgorithm,rules:[{required:!0,message:"Required field"}],children:Object(m.jsxs)(X.a,{children:[Object(m.jsx)(X.a.Option,{value:"nearest",children:"Nearest color"}),Object(m.jsx)(X.a.Option,{value:"contrast",children:"Contrast color"}),Object(m.jsx)(X.a.Option,{value:"average-distance",children:"Average distance color"})]})}),Object(m.jsx)(A.a.Item,{name:"maxColorsCount",label:"Max colors count",initialValue:null===n||void 0===n?void 0:n.maxColorsCount,rules:[{required:!0,message:"Required field"}],children:Object(m.jsx)(J.a,{min:1,className:ie.a.inputNumber})})]}),Object(m.jsx)("div",{className:ie.a.checkbox,children:Object(m.jsx)(oe.a,{onChange:function(e){a(e.target.checked)},checked:i,children:"Unlimited colors"})}),Object(m.jsx)("div",{className:ie.a.checkbox,children:Object(m.jsx)(oe.a,{onChange:function(e){l(e.target.checked)},checked:u,children:"Dithering"})}),Object(m.jsx)(p.a,{htmlType:"submit",type:"primary",className:ie.a.button,children:"Generate"})]})})]})})},se=n(102),de=n.n(se),ue=function(e){var t,n,r=e.imageURL,o=e.image,c=e.stitchesPerInch,i=e.initialValues,a=e.onSubmit,s=A.a.useForm(),d=Object(h.a)(s,1)[0],u=Object(b.useState)(null!==(t=null===i||void 0===i?void 0:i.sizeType)&&void 0!==t?t:"stitch"),l=Object(h.a)(u,2),x=l[0],v=l[1],y=Object(b.useState)(null===(n=null===i||void 0===i?void 0:i.keepAspectRatio)||void 0===n||n),g=Object(h.a)(y,2),w=g[0],_=g[1],j=Object(b.useMemo)((function(){return o.width/o.height}),[o]),O=Object(b.useMemo)((function(){return{centimeter:Object(f.convertSize)(f.MAX_WIDTH,f.MAX_HEIGHT,{from:"stitch",to:"centimeter",floor:!0,stitchesPerInch:c}),inch:Object(f.convertSize)(f.MAX_WIDTH,f.MAX_HEIGHT,{from:"stitch",to:"inch",floor:!0,stitchesPerInch:c}),stitch:{width:f.MAX_WIDTH,height:f.MAX_HEIGHT}}}),[c]),C=Object(b.useCallback)((function(e){return""===e||void 0===e?"":(e=Math.abs(e),"stitch"===x?Math.round(e).toString():e.toString())}),[x]);Object(b.useEffect)((function(){var e=d.getFieldValue("width"),t=d.getFieldValue("height");w&&(void 0!==e?t=e?+e/j:void 0:void 0!==t&&(e=t?+t*j:void 0)),d.setFieldsValue({width:C(e),height:C(t)})}),[C,d,j,w]);return Object(m.jsx)("div",{className:de.a.root,children:Object(m.jsxs)(W.a,{gutter:{xs:0,md:24},className:de.a.row,children:[Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsx)("div",{className:de.a.image,children:Object(m.jsx)(G.a,{src:r})})}),Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsxs)(A.a,{form:d,layout:"vertical",className:de.a.form,requiredMark:!1,onFinish:function(e){var t={width:e.width,height:e.height,sizeType:e.sizeType,keepAspectRatio:w};a(t)},children:[Object(m.jsx)(A.a.Item,{name:"sizeType",label:"Size type",initialValue:x,rules:[{required:!0,message:"Required field"}],children:Object(m.jsxs)(X.a,{onChange:function(e){v(null===e||void 0===e?void 0:e.toString())},children:[Object(m.jsx)(X.a.Option,{value:"stitch",children:"Size in stitches"}),Object(m.jsx)(X.a.Option,{value:"centimeter",children:"Size in centimeters"}),Object(m.jsx)(X.a.Option,{value:"inch",children:"Size in inches"})]})}),Object(m.jsxs)(W.a,{gutter:12,children:[Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsx)(A.a.Item,{name:"width",label:"Width",initialValue:null===i||void 0===i?void 0:i.width,normalize:C,rules:[{required:!0,message:"Required field"}],children:Object(m.jsx)(J.a,{className:de.a.inputNumber,min:"stitch"===x?1:.1,max:x?O[x].width:Number.POSITIVE_INFINITY,onChange:function(e){if(w){var t=e?+e/j:void 0;d.setFieldsValue({height:C(t)})}}})})}),Object(m.jsx)(H.a,{span:24,md:12,children:Object(m.jsx)(A.a.Item,{name:"height",label:"Height",initialValue:null===i||void 0===i?void 0:i.height,normalize:C,rules:[{required:!0,message:"Required field"}],children:Object(m.jsx)(J.a,{className:de.a.inputNumber,min:"stitch"===x?1:.1,max:x?O[x].height:Number.POSITIVE_INFINITY,onChange:function(e){if(w){var t=e?+e*j:void 0;d.setFieldsValue({width:C(t)})}}})})})]}),Object(m.jsx)("div",{className:de.a.checkbox,children:Object(m.jsx)(oe.a,{onChange:function(e){_(e.target.checked)},checked:w,children:"Keep aspect ratio"})}),Object(m.jsx)(p.a,{htmlType:"submit",type:"primary",className:de.a.button,children:"Next step"})]})})]})})},he=function(){var e=Object(a.k)(),t=Object(r.useDatabase)(),n=Object(b.useState)(),o=Object(h.a)(n,2),c=o[0],i=o[1],s=Object(b.useState)(),v=Object(h.a)(s,2),y=v[0],w=v[1],_=Object(b.useState)(),j=Object(h.a)(_,2),O=j[0],C=j[1],S=Object(b.useState)(),E=Object(h.a)(S,2),P=E[0],T=E[1],I=Object(b.useState)(),N=Object(h.a)(I,2),A=N[0],M=N[1],D=Object(b.useState)(),F=Object(h.a)(D,2),L=F[0],z=F[1],K=Object(b.useState)(!1),U=Object(h.a)(K,2),q=U[0],W=U[1],H=Object(b.useState)(),G=Object(h.a)(H,2),Y=G[0],X=G[1],J=Object(b.useState)(),$=Object(h.a)(J,2),Q=$[0],ee=$[1],te=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(!0),e.prev=1,e.next=4,t();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0 instanceof Error?x.b.error(e.t0.message):x.b.error("Error");case 9:return e.prev=9,W(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[1,6,9,12]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(d.a.mark((function e(t,n,r,o){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(Object(u.a)(d.a.mark((function e(){var c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.createSchema)(t,{name:n.name,palette:n.palette,stitchesPerInch:n.stitchesPerInch,width:r.width,height:r.height,sizeType:r.sizeType,maxColorsCount:o.maxColorsCount,reduceAlgorithm:o.reduceAlgorithm,withDithering:o.withDithering});case 2:return c=e.sent,e.next=5,Object(f.createSchemaImage)(c);case 5:i=e.sent,X(c),ee(i);case 8:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),oe=function(){var n=Object(u.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Y||!Q){n.next=3;break}return n.next=3,te(Object(u.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.schemas.add(Y,Q);case 2:e.replace(B);case 3:case"end":return n.stop()}}),n)}))));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(b.useEffect)((function(){if(c){T(void 0),M(void 0),z(void 0);var e=URL.createObjectURL(c);w(e);var t=new Image;return t.src=e,t.onload=function(){C(t)},function(){t.remove(),C(void 0),w(void 0),URL.revokeObjectURL(e)}}}),[c]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(R,{loading:q}),Object(m.jsxs)(g,{onFinish:function(){oe()},layout:function(t){var n=t.title,r=t.onBack,o=t.children;return Object(m.jsx)(k,{title:n,onBack:null!==r&&void 0!==r?r:function(){e.goBack()},extra:r?Object(m.jsx)(p.a,{type:"text",icon:Object(m.jsx)(l.a,{}),onClick:function(){e.goBack()}}):null,children:o})},children:[Object(m.jsx)(g.Stage,{title:"Choose image",children:function(e){return Object(m.jsx)(V,{onChoose:function(t){i(t),e()}})}}),Object(m.jsx)(g.Stage,{title:"Generator",children:function(e){return y?Object(m.jsx)(Z,{imageURL:y,initialValues:P,onSubmit:function(t){T(t),e()}}):null}}),Object(m.jsx)(g.Stage,{title:"Schema size",children:function(e){return P&&y&&O?Object(m.jsx)(ue,{imageURL:y,image:O,stitchesPerInch:P.stitchesPerInch,initialValues:A,onSubmit:function(t){M(t),e()}}):null}}),Object(m.jsx)(g.Stage,{title:"Schema palette",children:function(e){return A&&y&&O?Object(m.jsx)(ae,{imageURL:y,initialValues:L,onSubmit:function(t){var n=function(){var n=Object(u.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return z(t),n.next=3,ne(y,P,A,t);case 3:e();case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}}):null}}),Object(m.jsx)(g.Stage,{title:"Result",overrideDefaultLayout:!0,children:function(e,t){var n=t.DefaultLayout;return Y&&Q?Object(m.jsx)(re,{layout:n,schema:Y,schemaImage:Q,onSave:function(){e()}}):Object(m.jsx)(n,{})}})]})]})};he.pathname=F;var le=n(310),fe=n(322),xe=n.n(fe),pe=function(){var e=Object(a.k)();return Object(m.jsx)("div",{className:xe.a.root,children:Object(m.jsx)(le.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist",extra:Object(m.jsx)(p.a,{type:"primary",onClick:function(){e.push("/")},children:"Back Home"})})})};pe.pathname="*";var be=n.p+"static/media/logo.8eed29fb.svg",ve="".concat("","/works"),me="".concat("","/"),ye="".concat("","/work"),ge=function(){var e=Object(r.useDatabase)(),t=Object(a.k)(),n=Object(b.useState)(),o=Object(h.a)(n,2),c=o[0],i=o[1];return Object(b.useEffect)((function(){var t=function(){var t=Object(u.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.works.getLastWorkMetadata();case 2:n=t.sent,i(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),e.addEventListener("changes",t),function(){e.removeEventListener("changes",t)}}),[e]),c?Object(m.jsx)(p.a,{type:"ghost",disabled:void 0===c,onClick:function(){c&&t.push("".concat(ye,"?id=").concat(null===c||void 0===c?void 0:c.id))},children:"Continue"}):null},we=n(118),_e=n.n(we),je=function(){var e=Object(a.k)();return Object(m.jsxs)("div",{className:_e.a.root,children:[Object(m.jsx)("main",{className:_e.a.main,children:Object(m.jsxs)("div",{className:_e.a.menu,children:[Object(m.jsxs)("div",{className:_e.a.header,children:[Object(m.jsx)("img",{src:be,className:_e.a.logo,alt:"Logo"}),"Fancywork"]}),Object(m.jsxs)("div",{className:_e.a.buttons,children:[Object(m.jsx)(ge,{}),Object(m.jsx)(p.a,{type:"ghost",onClick:function(){e.push(F)},children:"Create schema"}),Object(m.jsx)(p.a,{type:"ghost",onClick:function(){e.push(B)},children:"My schemas"}),Object(m.jsx)(p.a,{type:"ghost",onClick:function(){e.push(ve)},children:"My works"})]}),Object(m.jsx)("a",{href:"https://github.com/Trequend/fancywork",rel:"noreferrer",target:"_blank",children:"View source code"})]})}),Object(m.jsx)("footer",{className:_e.a.footer,children:Object(m.jsxs)("div",{children:["Logo icon made by"," ",Object(m.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," ","from"," ",Object(m.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})})]})};function Oe(e){var t=function(){var e=Object(a.l)();return new URLSearchParams(e.search)}().get(e);if(null===t)throw new Error('No param "'.concat(e,'"'));return t}je.pathname=me;var Ce="".concat("","/schema"),Se=function(){var e=Object(a.k)(),t=Oe("id"),n=Object(r.useDatabaseItem)((function(e){return e.schemas.get(t)})),o=n.item,c=n.loading,i=n.error;return Object(b.useEffect)((function(){if(o){var e=document.title;return document.title="".concat(o.metadata.name," - Fancywork"),function(){document.title=e}}}),[o]),c?Object(m.jsx)(R,{}):i?Object(m.jsx)(le.a,{title:"Error",subTitle:i}):o?Object(m.jsx)(ee.SchemaViewer,{schema:o,onBack:function(){e.goBack()}}):Object(m.jsx)(R,{})};Se.pathname=Ce;var ke=n(323),Ee=n.n(ke),Pe=n(142),Te=n(109),Ie=n(311),Re=n(286),Ne=n(184),Ae=n(266),Me=n.n(Ae),De=function(e){var t=e.metadata,n=e.onCancel,o=Object(r.useDatabase)(),c=Object(a.k)(),i=Object(b.useState)(!1),s=Object(h.a)(i,2),l=s[0],v=s[1];return t?Object(m.jsx)(N.a,{title:"Create work",closable:!0,visible:!0,onCancel:n,width:"400px",footer:null,centered:!0,children:Object(m.jsxs)(A.a,{layout:"horizontal",requiredMark:!1,onFinish:function(e){if(t){var n=function(){var n=Object(u.a)(d.a.mark((function n(){var r,i,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),n.prev=1,n.next=4,o.schemas.get(t.id);case 4:if(!(r=n.sent)){n.next=16;break}return n.next=8,Object(f.createSchemaImage)(r);case 8:return i=n.sent,a=Object(f.createWork)(e.name,r),n.next=12,o.works.add(a,i);case 12:c.push(ve),c.push("".concat(ye,"?id=").concat(a.metadata.id)),n.next=17;break;case 16:throw new Error("No schema");case 17:n.next=23;break;case 19:n.prev=19,n.t0=n.catch(1),v(!1),n.t0 instanceof Error?x.b.error(n.t0.message):x.b.error("Unknown error");case 23:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(){return n.apply(this,arguments)}}();n()}},children:[Object(m.jsxs)("p",{children:["Based on ",Object(m.jsx)(Ne.a,{className:Me.a.tag,children:t.name})]}),Object(m.jsx)(A.a.Item,{name:"name",label:"Name",initialValue:t.name,rules:[{required:!0,message:"Required field"}],children:Object(m.jsx)(Y.a,{})}),Object(m.jsx)(p.a,{loading:l,className:Me.a.button,htmlType:"submit",type:"primary",children:"Create"})]})}):null},Be=n(119),Fe=n.n(Be),Le=n(314),ze=n(179),Ke=n(312),Ue=n(267),qe=n.n(Ue),Ve=function(e){var t=e.metadata,n=e.onChange,r=e.onClose,o=function(){var e=Object(u.a)(d.a.mark((function e(o){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=10;break}return e.prev=1,e.next=4,n(o.name);case 4:r&&r(),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(D,{onCancel:r,onFinish:o,layout:"horizontal",requiredMark:!1,children:function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ke.a,{type:"warning",message:"The change will not affect the work already started",className:qe.a.alert}),Object(m.jsx)(A.a.Item,{name:"name",label:"Name",initialValue:t.name,rules:[{required:!0,message:"Required field"}],children:Object(m.jsx)(Y.a,{})}),Object(m.jsx)(p.a,{loading:e,className:qe.a.button,htmlType:"submit",type:"primary",children:"Change"})]})}})},We=function(e){var t=e.metadata,n=e.onChangeName,r=Object(b.useState)(!1),o=Object(h.a)(r,2),c=o[0],i=o[1],a=Object(b.useState)(!1),s=Object(h.a)(a,2),d=s[0],u=s[1];return Object(m.jsxs)(m.Fragment,{children:[d?Object(m.jsx)(Ve,{metadata:t,onChange:n,onClose:function(){return u(!1)}}):null,Object(m.jsx)(ze.a,{trigger:"click",visible:c,onVisibleChange:i,content:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(p.a,{type:"link",onClick:function(){u(!0),i(!1)},children:"Change name"})}),children:Object(m.jsx)(Le.a,{})})]})},He=function(e){var t=e.metadata,n=e.image,o=Object(r.useDatabase)(),c=Object(a.k)(),i=Object(b.useState)(!1),s=Object(h.a)(i,2),l=s[0],f=s[1],x=Object(b.useState)(!1),v=Object(h.a)(x,2),y=v[0],g=v[1];return Object(m.jsxs)(m.Fragment,{children:[l?Object(m.jsx)(De,{metadata:t,onCancel:function(){f(!1)}}):null,Object(m.jsxs)(Ie.a,{className:Fe.a.root,actions:[Object(m.jsx)(We,{metadata:t,onChangeName:function(){var e=Object(u.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.schemas.changeName(t.id,n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"settings"),Object(m.jsx)(Re.a,{title:"Delete schema",okType:"danger",disabled:y,onConfirm:Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,o.schemas.delete(t.id);case 3:g(!1);case 4:case"end":return e.stop()}}),e)}))),children:Object(m.jsx)(P.a,{spinning:y,indicator:Object(m.jsx)(E.a,{}),children:Object(m.jsx)(Pe.a,{})})},"delete")],children:[Object(m.jsx)(Ie.a.Meta,{avatar:n?Object(m.jsx)("div",{className:Fe.a.image,children:Object(m.jsx)(G.a,{preview:{mask:Object(m.jsx)(Te.a,{})},src:n.dataURL,alt:t.name})}):null,title:t.name}),Object(m.jsx)(ee.SchemaInfoTable,{metadata:t,pagination:!1,className:Fe.a.table,scroll:{x:!0}}),Object(m.jsxs)("div",{className:Fe.a.cardButtons,children:[Object(m.jsx)(p.a,{type:"primary",className:Fe.a.cardButton,onClick:function(){f(!0)},children:"To Embroider"}),Object(m.jsx)(p.a,{className:Fe.a.cardButton,onClick:function(){c.push("".concat(Ce,"?id=").concat(t.id))},children:"View Schema"}),Object(m.jsx)(ee.DownloadButton,{className:Fe.a.cardButton,schemaLoader:Object(u.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.schemas.get(t.id);case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:throw new Error("No schema");case 8:case"end":return e.stop()}}),e)})))})]})]})]})},Ge="search",Ye=function(){var e=Object(a.k)(),t=Object(r.useDatabasePagination)(10,(function(t){var n=new URLSearchParams(e.location.search);return t.schemas.collection(n.get(Ge))}));return Object(m.jsx)(r.DatabasePaginationLayout,{title:"My schemas",noDataText:"No Schemas",onBack:function(){e.goBack()},databasePagination:t,extraContent:Object(m.jsx)(r.Search,{paramName:Ge,size:"large",className:Ee.a.search,onSearch:function(){t.reset()}}),children:Object(m.jsx)(W.a,{gutter:[24,24],children:t.data.map((function(e){var t=e.metadata,n=e.image;return Object(m.jsx)(H.a,{span:24,lg:12,children:Object(m.jsx)(He,{metadata:t,image:n})},t.id)}))})})};Ye.pathname=B;var Xe=function(){var e=Object(r.useDatabase)(),t=Object(a.k)(),n=Oe("id"),o=Object(r.useDatabaseItem)((function(e){return e.works.get(n)})),c=o.item,i=o.loading,s=o.error;return Object(b.useEffect)((function(){if(c){var e=document.title;return document.title="".concat(c.metadata.name," - Fancywork"),function(){document.title=e}}}),[c]),i?Object(m.jsx)(R,{}):s?Object(m.jsx)(le.a,{title:"Error",subTitle:s}):c?Object(m.jsx)(ee.WorkViewer,{work:c,autoSaveTimeout:2e4,onBack:function(){t.goBack()},onSave:function(){var t=Object(u.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=3;break}return t.next=3,e.works.saveChanges(c,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}):Object(m.jsx)(R,{})};Xe.pathname=ye;var Je=n(324),$e=n.n(Je),Qe=n(120),Ze=n.n(Qe),et=n(325),tt=n.n(et),nt=function(e){var t=e.metadata,n=e.onChange,r=e.onClose,o=function(){var e=Object(u.a)(d.a.mark((function e(o){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!n){e.next=10;break}return e.prev=1,e.next=4,n(o.name);case 4:r&&r(),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)(D,{onCancel:r,onFinish:o,layout:"horizontal",requiredMark:!1,children:function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(A.a.Item,{name:"name",label:"Name",initialValue:t.name,rules:[{required:!0,message:"Required field"}],children:Object(m.jsx)(Y.a,{})}),Object(m.jsx)(p.a,{loading:e,className:tt.a.button,htmlType:"submit",type:"primary",children:"Change"})]})}})},rt=function(e){var t=e.metadata,n=e.onChangeName,r=Object(b.useState)(!1),o=Object(h.a)(r,2),c=o[0],i=o[1],a=Object(b.useState)(!1),s=Object(h.a)(a,2),d=s[0],u=s[1];return Object(m.jsxs)(m.Fragment,{children:[d?Object(m.jsx)(nt,{metadata:t,onChange:n,onClose:function(){return u(!1)}}):null,Object(m.jsx)(ze.a,{trigger:"click",visible:c,onVisibleChange:i,content:Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(p.a,{type:"link",onClick:function(){u(!0),i(!1)},children:"Change name"})}),children:Object(m.jsx)(Le.a,{})})]})},ot=function(e){var t=e.metadata,n=e.image,o=Object(r.useDatabase)(),c=Object(a.k)(),i=Object(b.useState)(!1),s=Object(h.a)(i,2),l=s[0],f=s[1];return Object(m.jsxs)(Ie.a,{className:Ze.a.root,actions:[Object(m.jsx)(rt,{metadata:t,onChangeName:function(){var e=Object(u.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.works.changeName(t.id,n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"settings"),Object(m.jsx)(Re.a,{title:"Delete work",okType:"danger",disabled:l,onConfirm:Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,o.works.delete(t.id);case 3:f(!1);case 4:case"end":return e.stop()}}),e)}))),children:Object(m.jsx)(P.a,{spinning:l,indicator:Object(m.jsx)(E.a,{}),children:Object(m.jsx)(Pe.a,{})})},"delete")],children:[Object(m.jsx)(Ie.a.Meta,{avatar:n?Object(m.jsx)("div",{className:Ze.a.image,children:Object(m.jsx)(G.a,{preview:{mask:Object(m.jsx)(Te.a,{})},src:n.dataURL,alt:t.name})}):null,title:t.name}),Object(m.jsx)(ee.WorkInfoTable,{metadata:t,pagination:!1,className:Ze.a.table,scroll:{x:!0}}),Object(m.jsx)("div",{className:Ze.a.progress,children:Object(m.jsx)(ee.WorkProgress,{metadata:t})}),Object(m.jsxs)("div",{className:Ze.a.cardButtons,children:[Object(m.jsx)(p.a,{type:"primary",className:Ze.a.cardButton,onClick:function(){c.push("".concat(ye,"?id=").concat(t.id))},children:"Continue"}),Object(m.jsx)(ee.DownloadButton,{className:Ze.a.cardButton,schemaLoader:Object(u.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.works.get(t.id);case 2:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n.schema);case 7:throw new Error("No work");case 8:case"end":return e.stop()}}),e)})))})]})]})},ct="search",it=function(){var e=Object(a.k)(),t=Object(r.useDatabasePagination)(10,(function(t){var n=new URLSearchParams(e.location.search);return t.works.collection(n.get(ct))}));return Object(m.jsx)(r.DatabasePaginationLayout,{title:"My works",noDataText:"No Works",onBack:function(){e.goBack()},databasePagination:t,extraContent:Object(m.jsx)(r.Search,{paramName:ct,size:"large",className:$e.a.search,onSearch:function(){t.reset()}}),children:Object(m.jsx)(W.a,{gutter:[24,24],children:t.data.map((function(e){var t=e.metadata,n=e.image;return Object(m.jsx)(H.a,{span:24,lg:12,children:Object(m.jsx)(ot,{metadata:t,image:n})},t.id)}))})})};it.pathname=ve;var at=[he,je,Se,Ye,Xe,it,pe],st=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function dt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ut;n(519),n(520),n(521),n(522);c.a.render(Object(m.jsx)(r.DatabaseProvider,{children:Object(m.jsx)(i.BrowserRouter,{children:Object(m.jsx)(a.g,{children:at.map((function(e){return Object(m.jsx)(a.d,{exact:!0,path:e.pathname,component:e},e.pathname)}))})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");st?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):dt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):dt(t,e)}))}}(),ut&&ut instanceof Function&&n.e(3).then(n.bind(null,525)).then((function(e){var t=e.getCLS,n=e.getFID,r=e.getFCP,o=e.getLCP,c=e.getTTFB;t(ut),n(ut),r(ut),o(ut),c(ut)}))},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.listeners={}}return e.prototype.emit=function(e,t){var n=!1,r={target:this,data:t,preventDefault:function(){n=!0},defaultPrevented:function(){return n}},o=this.listeners[e.toString()];return o&&o.forEach((function(e){e(r)})),n},e.prototype.addEventListener=function(e,t){var n=this.listeners[e.toString()];n?-1===n.findIndex((function(e){return e===t}))&&n.push(t):this.listeners[e.toString()]=[t]},e.prototype.removeEventListener=function(e,t){var n=this.listeners[e.toString()];if(n){var r=n.findIndex((function(e){return e===t}));-1!==r&&n.splice(r,1)}},e.prototype.removeAllEventListeners=function(e){delete this.listeners[e.toString()]},e}(),o=function(){function e(e,t,n,r){var o=function(e,t){if(t<0||t>255)throw new RangeError('Parameter "'+e+'" must be in range [0; 255].');return t};this.red=o("red",e),this.green=o("green",t),this.blue=o("blue",n),this.alpha=o("alpha",r)}return e.prototype.valueOf=function(){var e=this.alpha;return e|=this.blue<<8,e|=this.green<<16,e|=this.red<<24},e.prototype.toString=function(){return"rgba("+this.red+", "+this.green+", "+this.blue+", "+this.alpha/255+")"},e.fromHex=function(e){if(e=e.trim(),/^#([0-9a-fA-F]){3,4}$/.test(e)){var t=e.substring(1).split("");e=(t=3===t.length?[t[0],t[0],t[1],t[1],t[2],t[2],"F","F"]:[t[0],t[0],t[1],t[1],t[2],t[2],t[3],t[3]]).join("")}else if(/^#[0-9a-fA-F]{6}$/.test(e))e=e.substring(1)+"FF";else{if(!/^#[0-9a-fA-F]{8}$/.test(e))throw new Error("Bad hex");e=e.substring(1)}return this.fromNumber(+("0x"+e))},e.fromNumber=function(t){return new e(t>>24&255,t>>16&255,t>>8&255,255&t)},e}(),c=function(){function e(e,t,n){var r=function(e,t){if(t<0||t>255)throw new RangeError('Parameter "'+e+'" must be in range [0; 255].');return t};this.red=r("red",e),this.green=r("green",t),this.blue=r("blue",n)}return e.prototype.valueOf=function(){var e=this.blue<<8;return e|=this.green<<16,e|=this.red<<24},e.prototype.toString=function(){return"rgb("+this.red+", "+this.green+", "+this.blue+")"},e.fromHex=function(e){if(e=e.trim(),/^#([0-9a-fA-F]){3,4}$/.test(e)){var t=e.substring(1).split("");e=(t=3===t.length?[t[0],t[0],t[1],t[1],t[2],t[2],"F","F"]:[t[0],t[0],t[1],t[1],t[2],t[2],t[3],t[3]]).join("")}else if(/^#[0-9a-fA-F]{6}$/.test(e))e=e.substring(1)+"FF";else{if(!/^#[0-9a-fA-F]{8}$/.test(e))throw new Error("Bad hex");e=e.substring(1)}return this.fromNumber(+("0x"+e))},e.fromNumber=function(t){return new e(t>>24&255,t>>16&255,t>>8&255)},e}(),i=function(e,t){this.x=e,this.y=t},a=function(e,t){if(this.x=e,this.y=t,!Number.isInteger(e))throw new TypeError('Expected integer "x"');if(!Number.isInteger(t))throw new TypeError('Expected integer "y"')},s=function(){function e(e,t,n){this.x=e,this.y=t,this.z=n}return e.prototype.multiply=function(t){return new e(this.x*t,this.y*t,this.z*t)},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)},e}(),d=function(){function e(e,t,n,r){this.x=e,this.y=t,this.z=n,this.w=r}return e.prototype.multiply=function(t){return new e(this.x*t,this.y*t,this.z*t,this.w*t)},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},e}(),u=function(){function e(e,t){this.context=e,this.cellPredicate=t,this._finished=!1}return Object.defineProperty(e.prototype,"finished",{get:function(){return this._finished},enumerable:!1,configurable:!0}),e.prototype.draw=function(e,t,n,r,o,c){},e.prototype.postRender=function(e,t){},e.prototype.stop=function(){this.finish(),this.onStop()},e.prototype.onStop=function(){},e.prototype.finish=function(){this._finished=!0,this.context.requireRedraw()},e}(),h=function(e,t){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},h(e,t)};function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)};function x(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function p(e,t,n,r){return new(n||(n=Promise))((function(o,c){function i(e){try{s(r.next(e))}catch(t){c(t)}}function a(e){try{s(r.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}s((r=r.apply(e,t||[])).next())}))}function b(e,t){var n,r,o,c,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}function v(e,t,n){if(n||2===arguments.length)for(var r,o=0,c=t.length;o<c;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var m=function(e){function t(t,n){var r=e.call(this,t,null===n||void 0===n?void 0:n.cellPredicate)||this;return r.options=n,r.started=!1,n?(r.validate(n),void 0===n.trigger&&(n.delay?r.timeoutKey=setTimeout((function(){r.start()}),n.delay):r.start()),r):(r.finish(),r)}return l(t,e),t.prototype.validate=function(e){if(e.delay&&e.delay<0)throw new RangeError("delay must be in range [0, infinity]");if(e.duration&&e.duration<0)throw new RangeError("duration must be in range [0, infinity]")},t.prototype.draw=function(e,t,n,r,o){if(this.options){var c;if(this.started)c=performance.now()-this.lastFrameTime,this.lastFrameTime=performance.now();else{if(void 0!==this.options.delay)return;c=0,this.start()}var i=performance.now()-this.startTime;this.options.draw(n,r,{i:e,j:t,time:i,deltaTime:c,chunk:o}),this.context.requireRedraw()}},t.prototype.start=function(){var e=this;this.options&&(this.started=!0,this.startTime=performance.now(),this.lastFrameTime=performance.now(),this.options.duration&&(this.timeoutKey=setTimeout((function(){e.finish()}),this.options.duration)))},t.prototype.onStop=function(){this.timeoutKey&&clearTimeout(this.timeoutKey)},t}(u),y=function(){function e(e,t){this.states=e,this.options=t,this.convertedStates=this.states.map(t.convertToIntermediate)}return e.prototype.evaluate=function(e){e<0?e=0:e>1&&(e=1);for(var t=v([],this.convertedStates,!0),n=this.options,r=n.add,o=n.multiply,c=this.convertedStates.length;c>1;c--)for(var i=0;i<c-1;i++)t[i]=r(o(t[i],1-e),o(t[i+1],e));var a=t[0];return this.options.convertFromIntermediate(a)},e}(),g=function(e){function t(t){return e.call(this,t,{multiply:function(e,t){return e.multiply(t)},add:function(e,t){return e.add(t)},convertFromIntermediate:function(e){return new c(Math.floor(e.x),Math.floor(e.y),Math.floor(e.z))},convertToIntermediate:function(e){return new s(e.red,e.green,e.blue)}})||this}return l(t,e),t}(y),w=function(e){function t(t){return e.call(this,t,{multiply:function(e,t){return e.multiply(t)},add:function(e,t){return e.add(t)},convertFromIntermediate:function(e){return new o(Math.floor(e.x),Math.floor(e.y),Math.floor(e.z),Math.floor(e.w))},convertToIntermediate:function(e){return new d(e.red,e.green,e.blue,e.alpha)}})||this}return l(t,e),t}(y),_=30,j=999,O=function(){function e(e){this.paletteColor=e,this.attachedColors=new Map,this.color=c.fromHex(e.hex)}return Object.defineProperty(e.prototype,"attachedColorsCount",{get:function(){return this.attachedColors.size},enumerable:!1,configurable:!0}),e.prototype.distance=function(e){if(e instanceof c){var t=Math.pow(this.color.red-e.red,2),n=Math.pow(this.color.green-e.green,2),r=Math.pow(this.color.blue-e.blue,2);return Math.sqrt(t+n+r)}return this.distance(e.color)},e.prototype.merge=function(e){var t=this;e.attachedColors.forEach((function(e,n){t.attachedColors.set(n,e)}))},e.prototype.attachColor=function(e){var t=e.valueOf(),n=this.attachedColors.get(t);n?this.attachedColors.set(t,n+1):this.attachedColors.set(t,1)},e.prototype.isAttachedColor=function(e){return this.attachedColors.has(e.valueOf())},e.prototype.getColor=function(){return this.color},e.prototype.compareTo=function(e){return this.attachedColorsCount<e.attachedColorsCount?-1:this.attachedColorsCount>e.attachedColorsCount?1:0},e}(),C=function(){function e(e){this.name=e.name,this.verticies=e.colors.map((function(e){return new O(e)}))}return e.prototype.increaseColorWeight=function(e){var t=this.getNearestVertex(e);t&&t.attachColor(e)},e.prototype.getSimilarColor=function(e){var t=this.getNearestVertex(e);if(t)return t.paletteColor;throw new Error("No similar color in palette")},e.prototype.reduce=function(e,t){if(this.deleteUnusedVerticies(),e&&t)for(;this.verticies.length>e;)t.reduce(this.verticies)},e.prototype.deleteUnusedVerticies=function(){this.verticies=this.verticies.sort((function(e,t){return t.compareTo(e)}));for(var e=0;e<this.verticies.length;e++)if(0===this.verticies[e].attachedColorsCount)return void this.verticies.splice(e)},e.prototype.getNearestVertex=function(e){for(var t=Number.POSITIVE_INFINITY,n=void 0,r=0;r<this.verticies.length;r++){var o=this.verticies[r].distance(e);o<t&&(t=o,n=this.verticies[r])}return n},e}(),S=function(){},k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.reduce=function(e){for(var t=Number.POSITIVE_INFINITY,n=-1,r=0;r<e.length;r++){for(var o=0,c=0;c<e.length;c++)r!==c&&(o+=e[r].distance(e[c]));(o/=e.length-1)<t&&(t=o,n=r)}var i=Number.POSITIVE_INFINITY,a=-1;for(r=0;r<e.length;r++)if(r!==n){var s=e[n].distance(e[r]);s<i&&(i=s,a=r)}e[a].merge(e[n]),e.splice(n,1)},t}(S),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.reduce=function(e){for(var t=Number.POSITIVE_INFINITY,n=-1,r=-1,o=0;o<e.length-1;o++)for(var c=o+1;c<e.length;c++){var i=e[o].distance(e[c]);i<t&&(t=i,n=o,r=c)}var a=0,s=0,d=0;for(o=0;o<e.length;o++)o!==n&&o!==r&&(a++,s=e[o].distance(e[n]),d=e[o].distance(e[r]));0!==a?(s/=a)<(d/=a)?(e[r].merge(e[n]),e.splice(r,1)):(e[n].merge(e[r]),e.splice(n,1)):(e[n].merge(e[r]),e.splice(r,1))},t}(S),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.reduce=function(e){for(var t=Number.POSITIVE_INFINITY,n=-1,r=-1,o=0;o<e.length-1;o++)for(var c=o+1;c<e.length;c++){var i=e[o].distance(e[c]);i<t&&(t=i,n=o,r=c)}e[n].compareTo(e[r])>=0?(e[n].merge(e[r]),e.splice(r,1)):(e[r].merge(e[n]),e.splice(n,1))},t}(S),T=function(){function e(){}return e.prototype.createReducer=function(e){switch(e){case"nearest":return new P;case"contrast":return new E;case"average-distance":return new k;default:throw new Error("Undefined algorithm")}},e}(),I=function(){function e(){this.red=0,this.green=0,this.blue=0}return e.prototype.clear=function(){this.red=0,this.green=0,this.blue=0},e.prototype.add=function(e,t){var n=.0625*t;this.red+=e.red*n,this.green+=e.green*n,this.blue+=e.blue*n},e.prototype.apply=function(e){return{red:R(e.red+this.red),green:R(e.green+this.green),blue:R(e.blue+this.blue)}},e.createArray=function(t){for(var n=new Array(2*t),r=0;r<t;r++)n[r]=new e;return n},e}();function R(e){return(e=Math.round(e))<0?0:e>255?255:e}function N(e,t){return"border"===e.type&&"border"===t.type?"origin"===e.axis&&"origin"===t.axis||"origin"!==e.axis&&"origin"!==t.axis&&(e.axis===t.axis&&e.number===t.number):"schema"===e.type&&"schema"===t.type&&(e.i===t.i&&e.j===t.j)}var A=2.54;function M(e,t,n){var r=[[function(){return{width:e,height:t}},function(){return{width:e/A,height:t/A}},function(){return{width:e/A*n.stitchesPerInch,height:e/A*n.stitchesPerInch}}],[function(){return{width:e*A,height:e*A}},function(){return{width:e,height:t}},function(){return{width:e*n.stitchesPerInch,height:t*n.stitchesPerInch}}],[function(){return{width:e/n.stitchesPerInch*A,height:t/n.stitchesPerInch*A}},function(){return{width:e/n.stitchesPerInch,height:t/n.stitchesPerInch}},function(){return{width:e,height:t}}]],o=D(n.from),c=D(n.to),i=r[o][c]();return n.floor?{width:Math.floor(i.width),height:Math.floor(i.height)}:i}function D(e){switch(e){case"centimeter":return 0;case"inch":return 1;case"stitch":return 2;default:throw new Error("Not implemented")}}function B(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("2d context not supported");var r=e(n);return r instanceof Promise?(r.finally((function(){t.remove()})),r):(t.remove(),r)}function F(e,t){return{red:e.data[t+0],green:e.data[t+1],blue:e.data[t+2],alpha:e.data[t+3]}}var L;function z(e,t){return p(this,void 0,void 0,(function(){return b(this,(function(n){return[2,new Promise((function(n,r){var o=0,c=0,i=e.width*e.height;!function a(){var s=performance.now();try{for(;o<i&&performance.now()-s<200;o++,c+=4){var d=F(e,c),u=d.red,h=d.green,l=d.blue,f=d.alpha;t(u,h,l,f)}}catch(x){return void r(x)}o<i?setTimeout(a,0):n()}()}))]}))}))}function K(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function U(e){var t=e instanceof c?e:c.fromHex(e),n=.2126*K(t.red)+.7152*K(t.green)+.0722*K(t.blue);return(n+.05)/.5>1.05/(n+.05)?"#000":"#fff"}function q(e,t){return p(this,void 0,void 0,(function(){var n=this;return b(this,(function(r){switch(r.label){case 0:return[4,B((function(r){return p(n,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,o){var c=new Image;c.src=t.imageURL,c.onload=function(){var i,a=(null===t||void 0===t?void 0:t.width)||c.width,s=(null===t||void 0===t?void 0:t.height)||c.height;r.canvas.width=a,r.canvas.height=s,r.imageSmoothingEnabled=null===(i=null===t||void 0===t?void 0:t.imageSmoothingEnabled)||void 0===i||i;try{r.drawImage(c,0,0,a,s);var d=e(r,a,s);d instanceof Promise?d.then(n).catch(o):n(d)}catch(u){o(u)}finally{c.remove()}},c.onerror=function(e){o(e),c.remove()}}))];case 1:return[2,n.sent()]}}))}))}))];case 1:return[2,r.sent()]}}))}))}function V(e,t){return p(this,void 0,void 0,(function(){var n,r,o,i,a;return b(this,(function(s){switch(s.label){case 0:return n=t.palette,r=t.maxColorsCount,o=t.reduceAlgorithm,i=new C(n),[4,z(e,(function(e,t,n,r){if(0!==r){var o=new c(e,t,n);i.increaseColorWeight(o)}}))];case 1:return s.sent(),r&&o?(a=(new T).createReducer(o),i.reduce(r,a)):i.reduce(),[2,i]}}))}))}var W=new Uint8Array(16);function H(){if(!L&&!(L="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return L(W)}var G=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Y(e){return"string"===typeof e&&G.test(e)}for(var X=[],J=0;J<256;++J)X.push((J+256).toString(16).substr(1));function $(e,t,n){var r=(e=e||{}).random||(e.rng||H)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(X[e[t+0]]+X[e[t+1]]+X[e[t+2]]+X[e[t+3]]+"-"+X[e[t+4]]+X[e[t+5]]+"-"+X[e[t+6]]+X[e[t+7]]+"-"+X[e[t+8]]+X[e[t+9]]+"-"+X[e[t+10]]+X[e[t+11]]+X[e[t+12]]+X[e[t+13]]+X[e[t+14]]+X[e[t+15]]).toLowerCase();if(!Y(n))throw TypeError("Stringified UUID is invalid");return n}(r)}function Q(e,t){return{red:e.red-t.red,green:e.green-t.green,blue:e.blue-t.blue}}var Z,ee=function(){function e(e,t,n,r){this.cellSize=e,this.halfCellSize=e/2,this.cellOffset=new i(r.x%e,r.y%e),this.startCell={i:Math.floor(r.x/e),j:Math.floor(r.y/e)},this.endCell={i:Math.min(this.startCell.i+Math.ceil(n.x/e),t.x),j:Math.min(this.startCell.j+Math.ceil(n.y/e),t.y)},this.width=this.cellOffset.x+(this.endCell.i-this.startCell.i+1)*e,this.height=this.cellOffset.y+(this.endCell.j-this.startCell.j+1)*e}return e.prototype.getCellByCanvasPosition=function(e,t){if(e<0||t<0||e>this.width||t>this.height)return null;var n=Math.floor((e-this.cellSize+this.cellOffset.x)/this.cellSize),r=Math.floor((t-this.cellSize+this.cellOffset.y)/this.cellSize);return e<this.cellSize&&t<this.cellSize?{type:"border",axis:"origin"}:e<this.cellSize?{type:"border",axis:"y",number:r+this.startCell.j}:t<this.cellSize?{type:"border",axis:"x",number:n+this.startCell.i}:{type:"schema",i:n+this.startCell.i,j:r+this.startCell.j}},e.prototype.forEachCellI=function(e){for(var t=this.startCell.i,n=this.cellSize-this.cellOffset.x;t<this.endCell.i;t++,n+=this.cellSize)e(t,n)},e.prototype.forEachCellJ=function(e){for(var t=this.startCell.j,n=this.cellSize-this.cellOffset.y;t<this.endCell.j;t++,n+=this.cellSize)e(t,n)},e.prototype.forEachCell=function(e){var t=this;this.forEachCellJ((function(n,r){t.forEachCellI((function(o,c){e(o,n,c,r,t)}))}))},e}(),te=function(){};!function(e){e[e.Float=0]="Float",e[e.Vector2=1]="Vector2",e[e.Vector3=2]="Vector3",e[e.Vector4=3]="Vector4",e[e.Matrix3x3=4]="Matrix3x3"}(Z||(Z={}));var ne=function(e,t,n,r){this.name=t,this.type=n,this.offset=r,this.webglType=function(e,t){switch(t){case Z.Float:case Z.Vector2:case Z.Vector3:case Z.Vector4:case Z.Matrix3x3:return e.FLOAT;default:throw new Error("Undefined")}}(e,n),this.size=function(e){switch(e){case Z.Float:return 1;case Z.Vector2:return 2;case Z.Vector3:return 3;case Z.Vector4:return 4;case Z.Matrix3x3:return 3;default:throw new Error("Undefined")}}(n),this.byteSize=function(e){switch(e){case Z.Float:return 4;case Z.Vector2:return 8;case Z.Vector3:return 12;case Z.Vector4:return 16;case Z.Matrix3x3:return 36;default:throw new Error("Undefined")}}(n)};var re=function(e,t){this.stride=0,this.size=0;for(var n=0,r=[],o=0,c=t;o<c.length;o++){var i=c[o],a=i.name,s=i.type,d=new ne(e,a,s,n);this.size+=d.size,this.stride+=d.byteSize,r.push(d),n+=d.byteSize}this.storage=Object.freeze(r)},oe=4096,ce=function(){function e(e,t,n){if(this.gl=e,this.type=t,this.id=e.createBuffer(),null===this.id)throw new Error("cannot create buffer");e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.id),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}return e.prototype.bind=function(){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.id)},e.prototype.unbind=function(){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)},e.prototype.destroy=function(){this.gl.deleteBuffer(this.id),this.id=null},e}(),ie=function(){function e(e,t,n){if(this.gl=e,this.offset=0,this.quadIndex=0,0===n.length||n.length%6!==0)throw new Error("the number of indices must be a multiple of 6 and be greater than 0");for(var r=0,o=0;r<n.length;r+=6,o+=4)n[r+0]=o+0,n[r+1]=o+1,n[r+2]=o+2,n[r+3]=o+0,n[r+4]=o+3,n[r+5]=o+2;this.indexBuffer=this.createIndexBuffer(n),this.maxQuadCount=n.length/6;var c=4*this.maxQuadCount;this.vertices=new Float32Array(c*t.size),this.vertexBuffer=this.createVertexBuffer(c,t)}return e.prototype.bind=function(){this.vertexBuffer.bind(),this.indexBuffer.bind()},e.prototype.isFull=function(){return this.quadIndex>=this.maxQuadCount},e.prototype.flush=function(){0!==this.quadIndex&&(this.draw(),this.reset())},e.prototype.draw=function(){var e=this.gl;this.vertexBuffer.setData(this.vertices),e.drawElements(e.TRIANGLES,6*this.quadIndex,this.indexBuffer.type,0)},e.prototype.reset=function(){this.quadIndex=0,this.offset=0},e.prototype.setPosition=function(e){this.vertices[this.offset++]=e.x,this.vertices[this.offset++]=e.y},e.prototype.setColor=function(e){this.vertices[this.offset++]=e.x,this.vertices[this.offset++]=e.y,this.vertices[this.offset++]=e.z,this.vertices[this.offset++]=e.w},e.prototype.setTexIndex=function(e){this.vertices[this.offset++]=e},e.prototype.setTexCoords=function(e){this.vertices[this.offset++]=e.x,this.vertices[this.offset++]=e.y},e.prototype.addVertices=function(e,t,n,r){this.isFull()&&this.flush(),n=null!==n&&void 0!==n?n:0,r=null!==r&&void 0!==r?r:[new i(0,0),new i(0,1),new i(1,1),new i(1,0)];for(var o=new d(t.red,t.green,t.blue,t.alpha).multiply(1/255),c=0;c<4;c++){var a=e[c],s=r[c];this.setVertex(a,o,n,s)}this.quadIndex++},e.prototype.destroy=function(){this.vertexBuffer.destroy(),this.indexBuffer.destroy()},e}(),ae=function(){function e(e,t,n,r){this.gl=e;var o=null,c=null;try{o=se(t,e,e.VERTEX_SHADER,n),c=se(t,e,e.FRAGMENT_SHADER,r)}catch(a){throw e.deleteShader(o),e.deleteShader(c),a}if(this.id=e.createProgram(),!this.id)throw new Error("cannot create program");if(e.attachShader(this.id,o),e.attachShader(this.id,c),e.linkProgram(this.id),!e.getProgramParameter(this.id,e.LINK_STATUS)){var i=e.getProgramInfoLog(this.id);throw e.deleteProgram(this.id),e.deleteShader(o),e.deleteShader(c),new de(t,"Cannot link vertex and fragment shader. Info: "+i)}e.deleteShader(o),e.deleteShader(c)}return e.prototype.bind=function(){this.gl.useProgram(this.id)},e.prototype.unbind=function(){this.gl.useProgram(null)},e.prototype.setInt=function(e,t){if(this.id){var n=this.gl,r=n.getUniformLocation(this.id,e);n.uniform1i(r,t)}},e.prototype.setIntArray=function(e,t){if(this.id){var n=this.gl,r=n.getUniformLocation(this.id,e);n.uniform1iv(r,t)}},e.prototype.setFloat=function(e,t){if(this.id){var n=this.gl,r=n.getUniformLocation(this.id,e);n.uniform1f(r,t)}},e.prototype.setFloat2=function(e,t,n){if(this.id){var r=this.gl,o=r.getUniformLocation(this.id,e);r.uniform2f(o,t,n)}},e.prototype.setFloat3=function(e,t,n,r){if(this.id){var o=this.gl,c=o.getUniformLocation(this.id,e);o.uniform3f(c,t,n,r)}},e.prototype.setFloat4=function(e,t,n,r,o){if(this.id){var c=this.gl,i=c.getUniformLocation(this.id,e);c.uniform4f(i,t,n,r,o)}},e.prototype.setMatrix3x3=function(e,t){if(this.id){var n=this.gl,r=n.getUniformLocation(this.id,e);n.uniformMatrix3fv(r,!1,t)}},e.prototype.destroy=function(){this.gl.deleteProgram(this.id),this.id=null},e}(),se=function(e,t,n,r){var o=t.createShader(n);if(!o)throw new de(e,"Cannot create shader");if(t.shaderSource(o,r),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var c=t.getShaderInfoLog(o);throw t.deleteShader(o),new de(e,null===c?"Unknown error":c)}return o},de=function(e){function t(t,n){var r=e.call(this,'Shader: "'+t+'". '+n)||this;return r.shaderName=t,r.name="ShaderError",r}return l(t,e),t}(Error),ue=function(){function e(e,t){if(this.gl=e,t.width>oe)throw new RangeError("source width must be less or equal than 4096");if(t.height>4096)throw new RangeError("source height must be less or equal than 4096");if(this.width=t.width,this.height=t.height,this.id=e.createTexture(),null===this.id)throw new Error("cannot create texture");e.bindTexture(e.TEXTURE_2D,this.id),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)}return e.prototype.bind=function(e){var t=this.gl;t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.id)},e.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},e.prototype.destroy=function(){this.gl.deleteTexture(this.id),this.id=null},e}(),he=function(){function e(e,t,n){this.gl=e,this.attributes=n,this.id=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.id),e.bufferData(e.ARRAY_BUFFER,t*n.stride,e.DYNAMIC_DRAW)}return e.prototype.bind=function(){if(null!==this.id){var e=this.gl,t=e.getParameter(e.CURRENT_PROGRAM);if(null!=t){e.bindBuffer(e.ARRAY_BUFFER,this.id);for(var n=0,r=this.attributes.storage;n<r.length;n++){var o=r[n],c=e.getAttribLocation(t,o.name);if(-1!==c)switch(e.enableVertexAttribArray(c),o.type){case Z.Float:case Z.Vector2:case Z.Vector3:case Z.Vector4:e.vertexAttribPointer(c,o.size,o.webglType,!1,this.attributes.stride,o.offset);break;case Z.Matrix3x3:for(var i=0;i<o.size;i++)e.vertexAttribPointer(c+i,o.size,o.webglType,!1,this.attributes.stride,o.offset+o.size*i*4)}}}}},e.prototype.unbind=function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,null)},e.prototype.destroy=function(){this.gl.deleteBuffer(this.id),this.id=null},e}(),le=function(){function e(e,t){this.symbolMap={},this.numberMap={},this.cellSize=t.cellSize*window.devicePixelRatio;var n=this.createCanvas(t);this.texture=new ue(e,n),n.remove()}return e.prototype.createCanvas=function(e){var t=document.createElement("canvas"),n=this.computeTextureSize(e),r=n.width,o=n.height,c=t.getContext("2d");if(!c)throw new Error("2d context not supported");t.width=r,t.height=o;var i=15*devicePixelRatio+"px",a="sans-serif";c.fillStyle="#fff",c.textAlign="center",c.font="bold "+i+" "+a,c.textBaseline="middle";for(var s=Math.max(e.width,e.height),d=0;d<s;d++)this.numberMap[d]=this.addText((d+1).toString(),d,c);c.textAlign="center",c.font=i+" "+a,c.textBaseline="middle";var u=e.symbols.length;for(d=0;d<u;d++){var h=e.symbols[d];this.symbolMap[h]=this.addText(h,d+s,c)}return t},e.prototype.computeTextureSize=function(e){var t=Math.max(e.width,e.height)+e.symbols.length,n=Math.floor(oe/this.cellSize),r=Math.ceil(t/n);return{width:r>1?oe:t*this.cellSize,height:r*this.cellSize}},e.prototype.addText=function(e,t,n){var r=this.cellSize,o=Math.floor(oe/r),c=t%o*r,a=Math.floor(t/o)*r;n.fillText(e,c+r/2,a+r/2);var s=n.canvas,d=s.width,u=s.height;return this.toTexCoords(new i(c,a),d,u)},e.prototype.getBorderNumberTexCoords=function(e){return this.numberMap[e]},e.prototype.getSchemaSymbolTexCoords=function(e){return this.symbolMap[e]},e.prototype.toTexCoords=function(e,t,n){var r=e.x,o=e.y,c=this.cellSize;return[new i(r/t,(o+c)/n),new i(r/t,o/n),new i((r+c)/t,o/n),new i((r+c)/t,(o+c)/n)]},e.prototype.bind=function(e){this.texture.bind(e)},e.prototype.destroy=function(){this.texture.destroy()},e}(),fe=function(e){function t(t,n,r,o){var c=e.call(this)||this;return c.gl=t,c.schemaInfo=n,c.shader=r,c.data=o,t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.BLEND),c.shader.bind(),c.data.bind(),c.whiteTexture=c.createWhiteTexture(),c.atlas=new le(t,n),c.whiteTexture.bind(0),c.atlas.bind(1),c}return l(t,e),t.prototype.createWhiteTexture=function(){var e=new ImageData(1,1);return e.data[0]=255,e.data[1]=255,e.data[2]=255,e.data[3]=255,new ue(this.gl,e)},t.prototype.start=function(){var e=this.gl,t=e.canvas,n=t.width,r=t.height;e.viewport(0,0,n,r),e.clearColor(255,255,255,255),e.clear(e.COLOR_BUFFER_BIT);var o=this.getProjectionMatrix(n,r);this.shader.setMatrix3x3("u_ProjectionMatrix",o),this.shader.setIntArray("u_Textures",[0,1])},t.prototype.getProjectionMatrix=function(e,t){var n=window.devicePixelRatio;return[2/e*n,0,0,0,-2/t*n,0,-1,1,1]},t.prototype.drawRect=function(e,t,n,r,o){var c=this.computePositions(e,t,n,r),i=this.transformColor(o);this.data.addVertices(c,i)},t.prototype.drawSchemaSymbol=function(e,t,n,r){var o=this.computePositions(t,n),c=this.transformColor(r),i=this.atlas.getSchemaSymbolTexCoords(e);this.data.addVertices(o,c,1,i)},t.prototype.drawBorderNumber=function(e,t,n){var r=this.computePositions(t,n),c=new o(0,0,0,255),i=this.atlas.getBorderNumberTexCoords(e);this.data.addVertices(r,c,1,i)},t.prototype.drawLine=function(e,t,n,r,o){var c=n-e,i=r-t;if(0!==c&&0!==i)throw new Error("not supported");var a=o.color,s=o.lineWidth,d=s/2;0!==c?this.drawRect(e,t-d,c,s,a):this.drawRect(e-d,t,s,i,a)},t.prototype.transformColor=function(e){return e instanceof o?e:new o(e.red,e.green,e.blue,255)},t.prototype.computePositions=function(e,t,n,r){return n=null!==n&&void 0!==n?n:this.schemaInfo.cellSize,r=null!==r&&void 0!==r?r:this.schemaInfo.cellSize,[new i(e,t+r),new i(e,t),new i(e+n,t),new i(e+n,t+r)]},t.prototype.end=function(){this.data.flush()},t.prototype.destroy=function(){this.atlas.destroy(),this.data.destroy(),this.whiteTexture.destroy()},t}(te),xe=function(e){function t(t,n){var r;if(n instanceof Uint8Array)r=t.UNSIGNED_BYTE;else{if(!(n instanceof Uint16Array))throw new Error("Not supported");r=t.UNSIGNED_SHORT}return e.call(this,t,r,n)||this}return l(t,e),t}(ce),pe=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return l(t,e),t.prototype.setData=function(e){if(null!==this.id){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.id),t.bufferSubData(t.ARRAY_BUFFER,0,e)}},t}(he),be=function(e){function t(t,n){var r=new re(t,[{name:"a_Position",type:Z.Vector2},{name:"a_Color",type:Z.Vector4},{name:"a_TexIndex",type:Z.Float},{name:"a_TexCoords",type:Z.Vector2}]),o=6*n,c=4*n<=Math.pow(2,8)?new Uint8Array(o):new Uint16Array(o);return e.call(this,t,r,c)||this}return l(t,e),t.prototype.createIndexBuffer=function(e){return new xe(this.gl,e)},t.prototype.createVertexBuffer=function(e,t){return new pe(this.gl,e,t)},t.prototype.setData=function(e){this.vertexBuffer.setData(e)},t.prototype.setVertex=function(e,t,n,r){this.setPosition(e),this.setColor(t),this.setTexIndex(n),this.setTexCoords(r)},t}(ie),ve=function(e){function t(t,n){var r=new be(t,3e3),o=new ae(t,"WEBGL1_SHADER","attribute vec2 a_Position;attribute vec4 a_Color;attribute float a_TexIndex;attribute vec2 a_TexCoords;uniform mat3 u_ProjectionMatrix;varying vec4 v_Color;varying float v_TexIndex;varying vec2 v_TexCoords;void main(){v_Color=a_Color;v_TexIndex=a_TexIndex;v_TexCoords=a_TexCoords;gl_Position=vec4(u_ProjectionMatrix*vec3(a_Position,1.0),1.0);}","precision mediump float;uniform sampler2D u_Textures[2];varying vec4 v_Color;varying float v_TexIndex;varying vec2 v_TexCoords;vec4 getTextureColor(float texIndex,vec2 texCoords){if(texIndex==0.0){return texture2D(u_Textures[0],texCoords);}else{return texture2D(u_Textures[1],texCoords);}}void main(){gl_FragColor=getTextureColor(v_TexIndex,v_TexCoords)*v_Color;}");return e.call(this,t,n,o,r)||this}return l(t,e),t}(fe),me=function(e){function t(t,n){var r;if(n instanceof Uint8Array)r=t.UNSIGNED_BYTE;else if(n instanceof Uint16Array)r=t.UNSIGNED_SHORT;else{if(!(n instanceof Uint32Array))throw new Error("Not supported");r=t.UNSIGNED_INT}return e.call(this,t,r,n)||this}return l(t,e),t}(ce),ye=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return l(t,e),t.prototype.setData=function(e,t){if(null!==this.id){var n=this.gl;n.bindBuffer(n.ARRAY_BUFFER,this.id),n.bufferSubData(n.ARRAY_BUFFER,0,e,0,t)}},t}(he),ge=function(e){function t(t,n){var r=new re(t,[{name:"a_Position",type:Z.Vector2},{name:"a_Color",type:Z.Vector4},{name:"a_TexIndex",type:Z.Float},{name:"a_TexCoords",type:Z.Vector2}]),o=4*n,c=6*n,i=o<=Math.pow(2,8)?new Uint8Array(c):o<=Math.pow(2,16)?new Uint16Array(c):new Uint32Array(c);return e.call(this,t,r,i)||this}return l(t,e),t.prototype.createIndexBuffer=function(e){return new me(this.gl,e)},t.prototype.createVertexBuffer=function(e,t){return new ye(this.gl,e,t)},t.prototype.setData=function(e){this.vertexBuffer.setData(e,4*this.quadIndex)},t.prototype.setVertex=function(e,t,n,r){this.setPosition(e),this.setColor(t),this.setTexIndex(n),this.setTexCoords(r)},t}(ie),we=function(e){function t(t,n){var r=new ge(t,5e3),o=new ae(t,"WEBGL2_SHADER","#version 300 es\nin vec2 a_Position;in vec4 a_Color;in float a_TexIndex;in vec2 a_TexCoords;uniform mat3 u_ProjectionMatrix;out vec4 v_Color;out float v_TexIndex;out vec2 v_TexCoords;void main(){v_Color=a_Color;v_TexIndex=a_TexIndex;v_TexCoords=a_TexCoords;gl_Position=vec4(u_ProjectionMatrix*vec3(a_Position,1.0),1.0);}","#version 300 es\nprecision mediump float;uniform sampler2D u_Textures[2];in vec4 v_Color;in float v_TexIndex;in vec2 v_TexCoords;out vec4 color;vec4 getTextureColor(float texIndex,vec2 texCoords){if(texIndex==0.0){return texture(u_Textures[0],texCoords);}else{return texture(u_Textures[1],texCoords);}}void main(){color=getTextureColor(v_TexIndex,v_TexCoords)*v_Color;}");return e.call(this,t,n,o,r)||this}return l(t,e),t}(fe),_e=function(e){function t(t,n){var r=e.call(this)||this;r.viewProvider=t,r.drawRequired=!0,r._isDestroyed=!1,r.onResize=function(){r.resize()},r.onKeyDown=function(e){"Period"!==e.code||e.repeat||r.toggleTimeDisplay()},r.onScroll=function(){r.drawRequired=!0},r.pointerDownPosition=null,r.onPointerDown=function(e){e.isPrimary&&(r.scrollArea.setPointerCapture(e.pointerId),r.pointerDownPosition=r.clientPositionToCanvas(e.clientX,e.clientY))},r.onPointerMove=function(e){if(e.isPrimary){var t=r.clientPositionToCanvas(e.clientX,e.clientY),n=r.computeChunk().getCellByCanvasPosition(t.x,t.y);if(null!==n)switch(n.type){case"border":r.emit("borderCellPointerMove",{cell:n,pointerEvent:e})||r.onBorderCellPointerMove(n,e);break;case"schema":r.emit("schemaCellPointerMove",{cell:n,pointerEvent:e})||r.onSchemaCellPointerMove(n,e);break;default:throw new Error("Not implemented")}}},r.onPointerUp=function(e){if(null!==r.pointerDownPosition&&e.isPrimary){var t=r.computeChunk(),n=r.clientPositionToCanvas(e.clientX,e.clientY),o=t.getCellByCanvasPosition(r.pointerDownPosition.x,r.pointerDownPosition.y),c=t.getCellByCanvasPosition(n.x,n.y);if(r.pointerDownPosition=null,null!==o&&null!==c&&N(o,c))switch(c.type){case"border":r.emit("borderCellClick",{cell:c,pointerEvent:e})||r.onBorderCellClick(c,e);break;case"schema":r.emit("schemaCellClick",{cell:c,pointerEvent:e})||r.onSchemaCellClick(c,e);break;default:throw new Error("Not implemented")}}},r.onPointerCancel=function(e){e.isPrimary&&(r.pointerDownPosition=null)},r.touchStarted=!1,r.touchScrollPrevented=!1,r.onTouchStart=function(e){if(!r.touchStarted){r.touchStarted=!0,r.touchScrollPrevented=!1;var t=r.computeChunk(),n=r.clientPositionToCanvas(e.touches[0].clientX,e.touches[0].clientY),o=t.getCellByCanvasPosition(n.x,n.y);if(null!==o){switch(o.type){case"border":r.emit("borderCellTouchStart",{cell:o,touchEvent:e})||r.onBorderCellTouchStart(o,e);break;case"schema":r.emit("schemaCellTouchStart",{cell:o,touchEvent:e})||r.onSchemaCellTouchStart(o,e);break;default:throw new Error("Not implemented")}e.defaultPrevented&&(r.touchScrollPrevented=!0)}}},r.onTouchMove=function(e){if(r.touchScrollPrevented){e.preventDefault();var t=r.computeChunk(),n=r.clientPositionToCanvas(e.touches[0].clientX,e.touches[0].clientY),o=t.getCellByCanvasPosition(n.x,n.y);if(null!==o)switch(o.type){case"border":r.emit("borderCellTouchMove",{cell:o,touchEvent:e})||r.onBorderCellTouchMove(o,e);break;case"schema":r.emit("schemaCellTouchMove",{cell:o,touchEvent:e})||r.onSchemaCellTouchMove(o,e);break;default:throw new Error("Not implemented")}}},r.onTouchEnd=function(e){0===e.touches.length&&(r.touchStarted=!1,r.touchScrollPrevented=!1)};var o=r.viewProvider.schema.metadata.canvasMetadata,c=o.width,i=o.height;return r.cellsCount=new a(c,i),r.canvas=r.createCanvas(),r.renderer=r.createRenderer(),r.scrollArea=r.createScrollArea(),r.timeDisplay=r.createTimeDisplay(),n.innerHTML="",n.appendChild(r.canvas),n.appendChild(r.scrollArea),n.appendChild(r.timeDisplay),r.resize(),r.attach(),r}return l(t,e),Object.defineProperty(t.prototype,"isDestroyed",{get:function(){return this._isDestroyed},enumerable:!1,configurable:!0}),t.prototype.createCanvas=function(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.width="100%",e.style.height="100%",e},t.prototype.createRenderer=function(){var e={cellSize:_,width:this.cellsCount.x,height:this.cellsCount.y,symbols:this.viewProvider.getSymbols()},t=this.canvas.getContext("webgl2");if(t)return new we(t,e);var n=this.canvas.getContext("webgl");if(n)return new ve(n,e);throw new Error("webgl not supported")},t.prototype.createTimeDisplay=function(){var e=document.createElement("div");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="30px",e.style.height="30px",e.style.display="none",e.style.justifyContent="center",e.style.alignItems="center",e},t.prototype.createScrollArea=function(){var e=document.createElement("div");e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.zIndex="10",e.style.overflow="auto",e.style.touchAction="pan-x pan-y";var t=document.createElement("div");return t.style.width=_*(this.cellsCount.x+1)+"px",t.style.height=_*(this.cellsCount.y+1)+"px",e.appendChild(t),e},t.prototype.attach=function(){var e=this;window.addEventListener("resize",this.onResize),window.addEventListener("keydown",this.onKeyDown),window.requestAnimationFrame((function(){e.drawLoop()})),this.scrollArea.addEventListener("scroll",this.onScroll),this.scrollArea.addEventListener("pointerdown",this.onPointerDown),this.scrollArea.addEventListener("pointermove",this.onPointerMove),this.scrollArea.addEventListener("pointerup",this.onPointerUp),this.scrollArea.addEventListener("pointercancel",this.onPointerCancel),this.scrollArea.addEventListener("touchstart",this.onTouchStart),this.scrollArea.addEventListener("touchmove",this.onTouchMove),this.scrollArea.addEventListener("touchend",this.onTouchEnd)},t.prototype.detach=function(){window.removeEventListener("resize",this.onResize),window.removeEventListener("keydown",this.onKeyDown)},t.prototype.resize=function(){var e=this.canvas;e.style.width=this.scrollArea.clientWidth+"px",e.style.height=this.scrollArea.clientHeight+"px";var t=e.getBoundingClientRect(),n=Math.round(t.width*window.devicePixelRatio),r=Math.round(t.height*window.devicePixelRatio);e.width=n,e.height=r,this.drawRequired=!0},t.prototype.onBorderCellClick=function(e,t){},t.prototype.onSchemaCellClick=function(e,t){},t.prototype.onBorderCellPointerMove=function(e,t){},t.prototype.onSchemaCellPointerMove=function(e,t){},t.prototype.onBorderCellTouchStart=function(e,t){},t.prototype.onSchemaCellTouchStart=function(e,t){},t.prototype.onBorderCellTouchMove=function(e,t){},t.prototype.onSchemaCellTouchMove=function(e,t){},t.prototype.clientPositionToCanvas=function(e,t){var n=this.scrollArea.getBoundingClientRect();return new i(e-n.x,t-n.y)},t.prototype.toggleTimeDisplay=function(){"none"===this.timeDisplay.style.display?this.timeDisplay.style.display="flex":this.timeDisplay.style.display="none"},t.prototype.scrollToCell=function(e,t){var n,r;"border"===e.type?(n="x"===e.axis?e.number*_:0,r="y"===e.axis?e.number*_:0):(n=e.i*_,r=e.j*_);var o=this.scrollArea,c=new i(t&&t.center?-(o.clientWidth/2-_):0,t&&t.center?-(o.clientHeight/2-_):0);o.scroll({left:n+c.x,top:r+c.y,behavior:"smooth"})},t.prototype.requireRedraw=function(){this.drawRequired=!0},t.prototype.drawLoop=function(){var e=this;this.isDestroyed||(this.drawRequired&&(this.drawRequired=!1,this.draw()),window.requestAnimationFrame((function(){e.drawLoop()})))},t.prototype.draw=function(){var e=performance.now(),t=this.computeChunk();this.renderer.start(),this.preRender(t),this.drawCells(t),this.drawScale(t),this.drawGrid(t),this.postRender(t),this.renderer.end(),this.emit("redraw",t)||this.onRedraw(t);var n=Math.round(performance.now()-e);this.timeDisplay.innerText=n.toString()},t.prototype.preRender=function(e){},t.prototype.postRender=function(e){},t.prototype.onRedraw=function(e){},t.prototype.drawCells=function(e){e.forEachCell(this.drawCell.bind(this))},t.prototype.drawCell=function(e,t,n,r,c){var i=this.viewProvider.getCell(e,t);if(null!==i){var a=o.fromHex(i.color.hex);this.renderer.drawRect(n,r,c.cellSize,c.cellSize,a);var s=o.fromHex(i.symbolColor);this.renderer.drawSchemaSymbol(i.symbol,n,r,s)}},t.prototype.drawScale=function(e){var t=this,n=new o(255,255,255,255);this.renderer.drawRect(0,0,e.width,e.cellSize,n),this.renderer.drawRect(0,0,e.cellSize,e.height,n),e.forEachCellI((function(e,n){t.renderer.drawBorderNumber(e,n,0)})),e.forEachCellJ((function(e,n){t.renderer.drawBorderNumber(e,0,n)}))},t.prototype.drawGrid=function(e){var t=this,n=new o(255,255,255,255);this.renderer.drawRect(0,0,e.cellSize,e.cellSize,n);var r=new o(0,0,0,255),c=2.5;this.renderer.drawLine(e.cellSize,0,e.cellSize,e.height,{lineWidth:c,color:r}),this.renderer.drawLine(0,e.cellSize,e.width,e.cellSize,{lineWidth:c,color:r}),r=new o(50,50,50,255),c=1,e.forEachCellI((function(n,o){(n+1)%9!==0&&(o+=e.cellSize,t.renderer.drawLine(o,0,o,e.height,{lineWidth:c,color:r}))})),e.forEachCellJ((function(n,o){(n+1)%9!==0&&(o+=e.cellSize,t.renderer.drawLine(0,o,e.width,o,{lineWidth:c,color:r}))})),c=2,e.forEachCellI((function(n,o){(n+1)%9===0&&(o+=e.cellSize,t.renderer.drawLine(o,0,o,e.height,{lineWidth:c,color:r}))})),e.forEachCellJ((function(n,o){(n+1)%9===0&&(o+=e.cellSize,t.renderer.drawLine(0,o,e.width,o,{lineWidth:c,color:r}))}))},t.prototype.computeChunk=function(){var e=this.canvas,t=this.getOffset(),n=new i(e.width,e.height);return new ee(_,this.cellsCount,n,t)},t.prototype.getOffset=function(){var e=function(e,t,n){return e<t?t:e>n?n:e},t=e(this.scrollArea.scrollLeft,0,this.scrollArea.scrollWidth-this.scrollArea.clientWidth),n=e(this.scrollArea.scrollTop,0,this.scrollArea.scrollHeight-this.scrollArea.clientHeight);return new i(t,n)},t.prototype.destroy=function(){this.isDestroyed||(this._isDestroyed=!0,this.detach(),this.canvas.remove(),this.scrollArea.remove(),this.renderer.destroy(),this.emit("destroy",{})||this.onDestroy())},t.prototype.onDestroy=function(){},t}(r),je=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.animations=[],t.context={renderer:t.renderer,requireRedraw:t.requireRedraw.bind(t),viewProvider:t.viewProvider},t}return l(t,e),t.prototype.drawCell=function(e,t,n,r,o){var c=this.animations.findIndex((function(n){var r=n.cellPredicate;return r&&r(e,t)}));if(-1!==c){var i=this.animations[c];if(!i.finished)return i.draw(e,t,n,r,o,this.context),!0;this.animations.splice(c,1)}},t.prototype.postRender=function(e){var t=this;v([],this.animations,!0).forEach((function(n,r){n.finished?t.animations.splice(r,1):n.postRender(e,t.context)}))},t.prototype.startAnimation=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.animations.unshift(new(e.bind.apply(e,v([void 0,this.context],t,!1))))},t.prototype.stopAnimation=function(e){this.animations=this.animations.filter((function(t){return!(t instanceof e)}))},t}(_e),Oe=new o(255,255,255,255),Ce=new o(0,0,0,255),Se=new o(210,210,210,255),ke=function(e){function t(t,n){var r=this,c=t.renderer,i=t.viewProvider,a=i.getCell(n.i,n.j);if(a){var s=new w([n.fromColor,n.toColor]),d=a.symbol,u=new o(0,0,0,0),h=Ce,l="embroider"===n.mode?h:u,f="embroider"===n.mode?u:h,x=new w([l,f]);return r=e.call(this,t,{duration:150,draw:function(e,t,n){var r=n.time,o=n.chunk,i=s.evaluate(r/150);c.drawRect(e,t,o.cellSize,o.cellSize,i);var a=x.evaluate(r/150);c.drawSchemaSymbol(d,e,t,a)},cellPredicate:function(e,t){if(e!==n.i||t!==n.j)return!1;var r=i.getCell(e,t);if(r){var o=n.mode;return r.embroidered&&"embroider"===o||!r.embroidered&&"erase"===o}return!1}})||this,r}r=e.call(this,t)||this}return l(t,e),t}(m),Ee=function(e){function t(t,n){var r,o="in"===n.mode?Oe:Se,c="in"===n.mode?Se:Oe,i=new w([o,c]),a=t.renderer,s=t.viewProvider,d=Ce;return r=e.call(this,t,{duration:250,draw:function(e,t,n){var r=n.i,o=n.j,c=n.time,u=n.chunk,h=s.getCell(r,o);if(h){var l=i.evaluate(c/250);a.drawRect(e,t,u.cellSize,u.cellSize,l);var f=h.symbol;a.drawSchemaSymbol(f,e,t,d)}},cellPredicate:function(e,t){var r=s.getCell(e,t);return!!r&&!r.embroidered&&r.color.code===n.code}})||this,r}return l(t,e),t}(m),Pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eraseMode=!1,t}return l(t,e),t.prototype.drawCell=function(t,n,r,c,i){if(e.prototype.drawCell.call(this,t,n,r,c,i))return!0;var a=this.viewProvider.getCell(t,n);if(a)if(a.embroidered){var s=o.fromHex(a.color.hex);this.renderer.drawRect(r,c,i.cellSize,i.cellSize,s)}else{s=new o(0,0,0,255);if(a.color.code===this.penColorCode){var d=new o(210,210,210,255);this.renderer.drawRect(r,c,i.cellSize,i.cellSize,d)}this.renderer.drawSchemaSymbol(a.symbol,r,c,s)}},t.prototype.setIsEraseMode=function(e){this.eraseMode=e,this.requireRedraw()},t.prototype.setPenColorCode=function(e){this.penColorCode!==e&&(this.penColorCode&&(this.stopAnimation(Ee),this.startAnimation(Ee,{mode:"out",code:this.penColorCode})),this.penColorCode=e,this.requireRedraw(),e&&this.startAnimation(Ee,{mode:"in",code:e}))},t.prototype.scrollToNotEmbroidered=function(e){for(var t=this.viewProvider.schema.metadata.canvasMetadata,n=t.width,r=t.height,o=0;o<r;o++)for(var c=0;c<n;c++){var i=this.viewProvider.getCell(c,o);if(i&&i.color.code===e&&!i.embroidered)return void this.scrollToCell({i:c,j:o,type:"schema"},{center:!0})}},t.prototype.onSchemaCellClick=function(e){this.processCell(e)},t.prototype.onSchemaCellPointerMove=function(e,t){1===t.buttons&&this.processCell(e)},t.prototype.onSchemaCellTouchStart=function(e,t){this.processCell(e)&&t.preventDefault()},t.prototype.onSchemaCellTouchMove=function(e){this.processCell(e)},t.prototype.processCell=function(e){var t=e.i,n=e.j,r=this.viewProvider.getCell(t,n);return null!==r&&(!(r.color.code!==this.penColorCode&&!this.eraseMode)&&(r.embroidered&&this.eraseMode?(this.eraseCell(t,n,r.color),!0):!r.embroidered&&!this.eraseMode&&(this.embroider\u0421ell(t,n,r.color),!0)))},t.prototype.eraseCell=function(e,t,n){this.viewProvider.eraseCell(e,t),this.requireRedraw(),this.startAnimation(ke,{i:e,j:t,mode:"erase",fromColor:o.fromHex(n.hex),toColor:n.code===this.penColorCode?Se:Oe}),this.emit("cellErased",{i:e,j:t})},t.prototype.embroider\u0421ell=function(e,t,n){this.viewProvider.embroider\u0421ell(e,t),this.requireRedraw(),this.startAnimation(ke,{i:e,j:t,mode:"embroider",fromColor:n.code===this.penColorCode?Se:Oe,toColor:o.fromHex(n.hex)}),this.emit("cellEmbroidered",{i:e,j:t})},t}(je),Te=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ie=function(){function e(t){this.schema=t,this.colorMap=[];for(var n=t.palette.colors.length,r=0;r<n;r++){var o=e.generateSymbol(r),c=U(t.palette.colors[r].hex);this.colorMap.push({symbol:o,symbolColor:c})}}return e.prototype.getCell=function(e,t){var n=this.getCellIndex(e,t),r=this.schema.grid[n];return null===r?null:f({color:this.schema.palette.colors[r]},this.colorMap[r])},e.prototype.getColorSymbol=function(e){var t=this.schema.palette.colors.findIndex((function(t){return t.code===e}));return-1===t?void 0:this.colorMap[t].symbol},e.prototype.getSymbols=function(){return this.colorMap.map((function(e){return e.symbol}))},e.prototype.getCellIndex=function(e,t){return t*this.schema.metadata.canvasMetadata.width+e},e.generateSymbol=function(e){if(!Number.isInteger(e))throw new TypeError("Integer expected");e+=1;for(var t=Te.length,n="";e>=t;)n+=Te[e%t],e=Math.floor(e/t);return(n+=Te[e]).split("").reverse().join("")},e}(),Re=function(e){function t(t){var n=e.call(this,t.schema)||this;n.work=t,n.colorStatistics={};for(var r=t.schema.palette.colors.length,o=0;o<r;o++){var c=t.schema.palette.colors[o];n.colorStatistics[c.code]={cellsCount:0,embroideredCellsCount:0}}for(var i=t.schema.metadata.canvasMetadata,a=i.width,s=i.height,d=0;d<s;d++)for(o=0;o<a;o++){var u=n.getCell(o,d);if(u){var h=n.colorStatistics[u.color.code];h.cellsCount++,u.embroidered&&h.embroideredCellsCount++}}return n}return l(t,e),t.prototype.embroider\u0421ell=function(e,t){var n=this.getCell(e,t),r=this.getCellIndex(e,t);n&&!1===this.work.embroidered[r]&&(this.work.embroidered[r]=!0,this.work.metadata.stitchEmbroideredCount++,this.colorStatistics[n.color.code].embroideredCellsCount++)},t.prototype.eraseCell=function(e,t){var n=this.getCell(e,t),r=this.getCellIndex(e,t);n&&!0===this.work.embroidered[r]&&(this.work.embroidered[r]=!1,this.work.metadata.stitchEmbroideredCount--,this.colorStatistics[n.color.code].embroideredCellsCount--)},t.prototype.getColorStatistics=function(e){var t=this.colorStatistics[e];if(t)return f({},t);throw new Error("No color")},t.prototype.getCell=function(t,n){var r=e.prototype.getCell.call(this,t,n);if(r){var o=this.getCellIndex(t,n),c=this.work.embroidered[o];return f(f({},r),{embroidered:c})}return null},t}(Ie),Ne=Object.freeze([{name:"DMC",colors:[{code:"150",hex:"#93203a"},{code:"151",hex:"#ecb9bc"},{code:"152",hex:"#e4b9b6"},{code:"153",hex:"#dfc0db"},{code:"154",hex:"#581727"},{code:"155",hex:"#ab9ac6"},{code:"156",hex:"#8692bb"},{code:"157",hex:"#c8d2e6"},{code:"158",hex:"#453f75"},{code:"159",hex:"#9aa4c2"},{code:"160",hex:"#8c98b4"},{code:"161",hex:"#6a6983"},{code:"162",hex:"#cfe5f0"},{code:"163",hex:"#488269"},{code:"164",hex:"#abcf8a"},{code:"165",hex:"#d7d477"},{code:"166",hex:"#a8b144"},{code:"167",hex:"#9d763d"},{code:"168",hex:"#ccd2d5"},{code:"169",hex:"#959ba0"},{code:"208",hex:"#9f65a4"},{code:"209",hex:"#b698c6"},{code:"210",hex:"#ceb6e4"},{code:"211",hex:"#d0c8e4"},{code:"221",hex:"#ac544c"},{code:"223",hex:"#c57e7a"},{code:"224",hex:"#e5bbb5"},{code:"225",hex:"#ecd0c4"},{code:"300",hex:"#653c1e"},{code:"301",hex:"#ab6734"},{code:"304",hex:"#aa102e"},{code:"307",hex:"#fce740"},{code:"309",hex:"#b73745"},{code:"311",hex:"#194465"},{code:"312",hex:"#2d426b"},{code:"315",hex:"#824646"},{code:"316",hex:"#c68c9f"},{code:"317",hex:"#5a6067"},{code:"318",hex:"#8f9096"},{code:"319",hex:"#3e5a2f"},{code:"320",hex:"#6e8a69"},{code:"321",hex:"#ce1f32"},{code:"322",hex:"#647e9d"},{code:"326",hex:"#a92332"},{code:"327",hex:"#723657"},{code:"333",hex:"#6c5086"},{code:"334",hex:"#4c698c"},{code:"335",hex:"#e56d7f"},{code:"336",hex:"#0c1225"},{code:"340",hex:"#9389c1"},{code:"341",hex:"#a2accd"},{code:"347",hex:"#bf3e31"},{code:"349",hex:"#c24731"},{code:"350",hex:"#e46647"},{code:"351",hex:"#f78465"},{code:"352",hex:"#f69d80"},{code:"353",hex:"#fdbca1"},{code:"355",hex:"#9a3b2d"},{code:"356",hex:"#a06757"},{code:"367",hex:"#4c7047"},{code:"368",hex:"#91ab84"},{code:"369",hex:"#ccdcbe"},{code:"370",hex:"#bbaa55"},{code:"371",hex:"#a08f4d"},{code:"372",hex:"#9c8c4a"},{code:"400",hex:"#934d29"},{code:"402",hex:"#e8a76d"},{code:"407",hex:"#c49a87"},{code:"413",hex:"#565d59"},{code:"414",hex:"#95909d"},{code:"415",hex:"#ced0d5"},{code:"420",hex:"#866226"},{code:"433",hex:"#775437"},{code:"434",hex:"#b78237"},{code:"435",hex:"#c4863a"},{code:"436",hex:"#c09557"},{code:"437",hex:"#e1c395"},{code:"444",hex:"#fbdf0d"},{code:"445",hex:"#f9f287"},{code:"451",hex:"#978e87"},{code:"452",hex:"#c5b6b4"},{code:"453",hex:"#e3dcdb"},{code:"469",hex:"#798738"},{code:"470",hex:"#98a859"},{code:"471",hex:"#929937"},{code:"472",hex:"#dee077"},{code:"498",hex:"#98232c"},{code:"500",hex:"#14361e"},{code:"501",hex:"#496f5c"},{code:"502",hex:"#799a83"},{code:"503",hex:"#8ebea9"},{code:"504",hex:"#d1e2d7"},{code:"505",hex:"#4a805b"},{code:"517",hex:"#166d92"},{code:"518",hex:"#6b9cb9"},{code:"519",hex:"#a8c6d8"},{code:"520",hex:"#4f6035"},{code:"522",hex:"#93a181"},{code:"523",hex:"#a5a888"},{code:"524",hex:"#bec0a8"},{code:"535",hex:"#504f50"},{code:"543",hex:"#f0e3d4"},{code:"550",hex:"#541244"},{code:"552",hex:"#7b3f6c"},{code:"553",hex:"#a772a4"},{code:"554",hex:"#ae99b1"},{code:"561",hex:"#44684e"},{code:"562",hex:"#649a73"},{code:"563",hex:"#a2ccaa"},{code:"564",hex:"#b8cea6"},{code:"580",hex:"#7a8035"},{code:"581",hex:"#9fa146"},{code:"597",hex:"#7fb5c0"},{code:"598",hex:"#a5dbde"},{code:"600",hex:"#bf1c48"},{code:"601",hex:"#d34067"},{code:"602",hex:"#ca0b51"},{code:"603",hex:"#ef7ba1"},{code:"604",hex:"#efa8ca"},{code:"606",hex:"#ea592c"},{code:"608",hex:"#f06e46"},{code:"610",hex:"#806638"},{code:"611",hex:"#9e9072"},{code:"612",hex:"#917d4a"},{code:"613",hex:"#bcae83"},{code:"632",hex:"#8c593e"},{code:"640",hex:"#938962"},{code:"642",hex:"#bab599"},{code:"644",hex:"#d6d3c1"},{code:"645",hex:"#6c6e58"},{code:"646",hex:"#97978e"},{code:"647",hex:"#abafa3"},{code:"648",hex:"#d0cfc9"},{code:"666",hex:"#d82e26"},{code:"676",hex:"#eed7a1"},{code:"677",hex:"#ede0ba"},{code:"680",hex:"#af8334"},{code:"699",hex:"#015731"},{code:"700",hex:"#2e9148"},{code:"701",hex:"#007a3f"},{code:"702",hex:"#50a348"},{code:"703",hex:"#70b145"},{code:"704",hex:"#bad765"},{code:"712",hex:"#e1e1d9"},{code:"718",hex:"#9f2d6f"},{code:"720",hex:"#ec6810"},{code:"721",hex:"#e4752b"},{code:"722",hex:"#faa463"},{code:"725",hex:"#fad558"},{code:"726",hex:"#ffe35f"},{code:"727",hex:"#feee89"},{code:"728",hex:"#e8b539"},{code:"729",hex:"#cc993d"},{code:"730",hex:"#746d2b"},{code:"731",hex:"#837d2f"},{code:"732",hex:"#91852a"},{code:"733",hex:"#a6a036"},{code:"734",hex:"#c9b639"},{code:"738",hex:"#d8bf95"},{code:"739",hex:"#e0d0b0"},{code:"740",hex:"#ff7600"},{code:"741",hex:"#febc46"},{code:"742",hex:"#ffc33a"},{code:"743",hex:"#ffda5a"},{code:"744",hex:"#ffe276"},{code:"745",hex:"#ffeda9"},{code:"746",hex:"#f5f0df"},{code:"747",hex:"#d3e9e7"},{code:"754",hex:"#efc1aa"},{code:"758",hex:"#eac0b4"},{code:"760",hex:"#e29690"},{code:"761",hex:"#f4c4c1"},{code:"762",hex:"#e9e9eb"},{code:"772",hex:"#f3f6d4"},{code:"775",hex:"#ceddea"},{code:"776",hex:"#eeaeb0"},{code:"777",hex:"#822741"},{code:"778",hex:"#ddb3b1"},{code:"779",hex:"#604545"},{code:"780",hex:"#936626"},{code:"781",hex:"#ba8225"},{code:"782",hex:"#b38132"},{code:"783",hex:"#d59c4c"},{code:"791",hex:"#161151"},{code:"792",hex:"#7971a0"},{code:"793",hex:"#686d8d"},{code:"794",hex:"#7d98b5"},{code:"796",hex:"#181f66"},{code:"797",hex:"#2c4180"},{code:"798",hex:"#445997"},{code:"799",hex:"#6e8db5"},{code:"800",hex:"#c1d3df"},{code:"801",hex:"#7b5e26"},{code:"806",hex:"#437490"},{code:"807",hex:"#70a8b3"},{code:"809",hex:"#6c91c0"},{code:"813",hex:"#91b4ce"},{code:"814",hex:"#5f1f2c"},{code:"815",hex:"#9d3030"},{code:"816",hex:"#811024"},{code:"817",hex:"#bd2e2e"},{code:"818",hex:"#f9d6dd"},{code:"819",hex:"#fbe2df"},{code:"820",hex:"#190f60"},{code:"822",hex:"#e2dfd3"},{code:"824",hex:"#124477"},{code:"825",hex:"#366390"},{code:"826",hex:"#5a82a2"},{code:"827",hex:"#b4d3e3"},{code:"828",hex:"#cae2eb"},{code:"829",hex:"#6f5422"},{code:"830",hex:"#8d7529"},{code:"831",hex:"#957b2f"},{code:"832",hex:"#b19a3f"},{code:"833",hex:"#bfa43a"},{code:"834",hex:"#cab751"},{code:"838",hex:"#573c2a"},{code:"839",hex:"#684e37"},{code:"840",hex:"#977e65"},{code:"841",hex:"#b39f8c"},{code:"842",hex:"#cdb9a4"},{code:"844",hex:"#6c6e58"},{code:"869",hex:"#775820"},{code:"890",hex:"#043810"},{code:"891",hex:"#ef4949"},{code:"892",hex:"#f85b64"},{code:"893",hex:"#fc6a84"},{code:"894",hex:"#f999a5"},{code:"895",hex:"#29542f"},{code:"898",hex:"#502f1b"},{code:"899",hex:"#ee8593"},{code:"900",hex:"#d45d28"},{code:"902",hex:"#4f080c"},{code:"904",hex:"#4f6c33"},{code:"905",hex:"#759a3e"},{code:"906",hex:"#82ae44"},{code:"907",hex:"#a9c33e"},{code:"909",hex:"#00793b"},{code:"910",hex:"#008c4c"},{code:"911",hex:"#40a756"},{code:"912",hex:"#58a96b"},{code:"913",hex:"#88c78d"},{code:"915",hex:"#800137"},{code:"917",hex:"#832a58"},{code:"918",hex:"#8c3b1a"},{code:"919",hex:"#9b3b1b"},{code:"920",hex:"#a74f2a"},{code:"921",hex:"#c36b29"},{code:"922",hex:"#d6834d"},{code:"924",hex:"#3b4f45"},{code:"926",hex:"#7c999b"},{code:"927",hex:"#a7bec2"},{code:"928",hex:"#e5eae9"},{code:"930",hex:"#78828f"},{code:"931",hex:"#8f9ca7"},{code:"932",hex:"#a4b5c6"},{code:"934",hex:"#4d4c34"},{code:"935",hex:"#4b5035"},{code:"936",hex:"#5d5c2b"},{code:"937",hex:"#4f5925"},{code:"938",hex:"#3b2811"},{code:"939",hex:"#02101c"},{code:"943",hex:"#009a7b"},{code:"945",hex:"#e3be8e"},{code:"946",hex:"#e15729"},{code:"947",hex:"#f26922"},{code:"948",hex:"#feebe2"},{code:"950",hex:"#e7ceb9"},{code:"951",hex:"#f2e0ce"},{code:"954",hex:"#abd58b"},{code:"955",hex:"#b4e8b3"},{code:"956",hex:"#ff7a90"},{code:"957",hex:"#f9afb7"},{code:"958",hex:"#51c0bb"},{code:"959",hex:"#8fd3d4"},{code:"961",hex:"#df6877"},{code:"962",hex:"#f08d9f"},{code:"963",hex:"#fad0d5"},{code:"964",hex:"#9cd3cc"},{code:"966",hex:"#b8cea6"},{code:"967",hex:"#fbdbcd"},{code:"970",hex:"#ff781e"},{code:"971",hex:"#fc7e0c"},{code:"972",hex:"#ffb401"},{code:"973",hex:"#fbd215"},{code:"975",hex:"#945c2d"},{code:"976",hex:"#e6973f"},{code:"977",hex:"#e59034"},{code:"986",hex:"#1f561f"},{code:"987",hex:"#568357"},{code:"988",hex:"#88ab5c"},{code:"989",hex:"#87a462"},{code:"991",hex:"#00765c"},{code:"992",hex:"#6cbfa8"},{code:"993",hex:"#8ec2b3"},{code:"995",hex:"#0064b0"},{code:"996",hex:"#57baf5"},{code:"3011",hex:"#635f2f"},{code:"3012",hex:"#9b9648"},{code:"3013",hex:"#999c6c"},{code:"3021",hex:"#3b2e08"},{code:"3022",hex:"#938e6e"},{code:"3023",hex:"#b2ae95"},{code:"3024",hex:"#dcdcd7"},{code:"3031",hex:"#442e10"},{code:"3032",hex:"#ada183"},{code:"3033",hex:"#d7d0c2"},{code:"3041",hex:"#966e6e"},{code:"3042",hex:"#ccc1d0"},{code:"3045",hex:"#b19563"},{code:"3046",hex:"#ccbc7d"},{code:"3047",hex:"#ececd2"},{code:"3051",hex:"#6d6f42"},{code:"3052",hex:"#899770"},{code:"3053",hex:"#bac28b"},{code:"3064",hex:"#cda072"},{code:"3072",hex:"#e3e6dc"},{code:"3078",hex:"#fdf09c"},{code:"3325",hex:"#c6d3e1"},{code:"3326",hex:"#f7b4b7"},{code:"3328",hex:"#c36154"},{code:"3340",hex:"#f38351"},{code:"3341",hex:"#fbbe9d"},{code:"3345",hex:"#486131"},{code:"3346",hex:"#6a823d"},{code:"3347",hex:"#78983b"},{code:"3348",hex:"#e3ee9f"},{code:"3354",hex:"#e5abaf"},{code:"3362",hex:"#2e3d1a"},{code:"3363",hex:"#72885f"},{code:"3364",hex:"#85905c"},{code:"3371",hex:"#2d1705"},{code:"3607",hex:"#b34e8c"},{code:"3608",hex:"#c07ba3"},{code:"3609",hex:"#e9b8d9"},{code:"3685",hex:"#742338"},{code:"3687",hex:"#c2596d"},{code:"3688",hex:"#e6849a"},{code:"3689",hex:"#e8b9c5"},{code:"3705",hex:"#f65d5b"},{code:"3706",hex:"#ff988e"},{code:"3708",hex:"#fcbbc1"},{code:"3712",hex:"#db7d73"},{code:"3713",hex:"#fcdcda"},{code:"3716",hex:"#fcb1ba"},{code:"3721",hex:"#aa5048"},{code:"3722",hex:"#a45d55"},{code:"3726",hex:"#874c49"},{code:"3727",hex:"#e6bcc3"},{code:"3731",hex:"#c65a6b"},{code:"3733",hex:"#eda6ac"},{code:"3740",hex:"#72535a"},{code:"3743",hex:"#e0dee0"},{code:"3746",hex:"#8572a4"},{code:"3747",hex:"#bcc0d8"},{code:"3750",hex:"#444d58"},{code:"3752",hex:"#bbc8d6"},{code:"3753",hex:"#ccd5da"},{code:"3755",hex:"#9fbbd5"},{code:"3756",hex:"#e8edf3"},{code:"3760",hex:"#4f819d"},{code:"3761",hex:"#b8dae9"},{code:"3765",hex:"#296e87"},{code:"3766",hex:"#7cbec6"},{code:"3768",hex:"#5f7171"},{code:"3770",hex:"#f8eedc"},{code:"3771",hex:"#dfb090"},{code:"3772",hex:"#b8846c"},{code:"3773",hex:"#d8b39d"},{code:"3774",hex:"#f6e1d0"},{code:"3776",hex:"#c27d45"},{code:"3777",hex:"#892b21"},{code:"3778",hex:"#c4856f"},{code:"3779",hex:"#f2c6b8"},{code:"3781",hex:"#5c4c2d"},{code:"3782",hex:"#c7baa2"},{code:"3787",hex:"#605b45"},{code:"3790",hex:"#74623f"},{code:"3799",hex:"#343936"},{code:"3801",hex:"#e65952"},{code:"3802",hex:"#6f2e35"},{code:"3803",hex:"#912644"},{code:"3804",hex:"#c33c62"},{code:"3805",hex:"#ce507f"},{code:"3806",hex:"#f19ac2"},{code:"3807",hex:"#073563"},{code:"3808",hex:"#0c464b"},{code:"3809",hex:"#1c869b"},{code:"3810",hex:"#44929d"},{code:"3811",hex:"#cae8de"},{code:"3812",hex:"#028063"},{code:"3813",hex:"#b8cebe"},{code:"3814",hex:"#3f8878"},{code:"3815",hex:"#4c7c60"},{code:"3816",hex:"#699d85"},{code:"3817",hex:"#a6c5b4"},{code:"3818",hex:"#007c3d"},{code:"3819",hex:"#d2d057"},{code:"3820",hex:"#ddb442"},{code:"3821",hex:"#e2b73a"},{code:"3822",hex:"#f1d863"},{code:"3823",hex:"#fffcdc"},{code:"3824",hex:"#fbccb8"},{code:"3825",hex:"#fdc391"},{code:"3826",hex:"#c38c55"},{code:"3827",hex:"#e8aa5f"},{code:"3828",hex:"#af8846"},{code:"3829",hex:"#a47829"},{code:"3830",hex:"#b97161"},{code:"3831",hex:"#b33034"},{code:"3832",hex:"#d55d63"},{code:"3833",hex:"#e8868c"},{code:"3834",hex:"#642441"},{code:"3836",hex:"#c1aec2"},{code:"3837",hex:"#7c4087"},{code:"3838",hex:"#62669a"},{code:"3839",hex:"#94a8c9"},{code:"3840",hex:"#c1d4ec"},{code:"3841",hex:"#cbdde7"},{code:"3842",hex:"#12557e"},{code:"3843",hex:"#0095d3"},{code:"3844",hex:"#04acce"},{code:"3845",hex:"#01cbec"},{code:"3846",hex:"#63d3e1"},{code:"3847",hex:"#00604e"},{code:"3848",hex:"#42917f"},{code:"3849",hex:"#6eb2a7"},{code:"3850",hex:"#08926f"},{code:"3851",hex:"#56b69c"},{code:"3852",hex:"#cc972b"},{code:"3853",hex:"#fc9749"},{code:"3854",hex:"#f7b25c"},{code:"3855",hex:"#f7ca84"},{code:"3856",hex:"#ebbc9a"},{code:"3857",hex:"#804133"},{code:"3858",hex:"#8d5745"},{code:"3859",hex:"#b68472"},{code:"3860",hex:"#947974"},{code:"3861",hex:"#9e887f"},{code:"3862",hex:"#845f2e"},{code:"3863",hex:"#a4866c"},{code:"3864",hex:"#c3ad9a"},{code:"3865",hex:"#faf9f5"},{code:"3866",hex:"#e7e5dd"},{code:"Ecru",hex:"#f2efe5"}]},{name:"Anchor",colors:[{code:"2",hex:"#faf9f5"},{code:"6",hex:"#fdbca1"},{code:"9",hex:"#fbccb8"},{code:"10",hex:"#e6876c"},{code:"11",hex:"#e46647"},{code:"13",hex:"#c24731"},{code:"18",hex:"#44684e"},{code:"19",hex:"#aa102e"},{code:"23",hex:"#e9c4c9"},{code:"25",hex:"#fcb1ba"},{code:"26",hex:"#f999a5"},{code:"28",hex:"#d55d63"},{code:"31",hex:"#fcbbc1"},{code:"33",hex:"#ff988e"},{code:"35",hex:"#f65d5b"},{code:"36",hex:"#f7b4b7"},{code:"40",hex:"#ff7a90"},{code:"41",hex:"#fc6a84"},{code:"42",hex:"#b73745"},{code:"44",hex:"#4e1622"},{code:"45",hex:"#5f1f2c"},{code:"46",hex:"#d82e26"},{code:"47",hex:"#ce1f32"},{code:"48",hex:"#f9d6dd"},{code:"50",hex:"#f0b7d2"},{code:"55",hex:"#efa8ca"},{code:"57",hex:"#ca0b51"},{code:"59",hex:"#bf1c48"},{code:"62",hex:"#f19ac2"},{code:"63",hex:"#d1466c"},{code:"65",hex:"#912644"},{code:"66",hex:"#f1b3bf"},{code:"68",hex:"#e6849a"},{code:"72",hex:"#4c1a31"},{code:"73",hex:"#fad0d5"},{code:"74",hex:"#e5abaf"},{code:"75",hex:"#df6877"},{code:"76",hex:"#e56d7f"},{code:"79",hex:"#c2596d"},{code:"85",hex:"#e9b8d9"},{code:"86",hex:"#c07ba3"},{code:"87",hex:"#b34e8c"},{code:"88",hex:"#9f2d6f"},{code:"89",hex:"#832a58"},{code:"90",hex:"#c1aec2"},{code:"95",hex:"#dfc0db"},{code:"97",hex:"#ae99b1"},{code:"98",hex:"#a772a4"},{code:"99",hex:"#7b3f6c"},{code:"022",hex:"#702623"},{code:"100",hex:"#723657"},{code:"102",hex:"#541244"},{code:"108",hex:"#ceb6e4"},{code:"111",hex:"#9f65a4"},{code:"117",hex:"#c1d4ec"},{code:"118",hex:"#9389c1"},{code:"119",hex:"#6c5086"},{code:"120",hex:"#c8d2e6"},{code:"122",hex:"#073563"},{code:"129",hex:"#c6d3e1"},{code:"130",hex:"#6c91c0"},{code:"131",hex:"#445997"},{code:"133",hex:"#181f66"},{code:"134",hex:"#190f60"},{code:"140",hex:"#9fbbd5"},{code:"145",hex:"#6e8db5"},{code:"146",hex:"#366390"},{code:"147",hex:"#2c4180"},{code:"148",hex:"#124477"},{code:"150",hex:"#0c1225"},{code:"152",hex:"#02101c"},{code:"158",hex:"#d3e9e7"},{code:"159",hex:"#b4d3e3"},{code:"160",hex:"#cfe5f0"},{code:"162",hex:"#166d92"},{code:"164",hex:"#12557e"},{code:"167",hex:"#7cbec6"},{code:"168",hex:"#4fa1a9"},{code:"169",hex:"#296e87"},{code:"175",hex:"#8ea7c0"},{code:"176",hex:"#94a8c9"},{code:"177",hex:"#62669a"},{code:"178",hex:"#161151"},{code:"185",hex:"#9cd3cc"},{code:"186",hex:"#8fd3d4"},{code:"187",hex:"#56b69c"},{code:"188",hex:"#009a7b"},{code:"189",hex:"#08926f"},{code:"204",hex:"#88c78d"},{code:"205",hex:"#40a756"},{code:"206",hex:"#d1e2d7"},{code:"208",hex:"#a2ccaa"},{code:"209",hex:"#58a96b"},{code:"210",hex:"#4a805b"},{code:"211",hex:"#007c3d"},{code:"214",hex:"#91ab84"},{code:"215",hex:"#76996c"},{code:"216",hex:"#59896f"},{code:"217",hex:"#496f5c"},{code:"218",hex:"#043810"},{code:"226",hex:"#3e9730"},{code:"227",hex:"#007a3f"},{code:"229",hex:"#008c4c"},{code:"230",hex:"#00793b"},{code:"231",hex:"#e3dcdb"},{code:"232",hex:"#c5b6b4"},{code:"233",hex:"#978e87"},{code:"234",hex:"#e0dee0"},{code:"235",hex:"#95909d"},{code:"236",hex:"#2f3b36"},{code:"238",hex:"#70b145"},{code:"240",hex:"#b8cea6"},{code:"241",hex:"#abd58b"},{code:"242",hex:"#87a462"},{code:"243",hex:"#88ab5c"},{code:"244",hex:"#568357"},{code:"246",hex:"#1f561f"},{code:"254",hex:"#e3ee9f"},{code:"255",hex:"#a9c33e"},{code:"256",hex:"#82ae44"},{code:"257",hex:"#759a3e"},{code:"258",hex:"#4f6c33"},{code:"259",hex:"#f3f6d4"},{code:"260",hex:"#85905c"},{code:"261",hex:"#bac28b"},{code:"262",hex:"#72885f"},{code:"263",hex:"#2e3d1a"},{code:"265",hex:"#a8b144"},{code:"266",hex:"#929937"},{code:"267",hex:"#6a823d"},{code:"268",hex:"#486131"},{code:"271",hex:"#fbe2df"},{code:"273",hex:"#646253"},{code:"274",hex:"#e5eae9"},{code:"275",hex:"#f5f0df"},{code:"276",hex:"#e0d0b0"},{code:"277",hex:"#957b2f"},{code:"278",hex:"#d2d057"},{code:"279",hex:"#d1c66d"},{code:"280",hex:"#a6a036"},{code:"281",hex:"#91852a"},{code:"288",hex:"#2e9148"},{code:"289",hex:"#fce740"},{code:"292",hex:"#f9f287"},{code:"293",hex:"#fdf09c"},{code:"295",hex:"#f1d863"},{code:"297",hex:"#ffe35f"},{code:"298",hex:"#fbdf0d"},{code:"300",hex:"#ffeda9"},{code:"301",hex:"#ffe276"},{code:"302",hex:"#ffda5a"},{code:"303",hex:"#ffc33a"},{code:"305",hex:"#e2b73a"},{code:"306",hex:"#e8b539"},{code:"308",hex:"#b38132"},{code:"309",hex:"#ba8225"},{code:"310",hex:"#936626"},{code:"311",hex:"#f7ca84"},{code:"314",hex:"#febc46"},{code:"316",hex:"#fc7e0c"},{code:"323",hex:"#faa463"},{code:"326",hex:"#d45d28"},{code:"328",hex:"#f78465"},{code:"330",hex:"#ff781e"},{code:"332",hex:"#e15729"},{code:"335",hex:"#ea592c"},{code:"340",hex:"#9b3b1b"},{code:"341",hex:"#8c3b1a"},{code:"342",hex:"#d0c8e4"},{code:"343",hex:"#bbc8d6"},{code:"351",hex:"#934d29"},{code:"352",hex:"#825534"},{code:"357",hex:"#945c2d"},{code:"358",hex:"#775437"},{code:"359",hex:"#7b5e26"},{code:"360",hex:"#502f1b"},{code:"361",hex:"#eed7a1"},{code:"362",hex:"#e1c395"},{code:"366",hex:"#e2d1b2"},{code:"372",hex:"#e8d290"},{code:"373",hex:"#af8846"},{code:"375",hex:"#866226"},{code:"376",hex:"#c9af93"},{code:"379",hex:"#a4866c"},{code:"381",hex:"#3b2811"},{code:"382",hex:"#2d1705"},{code:"386",hex:"#e7e5dd"},{code:"388",hex:"#dcdcd7"},{code:"390",hex:"#e2dfd3"},{code:"391",hex:"#d6d3c1"},{code:"392",hex:"#bab599"},{code:"393",hex:"#978266"},{code:"398",hex:"#ced0d5"},{code:"399",hex:"#b7bbc7"},{code:"400",hex:"#504f50"},{code:"401",hex:"#323a39"},{code:"410",hex:"#04acce"},{code:"677",hex:"#9e887f"},{code:"681",hex:"#6d6f42"},{code:"778",hex:"#f6e1d0"},{code:"802",hex:"#fff276"},{code:"806",hex:"#7d98b5"},{code:"831",hex:"#bcae83"},{code:"832",hex:"#917d4a"},{code:"837",hex:"#c5d2cf"},{code:"838",hex:"#a7bec2"},{code:"840",hex:"#5f7171"},{code:"843",hex:"#9b9648"},{code:"846",hex:"#635f2f"},{code:"847",hex:"#e3e6dc"},{code:"850",hex:"#7c999b"},{code:"851",hex:"#3b4f45"},{code:"852",hex:"#ececd2"},{code:"853",hex:"#999c6c"},{code:"854",hex:"#a08f4d"},{code:"858",hex:"#bec0a8"},{code:"859",hex:"#899770"},{code:"860",hex:"#93a181"},{code:"861",hex:"#4b5035"},{code:"862",hex:"#343c1d"},{code:"869",hex:"#c7bac7"},{code:"870",hex:"#ccc1d0"},{code:"871",hex:"#966e6e"},{code:"873",hex:"#72535a"},{code:"874",hex:"#cab751"},{code:"875",hex:"#a6c5b4"},{code:"876",hex:"#699d85"},{code:"877",hex:"#799a83"},{code:"878",hex:"#488269"},{code:"879",hex:"#14361e"},{code:"881",hex:"#e3be8e"},{code:"883",hex:"#cda072"},{code:"886",hex:"#ede0ba"},{code:"887",hex:"#ccbc7d"},{code:"888",hex:"#b19563"},{code:"889",hex:"#74623f"},{code:"890",hex:"#d59c4c"},{code:"893",hex:"#e5bbb5"},{code:"895",hex:"#c57e7a"},{code:"896",hex:"#aa5048"},{code:"897",hex:"#4f080c"},{code:"898",hex:"#9e9072"},{code:"899",hex:"#c7baa2"},{code:"900",hex:"#d0cfc9"},{code:"901",hex:"#a47829"},{code:"903",hex:"#ada183"},{code:"904",hex:"#5c4c2d"},{code:"905",hex:"#442e10"},{code:"906",hex:"#6f5422"},{code:"907",hex:"#bfa43a"},{code:"914",hex:"#b68472"},{code:"923",hex:"#005d2e"},{code:"924",hex:"#837d2f"},{code:"925",hex:"#e4752b"},{code:"926",hex:"#f6f2eb"},{code:"928",hex:"#b8dae9"},{code:"933",hex:"#f0e3d4"},{code:"936",hex:"#804133"},{code:"941",hex:"#7971a0"},{code:"942",hex:"#d8bf95"},{code:"944",hex:"#845f2e"},{code:"968",hex:"#ddb3b1"},{code:"977",hex:"#4f819d"},{code:"978",hex:"#5a82a2"},{code:"979",hex:"#2d426b"},{code:"0401",hex:"#343936"},{code:"1001",hex:"#e6973f"},{code:"1002",hex:"#e8aa5f"},{code:"1003",hex:"#d6834d"},{code:"1004",hex:"#c36b29"},{code:"1005",hex:"#811024"},{code:"1006",hex:"#b33034"},{code:"1007",hex:"#b8846c"},{code:"1008",hex:"#d8b39d"},{code:"1009",hex:"#f8eedc"},{code:"1010",hex:"#f2e0ce"},{code:"1011",hex:"#feebe2"},{code:"1012",hex:"#f2c6b8"},{code:"1013",hex:"#c4856f"},{code:"1014",hex:"#9a3b2d"},{code:"1015",hex:"#892b21"},{code:"1016",hex:"#e6bcc3"},{code:"1017",hex:"#c68c9f"},{code:"1018",hex:"#874c49"},{code:"1019",hex:"#6f2e35"},{code:"1020",hex:"#fcdcda"},{code:"1021",hex:"#f4c4c1"},{code:"1022",hex:"#e29690"},{code:"1023",hex:"#e8868c"},{code:"1024",hex:"#c36154"},{code:"1025",hex:"#bf3e31"},{code:"1026",hex:"#ecd0c4"},{code:"1027",hex:"#a45d55"},{code:"1028",hex:"#863248"},{code:"1029",hex:"#800137"},{code:"1030",hex:"#ab9ac6"},{code:"1031",hex:"#ceddea"},{code:"1032",hex:"#ccd5da"},{code:"1033",hex:"#a4b5c6"},{code:"1034",hex:"#8f9ca7"},{code:"1035",hex:"#78828f"},{code:"1036",hex:"#444d58"},{code:"1037",hex:"#e8edf3"},{code:"1038",hex:"#a8c6d8"},{code:"1039",hex:"#6b9cb9"},{code:"1040",hex:"#abafa3"},{code:"1041",hex:"#565d59"},{code:"1043",hex:"#ccdcbe"},{code:"1044",hex:"#29542f"},{code:"1045",hex:"#c09557"},{code:"1046",hex:"#c4863a"},{code:"1047",hex:"#e8a76d"},{code:"1048",hex:"#c27d45"},{code:"1049",hex:"#ab6734"},{code:"1050",hex:"#d2caba"},{code:"1060",hex:"#c4e7e8"},{code:"1062",hex:"#b4d5d4"},{code:"1064",hex:"#7fb5c0"},{code:"1066",hex:"#1c869b"},{code:"1068",hex:"#44929d"},{code:"1070",hex:"#6eb2a7"},{code:"1072",hex:"#6cbfa8"},{code:"1074",hex:"#42917f"},{code:"1076",hex:"#00604e"},{code:"1080",hex:"#c3ad9a"},{code:"1082",hex:"#b39f8c"},{code:"1084",hex:"#977e65"},{code:"1086",hex:"#684e37"},{code:"1088",hex:"#573c2a"},{code:"1090",hex:"#57baf5"},{code:"1092",hex:"#cae8de"},{code:"1098",hex:"#e65952"},{code:"1104",hex:"#00765c"},{code:"1506",hex:"#4d4c34"},{code:"4146",hex:"#e7ceb9"},{code:"5975",hex:"#b97161"},{code:"8581",hex:"#938e6e"},{code:"9159",hex:"#cbdde7"},{code:"9575",hex:"#eac0b4"},{code:"159, 144",hex:"#c1d3df"},{code:"878, 212",hex:"#2f644b"},{code:"433, 1089",hex:"#0095d3"}]},{name:"Gamma",colors:[{code:"0001",hex:"#f2efe5"},{code:"0002",hex:"#74401d"},{code:"0003",hex:"#3c5780"},{code:"0004",hex:"#b7bbc7"},{code:"0005",hex:"#6e8db5"},{code:"0006",hex:"#d3d4db"},{code:"0007",hex:"#c4863a"},{code:"0008",hex:"#929937"},{code:"0009",hex:"#d7d0c2"},{code:"0010",hex:"#a6a036"},{code:"0011",hex:"#ea592c"},{code:"0012",hex:"#e83124"},{code:"0013",hex:"#00793b"},{code:"0014",hex:"#2e9148"},{code:"0015",hex:"#40a756"},{code:"0016",hex:"#feee89"},{code:"0017",hex:"#d1c66d"},{code:"0018",hex:"#e0d0b0"},{code:"0019",hex:"#ffc33a"},{code:"0020",hex:"#ffe276"},{code:"0021",hex:"#ffeda9"},{code:"0022",hex:"#b78237"},{code:"0023",hex:"#8ea7c0"},{code:"0024",hex:"#bd2e2e"},{code:"0025",hex:"#fbe2df"},{code:"0026",hex:"#0c1225"},{code:"0027",hex:"#c1d3df"},{code:"0028",hex:"#702623"},{code:"0029",hex:"#4f6c33"},{code:"0030",hex:"#759a3e"},{code:"0031",hex:"#832a58"},{code:"0032",hex:"#a74f2a"},{code:"0033",hex:"#87a462"},{code:"0034",hex:"#e7e5dd"},{code:"0035",hex:"#6d6f42"},{code:"0036",hex:"#72885f"},{code:"0037",hex:"#e9b8d9"},{code:"0038",hex:"#7d3248"},{code:"0039",hex:"#6b8084"},{code:"0040",hex:"#f8eedc"},{code:"0041",hex:"#f6f289"},{code:"0042",hex:"#ffe21a"},{code:"0043",hex:"#fffcdc"},{code:"0044",hex:"#e15729"},{code:"0045",hex:"#fbccb8"},{code:"0046",hex:"#d6834d"},{code:"0047",hex:"#ebbc9a"},{code:"0048",hex:"#c27d45"},{code:"0049",hex:"#e6973f"},{code:"0050",hex:"#e8aa5f"},{code:"0051",hex:"#eac0b4"},{code:"0052",hex:"#d8b39d"},{code:"0053",hex:"#b6a7a6"},{code:"0054",hex:"#e1c395"},{code:"0055",hex:"#63461f"},{code:"0056",hex:"#c3ad9a"},{code:"0057",hex:"#b39f8c"},{code:"0058",hex:"#978266"},{code:"0059",hex:"#bab599"},{code:"0060",hex:"#97978e"},{code:"0061",hex:"#95909d"},{code:"0062",hex:"#bf3e31"},{code:"0063",hex:"#e65952"},{code:"0064",hex:"#a92332"},{code:"0065",hex:"#eda6ac"},{code:"0066",hex:"#f7b4b7"},{code:"0067",hex:"#ab979e"},{code:"0068",hex:"#c1aec2"},{code:"0069",hex:"#ce507f"},{code:"0070",hex:"#efa8ca"},{code:"0071",hex:"#d1466c"},{code:"0072",hex:"#b34e8c"},{code:"0073",hex:"#9f2d6f"},{code:"0074",hex:"#a772a4"},{code:"0075",hex:"#541244"},{code:"0076",hex:"#ceb6e4"},{code:"0077",hex:"#7b3f6c"},{code:"0078",hex:"#9389c1"},{code:"0079",hex:"#6c5086"},{code:"0080",hex:"#7971a0"},{code:"0081",hex:"#94a8c9"},{code:"0082",hex:"#445997"},{code:"0083",hex:"#181f66"},{code:"0084",hex:"#366390"},{code:"0085",hex:"#04acce"},{code:"0086",hex:"#0064b0"},{code:"0087",hex:"#01cbec"},{code:"0088",hex:"#008c4c"},{code:"0089",hex:"#4c7047"},{code:"0090",hex:"#798738"},{code:"0091",hex:"#bac28b"},{code:"0092",hex:"#9c8c4a"},{code:"0093",hex:"#ccbc7d"},{code:"0094",hex:"#957b2f"},{code:"0095",hex:"#ececd2"},{code:"0096",hex:"#ede0ba"},{code:"0097",hex:"#d19d2f"},{code:"0098",hex:"#e8d290"},{code:"0099",hex:"#f1d863"},{code:"0101",hex:"#fff3ad"},{code:"0102",hex:"#fdf09c"},{code:"0104",hex:"#ffda5a"},{code:"0105",hex:"#febc46"},{code:"0107",hex:"#fc9749"},{code:"0108",hex:"#e4752b"},{code:"0109",hex:"#ec6810"},{code:"0111",hex:"#9f65a4"},{code:"0112",hex:"#7c4087"},{code:"0116",hex:"#fc6a84"},{code:"0118",hex:"#ef4949"},{code:"0119",hex:"#d82e26"},{code:"0120",hex:"#ce1f32"},{code:"0150",hex:"#d0cfc9"},{code:"0152",hex:"#abafa3"},{code:"0154",hex:"#6c6e58"},{code:"0155",hex:"#4d4c34"},{code:"0201",hex:"#fad0d5"},{code:"0202",hex:"#f0b7d2"},{code:"0204",hex:"#ef7ba1"},{code:"0207",hex:"#bad765"},{code:"0209",hex:"#70b145"},{code:"0210",hex:"#3e9730"},{code:"0214",hex:"#d59c4c"},{code:"0215",hex:"#ba8225"},{code:"0216",hex:"#936626"},{code:"0217",hex:"#7a5127"},{code:"0219",hex:"#653c1e"},{code:"0220",hex:"#502f1b"},{code:"0301",hex:"#cbdde7"},{code:"0302",hex:"#c1d4ec"},{code:"0304",hex:"#6c91c0"},{code:"0306",hex:"#2c4180"},{code:"0308",hex:"#161151"},{code:"0309",hex:"#feebe2"},{code:"0310",hex:"#fbdbcd"},{code:"0312",hex:"#fbbe9d"},{code:"0314",hex:"#f78465"},{code:"0315",hex:"#f06e46"},{code:"0319",hex:"#50a348"},{code:"0321",hex:"#007a3f"},{code:"0402",hex:"#f19ac2"},{code:"0404",hex:"#ca0b51"},{code:"0406",hex:"#822741"},{code:"0407",hex:"#711f2e"},{code:"0409",hex:"#5f1f2c"},{code:"0410",hex:"#4e1622"},{code:"0411",hex:"#96c59d"},{code:"0414",hex:"#007c3d"},{code:"0416",hex:"#e0dee0"},{code:"0417",hex:"#ccc1d0"},{code:"0500",hex:"#f3f6d4"},{code:"0502",hex:"#abd58b"},{code:"0504",hex:"#58a96b"},{code:"0506",hex:"#00765c"},{code:"0512",hex:"#5a82a2"},{code:"0513",hex:"#166d92"},{code:"0514",hex:"#fff276"},{code:"0516",hex:"#fbdf0d"},{code:"0605",hex:"#8fd3d4"},{code:"0606",hex:"#51c0bb"},{code:"0609",hex:"#c07ba3"},{code:"0614",hex:"#78983b"},{code:"0653",hex:"#c9b639"},{code:"0654",hex:"#b19a3f"},{code:"0655",hex:"#8d7529"},{code:"0657",hex:"#7b5e26"},{code:"0661",hex:"#e5eae9"},{code:"0662",hex:"#c5d2cf"},{code:"0663",hex:"#a7bec2"},{code:"0664",hex:"#7c999b"},{code:"0665",hex:"#5f7171"},{code:"0666",hex:"#3b4f45"},{code:"0670",hex:"#e3dcdb"},{code:"0672",hex:"#c5b6b4"},{code:"0674",hex:"#978e87"},{code:"0703",hex:"#fdbca1"},{code:"0705",hex:"#e6876c"},{code:"0707",hex:"#e46647"},{code:"0708",hex:"#c24731"},{code:"0709",hex:"#98232c"},{code:"0715",hex:"#ccdcbe"},{code:"0716",hex:"#91ab84"},{code:"0717",hex:"#76996c"},{code:"0718",hex:"#568357"},{code:"0719",hex:"#3e5a2f"},{code:"0720",hex:"#29542f"},{code:"0725",hex:"#c7bac7"},{code:"0727",hex:"#ae99b1"},{code:"0752",hex:"#e8edf3"},{code:"0753",hex:"#ceddea"},{code:"0754",hex:"#bbc8d6"},{code:"0755",hex:"#a4b5c6"},{code:"0756",hex:"#7d98b5"},{code:"0757",hex:"#4c698c"},{code:"0759",hex:"#073563"},{code:"0765",hex:"#ecd0c4"},{code:"0767",hex:"#c4856f"},{code:"0768",hex:"#a06757"},{code:"0771",hex:"#8c3b1a"},{code:"0772",hex:"#804133"},{code:"0802",hex:"#e2d1b2"},{code:"0803",hex:"#d8bf95"},{code:"0808",hex:"#845f2e"},{code:"0809",hex:"#775437"},{code:"0811",hex:"#573c2a"},{code:"0812",hex:"#3b2811"},{code:"0816",hex:"#dee077"},{code:"0817",hex:"#d2d057"},{code:"0818",hex:"#a8b144"},{code:"0820",hex:"#7a8035"},{code:"0821",hex:"#4f5925"},{code:"0823",hex:"#2e3d1a"},{code:"0852",hex:"#d3e9e7"},{code:"0853",hex:"#c4e7e8"},{code:"0854",hex:"#a5dbde"},{code:"0855",hex:"#7cbec6"},{code:"0856",hex:"#4fa1a9"},{code:"0857",hex:"#1c869b"},{code:"0860",hex:"#0c464b"},{code:"0865",hex:"#ac544c"},{code:"0867",hex:"#9d3030"},{code:"0869",hex:"#811024"},{code:"0870",hex:"#4f080c"},{code:"0875",hex:"#e9c4c9"},{code:"0876",hex:"#ddb3b1"},{code:"0879",hex:"#874c49"},{code:"0902",hex:"#f9d6dd"},{code:"0904",hex:"#f1b3bf"},{code:"0905",hex:"#e6849a"},{code:"0906",hex:"#c2596d"},{code:"0907",hex:"#912644"},{code:"0908",hex:"#742338"},{code:"0909",hex:"#581727"},{code:"0915",hex:"#d2caba"},{code:"0917",hex:"#9e9072"},{code:"0919",hex:"#74623f"},{code:"0924",hex:"#e3be8e"},{code:"0925",hex:"#cda072"},{code:"0926",hex:"#c38c55"},{code:"0928",hex:"#945c2d"},{code:"0929",hex:"#825534"},{code:"0930",hex:"#603920"},{code:"0953",hex:"#d1e2d7"},{code:"0954",hex:"#8ebea9"},{code:"0956",hex:"#488269"},{code:"0957",hex:"#496f5c"},{code:"0958",hex:"#44684e"},{code:"0960",hex:"#14361e"},{code:"0966",hex:"#e6e9ea"},{code:"0967",hex:"#ccd5da"},{code:"0970",hex:"#8f9ca7"},{code:"0971",hex:"#78828f"},{code:"0972",hex:"#444d58"},{code:"1095",hex:"#d0c8e4"},{code:"2125",hex:"#eed7a1"},{code:"2135",hex:"#c4944f"},{code:"3010",hex:"#fcdcda"},{code:"3011",hex:"#f4c4c1"},{code:"3012",hex:"#e29690"},{code:"3013",hex:"#e4b9b6"},{code:"3014",hex:"#c57e7a"},{code:"3015",hex:"#a45d55"},{code:"3016",hex:"#e6bcc3"},{code:"3017",hex:"#966e6e"},{code:"3018",hex:"#b19563"},{code:"3019",hex:"#cc993d"},{code:"3020",hex:"#ddb442"},{code:"3021",hex:"#f2e0ce"},{code:"3022",hex:"#ab6734"},{code:"3023",hex:"#934d29"},{code:"3024",hex:"#fae9df"},{code:"3025",hex:"#efc1aa"},{code:"3026",hex:"#dfb090"},{code:"3027",hex:"#b97161"},{code:"3028",hex:"#b68472"},{code:"3029",hex:"#8d5745"},{code:"3030",hex:"#e7ceb9"},{code:"3031",hex:"#c49a87"},{code:"3032",hex:"#947974"},{code:"3033",hex:"#f0e3d4"},{code:"3034",hex:"#c9af93"},{code:"3035",hex:"#a4866c"},{code:"3036",hex:"#e1e1d9"},{code:"3037",hex:"#938962"},{code:"3038",hex:"#dcdcd7"},{code:"3039",hex:"#b2ae95"},{code:"3040",hex:"#938e6e"},{code:"3041",hex:"#c7baa2"},{code:"3042",hex:"#f6f2eb"},{code:"3043",hex:"#e3e6dc"},{code:"3044",hex:"#ceccc5"},{code:"3045",hex:"#ccd2d5"},{code:"3046",hex:"#959ba0"},{code:"3047",hex:"#a2accd"},{code:"3048",hex:"#8692bb"},{code:"3049",hex:"#b8bfd2"},{code:"3050",hex:"#8c98b4"},{code:"3051",hex:"#c6d3e1"},{code:"3052",hex:"#647e9d"},{code:"3053",hex:"#cae2eb"},{code:"3054",hex:"#a8c6d8"},{code:"3055",hex:"#6b9cb9"},{code:"3056",hex:"#7fb5c0"},{code:"3057",hex:"#44929d"},{code:"3058",hex:"#6eb2a7"},{code:"3059",hex:"#42917f"},{code:"3060",hex:"#6cbfa8"},{code:"3061",hex:"#a6c5b4"},{code:"3062",hex:"#699d85"},{code:"3063",hex:"#59896f"},{code:"3064",hex:"#899770"},{code:"3065",hex:"#93a181"},{code:"3066",hex:"#999c6c"},{code:"3067",hex:"#9b9648"},{code:"3068",hex:"#bbaa55"},{code:"3069",hex:"#cab751"},{code:"3070",hex:"#2f3b36"},{code:"3071",hex:"#db7d73"},{code:"3072",hex:"#c36154"},{code:"3073",hex:"#f69d80"},{code:"3074",hex:"#fcbbc1"},{code:"3075",hex:"#ff988e"},{code:"3076",hex:"#f65d5b"},{code:"3077",hex:"#f999a5"},{code:"3078",hex:"#f85b64"},{code:"3079",hex:"#f9afb7"},{code:"3080",hex:"#ff7a90"},{code:"3081",hex:"#fcb1ba"},{code:"3082",hex:"#f08d9f"},{code:"3083",hex:"#df6877"},{code:"3084",hex:"#e8868c"},{code:"3085",hex:"#d55d63"},{code:"3086",hex:"#b33034"},{code:"3087",hex:"#eeaeb0"},{code:"3088",hex:"#ee8593"},{code:"3089",hex:"#e56d7f"},{code:"3090",hex:"#b73745"},{code:"3091",hex:"#e5abaf"},{code:"3092",hex:"#c65a6b"},{code:"3093",hex:"#e8b9c5"},{code:"3094",hex:"#863248"},{code:"3095",hex:"#e5bbb5"},{code:"3096",hex:"#aa5048"},{code:"3097",hex:"#85312e"},{code:"3098",hex:"#c68c9f"},{code:"3099",hex:"#824646"},{code:"3100",hex:"#6f2e35"},{code:"3101",hex:"#72535a"},{code:"3102",hex:"#642441"},{code:"3103",hex:"#c33c62"},{code:"3104",hex:"#d34067"},{code:"3105",hex:"#bf1c48"},{code:"3106",hex:"#800137"},{code:"3107",hex:"#b698c6"},{code:"3108",hex:"#723657"},{code:"3109",hex:"#bcc0d8"},{code:"3110",hex:"#8572a4"},{code:"3111",hex:"#686d8d"},{code:"3112",hex:"#62669a"},{code:"3113",hex:"#789bc0"},{code:"3114",hex:"#190f60"},{code:"3115",hex:"#b4d3e3"},{code:"3116",hex:"#91b4ce"},{code:"3117",hex:"#9fbbd5"},{code:"3118",hex:"#2d426b"},{code:"3119",hex:"#194465"},{code:"3120",hex:"#02101c"},{code:"3121",hex:"#57baf5"},{code:"3122",hex:"#0095d3"},{code:"3123",hex:"#63d3e1"},{code:"3124",hex:"#b8dae9"},{code:"3125",hex:"#4f819d"},{code:"3126",hex:"#12557e"},{code:"3127",hex:"#70a8b3"},{code:"3128",hex:"#437490"},{code:"3129",hex:"#296e87"},{code:"3130",hex:"#b4d5d4"},{code:"3131",hex:"#00604e"},{code:"3132",hex:"#9cd3cc"},{code:"3133",hex:"#008679"},{code:"3134",hex:"#56b69c"},{code:"3135",hex:"#009a7b"},{code:"3136",hex:"#08926f"},{code:"3137",hex:"#8ec2b3"},{code:"3138",hex:"#3f8878"},{code:"3139",hex:"#176a59"},{code:"3140",hex:"#a2ccaa"},{code:"3141",hex:"#649a73"},{code:"3142",hex:"#2f644b"},{code:"3143",hex:"#4c7c60"},{code:"3144",hex:"#b8cebe"},{code:"3145",hex:"#799a83"},{code:"3146",hex:"#789899"},{code:"3147",hex:"#b4e8b3"},{code:"3148",hex:"#88c78d"},{code:"3149",hex:"#005d2e"},{code:"3150",hex:"#bbd7ae"},{code:"3151",hex:"#6e8a69"},{code:"3152",hex:"#043810"},{code:"3153",hex:"#88ab5c"},{code:"3154",hex:"#1f561f"},{code:"3155",hex:"#6a823d"},{code:"3156",hex:"#486131"},{code:"3157",hex:"#8cbc5c"},{code:"3158",hex:"#015731"},{code:"3159",hex:"#a9c33e"},{code:"3160",hex:"#82ae44"},{code:"3161",hex:"#98a859"},{code:"3162",hex:"#5d5c2b"},{code:"3163",hex:"#4b5035"},{code:"3164",hex:"#343c1d"},{code:"3165",hex:"#bec0a8"},{code:"3166",hex:"#a5a888"},{code:"3167",hex:"#4f6035"},{code:"3168",hex:"#85905c"},{code:"3169",hex:"#9fa146"},{code:"3170",hex:"#777830"},{code:"3171",hex:"#91852a"},{code:"3172",hex:"#837d2f"},{code:"3173",hex:"#746d2b"},{code:"3174",hex:"#635f2f"},{code:"3175",hex:"#a08f4d"},{code:"3176",hex:"#bfa43a"},{code:"3177",hex:"#806c26"},{code:"3178",hex:"#6f5422"},{code:"3179",hex:"#bcae83"},{code:"3180",hex:"#917d4a"},{code:"3181",hex:"#806638"},{code:"3182",hex:"#af8846"},{code:"3183",hex:"#775820"},{code:"3184",hex:"#866226"},{code:"3185",hex:"#b38132"},{code:"3186",hex:"#9b6324"},{code:"3187",hex:"#f5f0df"},{code:"3188",hex:"#af8334"},{code:"3189",hex:"#a47829"},{code:"3190",hex:"#e2b73a"},{code:"3191",hex:"#cc972b"},{code:"3192",hex:"#fce740"},{code:"3193",hex:"#ffe35f"},{code:"3194",hex:"#fad558"},{code:"3195",hex:"#ff9500"},{code:"3196",hex:"#ff7600"},{code:"3197",hex:"#ffb401"},{code:"3198",hex:"#fc7e0c"},{code:"3199",hex:"#ff781e"},{code:"3200",hex:"#f26922"},{code:"3201",hex:"#d45d28"},{code:"3202",hex:"#f38351"},{code:"3203",hex:"#fdc391"},{code:"3204",hex:"#faa463"},{code:"3205",hex:"#c36b29"},{code:"3206",hex:"#9b3b1b"},{code:"3207",hex:"#e8a76d"},{code:"3208",hex:"#f7ca84"},{code:"3209",hex:"#f7b25c"},{code:"3210",hex:"#e59034"},{code:"3211",hex:"#9a3b2d"},{code:"3212",hex:"#892b21"},{code:"3213",hex:"#f2c6b8"},{code:"3214",hex:"#f6e1d0"},{code:"3215",hex:"#b8846c"},{code:"3216",hex:"#8c593e"},{code:"3217",hex:"#9e887f"},{code:"3218",hex:"#c09557"},{code:"3219",hex:"#2d1705"},{code:"3220",hex:"#cdb9a4"},{code:"3221",hex:"#977e65"},{code:"3222",hex:"#684e37"},{code:"3223",hex:"#5c4c2d"},{code:"3224",hex:"#442e10"},{code:"3225",hex:"#e2dfd3"},{code:"3226",hex:"#ada183"},{code:"3227",hex:"#605b45"},{code:"3228",hex:"#3b2e08"},{code:"3229",hex:"#646253"},{code:"3230",hex:"#504f50"},{code:"3231",hex:"#e9e9eb"},{code:"3232",hex:"#545659"},{code:"3233",hex:"#323a39"},{code:"3235",hex:"#93203a"},{code:"3236",hex:"#ecb9bc"},{code:"3237",hex:"#4c1a31"},{code:"3238",hex:"#ab9ac6"},{code:"3239",hex:"#c8d2e6"},{code:"3240",hex:"#453f75"},{code:"3241",hex:"#9aa4c2"},{code:"3242",hex:"#6a6983"},{code:"3243",hex:"#cfe5f0"},{code:"3244",hex:"#d7d477"},{code:"3245",hex:"#bec132"},{code:"3246",hex:"#4a805b"},{code:"3247",hex:"#d6d3c1"},{code:"3248",hex:"#e8b539"},{code:"3249",hex:"#604545"},{code:"3250",hex:"#faf9f5"},{code:"3251",hex:"#dfc0db"},{code:"3252",hex:"#abcf8a"},{code:"3253",hex:"#9d763d"},{code:"3255",hex:"#ced0d5"},{code:"3256",hex:"#adafbb"},{code:"3257",hex:"#8f9096"},{code:"3258",hex:"#5a6067"},{code:"3259",hex:"#565d59"},{code:"3260",hex:"#343936"},{code:"4055",hex:"#aa102e"},{code:"4105",hex:"#b8cea6"},{code:"5135",hex:"#124477"},{code:"5140",hex:"#f9f287"},{code:"5165",hex:"#fbd215"},{code:"6035",hex:"#cae8de"},{code:"6075",hex:"#028063"},{code:"6080",hex:"#ebc7df"},{code:"6115",hex:"#e3ee9f"}]},{name:"Madeira",colors:[{code:"101",hex:"#f5f0df"},{code:"102",hex:"#f9f287"},{code:"103",hex:"#fff276"},{code:"104",hex:"#fce740"},{code:"105",hex:"#ffe21a"},{code:"106",hex:"#fbd215"},{code:"107",hex:"#ffb401"},{code:"108",hex:"#ffe35f"},{code:"109",hex:"#ffe276"},{code:"110",hex:"#fdf09c"},{code:"112",hex:"#ffeda9"},{code:"113",hex:"#ffda5a"},{code:"114",hex:"#ffc33a"},{code:"201",hex:"#ff9500"},{code:"202",hex:"#fc7e0c"},{code:"204",hex:"#ff781e"},{code:"205",hex:"#f26922"},{code:"206",hex:"#f06e46"},{code:"207",hex:"#e15729"},{code:"208",hex:"#d45d28"},{code:"209",hex:"#ea592c"},{code:"210",hex:"#e83124"},{code:"211",hex:"#bd2e2e"},{code:"212",hex:"#c24731"},{code:"213",hex:"#e46647"},{code:"214",hex:"#e6876c"},{code:"301",hex:"#f38351"},{code:"302",hex:"#fbbe9d"},{code:"303",hex:"#f69d80"},{code:"304",hex:"#fdbca1"},{code:"305",hex:"#f2c6b8"},{code:"306",hex:"#feebe2"},{code:"307",hex:"#fdc391"},{code:"310",hex:"#d6834d"},{code:"312",hex:"#a74f2a"},{code:"313",hex:"#9b3b1b"},{code:"314",hex:"#8c3b1a"},{code:"401",hex:"#b97161"},{code:"402",hex:"#a06757"},{code:"403",hex:"#c4856f"},{code:"404",hex:"#f4c4c1"},{code:"405",hex:"#db7d73"},{code:"406",hex:"#c36154"},{code:"407",hex:"#bf3e31"},{code:"408",hex:"#fcbbc1"},{code:"409",hex:"#ff988e"},{code:"410",hex:"#f65d5b"},{code:"411",hex:"#e65952"},{code:"412",hex:"#ef4949"},{code:"413",hex:"#ff7a90"},{code:"414",hex:"#e8868c"},{code:"502",hex:"#f9d6dd"},{code:"503",hex:"#eeaeb0"},{code:"504",hex:"#f7b4b7"},{code:"506",hex:"#d55d63"},{code:"507",hex:"#b73745"},{code:"508",hex:"#822741"},{code:"509",hex:"#93203a"},{code:"511",hex:"#98232c"},{code:"513",hex:"#811024"},{code:"514",hex:"#711f2e"},{code:"601",hex:"#4f080c"},{code:"604",hex:"#c33c62"},{code:"605",hex:"#e6849a"},{code:"606",hex:"#f1b3bf"},{code:"607",hex:"#fcb1ba"},{code:"609",hex:"#f08d9f"},{code:"610",hex:"#b33034"},{code:"611",hex:"#d1466c"},{code:"612",hex:"#f9afb7"},{code:"614",hex:"#efa8ca"},{code:"701",hex:"#f19ac2"},{code:"702",hex:"#ce507f"},{code:"703",hex:"#ca0b51"},{code:"705",hex:"#800137"},{code:"706",hex:"#832a58"},{code:"707",hex:"#9f2d6f"},{code:"708",hex:"#b34e8c"},{code:"709",hex:"#c07ba3"},{code:"710",hex:"#ebc7df"},{code:"801",hex:"#d0c8e4"},{code:"802",hex:"#ceb6e4"},{code:"803",hex:"#b698c6"},{code:"805",hex:"#723657"},{code:"806",hex:"#72535a"},{code:"808",hex:"#e9c4c9"},{code:"809",hex:"#c68c9f"},{code:"810",hex:"#824646"},{code:"811",hex:"#85312e"},{code:"812",hex:"#c57e7a"},{code:"813",hex:"#eda6ac"},{code:"814",hex:"#ecd0c4"},{code:"901",hex:"#bcc0d8"},{code:"902",hex:"#ab9ac6"},{code:"903",hex:"#6c5086"},{code:"904",hex:"#190f60"},{code:"905",hex:"#62669a"},{code:"906",hex:"#686d8d"},{code:"907",hex:"#c8d2e6"},{code:"908",hex:"#c1d3df"},{code:"909",hex:"#9fbbd5"},{code:"910",hex:"#6e8db5"},{code:"911",hex:"#445997"},{code:"912",hex:"#2c4180"},{code:"0112",hex:"#f1d863"},{code:"0308",hex:"#e4752b"},{code:"0309",hex:"#ec6810"},{code:"0311",hex:"#fc9749"},{code:"0501",hex:"#fbe2df"},{code:"0508",hex:"#aa102e"},{code:"0711",hex:"#ae99b1"},{code:"0712",hex:"#7c4087"},{code:"0713",hex:"#7b3f6c"},{code:"0714",hex:"#541244"},{code:"0804",hex:"#9f65a4"},{code:"0806",hex:"#947974"},{code:"0907",hex:"#8ea7c0"},{code:"0913",hex:"#181f66"},{code:"1001",hex:"#ccd5da"},{code:"1002",hex:"#a8c6d8"},{code:"1003",hex:"#7d98b5"},{code:"1004",hex:"#4c698c"},{code:"1005",hex:"#2d426b"},{code:"1006",hex:"#194465"},{code:"1007",hex:"#0c1225"},{code:"1009",hex:"#02101c"},{code:"1010",hex:"#12557e"},{code:"1011",hex:"#366390"},{code:"1012",hex:"#5a82a2"},{code:"1014",hex:"#b8dae9"},{code:"1101",hex:"#b8cebe"},{code:"1102",hex:"#0064b0"},{code:"1103",hex:"#0095d3"},{code:"1104",hex:"#d3e9e7"},{code:"1105",hex:"#70a8b3"},{code:"1106",hex:"#6b9cb9"},{code:"1107",hex:"#4f819d"},{code:"1108",hex:"#44929d"},{code:"1109",hex:"#42917f"},{code:"1110",hex:"#7fb5c0"},{code:"1111",hex:"#6eb2a7"},{code:"1112",hex:"#9cd3cc"},{code:"1113",hex:"#8fd3d4"},{code:"1114",hex:"#51c0bb"},{code:"1201",hex:"#8ec2b3"},{code:"1202",hex:"#56b69c"},{code:"1203",hex:"#3f8878"},{code:"1204",hex:"#00765c"},{code:"1205",hex:"#2f644b"},{code:"1206",hex:"#649a73"},{code:"1207",hex:"#a2ccaa"},{code:"1209",hex:"#bbd7ae"},{code:"1210",hex:"#b4e8b3"},{code:"1211",hex:"#abd58b"},{code:"1212",hex:"#88c78d"},{code:"1213",hex:"#58a96b"},{code:"1214",hex:"#40a756"},{code:"1301",hex:"#008c4c"},{code:"1302",hex:"#00793b"},{code:"1304",hex:"#2e9148"},{code:"1305",hex:"#007a3f"},{code:"1306",hex:"#3e9730"},{code:"1307",hex:"#70b145"},{code:"1308",hex:"#bad765"},{code:"1309",hex:"#ccdcbe"},{code:"1310",hex:"#91ab84"},{code:"1311",hex:"#76996c"},{code:"1312",hex:"#1f561f"},{code:"1313",hex:"#3e5a2f"},{code:"1314",hex:"#29542f"},{code:"1401",hex:"#87a462"},{code:"1402",hex:"#88ab5c"},{code:"1403",hex:"#568357"},{code:"1406",hex:"#486131"},{code:"1407",hex:"#6a823d"},{code:"1408",hex:"#78983b"},{code:"1410",hex:"#a9c33e"},{code:"1411",hex:"#82ae44"},{code:"1412",hex:"#759a3e"},{code:"1413",hex:"#4f6c33"},{code:"1414",hex:"#d7d477"},{code:"1501",hex:"#929937"},{code:"1502",hex:"#9fa146"},{code:"1503",hex:"#777830"},{code:"1504",hex:"#798738"},{code:"1505",hex:"#5d5c2b"},{code:"1506",hex:"#343c1d"},{code:"1507",hex:"#635f2f"},{code:"1508",hex:"#4b5035"},{code:"1509",hex:"#85905c"},{code:"1510",hex:"#bac28b"},{code:"1511",hex:"#999c6c"},{code:"1512",hex:"#a5a888"},{code:"1513",hex:"#899770"},{code:"1601",hex:"#2e3d1a"},{code:"1602",hex:"#72885f"},{code:"1604",hex:"#e3ee9f"},{code:"1605",hex:"#9b9648"},{code:"1610",hex:"#d1c66d"},{code:"1611",hex:"#a6a036"},{code:"1612",hex:"#91852a"},{code:"1614",hex:"#746d2b"},{code:"1702",hex:"#8ebea9"},{code:"1703",hex:"#4c7c60"},{code:"1704",hex:"#44684e"},{code:"1705",hex:"#14361e"},{code:"1706",hex:"#3b4f45"},{code:"1707",hex:"#7c999b"},{code:"1708",hex:"#a7bec2"},{code:"1710",hex:"#a4b5c6"},{code:"1711",hex:"#91b4ce"},{code:"1712",hex:"#444d58"},{code:"1713",hex:"#2f3b36"},{code:"1714",hex:"#323a39"},{code:"1802",hex:"#b7bbc7"},{code:"1803",hex:"#c5b6b4"},{code:"1805",hex:"#e3e6dc"},{code:"1807",hex:"#ab979e"},{code:"1808",hex:"#978e87"},{code:"1810",hex:"#4d4c34"},{code:"1811",hex:"#6c6e58"},{code:"1812",hex:"#938e6e"},{code:"1813",hex:"#abafa3"},{code:"1814",hex:"#ceccc5"},{code:"1902",hex:"#b2ae95"},{code:"1903",hex:"#978266"},{code:"1904",hex:"#3b2e08"},{code:"1905",hex:"#74623f"},{code:"1906",hex:"#c3ad9a"},{code:"1907",hex:"#c7baa2"},{code:"1908",hex:"#f6f2eb"},{code:"1909",hex:"#f6e1d0"},{code:"1910",hex:"#c9af93"},{code:"1911",hex:"#b39f8c"},{code:"1912",hex:"#9e887f"},{code:"1913",hex:"#845f2e"},{code:"1914",hex:"#573c2a"},{code:"2001",hex:"#d7d0c2"},{code:"2002",hex:"#ada183"},{code:"2003",hex:"#442e10"},{code:"2004",hex:"#2d1705"},{code:"2005",hex:"#3b2811"},{code:"2007",hex:"#502f1b"},{code:"2008",hex:"#775437"},{code:"2009",hex:"#b78237"},{code:"2010",hex:"#c4863a"},{code:"2011",hex:"#c27d45"},{code:"2012",hex:"#f7ca84"},{code:"2013",hex:"#e8aa5f"},{code:"2102",hex:"#e8d290"},{code:"2103",hex:"#b19563"},{code:"2104",hex:"#ba8225"},{code:"2105",hex:"#866226"},{code:"2106",hex:"#5c4c2d"},{code:"2107",hex:"#806638"},{code:"2108",hex:"#917d4a"},{code:"2109",hex:"#af8846"},{code:"2110",hex:"#9c8c4a"},{code:"2112",hex:"#806c26"},{code:"2113",hex:"#775820"},{code:"2114",hex:"#6f5422"},{code:"2201",hex:"#957b2f"},{code:"2202",hex:"#bfa43a"},{code:"2203",hex:"#cc972b"},{code:"2204",hex:"#d59c4c"},{code:"2205",hex:"#ececd2"},{code:"2206",hex:"#cab751"},{code:"2207",hex:"#eed7a1"},{code:"2209",hex:"#c4944f"},{code:"2210",hex:"#a47829"},{code:"2211",hex:"#e59034"},{code:"2214",hex:"#9b6324"},{code:"2301",hex:"#e8a76d"},{code:"2302",hex:"#e6973f"},{code:"2304",hex:"#74401d"},{code:"2305",hex:"#934d29"},{code:"2306",hex:"#c36b29"},{code:"2307",hex:"#f7b25c"},{code:"2308",hex:"#f2e0ce"},{code:"2309",hex:"#ebbc9a"},{code:"2311",hex:"#804133"},{code:"2312",hex:"#c49a87"},{code:"2314",hex:"#f8eedc"},{code:"2402",hex:"#faf9f5"},{code:"2404",hex:"#e2d1b2"},{code:"2501",hex:"#702623"},{code:"2502",hex:"#9d3030"},{code:"2503",hex:"#fbccb8"},{code:"2504",hex:"#e8edf3"},{code:"2506",hex:"#296e87"},{code:"2507",hex:"#00604e"},{code:"2508",hex:"#6b8084"},{code:"2509",hex:"#ddb442"},{code:"2510",hex:"#e2b73a"},{code:"2512",hex:"#fffcdc"},{code:"2514",hex:"#d19d2f"},{code:"2601",hex:"#b8846c"},{code:"2602",hex:"#653c1e"},{code:"2603",hex:"#4f6035"},{code:"2605",hex:"#dfb090"},{code:"2606",hex:"#6f2e35"},{code:"2607",hex:"#4e1622"},{code:"2608",hex:"#5f1f2c"},{code:"2609",hex:"#912644"},{code:"2610",hex:"#e6bcc3"},{code:"2611",hex:"#c7bac7"},{code:"2612",hex:"#ccc1d0"},{code:"2702",hex:"#073563"},{code:"2703",hex:"#bec132"},{code:"2704",hex:"#005d2e"},{code:"2705",hex:"#028063"},{code:"2706",hex:"#008679"},{code:"Ecru",hex:"#f2efe5"},{code:"1714, 1809",hex:"#504f50"}]}]);t.AnimatedSchemaCanvas=je,t.Animation=u,t.BezierCurve=y,t.BezierCurveRGB=g,t.BezierCurveRGBA=w,t.CELL_SIZE=_,t.Chunk=ee,t.ContinuousAnimation=m,t.EventEmitter=r,t.MAX_HEIGHT=999,t.MAX_WIDTH=j,t.RGBAColor=o,t.RGBColor=c,t.SchemaCanvas=_e,t.SchemaViewProvider=Ie,t.Vector2=i,t.Vector2Int=a,t.Vector3=s,t.Vector4=d,t.WorkCanvas=Pe,t.WorkViewProvider=Re,t.cellsEquals=N,t.convertSize=M,t.createSchema=function(e,t){return p(this,void 0,void 0,(function(){var n,r,o,i,a,s,d;return b(this,(function(u){switch(u.label){case 0:if((n=M(t.width,t.height,{stitchesPerInch:t.stitchesPerInch,from:t.sizeType,to:"stitch"})).width<1&&n.width>j)throw new RangeError("Schema width must be in range [1; 999]");if(n.height<1&&n.height>999)throw new RangeError("Schema height must be in range [1; 999]");return[4,q((function(e,t,n){return e.getImageData(0,0,t,n)}),{imageURL:e,width:n.width,height:n.height})];case 1:return[4,V(r=u.sent(),{palette:t.palette,maxColorsCount:t.maxColorsCount,reduceAlgorithm:t.reduceAlgorithm})];case 2:return o=u.sent(),i=function(e,t,n){for(var r=[],o=[],i=n?I.createArray(2*e.width):[],a=0,s=0;a<e.height;a++){var d=a%2===0?0:e.width,u=a%2===0?e.width:0;if(n)for(var h=0;h<e.width;h++)i[u+h].clear();var l=function(h){var l=F(e,s),f=l.alpha,p=x(l,["alpha"]);if(0===f)o.push(null);else{n&&(p=i[d+h].apply(p));var b=new c(p.red,p.green,p.blue),v=t.getSimilarColor(b),m=r.findIndex((function(e){return e===v}));if(m>=0?o.push(m):(o.push(r.length),r.push(v)),n){var y=Q(b,c.fromHex(v.hex));h+1!==e.width&&i[d+h+1].add(y,7),a+1!==e.height&&(0!==h&&i[u+h].add(y,3),i[u+h].add(y,5),h+1!==e.width&&i[u+h+1].add(y,1))}}};for(h=0;h<e.width;h++,s+=4)l(h)}return{grid:o,palette:{name:t.name,colors:r}}}(r,o,t.withDithering),a=i.grid,s=i.palette,d=function(e,t){var n;return{id:$(),name:t.name,createdAt:new Date,stitchCount:null!==(n=t.grid.reduce((function(e,t){return void 0===t?e:(null!==e&&void 0!==e?e:0)+1}),0))&&void 0!==n?n:0,canvasMetadata:{width:e.width,height:e.height,stitchesPerInch:t.stitchesPerInch},paletteMetadata:{name:t.palette.name,colorsCount:t.palette.colors.length}}}(r,{name:t.name,grid:a,palette:s,stitchesPerInch:t.stitchesPerInch}),[2,{metadata:d,palette:s,grid:a}]}}))}))},t.createSchemaImage=function(e){return p(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,d;return b(this,(function(u){switch(u.label){case 0:return t=e.grid,n=e.palette,r=e.metadata,o=r.canvasMetadata,i=o.width,a=o.height,s=B((function(e){for(var r=new Uint8ClampedArray(4*t.length),o=n.colors.map((function(e){var t=e.hex;return c.fromHex(t)})),s=0,d=0;s<t.length;s++,d+=4){var u=t[s];if(null!==u){var h=o[u];r[d+0]=h.red,r[d+1]=h.green,r[d+2]=h.blue,r[d+3]=255}else r[d+3]=0}e.canvas.width=i,e.canvas.height=a;var l=new ImageData(r,i,a);return e.putImageData(l,0,0),e.canvas.toDataURL()})),[4,q((function(e){return e.canvas.toDataURL()}),{imageURL:s,width:i*(d=i>500||a>500?1:5),height:a*d,imageSmoothingEnabled:!1})];case 1:return[2,u.sent()]}}))}))},t.createWork=function(e,t){for(var n=t.grid.length,r=new Array(n),o=0;o<n;o++)r[o]=void 0===t.grid[o]&&null;return{metadata:{id:$(),name:e,createdAt:new Date,lastActivity:new Date,stitchEmbroideredCount:0,schemaMetadata:t.metadata},schema:t,embroidered:r}},t.createWorkImage=function(e){return p(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,d,u;return b(this,(function(h){switch(h.label){case 0:return t=e.schema,n=t.grid,r=t.palette,o=t.metadata,i=o.canvasMetadata,a=i.width,s=i.height,d=B((function(t){for(var o=new Uint8ClampedArray(4*n.length),i=r.colors.map((function(e){var t=e.hex;return c.fromHex(t)})),d=0,u=0;d<n.length;d++,u+=4){var h=n[d];if(null!==h&&e.embroidered[d]){var l=i[h];o[u+0]=l.red,o[u+1]=l.green,o[u+2]=l.blue,o[u+3]=255}else o[u+3]=0}t.canvas.width=a,t.canvas.height=s;var f=new ImageData(o,a,s);return t.putImageData(f,0,0),t.canvas.toDataURL()})),[4,q((function(e){return e.canvas.toDataURL()}),{imageURL:d,width:a*(u=a>500||s>500?1:5),height:s*u,imageSmoothingEnabled:!1})];case 1:return[2,h.sent()]}}))}))},t.downloadSchema=function(e,t){var n=JSON.stringify(e,(function(e,t){return e.startsWith("_")?void 0:t}),t?void 0:2),r=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(r),c=document.createElement("a");c.download=e.metadata.name+".json",c.href=o,c.onclick=function(){setTimeout((function(){URL.revokeObjectURL(o)}),0)},c.click(),c.remove()},t.getContrastColor=U,t.palettes=Ne},62:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(53),c=n(43),i=n(103);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var s=a(r),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)};function u(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function h(e,t,n,r){return new(n||(n=Promise))((function(o,c){function i(e){try{s(r.next(e))}catch(t){c(t)}}function a(e){try{s(r.throw(e))}catch(t){c(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}s((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,o,c,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function a(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(a){c=[6,a],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}function f(e,t,n){if(n||2===arguments.length)for(var r,o=0,c=t.length;o<c;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function x(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var p={exports:{}},b={},v=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;function g(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(c){return!1}})()&&Object.assign;var w=s.default,_=60103;if(b.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var j=Symbol.for;_=j("react.element"),b.Fragment=j("react.fragment")}var O=w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,o={},c=null,i=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(i=t.ref),t)C.call(t,r)&&!S.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:_,type:e,key:c,ref:i,props:o,_owner:O.current}}b.jsx=k,b.jsxs=k;p.exports=b;var E=function(e){var t=e.palette,n=e.symbolResolver,i=e.stitchCountResolver,a=u(e,["palette","symbolResolver","stitchCountResolver"]),s=r.useMemo((function(){var e=f([],o.palettes),n=e.findIndex((function(e){return e.name===t.name}));return e.splice(n,1),e}),[t]),h=r.useMemo((function(){var e=function(e){var t={};return s.forEach((function(n){var r,o;t[n.name]=null!==(o=null===(r=n.colors.find((function(t){return t.hex===e})))||void 0===r?void 0:r.code)&&void 0!==o?o:"-"})),t};return t.colors.map((function(t){return{symbol:n?n(t.code):void 0,hex:t.hex,code:t.code,stitchCount:i?i(t.code):void 0,analogs:e(t.hex)}}))}),[t,n,i,s]),l=i?[{title:"Stitch count",dataIndex:"stitchCount",render:function(e){return p.exports.jsx(c.Typography.Text,d({ellipsis:!0},{children:e}),void 0)}}]:[],x=f(f(f(f([],n?[{title:"Symbol",dataIndex:"symbol"}]:[]),[{title:"Color",dataIndex:"hex",render:function(e){return p.exports.jsxs(p.exports.Fragment,{children:[p.exports.jsx("div",{style:{display:"inline-block",marginRight:"5px",width:"10px",height:"10px",backgroundColor:e}},void 0),e]},void 0)}}]),l),[{title:t.name,dataIndex:"code"},{title:"Analogs",children:s.map((function(e){return{title:e.name,dataIndex:["analogs",e.name]}}))}]);return p.exports.jsx(c.Table,d({columns:x,dataSource:h,rowKey:"code"},a),void 0)},P="layout_root__2qhRB",T="layout_header__28NdO",I="layout_main__2Moup",R=function(e){var t=e.style,n=e.headerChildren,r=e.children,o=u(e,["style","headerChildren","children"]);return p.exports.jsxs("div",d({className:P,style:t},{children:[p.exports.jsx(c.PageHeader,d({},o,{className:T},{children:n}),void 0),p.exports.jsx("main",d({className:I},{children:r}),void 0)]}),void 0)},N="schema-viewer_wrapper__1gzp0",A="schema-viewer_root__2WuE4",M=function(e){var t=e.metadata,n=u(e,["metadata"]),r=[{title:"Property",dataIndex:"property",render:function(e){return p.exports.jsx(c.Typography.Text,d({ellipsis:!0},{children:e}),void 0)}},{title:"Value",dataIndex:"value",render:function(e){return p.exports.jsx(c.Typography.Text,d({ellipsis:!0},{children:e}),void 0)}}],i=t.schemaMetadata,a={width:i.canvasMetadata.width,height:i.canvasMetadata.height},s=o.convertSize(a.width,a.height,{from:"stitch",to:"centimeter",stitchesPerInch:i.canvasMetadata.stitchesPerInch}),h=o.convertSize(a.width,a.height,{from:"stitch",to:"inch",stitchesPerInch:i.canvasMetadata.stitchesPerInch}),l=function(e){return Math.round(100*e)/100},f=[{property:"Name",value:t.name},{property:"Schema name",value:i.name},{property:"Width",value:a.width+" stitch, "+l(s.width)+" cm, "+l(h.width)+" inch"},{property:"Height",value:a.height+" stitch, "+l(s.height)+" cm, "+l(h.height)+" inch"},{property:"Stitches per inch",value:i.canvasMetadata.stitchesPerInch},{property:"Palette name",value:i.paletteMetadata.name},{property:"Number of colors",value:i.paletteMetadata.colorsCount},{property:"Number of stitches",value:i.stitchCount},{property:"Embroidered stitches",value:t.stitchEmbroideredCount}];return p.exports.jsx(c.Table,d({columns:r,dataSource:f,rowKey:"property"},n),void 0)},D=function(e){var t=e.metadata,n=u(e,["metadata"]),r=Math.floor(t.stitchEmbroideredCount/t.schemaMetadata.stitchCount*100);return p.exports.jsx(c.Progress,d({percent:r},n),void 0)},B={},F={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0}(F);var L={exports:{}},z={exports:{}};!function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0}(z);var K={exports:{}};!function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);i=!0);}catch(s){a=!0,o=s}finally{try{i||null==n.return||n.return()}finally{if(a)throw o}}return c}},e.exports.default=e.exports,e.exports.__esModule=!0}(K);var U={exports:{}},q={exports:{}};!function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0}(q),function(e){var t=q.exports;e.exports=function(e,n){if(e){if("string"===typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}(U);var V={exports:{}};!function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}(V),function(e){var t=z.exports,n=K.exports,r=U.exports,o=V.exports;e.exports=function(e,c){return t(e)||n(e,c)||r(e,c)||o()},e.exports.default=e.exports,e.exports.__esModule=!0}(L);var W={},H={exports:{}};!function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0}(H);var G={exports:{}};!function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,t.apply(this,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}(G),function(e){var t=F.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.responsiveMap=e.responsiveArray=void 0;var n=t(H.exports),r=t(G.exports);e.responsiveArray=["xxl","xl","lg","md","sm","xs"];var o={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};e.responsiveMap=o;var c=new Map,i=-1,a={},s={matchHandlers:{},dispatch:function(e){return a=e,c.forEach((function(e){return e(a)})),c.size>=1},subscribe:function(e){return c.size||this.register(),i+=1,c.set(i,e),e(a),i},unsubscribe:function(e){c.delete(e),c.size||this.unregister()},unregister:function(){var e=this;Object.keys(o).forEach((function(t){var n=o[t],r=e.matchHandlers[n];null===r||void 0===r||r.mql.removeListener(null===r||void 0===r?void 0:r.listener)})),c.clear()},register:function(){var e=this;Object.keys(o).forEach((function(t){var c=o[t],i=function(o){var c=o.matches;e.dispatch((0,r.default)((0,r.default)({},a),(0,n.default)({},t,c)))},s=window.matchMedia(c);s.addListener(i),e.matchHandlers[c]={mql:s,listener:i},i(s)}))}};e.default=s}(W),function(e){var t=F.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(L.exports),r=s.default,o=t(W);var c=function(){var e=(0,r.useState)({}),t=(0,n.default)(e,2),c=t[0],i=t[1];return(0,r.useEffect)((function(){var e=o.default.subscribe((function(e){i(e)}));return function(){return o.default.unsubscribe(e)}}),[]),c};e.default=c}(B);var Y=x(B),X="colors-list_container__xKeW7",J="colors-list_left-border__2baM_",$="colors-list_right-border__1O2WK",Q="colors-list_content__h40oO",Z="colors-list_color__Csa8W",ee="colors-list_selected__3rM5Z",te="colors-list_success__38kgw",ne=function(e){var t=e.className,n=e.palette,c=e.viewProvider,a=e.colorCode,s=e.onColorClick,u=r.useState(!1),h=u[0],l=u[1],f=r.useState(!1),x=f[0],b=f[1],v=r.useRef(null),m=r.useMemo((function(){return n.colors.map((function(e){return{code:e.code,hex:e.hex,symbol:c.getColorSymbol(e.code),symbolColor:o.getContrastColor(e.hex)}}))}),[c,n]),y=r.useCallback((function(){v.current&&(l(0!==v.current.scrollLeft),b(v.current.scrollLeft+v.current.clientWidth<v.current.scrollWidth))}),[]);return r.useEffect((function(){y();var e=function(){y()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[y]),p.exports.jsx("div",d({className:X+" "+t+" "+(h?J:"")+" "+(x?$:"")},{children:p.exports.jsx("div",d({ref:v,className:Q,onScroll:y},{children:m.map((function(e){var t=e.code,n=e.hex,r=e.symbol,o=e.symbolColor,u=c.getColorStatistics(t);return u.cellsCount===u.embroideredCellsCount?p.exports.jsx("div",d({className:Z+" "+te},{children:p.exports.jsx(i.CheckOutlined,{},void 0)}),t):p.exports.jsx("div",d({className:Z+" "+(t===a?ee:""),style:{backgroundColor:n,color:o},onClick:function(){s(t)}},{children:r}),t)}))}),void 0)}),void 0)},re={wrapper:"work-viewer_wrapper__psGUJ",root:"work-viewer_root__2HGf_",headerContent:"work-viewer_header-content__H8t2_",colors:"work-viewer_colors__185qe"},oe="work-viewer-menu_button__1o-J6",ce="work-viewer-menu_result__3mM5l",ie=function(e){var t=e.work,n=e.viewProvider,a=e.onSave,s=r.useState(!1),u=s[0],f=s[1],x=r.useState(!1),b=x[0],v=x[1],m=r.useState(!1),y=m[0],g=m[1],w=r.useState(!1),_=w[0],j=w[1],O=r.useState(),C=O[0],S=O[1],k=r.useState(!1),P=k[0],T=k[1],I=p.exports.jsxs(c.Menu,d({disabled:P,onClick:function(e){return h(void 0,void 0,void 0,(function(){var n,r;return l(this,(function(i){switch(i.label){case 0:switch(e.key){case"save":return[3,1];case"info":return[3,2];case"colors":return[3,3];case"result":return[3,4]}return[3,10];case 1:return a&&a(),[3,10];case 2:return v(!0),[3,10];case 3:return g(!0),[3,10];case 4:T(!0),i.label=5;case 5:return i.trys.push([5,7,8,9]),[4,o.createWorkImage(t)];case 6:return n=i.sent(),S(n),j(!0),[3,9];case 7:return(r=i.sent())instanceof Error?c.message.error(r.message):c.message.error("Unknown error"),[3,9];case 8:return T(!1),[7];case 9:return[3,10];case 10:return f(!1),[2]}}))}))}},{children:[a?p.exports.jsx(c.Menu.Item,d({className:oe},{children:"Save"}),"save"):null,p.exports.jsx(c.Menu.Item,d({className:oe},{children:"Info"}),"info"),p.exports.jsx(c.Menu.Item,d({className:oe},{children:"Colors"}),"colors"),p.exports.jsx(c.Menu.Item,d({className:oe},{children:p.exports.jsx(c.Spin,d({spinning:P},{children:"Result"}),void 0)}),"result")]}),void 0);return p.exports.jsxs(p.exports.Fragment,{children:[p.exports.jsx(c.Modal,d({title:"Info",visible:b,width:550,onCancel:function(){v(!1)},footer:null,centered:!0},{children:p.exports.jsx(M,{metadata:t.metadata,scroll:{x:!0},pagination:!1},void 0)}),void 0),p.exports.jsx(c.Modal,d({visible:y,width:1200,title:"Colors",onCancel:function(){g(!1)},footer:null,centered:!0},{children:p.exports.jsx(E,{palette:t.schema.palette,symbolResolver:function(e){var t;return null!==(t=n.getColorSymbol(e))&&void 0!==t?t:"none"},stitchCountResolver:function(e){var t=n.getColorStatistics(e);return t.embroideredCellsCount+"/"+t.cellsCount},scroll:{x:!0},pagination:{simple:!0}},void 0)}),void 0),p.exports.jsx(c.Modal,d({visible:_,width:1200,title:"Result",onCancel:function(){j(!1)},footer:null,centered:!0},{children:p.exports.jsx("div",d({className:ce},{children:p.exports.jsx(c.Image,{alt:"Result",preview:!1,src:C},void 0)}),void 0)}),void 0),p.exports.jsx(c.Dropdown,d({overlay:I,visible:u,onVisibleChange:function(e){f(e)},trigger:["click"]},{children:p.exports.jsx(c.Button,d({style:{border:"none",padding:0}},{children:p.exports.jsx(i.EllipsisOutlined,{style:{fontSize:20,verticalAlign:"top"}},void 0)}),void 0)}),void 0)]},void 0)};t.ColorsTable=E,t.DownloadButton=function(e){var t=e.schemaLoader,n=u(e,["schemaLoader"]),i=r.useState(!1),a=i[0],s=i[1];return p.exports.jsx(c.Popover,d({trigger:"click",visible:a,onVisibleChange:s,content:p.exports.jsxs(p.exports.Fragment,{children:[p.exports.jsx(c.Button,d({type:"link",onClick:function(){return h(void 0,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),o.downloadSchema(e,!0),s(!1),[2]}}))}))}},{children:"Download minimized"}),void 0),p.exports.jsx(c.Button,d({type:"link",onClick:function(){return h(void 0,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),o.downloadSchema(e,!1),s(!1),[2]}}))}))}},{children:"Download formatted"}),void 0)]},void 0)},{children:p.exports.jsx(c.Button,d({},n,{onClick:void 0},{children:"Download Schema"}),void 0)}),void 0)},t.SchemaInfoTable=function(e){var t=e.metadata,n=u(e,["metadata"]),r=[{title:"Property",dataIndex:"property",render:function(e){return p.exports.jsx(c.Typography.Text,d({ellipsis:!0},{children:e}),void 0)}},{title:"Value",dataIndex:"value",render:function(e){return p.exports.jsx(c.Typography.Text,d({ellipsis:!0},{children:e}),void 0)}}],i={width:t.canvasMetadata.width,height:t.canvasMetadata.height},a=o.convertSize(i.width,i.height,{from:"stitch",to:"centimeter",stitchesPerInch:t.canvasMetadata.stitchesPerInch}),s=o.convertSize(i.width,i.height,{from:"stitch",to:"inch",stitchesPerInch:t.canvasMetadata.stitchesPerInch}),h=function(e){return Math.round(100*e)/100},l=[{property:"Schema name",value:t.name},{property:"Width",value:i.width+" stitch, "+h(a.width)+" cm, "+h(s.width)+" inch"},{property:"Height",value:i.height+" stitch, "+h(a.height)+" cm, "+h(s.height)+" inch"},{property:"Stitches per inch",value:t.canvasMetadata.stitchesPerInch},{property:"Palette name",value:t.paletteMetadata.name},{property:"Number of colors",value:t.paletteMetadata.colorsCount},{property:"Number of stitches",value:t.stitchCount}];return p.exports.jsx(c.Table,d({columns:r,dataSource:l,rowKey:"property"},n),void 0)},t.SchemaViewer=function(e){var t=e.schema,n=e.onBack,c=r.useRef(null);return r.useEffect((function(){if(null===c.current)throw new Error("No root");var e=new o.SchemaViewProvider(t),n=new o.SchemaCanvas(e,c.current);return function(){n.destroy()}}),[t]),p.exports.jsx("div",d({className:N},{children:p.exports.jsx(R,d({title:t.metadata.name,subTitle:"view only",onBack:n},{children:p.exports.jsx("div",{className:A,ref:c},void 0)}),void 0)}),void 0)},t.WorkInfoTable=M,t.WorkProgress=D,t.WorkViewer=function(e){var t=e.work,n=e.autoSaveTimeout,a=e.onBack,s=e.onSave,u=r.useRef(null),f=r.useMemo((function(){return new o.WorkViewProvider(t)}),[t]),x=r.useState(),b=x[0],v=x[1],m=Y().sm,y=r.useState(!1),g=y[0],w=y[1],_=r.useState(),j=_[0],O=_[1],C=r.useState()[1],S=r.useState(!1),k=S[0],E=S[1],P=r.useState(!0),T=P[0],I=P[1],N=r.useState(!1),A=N[0],M=N[1],B=r.useRef(new Set);r.useEffect((function(){if(null===u.current)throw new Error("No root");var e=new o.WorkCanvas(f,u.current);v(e);var t=function(e){var t=e.data;C({}),M(!0),B.current.add(t)};return e.addEventListener("cellEmbroidered",t),e.addEventListener("cellErased",t),function(){e.destroy(),v(void 0)}}),[f]),r.useEffect((function(){b&&(b.setIsEraseMode(g),b.setPenColorCode(j))}),[b,g,j]);var F=r.useCallback((function(){return h(void 0,void 0,void 0,(function(){var e,t;return l(this,(function(n){switch(n.label){case 0:if(!s)return[2];E(!0),M(!1),n.label=1;case 1:return n.trys.push([1,3,4,5]),e=B.current,B.current=new Set,[4,s(e)];case 2:return n.sent(),I(!0),[3,5];case 3:return t=n.sent(),I(!1),t instanceof Error?c.message.error(t.message):c.message.error("Unknown error"),[3,5];case 4:return E(!1),[7];case 5:return[2]}}))}))}),[s]);return r.useEffect((function(){if(A&&n){var e=setTimeout((function(){F()}),n);return function(){clearTimeout(e)}}}),[A,F,n]),p.exports.jsx("div",d({className:re.wrapper},{children:p.exports.jsx(R,d({tags:k?p.exports.jsx(c.Tag,d({color:"blue"},{children:"Saving..."}),void 0):A?p.exports.jsx(c.Tag,d({color:"orange"},{children:"Changed"}),void 0):T?p.exports.jsx(c.Tag,d({color:"green"},{children:"Saved"}),void 0):p.exports.jsx(c.Tag,d({color:"red"},{children:"Error"}),void 0),title:t.metadata.name,onBack:a,headerChildren:p.exports.jsxs("div",d({className:re.headerContent},{children:[p.exports.jsx(ne,{className:re.colors,palette:t.schema.palette,viewProvider:f,colorCode:j,onColorClick:function(e){e===j?b&&b.scrollToNotEmbroidered(e):O(e)}},void 0),p.exports.jsx(D,{className:re.progress,metadata:t.metadata,type:"circle",width:65},void 0)]}),void 0),extra:p.exports.jsxs(p.exports.Fragment,{children:[m?p.exports.jsx(c.Button,d({type:"primary",onClick:F,icon:p.exports.jsx(i.SaveOutlined,{},void 0)},{children:"Save"}),void 0):null,p.exports.jsx(c.Button,{type:g?"default":"dashed",danger:g,onClick:function(){w((function(e){return!e}))},icon:p.exports.jsx(i.ClearOutlined,{},void 0)},void 0),p.exports.jsx(ie,{work:t,onSave:m?void 0:F,viewProvider:f},void 0)]},void 0)},{children:p.exports.jsx("div",{className:re.root,ref:u},void 0)}),void 0)}),void 0)}},95:function(e,t,n){e.exports={root:"generator-result_root__3gdKQ",firstBlock:"generator-result_first-block__1N71T",secondBlock:"generator-result_second-block__37poh",row:"generator-result_row__Dg3NC",image:"generator-result_image__3yD7j",info:"generator-result_info__3JLl-",inputNumber:"generator-result_input-number__1isIl",button:"generator-result_button__2Yf0R"}}},[[523,1,2]]]);
//# sourceMappingURL=main.710741ac.chunk.js.map